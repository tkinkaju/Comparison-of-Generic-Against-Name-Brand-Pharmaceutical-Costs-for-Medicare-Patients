{"version":3,"file":"feature.js","names":["createFeature","id","type","geom","tags","feature","geometry","minX","Infinity","minY","maxX","maxY","calcLineBBox","line","polygon","i","length","Math","min","max"],"sources":["../../../../src/lib/geojson-tiler/feature.ts"],"sourcesContent":["// loaders.gl, MIT license\n// Forked from https://github.com/mapbox/geojson-vt under compatible ISC license\n\nimport {GeoJSONTileFeature} from './tile';\n\nexport function createFeature(id, type, geom, tags): GeoJSONTileFeature {\n  const feature: GeoJSONTileFeature = {\n    // eslint-disable-next-line\n    id: id == null ? null : id,\n    type,\n    geometry: geom,\n    tags,\n    minX: Infinity,\n    minY: Infinity,\n    maxX: -Infinity,\n    maxY: -Infinity\n  };\n\n  if (type === 'Point' || type === 'MultiPoint' || type === 'LineString') {\n    calcLineBBox(feature, geom);\n  } else if (type === 'Polygon') {\n    // the outer ring (ie [0]) contains all inner rings\n    calcLineBBox(feature, geom[0]);\n  } else if (type === 'MultiLineString') {\n    for (const line of geom) {\n      calcLineBBox(feature, line);\n    }\n  } else if (type === 'MultiPolygon') {\n    for (const polygon of geom) {\n      // the outer ring (ie [0]) contains all inner rings\n      calcLineBBox(feature, polygon[0]);\n    }\n  }\n\n  return feature;\n}\n\nfunction calcLineBBox(feature, geom) {\n  for (let i = 0; i < geom.length; i += 3) {\n    feature.minX = Math.min(feature.minX, geom[i]);\n    feature.minY = Math.min(feature.minY, geom[i + 1]);\n    feature.maxX = Math.max(feature.maxX, geom[i]);\n    feature.maxY = Math.max(feature.maxY, geom[i + 1]);\n  }\n}\n"],"mappings":";;AAKA,OAAO,SAASA,aAAa,CAACC,EAAE,EAAEC,IAAI,EAAEC,IAAI,EAAEC,IAAI,EAAsB;EACtE,MAAMC,OAA2B,GAAG;IAElCJ,EAAE,EAAEA,EAAE,IAAI,IAAI,GAAG,IAAI,GAAGA,EAAE;IAC1BC,IAAI;IACJI,QAAQ,EAAEH,IAAI;IACdC,IAAI;IACJG,IAAI,EAAEC,QAAQ;IACdC,IAAI,EAAED,QAAQ;IACdE,IAAI,EAAE,CAACF,QAAQ;IACfG,IAAI,EAAE,CAACH;EACT,CAAC;EAED,IAAIN,IAAI,KAAK,OAAO,IAAIA,IAAI,KAAK,YAAY,IAAIA,IAAI,KAAK,YAAY,EAAE;IACtEU,YAAY,CAACP,OAAO,EAAEF,IAAI,CAAC;EAC7B,CAAC,MAAM,IAAID,IAAI,KAAK,SAAS,EAAE;IAE7BU,YAAY,CAACP,OAAO,EAAEF,IAAI,CAAC,CAAC,CAAC,CAAC;EAChC,CAAC,MAAM,IAAID,IAAI,KAAK,iBAAiB,EAAE;IACrC,KAAK,MAAMW,IAAI,IAAIV,IAAI,EAAE;MACvBS,YAAY,CAACP,OAAO,EAAEQ,IAAI,CAAC;IAC7B;EACF,CAAC,MAAM,IAAIX,IAAI,KAAK,cAAc,EAAE;IAClC,KAAK,MAAMY,OAAO,IAAIX,IAAI,EAAE;MAE1BS,YAAY,CAACP,OAAO,EAAES,OAAO,CAAC,CAAC,CAAC,CAAC;IACnC;EACF;EAEA,OAAOT,OAAO;AAChB;AAEA,SAASO,YAAY,CAACP,OAAO,EAAEF,IAAI,EAAE;EACnC,KAAK,IAAIY,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGZ,IAAI,CAACa,MAAM,EAAED,CAAC,IAAI,CAAC,EAAE;IACvCV,OAAO,CAACE,IAAI,GAAGU,IAAI,CAACC,GAAG,CAACb,OAAO,CAACE,IAAI,EAAEJ,IAAI,CAACY,CAAC,CAAC,CAAC;IAC9CV,OAAO,CAACI,IAAI,GAAGQ,IAAI,CAACC,GAAG,CAACb,OAAO,CAACI,IAAI,EAAEN,IAAI,CAACY,CAAC,GAAG,CAAC,CAAC,CAAC;IAClDV,OAAO,CAACK,IAAI,GAAGO,IAAI,CAACE,GAAG,CAACd,OAAO,CAACK,IAAI,EAAEP,IAAI,CAACY,CAAC,CAAC,CAAC;IAC9CV,OAAO,CAACM,IAAI,GAAGM,IAAI,CAACE,GAAG,CAACd,OAAO,CAACM,IAAI,EAAER,IAAI,CAACY,CAAC,GAAG,CAAC,CAAC,CAAC;EACpD;AACF"}