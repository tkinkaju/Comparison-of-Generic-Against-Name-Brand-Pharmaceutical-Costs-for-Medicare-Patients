{"version":3,"file":"papaparse.js","names":["BYTE_ORDER_MARK","Papa","parse","CsvToJson","unparse","JsonToCsv","RECORD_SEP","String","fromCharCode","UNIT_SEP","BAD_DELIMITERS","WORKERS_SUPPORTED","NODE_STREAM_INPUT","LocalChunkSize","RemoteChunkSize","DefaultDelimiter","Parser","ParserHandle","ChunkStreamer","StringStreamer","_input","_config","UserDefinedStreamer","dynamicTyping","isFunction","dynamicTypingFunction","transform","worker","w","newWorker","userStep","step","userChunk","chunk","userComplete","complete","userError","error","postMessage","input","config","workerId","id","streamer","stream","_quotes","_writeHeader","_delimiter","_newline","_quoteChar","_escapedQuote","_skipEmptyLines","_columns","unpackConfig","quoteCharRegex","RegExp","escapeRegExp","JSON","Array","isArray","length","serialize","objectKeys","data","fields","meta","Error","delimiter","filter","value","indexOf","quotes","skipEmptyLines","newline","quoteChar","header","columns","escapeChar","undefined","obj","keys","key","push","csv","hasHeader","dataKeyedByField","i","safe","row","maxCol","emptyLine","nullLine","Object","join","trim","line","c","cx","col","colIdx","str","constructor","Date","stringify","slice","toString","replace","needsQuotes","hasAny","charAt","substrings","_handle","_finished","_completed","_baseIndex","_partialLine","_rowCount","_start","_nextChunk","isFirstChunk","_completeResults","errors","replaceConfig","call","parseChunk","isFakeChunk","beforeFirstChunk","modifiedChunk","aggregate","results","paused","aborted","lastIndex","cursor","substring","finishedIncludingPreview","preview","concat","_sendError","configCopy","copy","chunkSize","parseInt","remaining","s","size","substr","prototype","create","FLOAT","ISO_DATE","self","_stepCounter","_rowCounter","_parser","_paused","_aborted","_delimiterError","_fields","_results","needsHeaderRow","processResults","abort","baseIndex","ignoreLastRow","guessLineEndings","delimGuess","guessDelimiter","comments","delimitersToGuess","successful","bestDelimiter","parserConfig","pause","getCharIndex","resume","testEmptyLine","addError","splice","fillHeaderFields","applyHeaderAndDynamicTypingAndTransformation","addHeder","transformHeader","forEach","shouldApplyDynamicTyping","field","parseDynamic","test","parseFloat","processRow","rowSource","j","incrementBy","map","bestDelim","bestDelta","fieldCountPrevRow","delim","delta","avgFieldCount","emptyLinesCount","fieldCount","Math","abs","re","r","split","n","nAppearsFirst","numWithN","type","code","msg","message","string","fastMode","inputLen","delimLen","newlineLen","commentsLen","stepIsFunction","lastCursor","returnable","rows","pushRow","doStep","nextDelim","nextNewline","quoteSearch","index","finish","checkUpTo","min","spacesBetweenQuoteAndDelimiter","extraSpaces","spacesBetweenQuoteAndNewLine","saveRow","spaceLength","textBetweenClosingQuoteAndIndex","newCursor","stopped","isStep","linebreak","truncated","notImplemented","cpy","func"],"sources":["../../../src/papaparse/papaparse.ts"],"sourcesContent":["// @ts-nocheck\n// This is a fork of papaparse\n// https://github.com/mholt/PapaParse\n/* @license\nPapa Parse\nv5.0.0-beta.0\nhttps://github.com/mholt/PapaParse\nLicense: MIT\n*/\n// FORK SUMMARY:\n// - Adopt ES6 exports\n// - Implement new AsyncIteratorStreamer\n// - Remove non Async Iterator streamers (can all be handled by new streamer)\n// - Remove unused Worker support (loaders.gl worker system used instead)\n// - Remove unused jQuery plugin support\n\n/* eslint-disable */\nconst BYTE_ORDER_MARK = '\\ufeff';\n\nconst Papa = {\n  parse: CsvToJson,\n  unparse: JsonToCsv,\n\n  RECORD_SEP: String.fromCharCode(30),\n  UNIT_SEP: String.fromCharCode(31),\n  BYTE_ORDER_MARK,\n  BAD_DELIMITERS: ['\\r', '\\n', '\"', BYTE_ORDER_MARK],\n  WORKERS_SUPPORTED: false, // !IS_WORKER && !!globalThis.Worker\n  NODE_STREAM_INPUT: 1,\n\n  // Configurable chunk sizes for local and remote files, respectively\n  LocalChunkSize: 1024 * 1024 * 10, // 10 M,\n  RemoteChunkSize: 1024 * 1024 * 5, // 5 M,\n  DefaultDelimiter: ',', // Used if not specified and detection fail,\n\n  // Exposed for testing and development only\n  Parser: Parser,\n  ParserHandle: ParserHandle,\n\n  // BEGIN FORK\n  ChunkStreamer: ChunkStreamer,\n  StringStreamer: StringStreamer\n};\nexport default Papa;\n\n/*\nPapa.NetworkStreamer = NetworkStreamer;\nPapa.FileStreamer = FileStreamer;\nPapa.ReadableStreamStreamer = ReadableStreamStreamer;\nif (typeof PAPA_BROWSER_CONTEXT === 'undefined') {\n  Papa.DuplexStreamStreamer = DuplexStreamStreamer;\n}\n*/\n// END FORK\n\n// BEGIN FORK\n// Adds an argument to papa.parse\n// function CsvToJson(_input, _config)\nfunction CsvToJson(\n  _input,\n  _config,\n  UserDefinedStreamer? // BEGIN FORK\n) {\n  _config = _config || {};\n  var dynamicTyping = _config.dynamicTyping || false;\n  if (isFunction(dynamicTyping)) {\n    _config.dynamicTypingFunction = dynamicTyping;\n    // Will be filled on first row call\n    dynamicTyping = {};\n  }\n  _config.dynamicTyping = dynamicTyping;\n\n  _config.transform = isFunction(_config.transform) ? _config.transform : false;\n\n  if (_config.worker && Papa.WORKERS_SUPPORTED) {\n    var w = newWorker();\n\n    w.userStep = _config.step;\n    w.userChunk = _config.chunk;\n    w.userComplete = _config.complete;\n    w.userError = _config.error;\n\n    _config.step = isFunction(_config.step);\n    _config.chunk = isFunction(_config.chunk);\n    _config.complete = isFunction(_config.complete);\n    _config.error = isFunction(_config.error);\n    delete _config.worker; // prevent infinite loop\n\n    w.postMessage({\n      input: _input,\n      config: _config,\n      workerId: w.id\n    });\n\n    return;\n  }\n\n  var streamer = null;\n  /*\n  if (_input === Papa.NODE_STREAM_INPUT && typeof PAPA_BROWSER_CONTEXT === 'undefined') {\n    // create a node Duplex stream for use\n    // with .pipe\n    streamer = new DuplexStreamStreamer(_config);\n    return streamer.getStream();\n  } else\n  */\n  if (typeof _input === 'string') {\n    // if (_config.download) streamer = new NetworkStreamer(_config);\n    // else\n    streamer = new StringStreamer(_config);\n  }\n  /*\n  else if (_input.readable === true && isFunction(_input.read) && isFunction(_input.on)) {\n    streamer = new ReadableStreamStreamer(_config);\n  } else if ((globalThis.File && _input instanceof File) || _input instanceof Object)\n    // ...Safari. (see issue #106)\n    streamer = new FileStreamer(_config);\n  */\n\n  // BEGIN FORK\n  if (!streamer) {\n    streamer = new UserDefinedStreamer(_config);\n  }\n  // END FORK\n\n  return streamer.stream(_input);\n}\n\nfunction JsonToCsv(_input, _config) {\n  // Default configuration\n\n  /** whether to surround every datum with quotes */\n  var _quotes = false;\n\n  /** whether to write headers */\n  var _writeHeader = true;\n\n  /** delimiting character(s) */\n  var _delimiter = ',';\n\n  /** newline character(s) */\n  var _newline = '\\r\\n';\n\n  /** quote character */\n  var _quoteChar = '\"';\n\n  /** escaped quote character, either \"\" or <config.escapeChar>\" */\n  var _escapedQuote = _quoteChar + _quoteChar;\n\n  /** whether to skip empty lines */\n  var _skipEmptyLines = false;\n\n  /** the columns (keys) we expect when we unparse objects */\n  var _columns = null;\n\n  unpackConfig();\n\n  var quoteCharRegex = new RegExp(escapeRegExp(_quoteChar), 'g');\n\n  if (typeof _input === 'string') _input = JSON.parse(_input);\n\n  if (Array.isArray(_input)) {\n    if (!_input.length || Array.isArray(_input[0])) return serialize(null, _input, _skipEmptyLines);\n    else if (typeof _input[0] === 'object')\n      return serialize(_columns || objectKeys(_input[0]), _input, _skipEmptyLines);\n  } else if (typeof _input === 'object') {\n    if (typeof _input.data === 'string') _input.data = JSON.parse(_input.data);\n\n    if (Array.isArray(_input.data)) {\n      if (!_input.fields) _input.fields = _input.meta && _input.meta.fields;\n\n      if (!_input.fields)\n        _input.fields = Array.isArray(_input.data[0]) ? _input.fields : objectKeys(_input.data[0]);\n\n      if (!Array.isArray(_input.data[0]) && typeof _input.data[0] !== 'object')\n        _input.data = [_input.data]; // handles input like [1,2,3] or ['asdf']\n    }\n\n    return serialize(_input.fields || [], _input.data || [], _skipEmptyLines);\n  }\n\n  // Default (any valid paths should return before this)\n  throw new Error('Unable to serialize unrecognized input');\n\n  function unpackConfig() {\n    if (typeof _config !== 'object') return;\n\n    if (\n      typeof _config.delimiter === 'string' &&\n      !Papa.BAD_DELIMITERS.filter(function (value) {\n        return _config.delimiter.indexOf(value) !== -1;\n      }).length\n    ) {\n      _delimiter = _config.delimiter;\n    }\n\n    if (typeof _config.quotes === 'boolean' || Array.isArray(_config.quotes))\n      _quotes = _config.quotes;\n\n    if (typeof _config.skipEmptyLines === 'boolean' || typeof _config.skipEmptyLines === 'string')\n      _skipEmptyLines = _config.skipEmptyLines;\n\n    if (typeof _config.newline === 'string') _newline = _config.newline;\n\n    if (typeof _config.quoteChar === 'string') _quoteChar = _config.quoteChar;\n\n    if (typeof _config.header === 'boolean') _writeHeader = _config.header;\n\n    if (Array.isArray(_config.columns)) {\n      if (_config.columns.length === 0) throw new Error('Option columns is empty');\n\n      _columns = _config.columns;\n    }\n\n    if (_config.escapeChar !== undefined) {\n      _escapedQuote = _config.escapeChar + _quoteChar;\n    }\n  }\n\n  /** Turns an object's keys into an array */\n  function objectKeys(obj) {\n    if (typeof obj !== 'object') return [];\n    var keys = [];\n    for (var key in obj) keys.push(key);\n    return keys;\n  }\n\n  /** The double for loop that iterates the data and writes out a CSV string including header row */\n  function serialize(fields, data, skipEmptyLines) {\n    var csv = '';\n\n    if (typeof fields === 'string') fields = JSON.parse(fields);\n    if (typeof data === 'string') data = JSON.parse(data);\n\n    var hasHeader = Array.isArray(fields) && fields.length > 0;\n    var dataKeyedByField = !Array.isArray(data[0]);\n\n    // If there a header row, write it first\n    if (hasHeader && _writeHeader) {\n      for (var i = 0; i < fields.length; i++) {\n        if (i > 0) csv += _delimiter;\n        csv += safe(fields[i], i);\n      }\n      if (data.length > 0) csv += _newline;\n    }\n\n    // Then write out the data\n    for (var row = 0; row < data.length; row++) {\n      var maxCol = hasHeader ? fields.length : data[row].length;\n\n      var emptyLine = false;\n      var nullLine = hasHeader ? Object.keys(data[row]).length === 0 : data[row].length === 0;\n      if (skipEmptyLines && !hasHeader) {\n        emptyLine =\n          skipEmptyLines === 'greedy'\n            ? data[row].join('').trim() === ''\n            : data[row].length === 1 && data[row][0].length === 0;\n      }\n      if (skipEmptyLines === 'greedy' && hasHeader) {\n        var line = [];\n        for (var c = 0; c < maxCol; c++) {\n          var cx = dataKeyedByField ? fields[c] : c;\n          line.push(data[row][cx]);\n        }\n        emptyLine = line.join('').trim() === '';\n      }\n      if (!emptyLine) {\n        for (var col = 0; col < maxCol; col++) {\n          if (col > 0 && !nullLine) csv += _delimiter;\n          var colIdx = hasHeader && dataKeyedByField ? fields[col] : col;\n          csv += safe(data[row][colIdx], col);\n        }\n        if (row < data.length - 1 && (!skipEmptyLines || (maxCol > 0 && !nullLine))) {\n          csv += _newline;\n        }\n      }\n    }\n    return csv;\n  }\n\n  /** Encloses a value around quotes if needed (makes a value safe for CSV insertion) */\n  function safe(str, col) {\n    if (typeof str === 'undefined' || str === null) return '';\n\n    if (str.constructor === Date) return JSON.stringify(str).slice(1, 25);\n\n    str = str.toString().replace(quoteCharRegex, _escapedQuote);\n\n    var needsQuotes =\n      (typeof _quotes === 'boolean' && _quotes) ||\n      (Array.isArray(_quotes) && _quotes[col]) ||\n      hasAny(str, Papa.BAD_DELIMITERS) ||\n      str.indexOf(_delimiter) > -1 ||\n      str.charAt(0) === ' ' ||\n      str.charAt(str.length - 1) === ' ';\n\n    return needsQuotes ? _quoteChar + str + _quoteChar : str;\n  }\n\n  function hasAny(str, substrings) {\n    for (var i = 0; i < substrings.length; i++) if (str.indexOf(substrings[i]) > -1) return true;\n    return false;\n  }\n}\n\n/** ChunkStreamer is the base prototype for various streamer implementations. */\nfunction ChunkStreamer(config) {\n  this._handle = null;\n  this._finished = false;\n  this._completed = false;\n  this._input = null;\n  this._baseIndex = 0;\n  this._partialLine = '';\n  this._rowCount = 0;\n  this._start = 0;\n  this._nextChunk = null;\n  this.isFirstChunk = true;\n  this._completeResults = {\n    data: [],\n    errors: [],\n    meta: {}\n  };\n  replaceConfig.call(this, config);\n\n  this.parseChunk = function (chunk, isFakeChunk) {\n    // First chunk pre-processing\n    if (this.isFirstChunk && isFunction(this._config.beforeFirstChunk)) {\n      var modifiedChunk = this._config.beforeFirstChunk(chunk);\n      if (modifiedChunk !== undefined) chunk = modifiedChunk;\n    }\n    this.isFirstChunk = false;\n\n    // Rejoin the line we likely just split in two by chunking the file\n    var aggregate = this._partialLine + chunk;\n    this._partialLine = '';\n\n    var results = this._handle.parse(aggregate, this._baseIndex, !this._finished);\n\n    if (this._handle.paused() || this._handle.aborted()) return;\n\n    var lastIndex = results.meta.cursor;\n\n    if (!this._finished) {\n      this._partialLine = aggregate.substring(lastIndex - this._baseIndex);\n      this._baseIndex = lastIndex;\n    }\n\n    if (results && results.data) this._rowCount += results.data.length;\n\n    var finishedIncludingPreview =\n      this._finished || (this._config.preview && this._rowCount >= this._config.preview);\n\n    if (isFunction(this._config.chunk) && !isFakeChunk) {\n      this._config.chunk(results, this._handle);\n      if (this._handle.paused() || this._handle.aborted()) return;\n      results = undefined;\n      this._completeResults = undefined;\n    }\n\n    if (!this._config.step && !this._config.chunk) {\n      this._completeResults.data = this._completeResults.data.concat(results.data);\n      this._completeResults.errors = this._completeResults.errors.concat(results.errors);\n      this._completeResults.meta = results.meta;\n    }\n\n    if (\n      !this._completed &&\n      finishedIncludingPreview &&\n      isFunction(this._config.complete) &&\n      (!results || !results.meta.aborted)\n    ) {\n      this._config.complete(this._completeResults, this._input);\n      this._completed = true;\n    }\n\n    if (!finishedIncludingPreview && (!results || !results.meta.paused)) this._nextChunk();\n\n    return results;\n  };\n\n  this._sendError = function (error) {\n    if (isFunction(this._config.error)) this._config.error(error);\n  };\n\n  function replaceConfig(config) {\n    // Deep-copy the config so we can edit it\n    var configCopy = copy(config);\n    configCopy.chunkSize = parseInt(configCopy.chunkSize); // parseInt VERY important so we don't concatenate strings!\n    if (!config.step && !config.chunk) configCopy.chunkSize = null; // disable Range header if not streaming; bad values break IIS - see issue #196\n    this._handle = new ParserHandle(configCopy);\n    this._handle.streamer = this;\n    this._config = configCopy; // persist the copy to the caller\n  }\n}\nfunction StringStreamer(config) {\n  config = config || {};\n  ChunkStreamer.call(this, config);\n\n  var remaining;\n  this.stream = function (s) {\n    remaining = s;\n    return this._nextChunk();\n  };\n  this._nextChunk = function () {\n    if (this._finished) return;\n    var size = this._config.chunkSize;\n    var chunk = size ? remaining.substr(0, size) : remaining;\n    remaining = size ? remaining.substr(size) : '';\n    this._finished = !remaining;\n    return this.parseChunk(chunk);\n  };\n}\nStringStreamer.prototype = Object.create(StringStreamer.prototype);\nStringStreamer.prototype.constructor = StringStreamer;\n\n// Use one ParserHandle per entire CSV file or string\nfunction ParserHandle(_config) {\n  // One goal is to minimize the use of regular expressions...\n  var FLOAT = /^\\s*-?(\\d*\\.?\\d+|\\d+\\.?\\d*)(e[-+]?\\d+)?\\s*$/i;\n  var ISO_DATE =\n    /(\\d{4}-[01]\\d-[0-3]\\dT[0-2]\\d:[0-5]\\d:[0-5]\\d\\.\\d+([+-][0-2]\\d:[0-5]\\d|Z))|(\\d{4}-[01]\\d-[0-3]\\dT[0-2]\\d:[0-5]\\d:[0-5]\\d([+-][0-2]\\d:[0-5]\\d|Z))|(\\d{4}-[01]\\d-[0-3]\\dT[0-2]\\d:[0-5]\\d([+-][0-2]\\d:[0-5]\\d|Z))/;\n\n  var self = this;\n  var _stepCounter = 0; // Number of times step was called (number of rows parsed)\n  var _rowCounter = 0; // Number of rows that have been parsed so far\n  var _input; // The input being parsed\n  var _parser; // The core parser being used\n  var _paused = false; // Whether we are paused or not\n  var _aborted = false; // Whether the parser has aborted or not\n  var _delimiterError; // Temporary state between delimiter detection and processing results\n  var _fields = []; // Fields are from the header row of the input, if there is one\n  var _results = {\n    // The last results returned from the parser\n    data: [],\n    errors: [],\n    meta: {}\n  };\n\n  if (isFunction(_config.step)) {\n    var userStep = _config.step;\n    _config.step = function (results) {\n      _results = results;\n\n      if (needsHeaderRow()) processResults();\n      // only call user's step function after header row\n      else {\n        processResults();\n\n        // It's possbile that this line was empty and there's no row here after all\n        if (!_results.data || _results.data.length === 0) return;\n\n        _stepCounter += results.data.length;\n        if (_config.preview && _stepCounter > _config.preview) _parser.abort();\n        else userStep(_results, self);\n      }\n    };\n  }\n\n  /**\n   * Parses input. Most users won't need, and shouldn't mess with, the baseIndex\n   * and ignoreLastRow parameters. They are used by streamers (wrapper functions)\n   * when an input comes in multiple chunks, like from a file.\n   */\n  this.parse = function (input, baseIndex, ignoreLastRow) {\n    var quoteChar = _config.quoteChar || '\"';\n    if (!_config.newline) _config.newline = guessLineEndings(input, quoteChar);\n\n    _delimiterError = false;\n    if (!_config.delimiter) {\n      var delimGuess = guessDelimiter(\n        input,\n        _config.newline,\n        _config.skipEmptyLines,\n        _config.comments,\n        _config.delimitersToGuess\n      );\n      if (delimGuess.successful) _config.delimiter = delimGuess.bestDelimiter;\n      else {\n        _delimiterError = true; // add error after parsing (otherwise it would be overwritten)\n        _config.delimiter = Papa.DefaultDelimiter;\n      }\n      _results.meta.delimiter = _config.delimiter;\n    } else if (isFunction(_config.delimiter)) {\n      _config.delimiter = _config.delimiter(input);\n      _results.meta.delimiter = _config.delimiter;\n    }\n\n    var parserConfig = copy(_config);\n    if (_config.preview && _config.header) parserConfig.preview++; // to compensate for header row\n\n    _input = input;\n    _parser = new Parser(parserConfig);\n    _results = _parser.parse(_input, baseIndex, ignoreLastRow);\n    processResults();\n    return _paused ? {meta: {paused: true}} : _results || {meta: {paused: false}};\n  };\n\n  this.paused = function () {\n    return _paused;\n  };\n\n  this.pause = function () {\n    _paused = true;\n    _parser.abort();\n    _input = _input.substr(_parser.getCharIndex());\n  };\n\n  this.resume = function () {\n    _paused = false;\n    self.streamer.parseChunk(_input, true);\n  };\n\n  this.aborted = function () {\n    return _aborted;\n  };\n\n  this.abort = function () {\n    _aborted = true;\n    _parser.abort();\n    _results.meta.aborted = true;\n    if (isFunction(_config.complete)) _config.complete(_results);\n    _input = '';\n  };\n\n  function testEmptyLine(s) {\n    return _config.skipEmptyLines === 'greedy'\n      ? s.join('').trim() === ''\n      : s.length === 1 && s[0].length === 0;\n  }\n\n  function processResults() {\n    if (_results && _delimiterError) {\n      addError(\n        'Delimiter',\n        'UndetectableDelimiter',\n        \"Unable to auto-detect delimiting character; defaulted to '\" + Papa.DefaultDelimiter + \"'\"\n      );\n      _delimiterError = false;\n    }\n\n    if (_config.skipEmptyLines) {\n      for (var i = 0; i < _results.data.length; i++)\n        if (testEmptyLine(_results.data[i])) _results.data.splice(i--, 1);\n    }\n\n    if (needsHeaderRow()) fillHeaderFields();\n\n    return applyHeaderAndDynamicTypingAndTransformation();\n  }\n\n  function needsHeaderRow() {\n    return _config.header && _fields.length === 0;\n  }\n\n  function fillHeaderFields() {\n    if (!_results) return;\n\n    function addHeder(header) {\n      if (isFunction(_config.transformHeader)) header = _config.transformHeader(header);\n\n      _fields.push(header);\n    }\n\n    if (Array.isArray(_results.data[0])) {\n      for (var i = 0; needsHeaderRow() && i < _results.data.length; i++)\n        _results.data[i].forEach(addHeder);\n\n      _results.data.splice(0, 1);\n    }\n    // if _results.data[0] is not an array, we are in a step where _results.data is the row.\n    else _results.data.forEach(addHeder);\n  }\n\n  function shouldApplyDynamicTyping(field) {\n    // Cache function values to avoid calling it for each row\n    if (_config.dynamicTypingFunction && _config.dynamicTyping[field] === undefined) {\n      _config.dynamicTyping[field] = _config.dynamicTypingFunction(field);\n    }\n    return (_config.dynamicTyping[field] || _config.dynamicTyping) === true;\n  }\n\n  function parseDynamic(field, value) {\n    if (shouldApplyDynamicTyping(field)) {\n      if (value === 'true' || value === 'TRUE') return true;\n      else if (value === 'false' || value === 'FALSE') return false;\n      else if (FLOAT.test(value)) return parseFloat(value);\n      else if (ISO_DATE.test(value)) return new Date(value);\n      else return value === '' ? null : value;\n    }\n    return value;\n  }\n\n  function applyHeaderAndDynamicTypingAndTransformation() {\n    if (\n      !_results ||\n      !_results.data ||\n      (!_config.header && !_config.dynamicTyping && !_config.transform)\n    )\n      return _results;\n\n    function processRow(rowSource, i) {\n      var row = _config.header ? {} : [];\n\n      var j;\n      for (j = 0; j < rowSource.length; j++) {\n        var field = j;\n        var value = rowSource[j];\n\n        if (_config.header) field = j >= _fields.length ? '__parsed_extra' : _fields[j];\n\n        if (_config.transform) value = _config.transform(value, field);\n\n        value = parseDynamic(field, value);\n\n        if (field === '__parsed_extra') {\n          row[field] = row[field] || [];\n          row[field].push(value);\n        } else row[field] = value;\n      }\n\n      if (_config.header) {\n        if (j > _fields.length)\n          addError(\n            'FieldMismatch',\n            'TooManyFields',\n            'Too many fields: expected ' + _fields.length + ' fields but parsed ' + j,\n            _rowCounter + i\n          );\n        else if (j < _fields.length)\n          addError(\n            'FieldMismatch',\n            'TooFewFields',\n            'Too few fields: expected ' + _fields.length + ' fields but parsed ' + j,\n            _rowCounter + i\n          );\n      }\n\n      return row;\n    }\n\n    var incrementBy = 1;\n    if (!_results.data[0] || Array.isArray(_results.data[0])) {\n      _results.data = _results.data.map(processRow);\n      incrementBy = _results.data.length;\n    } else _results.data = processRow(_results.data, 0);\n\n    if (_config.header && _results.meta) _results.meta.fields = _fields;\n\n    _rowCounter += incrementBy;\n    return _results;\n  }\n\n  function guessDelimiter(input, newline, skipEmptyLines, comments, delimitersToGuess) {\n    var bestDelim, bestDelta, fieldCountPrevRow;\n\n    delimitersToGuess = delimitersToGuess || [',', '\\t', '|', ';', Papa.RECORD_SEP, Papa.UNIT_SEP];\n\n    for (var i = 0; i < delimitersToGuess.length; i++) {\n      var delim = delimitersToGuess[i];\n      var delta = 0,\n        avgFieldCount = 0,\n        emptyLinesCount = 0;\n      fieldCountPrevRow = undefined;\n\n      var preview = new Parser({\n        comments: comments,\n        delimiter: delim,\n        newline: newline,\n        preview: 10\n      }).parse(input);\n\n      for (var j = 0; j < preview.data.length; j++) {\n        if (skipEmptyLines && testEmptyLine(preview.data[j])) {\n          emptyLinesCount++;\n          continue;\n        }\n        var fieldCount = preview.data[j].length;\n        avgFieldCount += fieldCount;\n\n        if (typeof fieldCountPrevRow === 'undefined') {\n          fieldCountPrevRow = 0;\n          continue;\n        } else if (fieldCount > 1) {\n          delta += Math.abs(fieldCount - fieldCountPrevRow);\n          fieldCountPrevRow = fieldCount;\n        }\n      }\n\n      if (preview.data.length > 0) avgFieldCount /= preview.data.length - emptyLinesCount;\n\n      if ((typeof bestDelta === 'undefined' || delta > bestDelta) && avgFieldCount > 1.99) {\n        bestDelta = delta;\n        bestDelim = delim;\n      }\n    }\n\n    _config.delimiter = bestDelim;\n\n    return {\n      successful: !!bestDelim,\n      bestDelimiter: bestDelim\n    };\n  }\n\n  function guessLineEndings(input, quoteChar) {\n    input = input.substr(0, 1024 * 1024); // max length 1 MB\n    // Replace all the text inside quotes\n    var re = new RegExp(escapeRegExp(quoteChar) + '([^]*?)' + escapeRegExp(quoteChar), 'gm');\n    input = input.replace(re, '');\n\n    var r = input.split('\\r');\n\n    var n = input.split('\\n');\n\n    var nAppearsFirst = n.length > 1 && n[0].length < r[0].length;\n\n    if (r.length === 1 || nAppearsFirst) return '\\n';\n\n    var numWithN = 0;\n    for (var i = 0; i < r.length; i++) {\n      if (r[i][0] === '\\n') numWithN++;\n    }\n\n    return numWithN >= r.length / 2 ? '\\r\\n' : '\\r';\n  }\n\n  function addError(type, code, msg, row) {\n    _results.errors.push({\n      type: type,\n      code: code,\n      message: msg,\n      row: row\n    });\n  }\n}\n\n/** https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions */\nfunction escapeRegExp(string) {\n  return string.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&'); // $& means the whole matched string\n}\n\n/** The core parser implements speedy and correct CSV parsing */\nfunction Parser(config) {\n  // Unpack the config object\n  config = config || {};\n  var delim = config.delimiter;\n  var newline = config.newline;\n  var comments = config.comments;\n  var step = config.step;\n  var preview = config.preview;\n  var fastMode = config.fastMode;\n  var quoteChar;\n  /** Allows for no quoteChar by setting quoteChar to undefined in config */\n  if (config.quoteChar === undefined) {\n    quoteChar = '\"';\n  } else {\n    quoteChar = config.quoteChar;\n  }\n  var escapeChar = quoteChar;\n  if (config.escapeChar !== undefined) {\n    escapeChar = config.escapeChar;\n  }\n\n  // Delimiter must be valid\n  if (typeof delim !== 'string' || Papa.BAD_DELIMITERS.indexOf(delim) > -1) delim = ',';\n\n  // Comment character must be valid\n  if (comments === delim) throw new Error('Comment character same as delimiter');\n  else if (comments === true) comments = '#';\n  else if (typeof comments !== 'string' || Papa.BAD_DELIMITERS.indexOf(comments) > -1)\n    comments = false;\n\n  // Newline must be valid: \\r, \\n, or \\r\\n\n  if (newline !== '\\n' && newline !== '\\r' && newline !== '\\r\\n') newline = '\\n';\n\n  // We're gonna need these at the Parser scope\n  var cursor = 0;\n  var aborted = false;\n\n  this.parse = function (input, baseIndex, ignoreLastRow) {\n    // For some reason, in Chrome, this speeds things up (!?)\n    if (typeof input !== 'string') throw new Error('Input must be a string');\n\n    // We don't need to compute some of these every time parse() is called,\n    // but having them in a more local scope seems to perform better\n    var inputLen = input.length,\n      delimLen = delim.length,\n      newlineLen = newline.length,\n      commentsLen = comments.length;\n    var stepIsFunction = isFunction(step);\n\n    // Establish starting state\n    cursor = 0;\n    var data = [],\n      errors = [],\n      row = [],\n      lastCursor = 0;\n\n    if (!input) return returnable();\n\n    if (fastMode || (fastMode !== false && input.indexOf(quoteChar) === -1)) {\n      var rows = input.split(newline);\n      for (var i = 0; i < rows.length; i++) {\n        row = rows[i];\n        cursor += row.length;\n        if (i !== rows.length - 1) cursor += newline.length;\n        else if (ignoreLastRow) return returnable();\n        if (comments && row.substr(0, commentsLen) === comments) continue;\n        if (stepIsFunction) {\n          data = [];\n          pushRow(row.split(delim));\n          doStep();\n          if (aborted) return returnable();\n        } else pushRow(row.split(delim));\n        if (preview && i >= preview) {\n          data = data.slice(0, preview);\n          return returnable(true);\n        }\n      }\n      return returnable();\n    }\n\n    var nextDelim = input.indexOf(delim, cursor);\n    var nextNewline = input.indexOf(newline, cursor);\n    var quoteCharRegex = new RegExp(escapeRegExp(escapeChar) + escapeRegExp(quoteChar), 'g');\n    var quoteSearch;\n\n    // Parser loop\n    for (;;) {\n      // Field has opening quote\n      if (input[cursor] === quoteChar) {\n        // Start our search for the closing quote where the cursor is\n        quoteSearch = cursor;\n\n        // Skip the opening quote\n        cursor++;\n\n        for (;;) {\n          // Find closing quote\n          quoteSearch = input.indexOf(quoteChar, quoteSearch + 1);\n\n          //No other quotes are found - no other delimiters\n          if (quoteSearch === -1) {\n            if (!ignoreLastRow) {\n              // No closing quote... what a pity\n              errors.push({\n                type: 'Quotes',\n                code: 'MissingQuotes',\n                message: 'Quoted field unterminated',\n                row: data.length, // row has yet to be inserted\n                index: cursor\n              });\n            }\n            return finish();\n          }\n\n          // Closing quote at EOF\n          if (quoteSearch === inputLen - 1) {\n            var value = input.substring(cursor, quoteSearch).replace(quoteCharRegex, quoteChar);\n            return finish(value);\n          }\n\n          // If this quote is escaped, it's part of the data; skip it\n          // If the quote character is the escape character, then check if the next character is the escape character\n          if (quoteChar === escapeChar && input[quoteSearch + 1] === escapeChar) {\n            quoteSearch++;\n            continue;\n          }\n\n          // If the quote character is not the escape character, then check if the previous character was the escape character\n          if (\n            quoteChar !== escapeChar &&\n            quoteSearch !== 0 &&\n            input[quoteSearch - 1] === escapeChar\n          ) {\n            continue;\n          }\n\n          // Check up to nextDelim or nextNewline, whichever is closest\n          var checkUpTo = nextNewline === -1 ? nextDelim : Math.min(nextDelim, nextNewline);\n          var spacesBetweenQuoteAndDelimiter = extraSpaces(checkUpTo);\n\n          // Closing quote followed by delimiter or 'unnecessary spaces + delimiter'\n          if (input[quoteSearch + 1 + spacesBetweenQuoteAndDelimiter] === delim) {\n            row.push(input.substring(cursor, quoteSearch).replace(quoteCharRegex, quoteChar));\n            cursor = quoteSearch + 1 + spacesBetweenQuoteAndDelimiter + delimLen;\n            nextDelim = input.indexOf(delim, cursor);\n            nextNewline = input.indexOf(newline, cursor);\n\n            if (stepIsFunction) {\n              doStep();\n              if (aborted) return returnable();\n            }\n\n            if (preview && data.length >= preview) return returnable(true);\n\n            break;\n          }\n\n          var spacesBetweenQuoteAndNewLine = extraSpaces(nextNewline);\n\n          // Closing quote followed by newline or 'unnecessary spaces + newLine'\n          if (\n            input.substr(quoteSearch + 1 + spacesBetweenQuoteAndNewLine, newlineLen) === newline\n          ) {\n            row.push(input.substring(cursor, quoteSearch).replace(quoteCharRegex, quoteChar));\n            saveRow(quoteSearch + 1 + spacesBetweenQuoteAndNewLine + newlineLen);\n            nextDelim = input.indexOf(delim, cursor); // because we may have skipped the nextDelim in the quoted field\n\n            if (stepIsFunction) {\n              doStep();\n              if (aborted) return returnable();\n            }\n\n            if (preview && data.length >= preview) return returnable(true);\n\n            break;\n          }\n\n          // Checks for valid closing quotes are complete (escaped quotes or quote followed by EOF/delimiter/newline) -- assume these quotes are part of an invalid text string\n          errors.push({\n            type: 'Quotes',\n            code: 'InvalidQuotes',\n            message: 'Trailing quote on quoted field is malformed',\n            row: data.length, // row has yet to be inserted\n            index: cursor\n          });\n\n          quoteSearch++;\n          continue;\n        }\n\n        if (stepIsFunction) {\n          doStep();\n          if (aborted) return returnable();\n        }\n\n        if (preview && data.length >= preview) return returnable(true);\n        continue;\n      }\n\n      // Comment found at start of new line\n      if (comments && row.length === 0 && input.substr(cursor, commentsLen) === comments) {\n        if (nextNewline === -1)\n          // Comment ends at EOF\n          return returnable();\n        cursor = nextNewline + newlineLen;\n        nextNewline = input.indexOf(newline, cursor);\n        nextDelim = input.indexOf(delim, cursor);\n        continue;\n      }\n\n      // Next delimiter comes before next newline, so we've reached end of field\n      if (nextDelim !== -1 && (nextDelim < nextNewline || nextNewline === -1)) {\n        row.push(input.substring(cursor, nextDelim));\n        cursor = nextDelim + delimLen;\n        nextDelim = input.indexOf(delim, cursor);\n        continue;\n      }\n\n      // End of row\n      if (nextNewline !== -1) {\n        row.push(input.substring(cursor, nextNewline));\n        saveRow(nextNewline + newlineLen);\n\n        if (stepIsFunction) {\n          doStep();\n          if (aborted) return returnable();\n        }\n\n        if (preview && data.length >= preview) return returnable(true);\n\n        continue;\n      }\n\n      break;\n    }\n\n    return finish();\n\n    function pushRow(row) {\n      data.push(row);\n      lastCursor = cursor;\n    }\n\n    /**\n     * checks if there are extra spaces after closing quote and given index without any text\n     * if Yes, returns the number of spaces\n     */\n    function extraSpaces(index) {\n      var spaceLength = 0;\n      if (index !== -1) {\n        var textBetweenClosingQuoteAndIndex = input.substring(quoteSearch + 1, index);\n        if (textBetweenClosingQuoteAndIndex && textBetweenClosingQuoteAndIndex.trim() === '') {\n          spaceLength = textBetweenClosingQuoteAndIndex.length;\n        }\n      }\n      return spaceLength;\n    }\n\n    /**\n     * Appends the remaining input from cursor to the end into\n     * row, saves the row, calls step, and returns the results.\n     */\n    function finish(value) {\n      if (ignoreLastRow) return returnable();\n      if (typeof value === 'undefined') value = input.substr(cursor);\n      row.push(value);\n      cursor = inputLen; // important in case parsing is paused\n      pushRow(row);\n      if (stepIsFunction) doStep();\n      return returnable();\n    }\n\n    /**\n     * Appends the current row to the results. It sets the cursor\n     * to newCursor and finds the nextNewline. The caller should\n     * take care to execute user's step function and check for\n     * preview and end parsing if necessary.\n     */\n    function saveRow(newCursor) {\n      cursor = newCursor;\n      pushRow(row);\n      row = [];\n      nextNewline = input.indexOf(newline, cursor);\n    }\n\n    /** Returns an object with the results, errors, and meta. */\n    function returnable(stopped, step) {\n      var isStep = step || false;\n      return {\n        data: isStep ? data[0] : data,\n        errors: errors,\n        meta: {\n          delimiter: delim,\n          linebreak: newline,\n          aborted: aborted,\n          truncated: !!stopped,\n          cursor: lastCursor + (baseIndex || 0)\n        }\n      };\n    }\n\n    /** Executes the user's step function and resets data & errors. */\n    function doStep() {\n      step(returnable(undefined, true));\n      data = [];\n      errors = [];\n    }\n  };\n\n  /** Sets the abort flag */\n  this.abort = function () {\n    aborted = true;\n  };\n\n  /** Gets the cursor position */\n  this.getCharIndex = function () {\n    return cursor;\n  };\n}\n\nfunction notImplemented() {\n  throw new Error('Not implemented.');\n}\n\n/** Makes a deep copy of an array or object (mostly) */\nfunction copy(obj) {\n  if (typeof obj !== 'object' || obj === null) return obj;\n  var cpy = Array.isArray(obj) ? [] : {};\n  for (var key in obj) cpy[key] = copy(obj[key]);\n  return cpy;\n}\n\nfunction isFunction(func) {\n  return typeof func === 'function';\n}\n"],"mappings":"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"}