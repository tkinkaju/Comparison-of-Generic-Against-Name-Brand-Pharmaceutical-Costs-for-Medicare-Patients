{"version":3,"file":"KHR_materials_unlit.js","names":["KHR_MATERIALS_UNLIT","name","decode","gltfData","gltfScenegraph","GLTFScenegraph","json","materials","material","extension","extensions","KHR_materials_unlit","unlit","removeObjectExtension","removeExtension","encode","addObjectExtension","addExtension"],"sources":["../../../../../src/lib/extensions/deprecated/KHR_materials_unlit.ts"],"sourcesContent":["// GLTF EXTENSION: KHR_materials_unlit\n// https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_unlit\n\nimport type {GLTF} from '../../types/gltf-types';\n\nimport GLTFScenegraph from '../../api/gltf-scenegraph';\n\nconst KHR_MATERIALS_UNLIT = 'KHR_materials_unlit';\n\nexport const name = KHR_MATERIALS_UNLIT;\n\nexport async function decode(gltfData: {json: GLTF}): Promise<void> {\n  const gltfScenegraph = new GLTFScenegraph(gltfData);\n  const {json} = gltfScenegraph;\n\n  // Any nodes that have the extension, add lights field pointing to light object\n  // and remove the extension\n  for (const material of json.materials || []) {\n    const extension = material.extensions && material.extensions.KHR_materials_unlit;\n    if (extension) {\n      // @ts-ignore TODO\n      material.unlit = true;\n    }\n    gltfScenegraph.removeObjectExtension(material, KHR_MATERIALS_UNLIT);\n  }\n\n  // Remove the top-level extension\n  gltfScenegraph.removeExtension(KHR_MATERIALS_UNLIT);\n}\n\nexport function encode(gltfData) {\n  const gltfScenegraph = new GLTFScenegraph(gltfData);\n  const {json} = gltfScenegraph;\n\n  // Any nodes that have lights field pointing to light object\n  // add the extension\n  // @ts-ignore\n  if (gltfScenegraph.materials) {\n    for (const material of json.materials || []) {\n      // @ts-ignore\n      if (material.unlit) {\n        // @ts-ignore\n        delete material.unlit;\n        gltfScenegraph.addObjectExtension(material, KHR_MATERIALS_UNLIT, {});\n        gltfScenegraph.addExtension(KHR_MATERIALS_UNLIT);\n      }\n    }\n  }\n}\n"],"mappings":";;;;;;;;;;;AAKA;AAAuD;AAAA;AAAA;AAEvD,IAAMA,mBAAmB,GAAG,qBAAqB;AAE1C,IAAMC,IAAI,GAAGD,mBAAmB;AAAC;AAAA,SAElBE,MAAM;EAAA;AAAA;AAAA;EAAA,oEAArB,iBAAsBC,QAAsB;IAAA;IAAA;MAAA;QAAA;UAAA;YAC3CC,cAAc,GAAG,IAAIC,uBAAc,CAACF,QAAQ,CAAC;YAC5CG,IAAI,GAAIF,cAAc,CAAtBE,IAAI;YAAA,wCAIYA,IAAI,CAACC,SAAS,IAAI,EAAE;YAAA;cAA3C,uDAA6C;gBAAlCC,QAAQ;gBACXC,SAAS,GAAGD,QAAQ,CAACE,UAAU,IAAIF,QAAQ,CAACE,UAAU,CAACC,mBAAmB;gBAChF,IAAIF,SAAS,EAAE;kBAEbD,QAAQ,CAACI,KAAK,GAAG,IAAI;gBACvB;gBACAR,cAAc,CAACS,qBAAqB,CAACL,QAAQ,EAAER,mBAAmB,CAAC;cACrE;;YAAC;cAAA;YAAA;cAAA;YAAA;YAGDI,cAAc,CAACU,eAAe,CAACd,mBAAmB,CAAC;UAAC;UAAA;YAAA;QAAA;MAAA;IAAA;EAAA,CACrD;EAAA;AAAA;AAEM,SAASe,MAAM,CAACZ,QAAQ,EAAE;EAC/B,IAAMC,cAAc,GAAG,IAAIC,uBAAc,CAACF,QAAQ,CAAC;EACnD,IAAOG,IAAI,GAAIF,cAAc,CAAtBE,IAAI;;EAKX,IAAIF,cAAc,CAACG,SAAS,EAAE;IAAA,2CACLD,IAAI,CAACC,SAAS,IAAI,EAAE;MAAA;IAAA;MAA3C,oDAA6C;QAAA,IAAlCC,QAAQ;QAEjB,IAAIA,QAAQ,CAACI,KAAK,EAAE;UAElB,OAAOJ,QAAQ,CAACI,KAAK;UACrBR,cAAc,CAACY,kBAAkB,CAACR,QAAQ,EAAER,mBAAmB,EAAE,CAAC,CAAC,CAAC;UACpEI,cAAc,CAACa,YAAY,CAACjB,mBAAmB,CAAC;QAClD;MACF;IAAC;MAAA;IAAA;MAAA;IAAA;EACH;AACF"}