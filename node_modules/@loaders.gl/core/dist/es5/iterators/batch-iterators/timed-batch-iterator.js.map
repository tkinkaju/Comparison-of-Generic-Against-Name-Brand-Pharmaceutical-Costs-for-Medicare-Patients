{"version":3,"file":"timed-batch-iterator.js","names":["timedBatchIterator","batchIterator","timeout","start","Date","now","batches","batch","push"],"sources":["../../../../src/iterators/batch-iterators/timed-batch-iterator.ts"],"sourcesContent":["/**\n * \"Debounces\" batches and returns them in groups\n */\nexport async function* timedBatchIterator<Batch>(batchIterator: AsyncIterable<Batch>, timeout) {\n  let start = Date.now();\n  let batches: Batch[] = [];\n  for await (const batch of batchIterator) {\n    batches.push(batch);\n    if (Date.now() - start > timeout) {\n      yield batches;\n      start = Date.now();\n      batches = [];\n    }\n  }\n\n  if (batches) {\n    yield batches;\n  }\n}\n"],"mappings":";;;;;;;;;;;;SAGuBA,kBAAkB;EAAA;AAAA;AAAA;EAAA,kFAAlC,iBAA0CC,aAAmC,EAAEC,OAAO;IAAA;IAAA;MAAA;QAAA;UAAA;YACvFC,KAAK,GAAGC,IAAI,CAACC,GAAG,EAAE;YAClBC,OAAgB,GAAG,EAAE;YAAA;YAAA;YAAA;YAAA,2BACCL,aAAa;UAAA;YAAA;YAAA;UAAA;YAAA;cAAA;cAAA;YAAA;YAAtBM,KAAK;YACpBD,OAAO,CAACE,IAAI,CAACD,KAAK,CAAC;YAAC,MAChBH,IAAI,CAACC,GAAG,EAAE,GAAGF,KAAK,GAAGD,OAAO;cAAA;cAAA;YAAA;YAAA;YAC9B,OAAMI,OAAO;UAAA;YACbH,KAAK,GAAGC,IAAI,CAACC,GAAG,EAAE;YAClBC,OAAO,GAAG,EAAE;UAAC;YAAA;YAAA;YAAA;UAAA;YAAA;YAAA;UAAA;YAAA;YAAA;YAAA;YAAA;UAAA;YAAA;YAAA;YAAA;cAAA;cAAA;YAAA;YAAA;YAAA;UAAA;YAAA;YAAA;cAAA;cAAA;YAAA;YAAA;UAAA;YAAA;UAAA;YAAA;UAAA;YAAA,KAIbA,OAAO;cAAA;cAAA;YAAA;YAAA;YACT,OAAMA,OAAO;UAAA;UAAA;YAAA;QAAA;MAAA;IAAA;EAAA,CAEhB;EAAA;AAAA"}