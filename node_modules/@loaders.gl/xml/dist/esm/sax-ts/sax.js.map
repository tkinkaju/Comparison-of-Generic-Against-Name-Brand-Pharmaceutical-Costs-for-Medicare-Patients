{"version":3,"file":"sax.js","names":["DEFAULT_SAX_EVENTS","ontext","onprocessinginstruction","onsgmldeclaration","ondoctype","oncomment","onopentagstart","onattribute","onopentag","onclosetag","onopencdata","oncdata","onclosecdata","onerror","onend","onready","onscript","onopennamespace","onclosenamespace","DEFAULT_SAX_PARSER_OPTIONS","strict","MAX_BUFFER_LENGTH","lowercase","lowercasetags","noscript","strictEntities","xmlns","undefined","position","trim","normalize","EVENTS","BUFFERS","nameStart","nameBody","entityStart","entityBody","ENTITIES","amp","gt","lt","quot","apos","AElig","Aacute","Acirc","Agrave","Aring","Atilde","Auml","Ccedil","ETH","Eacute","Ecirc","Egrave","Euml","Iacute","Icirc","Igrave","Iuml","Ntilde","Oacute","Ocirc","Ograve","Oslash","Otilde","Ouml","THORN","Uacute","Ucirc","Ugrave","Uuml","Yacute","aacute","acirc","aelig","agrave","aring","atilde","auml","ccedil","eacute","ecirc","egrave","eth","euml","iacute","icirc","igrave","iuml","ntilde","oacute","ocirc","ograve","oslash","otilde","ouml","szlig","thorn","uacute","ucirc","ugrave","uuml","yacute","yuml","copy","reg","nbsp","iexcl","cent","pound","curren","yen","brvbar","sect","uml","ordf","laquo","not","shy","macr","deg","plusmn","sup1","sup2","sup3","acute","micro","para","middot","cedil","ordm","raquo","frac14","frac12","frac34","iquest","times","divide","OElig","oelig","Scaron","scaron","Yuml","fnof","circ","tilde","Alpha","Beta","Gamma","Delta","Epsilon","Zeta","Eta","Theta","Iota","Kappa","Lambda","Mu","Nu","Xi","Omicron","Pi","Rho","Sigma","Tau","Upsilon","Phi","Chi","Psi","Omega","alpha","beta","gamma","delta","epsilon","zeta","eta","theta","iota","kappa","lambda","mu","nu","xi","omicron","pi","rho","sigmaf","sigma","tau","upsilon","phi","chi","psi","omega","thetasym","upsih","piv","ensp","emsp","thinsp","zwnj","zwj","lrm","rlm","ndash","mdash","lsquo","rsquo","sbquo","ldquo","rdquo","bdquo","dagger","Dagger","bull","hellip","permil","prime","Prime","lsaquo","rsaquo","oline","frasl","euro","image","weierp","real","trade","alefsym","larr","uarr","rarr","darr","harr","crarr","lArr","uArr","rArr","dArr","hArr","forall","part","exist","empty","nabla","isin","notin","ni","prod","sum","minus","lowast","radic","prop","infin","ang","and","or","cap","cup","int","there4","sim","cong","asymp","ne","equiv","le","ge","sub","sup","nsub","sube","supe","oplus","otimes","perp","sdot","lceil","rceil","lfloor","rfloor","lang","rang","loz","spades","clubs","hearts","diams","Object","keys","forEach","key","e","String","fromCharCode","SAX","constructor","BEGIN","S","BEGIN_WHITESPACE","TEXT","TEXT_ENTITY","OPEN_WAKA","SGML_DECL","SGML_DECL_QUOTED","DOCTYPE","DOCTYPE_QUOTED","DOCTYPE_DTD","DOCTYPE_DTD_QUOTED","COMMENT_STARTING","COMMENT","COMMENT_ENDING","COMMENT_ENDED","CDATA","CDATA_ENDING","CDATA_ENDING_2","PROC_INST","PROC_INST_BODY","PROC_INST_ENDING","OPEN_TAG","OPEN_TAG_SLASH","ATTRIB","ATTRIB_NAME","ATTRIB_NAME_SAW_WHITE","ATTRIB_VALUE","ATTRIB_VALUE_QUOTED","ATTRIB_VALUE_CLOSED","ATTRIB_VALUE_UNQUOTED","ATTRIB_VALUE_ENTITY_Q","ATTRIB_VALUE_ENTITY_U","CLOSE_TAG","CLOSE_TAG_SAW_WHITE","SCRIPT","SCRIPT_ENDING","xml","XML_NAMESPACE","XMLNS_NAMESPACE","s","STATE","hasOwnProperty","charAt","chunk","i","result","length","isWhitespace","c","isQuote","isAttribEnd","isMatch","regex","test","notMatch","qname","name","attribute","indexOf","qualName","split","prefix","local","write","error","closed","errorFunction","end","toString","trackPosition","line","column","state","beginWhiteSpace","sawRoot","closedRoot","starti","textNode","substring","startTagPosition","strictFail","script","sgmlDecl","tagName","procInstName","procInstBody","pad","Array","join","toUpperCase","emitNode","cdata","comment","doctype","q","textApplyOptions","body","newTag","openTag","closeTag","attribName","attribValue","attrib","tag","attributes","value","returnState","buffer","Error","parseEntity","entity","bufferCheckPosition","checkBufferLength","emit","event","data","events","eventName","replace","clearBuffers","l","flushBuffers","closeText","SAXParser","opt","er","looseCase","attribList","qn","parent","tags","ns","create","push","entityLC","toLowerCase","num","NaN","numStr","slice","parseInt","isNaN","fromCodePoint","message","text","nodeType","maxAllowed","Math","max","maxActual","len","m","selfClosing","uri","JSON","stringify","that","p","nv","a","isSelfClosing","Boolean","t","close","pop","x","n","XML_ENTITIES","rootNS","resume","flush"],"sources":["../../../src/sax-ts/sax.ts"],"sourcesContent":["// loaders.gl, MIT license\n\n// This file is forked from https://github.com/Maxim-Mazurok/sax-ts under ISC license,\n// which in turn is forked from https://github.com/isaacs/sax-js under ISC license\n\n// Copyright (c) Isaac Z. Schlueter and Contributors\n// Permission to use, copy, modify, and/or distribute this software for any purpose with or without fee is hereby granted, provided that the above copyright notice and this permission notice appear in all copies.\n// THE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.\n\n/* eslint-disable */\n\nexport type SAXEventName =\n  | 'text'\n  | 'processinginstruction'\n  | 'sgmldeclaration'\n  | 'doctype'\n  | 'comment'\n  | 'opentagstart'\n  | 'attribute'\n  | 'opentag'\n  | 'closetag'\n  | 'opencdata'\n  | 'cdata'\n  | 'closecdata'\n  | 'error'\n  | 'end'\n  | 'ready'\n  | 'script'\n  | 'opennamespace'\n  | 'closenamespace';\n\nexport type SAXEventCallback = (data: any, eventName: SAXEventName, SAXParser) => void;\n\nexport type SAXEvents = {\n  ontext?: SAXEventCallback;\n  onprocessinginstruction?: SAXEventCallback;\n  onsgmldeclaration?: SAXEventCallback;\n  ondoctype?: SAXEventCallback;\n  oncomment?: SAXEventCallback;\n  onopentagstart?: SAXEventCallback;\n  onattribute?: SAXEventCallback;\n  onopentag?: SAXEventCallback;\n  onclosetag?: SAXEventCallback;\n  onopencdata?: SAXEventCallback;\n  oncdata?: SAXEventCallback;\n  onclosecdata?: SAXEventCallback;\n  onerror?: SAXEventCallback;\n  onend?: SAXEventCallback;\n  onready?: SAXEventCallback;\n  onscript?: SAXEventCallback;\n  onopennamespace?: SAXEventCallback;\n  onclosenamespace?: SAXEventCallback;\n};\n\nexport type SAXParserOptions = SAXEvents & {\n  strict?: boolean;\n  MAX_BUFFER_LENGTH?: number;\n  lowercase?: boolean;\n  lowercasetags?: boolean;\n  noscript?: boolean;\n  strictEntities?: boolean;\n  xmlns?: any;\n  position?: any;\n  trim?: any;\n  normalize?: any;\n};\n\nconst DEFAULT_SAX_EVENTS: Required<SAXEvents> = {\n  ontext: () => {},\n  onprocessinginstruction: () => {},\n  onsgmldeclaration: () => {},\n  ondoctype: () => {},\n  oncomment: () => {},\n  onopentagstart: () => {},\n  onattribute: () => {},\n  onopentag: () => {},\n  onclosetag: () => {},\n  onopencdata: () => {},\n  oncdata: () => {},\n  onclosecdata: () => {},\n  onerror: () => {},\n  onend: () => {},\n  onready: () => {},\n  onscript: () => {},\n  onopennamespace: () => {},\n  onclosenamespace: () => {}\n};\n\nconst DEFAULT_SAX_PARSER_OPTIONS: Required<SAXParserOptions> = {\n  ...DEFAULT_SAX_EVENTS,\n  strict: false,\n  MAX_BUFFER_LENGTH: 64 * 1024,\n  lowercase: false,\n  lowercasetags: false,\n  noscript: false,\n  strictEntities: false,\n  xmlns: undefined,\n  position: undefined,\n  trim: undefined,\n  normalize: undefined\n};\n\nconst EVENTS = [\n  'text',\n  'processinginstruction',\n  'sgmldeclaration',\n  'doctype',\n  'comment',\n  'opentagstart',\n  'attribute',\n  'opentag',\n  'closetag',\n  'opencdata',\n  'cdata',\n  'closecdata',\n  'error',\n  'end',\n  'ready',\n  'script',\n  'opennamespace',\n  'closenamespace'\n];\n\nconst BUFFERS = [\n  'comment',\n  'sgmlDecl',\n  'textNode',\n  'tagName',\n  'doctype',\n  'procInstName',\n  'procInstBody',\n  'entity',\n  'attribName',\n  'attribValue',\n  'cdata',\n  'script'\n];\n\nconst nameStart =\n  /[:_A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD]/;\nconst nameBody =\n  /[:_A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\u00B7\\u0300-\\u036F\\u203F-\\u2040.\\d-]/;\nconst entityStart =\n  /[#:_A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD]/;\nconst entityBody =\n  /[#:_A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\u00B7\\u0300-\\u036F\\u203F-\\u2040.\\d-]/;\n\nexport const ENTITIES: {[key: string]: number | string} = {\n  amp: '&',\n  gt: '>',\n  lt: '<',\n  quot: '\"',\n  apos: \"'\",\n  AElig: 198,\n  Aacute: 193,\n  Acirc: 194,\n  Agrave: 192,\n  Aring: 197,\n  Atilde: 195,\n  Auml: 196,\n  Ccedil: 199,\n  ETH: 208,\n  Eacute: 201,\n  Ecirc: 202,\n  Egrave: 200,\n  Euml: 203,\n  Iacute: 205,\n  Icirc: 206,\n  Igrave: 204,\n  Iuml: 207,\n  Ntilde: 209,\n  Oacute: 211,\n  Ocirc: 212,\n  Ograve: 210,\n  Oslash: 216,\n  Otilde: 213,\n  Ouml: 214,\n  THORN: 222,\n  Uacute: 218,\n  Ucirc: 219,\n  Ugrave: 217,\n  Uuml: 220,\n  Yacute: 221,\n  aacute: 225,\n  acirc: 226,\n  aelig: 230,\n  agrave: 224,\n  aring: 229,\n  atilde: 227,\n  auml: 228,\n  ccedil: 231,\n  eacute: 233,\n  ecirc: 234,\n  egrave: 232,\n  eth: 240,\n  euml: 235,\n  iacute: 237,\n  icirc: 238,\n  igrave: 236,\n  iuml: 239,\n  ntilde: 241,\n  oacute: 243,\n  ocirc: 244,\n  ograve: 242,\n  oslash: 248,\n  otilde: 245,\n  ouml: 246,\n  szlig: 223,\n  thorn: 254,\n  uacute: 250,\n  ucirc: 251,\n  ugrave: 249,\n  uuml: 252,\n  yacute: 253,\n  yuml: 255,\n  copy: 169,\n  reg: 174,\n  nbsp: 160,\n  iexcl: 161,\n  cent: 162,\n  pound: 163,\n  curren: 164,\n  yen: 165,\n  brvbar: 166,\n  sect: 167,\n  uml: 168,\n  ordf: 170,\n  laquo: 171,\n  not: 172,\n  shy: 173,\n  macr: 175,\n  deg: 176,\n  plusmn: 177,\n  sup1: 185,\n  sup2: 178,\n  sup3: 179,\n  acute: 180,\n  micro: 181,\n  para: 182,\n  middot: 183,\n  cedil: 184,\n  ordm: 186,\n  raquo: 187,\n  frac14: 188,\n  frac12: 189,\n  frac34: 190,\n  iquest: 191,\n  times: 215,\n  divide: 247,\n  OElig: 338,\n  oelig: 339,\n  Scaron: 352,\n  scaron: 353,\n  Yuml: 376,\n  fnof: 402,\n  circ: 710,\n  tilde: 732,\n  Alpha: 913,\n  Beta: 914,\n  Gamma: 915,\n  Delta: 916,\n  Epsilon: 917,\n  Zeta: 918,\n  Eta: 919,\n  Theta: 920,\n  Iota: 921,\n  Kappa: 922,\n  Lambda: 923,\n  Mu: 924,\n  Nu: 925,\n  Xi: 926,\n  Omicron: 927,\n  Pi: 928,\n  Rho: 929,\n  Sigma: 931,\n  Tau: 932,\n  Upsilon: 933,\n  Phi: 934,\n  Chi: 935,\n  Psi: 936,\n  Omega: 937,\n  alpha: 945,\n  beta: 946,\n  gamma: 947,\n  delta: 948,\n  epsilon: 949,\n  zeta: 950,\n  eta: 951,\n  theta: 952,\n  iota: 953,\n  kappa: 954,\n  lambda: 955,\n  mu: 956,\n  nu: 957,\n  xi: 958,\n  omicron: 959,\n  pi: 960,\n  rho: 961,\n  sigmaf: 962,\n  sigma: 963,\n  tau: 964,\n  upsilon: 965,\n  phi: 966,\n  chi: 967,\n  psi: 968,\n  omega: 969,\n  thetasym: 977,\n  upsih: 978,\n  piv: 982,\n  ensp: 8194,\n  emsp: 8195,\n  thinsp: 8201,\n  zwnj: 8204,\n  zwj: 8205,\n  lrm: 8206,\n  rlm: 8207,\n  ndash: 8211,\n  mdash: 8212,\n  lsquo: 8216,\n  rsquo: 8217,\n  sbquo: 8218,\n  ldquo: 8220,\n  rdquo: 8221,\n  bdquo: 8222,\n  dagger: 8224,\n  Dagger: 8225,\n  bull: 8226,\n  hellip: 8230,\n  permil: 8240,\n  prime: 8242,\n  Prime: 8243,\n  lsaquo: 8249,\n  rsaquo: 8250,\n  oline: 8254,\n  frasl: 8260,\n  euro: 8364,\n  image: 8465,\n  weierp: 8472,\n  real: 8476,\n  trade: 8482,\n  alefsym: 8501,\n  larr: 8592,\n  uarr: 8593,\n  rarr: 8594,\n  darr: 8595,\n  harr: 8596,\n  crarr: 8629,\n  lArr: 8656,\n  uArr: 8657,\n  rArr: 8658,\n  dArr: 8659,\n  hArr: 8660,\n  forall: 8704,\n  part: 8706,\n  exist: 8707,\n  empty: 8709,\n  nabla: 8711,\n  isin: 8712,\n  notin: 8713,\n  ni: 8715,\n  prod: 8719,\n  sum: 8721,\n  minus: 8722,\n  lowast: 8727,\n  radic: 8730,\n  prop: 8733,\n  infin: 8734,\n  ang: 8736,\n  and: 8743,\n  or: 8744,\n  cap: 8745,\n  cup: 8746,\n  int: 8747,\n  there4: 8756,\n  sim: 8764,\n  cong: 8773,\n  asymp: 8776,\n  ne: 8800,\n  equiv: 8801,\n  le: 8804,\n  ge: 8805,\n  sub: 8834,\n  sup: 8835,\n  nsub: 8836,\n  sube: 8838,\n  supe: 8839,\n  oplus: 8853,\n  otimes: 8855,\n  perp: 8869,\n  sdot: 8901,\n  lceil: 8968,\n  rceil: 8969,\n  lfloor: 8970,\n  rfloor: 8971,\n  lang: 9001,\n  rang: 9002,\n  loz: 9674,\n  spades: 9824,\n  clubs: 9827,\n  hearts: 9829,\n  diams: 9830\n};\n\nObject.keys(ENTITIES).forEach((key) => {\n  const e = ENTITIES[key];\n  ENTITIES[key] = typeof e === 'number' ? String.fromCharCode(e) : e;\n});\n\n/**\n * Internal helper class\n */\nabstract class SAX {\n  EVENTS: string[] = EVENTS;\n  ENTITIES: {[key: string]: number | string} = {\n    // TODO: make it readonly, needed for entity-mega test\n    // amp, gt, lt, quot and apos are resolved to strings instead of numerical\n    // codes, IDK why\n    ...ENTITIES\n  };\n\n  protected abstract events: SAXEvents;\n\n  protected XML_ENTITIES: {[key: string]: string} = {\n    amp: '&',\n    gt: '>',\n    lt: '<',\n    quot: '\"',\n    apos: \"'\"\n  };\n  protected S: any = 0;\n  protected opt: any;\n  protected trackPosition = false;\n  protected column = 0;\n  protected line = 0;\n  protected c = '';\n  protected error: any;\n  protected q = '';\n  protected bufferCheckPosition: any;\n  protected closed = false;\n  protected tags: any[] = [];\n  protected looseCase = '';\n  protected closedRoot = false;\n  protected sawRoot = false;\n  protected strict = false;\n  protected tag: any;\n  protected strictEntities: any;\n  protected state: any;\n  protected noscript = false;\n  protected attribList: any[] = [];\n  protected ns: any;\n  protected position = 0;\n\n  private STATE: {[index: string]: any} = {\n    BEGIN: this.S++, // leading byte order mark or whitespace\n    BEGIN_WHITESPACE: this.S++, // leading whitespace\n    TEXT: this.S++, // general stuff\n    TEXT_ENTITY: this.S++, // &amp and such.\n    OPEN_WAKA: this.S++, // <\n    SGML_DECL: this.S++, // <!BLARG\n    SGML_DECL_QUOTED: this.S++, // <!BLARG foo \"bar\n    DOCTYPE: this.S++, // <!DOCTYPE\n    DOCTYPE_QUOTED: this.S++, // <!DOCTYPE \"//blah\n    DOCTYPE_DTD: this.S++, // <!DOCTYPE \"//blah\" [ ...\n    DOCTYPE_DTD_QUOTED: this.S++, // <!DOCTYPE \"//blah\" [ \"foo\n    COMMENT_STARTING: this.S++, // <!-\n    COMMENT: this.S++, // <!--\n    COMMENT_ENDING: this.S++, // <!-- blah -\n    COMMENT_ENDED: this.S++, // <!-- blah --\n    CDATA: this.S++, // <![CDATA[ something\n    CDATA_ENDING: this.S++, // ]\n    CDATA_ENDING_2: this.S++, // ]]\n    PROC_INST: this.S++, // <?hi\n    PROC_INST_BODY: this.S++, // <?hi there\n    PROC_INST_ENDING: this.S++, // <?hi \"there\" ?\n    OPEN_TAG: this.S++, // <strong\n    OPEN_TAG_SLASH: this.S++, // <strong /\n    ATTRIB: this.S++, // <a\n    ATTRIB_NAME: this.S++, // <a foo\n    ATTRIB_NAME_SAW_WHITE: this.S++, // <a foo _\n    ATTRIB_VALUE: this.S++, // <a foo=\n    ATTRIB_VALUE_QUOTED: this.S++, // <a foo=\"bar\n    ATTRIB_VALUE_CLOSED: this.S++, // <a foo=\"bar\"\n    ATTRIB_VALUE_UNQUOTED: this.S++, // <a foo=bar\n    ATTRIB_VALUE_ENTITY_Q: this.S++, // <foo bar=\"&quot;\"\n    ATTRIB_VALUE_ENTITY_U: this.S++, // <foo bar=&quot\n    CLOSE_TAG: this.S++, // </a\n    CLOSE_TAG_SAW_WHITE: this.S++, // </a   >\n    SCRIPT: this.S++, // <script> ...\n    SCRIPT_ENDING: this.S++ // <script> ... <\n  };\n\n  private readonly BUFFERS: string[] = BUFFERS;\n  // private parser: (strict: boolean, opt: any) => SAXParser;\n  private CDATA = '[CDATA[';\n  private DOCTYPE = 'DOCTYPE';\n  private XML_NAMESPACE = 'http://www.w3.org/XML/1998/namespace';\n  private XMLNS_NAMESPACE = 'http://www.w3.org/2000/xmlns/';\n  protected rootNS: {} = {\n    xml: this.XML_NAMESPACE,\n    xmlns: this.XMLNS_NAMESPACE\n  };\n  private comment: any;\n  private sgmlDecl: any;\n  private textNode = '';\n  private tagName: any;\n  private doctype: any;\n  private procInstName: any;\n  private procInstBody: any;\n  private entity = '';\n  private attribName: any;\n  private attribValue: any;\n  private cdata = '';\n  private script = '';\n  private startTagPosition = 0;\n\n  constructor() {\n    this.S = 0;\n\n    for (const s in this.STATE) {\n      if (this.STATE.hasOwnProperty(s)) {\n        this.STATE[this.STATE[s]] = s;\n      }\n    }\n\n    // shorthand\n    this.S = this.STATE;\n  }\n\n  private static charAt(chunk: string, i: number): string {\n    let result = '';\n    if (i < chunk.length) {\n      result = chunk.charAt(i);\n    }\n    return result;\n  }\n\n  private static isWhitespace(c: string): boolean {\n    return c === ' ' || c === '\\n' || c === '\\r' || c === '\\t';\n  }\n\n  private static isQuote(c: string): boolean {\n    return c === '\"' || c === \"'\";\n  }\n\n  private static isAttribEnd(c: string): boolean {\n    return c === '>' || SAX.isWhitespace(c);\n  }\n\n  private static isMatch(regex: RegExp, c: string): boolean {\n    return regex.test(c);\n  }\n\n  private static notMatch(regex: RegExp, c: string): boolean {\n    return !SAX.isMatch(regex, c);\n  }\n\n  private static qname(\n    name: string,\n    attribute?: string | boolean\n  ): {prefix: string; local: string} {\n    const i = name.indexOf(':');\n    const qualName = i < 0 ? ['', name] : name.split(':');\n    let prefix = qualName[0];\n    let local = qualName[1];\n\n    // <x \"xmlns\"=\"http://foo\">\n    if (attribute && name === 'xmlns') {\n      prefix = 'xmlns';\n      local = '';\n    }\n\n    return {prefix, local};\n  }\n\n  write(chunk: null | object | string): this | SAXParser {\n    if (this.error) {\n      throw this.error;\n    }\n    if (this.closed) {\n      return this.errorFunction('Cannot write after close. Assign an onready handler.');\n    }\n    if (chunk === null) {\n      return this.end();\n    }\n    if (typeof chunk === 'object') {\n      chunk = chunk.toString();\n    }\n    let i = 0;\n    let c: string;\n    while (true) {\n      c = SAX.charAt(chunk, i++);\n      this.c = c;\n\n      if (!c) {\n        break;\n      }\n\n      if (this.trackPosition) {\n        this.position++;\n        if (c === '\\n') {\n          this.line++;\n          this.column = 0;\n        } else {\n          this.column++;\n        }\n      }\n\n      switch (this.state) {\n        case this.S.BEGIN:\n          this.state = this.S.BEGIN_WHITESPACE;\n          if (c === '\\uFEFF') {\n            continue;\n          }\n          this.beginWhiteSpace(c);\n          continue;\n\n        case this.S.BEGIN_WHITESPACE:\n          this.beginWhiteSpace(c);\n          continue;\n\n        case this.S.TEXT:\n          if (this.sawRoot && !this.closedRoot) {\n            const starti = i - 1;\n            while (c && c !== '<' && c !== '&') {\n              c = SAX.charAt(chunk, i++);\n              if (c && this.trackPosition) {\n                this.position++;\n                if (c === '\\n') {\n                  this.line++;\n                  this.column = 0;\n                } else {\n                  this.column++;\n                }\n              }\n            }\n            this.textNode += chunk.substring(starti, i - 1);\n          }\n          if (c === '<' && !(this.sawRoot && this.closedRoot && !this.strict)) {\n            this.state = this.S.OPEN_WAKA;\n            this.startTagPosition = this.position;\n          } else {\n            if (!SAX.isWhitespace(c) && (!this.sawRoot || this.closedRoot)) {\n              this.strictFail('Text data outside of root node.');\n            }\n            if (c === '&') {\n              this.state = this.S.TEXT_ENTITY;\n            } else {\n              this.textNode += c;\n            }\n          }\n          continue;\n\n        case this.S.SCRIPT:\n          // only non-strict\n          if (c === '<') {\n            this.state = this.S.SCRIPT_ENDING;\n          } else {\n            this.script += c;\n          }\n          continue;\n\n        case this.S.SCRIPT_ENDING:\n          if (c === '/') {\n            this.state = this.S.CLOSE_TAG;\n          } else {\n            this.script += `<${c}`;\n            this.state = this.S.SCRIPT;\n          }\n          continue;\n\n        case this.S.OPEN_WAKA:\n          // either a /, ?, !, or text is coming next.\n          if (c === '!') {\n            this.state = this.S.SGML_DECL;\n            this.sgmlDecl = '';\n          } else if (SAX.isWhitespace(c)) {\n            // wait for it...\n          } else if (SAX.isMatch(nameStart, c)) {\n            this.state = this.S.OPEN_TAG;\n            this.tagName = c;\n          } else if (c === '/') {\n            this.state = this.S.CLOSE_TAG;\n            this.tagName = '';\n          } else if (c === '?') {\n            this.state = this.S.PROC_INST;\n            this.procInstName = this.procInstBody = '';\n          } else {\n            this.strictFail('Unencoded <');\n            // if there was some whitespace, then add that in.\n            if (this.startTagPosition + 1 < this.position) {\n              const pad = this.position - this.startTagPosition;\n              c = new Array(pad).join(' ') + c;\n            }\n            this.textNode += `<${c}`;\n            this.state = this.S.TEXT;\n          }\n          continue;\n\n        case this.S.SGML_DECL:\n          if ((this.sgmlDecl + c).toUpperCase() === this.CDATA) {\n            this.emitNode('onopencdata');\n            this.state = this.S.CDATA;\n            this.sgmlDecl = '';\n            this.cdata = '';\n          } else if (this.sgmlDecl + c === '--') {\n            this.state = this.S.COMMENT;\n            this.comment = '';\n            this.sgmlDecl = '';\n          } else if ((this.sgmlDecl + c).toUpperCase() === this.DOCTYPE) {\n            this.state = this.S.DOCTYPE;\n            if (this.doctype || this.sawRoot) {\n              this.strictFail('Inappropriately located doctype declaration');\n            }\n            this.doctype = '';\n            this.sgmlDecl = '';\n          } else if (c === '>') {\n            this.emitNode('onsgmldeclaration', this.sgmlDecl);\n            this.sgmlDecl = '';\n            this.state = this.S.TEXT;\n          } else if (SAX.isQuote(c)) {\n            this.state = this.S.SGML_DECL_QUOTED;\n            this.sgmlDecl += c;\n          } else {\n            this.sgmlDecl += c;\n          }\n          continue;\n\n        case this.S.SGML_DECL_QUOTED:\n          if (c === this.q) {\n            this.state = this.S.SGML_DECL;\n            this.q = '';\n          }\n          this.sgmlDecl += c;\n          continue;\n\n        case this.S.DOCTYPE:\n          if (c === '>') {\n            this.state = this.S.TEXT;\n            this.emitNode('ondoctype', this.doctype);\n            this.doctype = true; // just remember that we saw it.\n          } else {\n            this.doctype += c;\n            if (c === '[') {\n              this.state = this.S.DOCTYPE_DTD;\n            } else if (SAX.isQuote(c)) {\n              this.state = this.S.DOCTYPE_QUOTED;\n              this.q = c;\n            }\n          }\n          continue;\n\n        case this.S.DOCTYPE_QUOTED:\n          this.doctype += c;\n          if (c === this.q) {\n            this.q = '';\n            this.state = this.S.DOCTYPE;\n          }\n          continue;\n\n        case this.S.DOCTYPE_DTD:\n          this.doctype += c;\n          if (c === ']') {\n            this.state = this.S.DOCTYPE;\n          } else if (SAX.isQuote(c)) {\n            this.state = this.S.DOCTYPE_DTD_QUOTED;\n            this.q = c;\n          }\n          continue;\n\n        case this.S.DOCTYPE_DTD_QUOTED:\n          this.doctype += c;\n          if (c === this.q) {\n            this.state = this.S.DOCTYPE_DTD;\n            this.q = '';\n          }\n          continue;\n\n        case this.S.COMMENT:\n          if (c === '-') {\n            this.state = this.S.COMMENT_ENDING;\n          } else {\n            this.comment += c;\n          }\n          continue;\n\n        case this.S.COMMENT_ENDING:\n          if (c === '-') {\n            this.state = this.S.COMMENT_ENDED;\n            this.comment = this.textApplyOptions(this.comment);\n            if (this.comment) {\n              this.emitNode('oncomment', this.comment);\n            }\n            this.comment = '';\n          } else {\n            this.comment += `-${c}`;\n            this.state = this.S.COMMENT;\n          }\n          continue;\n\n        case this.S.COMMENT_ENDED:\n          if (c !== '>') {\n            this.strictFail('Malformed comment');\n            // allow <!-- blah -- bloo --> in non-strict mode,\n            // which is a comment of \" blah -- bloo \"\n            this.comment += `--${c}`;\n            this.state = this.S.COMMENT;\n          } else {\n            this.state = this.S.TEXT;\n          }\n          continue;\n\n        case this.S.CDATA:\n          if (c === ']') {\n            this.state = this.S.CDATA_ENDING;\n          } else {\n            this.cdata += c;\n          }\n          continue;\n\n        case this.S.CDATA_ENDING:\n          if (c === ']') {\n            this.state = this.S.CDATA_ENDING_2;\n          } else {\n            this.cdata += `]${c}`;\n            this.state = this.S.CDATA;\n          }\n          continue;\n\n        case this.S.CDATA_ENDING_2:\n          if (c === '>') {\n            if (this.cdata) {\n              this.emitNode('oncdata', this.cdata);\n            }\n            this.emitNode('onclosecdata');\n            this.cdata = '';\n            this.state = this.S.TEXT;\n          } else if (c === ']') {\n            this.cdata += ']';\n          } else {\n            this.cdata += `]]${c}`;\n            this.state = this.S.CDATA;\n          }\n          continue;\n\n        case this.S.PROC_INST:\n          if (c === '?') {\n            this.state = this.S.PROC_INST_ENDING;\n          } else if (SAX.isWhitespace(c)) {\n            this.state = this.S.PROC_INST_BODY;\n          } else {\n            this.procInstName += c;\n          }\n          continue;\n\n        case this.S.PROC_INST_BODY:\n          if (!this.procInstBody && SAX.isWhitespace(c)) {\n            continue;\n          } else if (c === '?') {\n            this.state = this.S.PROC_INST_ENDING;\n          } else {\n            this.procInstBody += c;\n          }\n          continue;\n\n        case this.S.PROC_INST_ENDING:\n          if (c === '>') {\n            this.emitNode('onprocessinginstruction', {\n              name: this.procInstName,\n              body: this.procInstBody\n            });\n            this.procInstName = this.procInstBody = '';\n            this.state = this.S.TEXT;\n          } else {\n            this.procInstBody += `?${c}`;\n            this.state = this.S.PROC_INST_BODY;\n          }\n          continue;\n\n        case this.S.OPEN_TAG:\n          if (SAX.isMatch(nameBody, c)) {\n            this.tagName += c;\n          } else {\n            this.newTag();\n            if (c === '>') {\n              this.openTag();\n            } else if (c === '/') {\n              this.state = this.S.OPEN_TAG_SLASH;\n            } else {\n              if (!SAX.isWhitespace(c)) {\n                this.strictFail('Invalid character in tag name');\n              }\n              this.state = this.S.ATTRIB;\n            }\n          }\n          continue;\n\n        case this.S.OPEN_TAG_SLASH:\n          if (c === '>') {\n            this.openTag(true);\n            this.closeTag();\n          } else {\n            this.strictFail('Forward-slash in opening tag not followed by >');\n            this.state = this.S.ATTRIB;\n          }\n          continue;\n\n        case this.S.ATTRIB:\n          // haven't read the attribute name yet.\n          if (SAX.isWhitespace(c)) {\n            continue;\n          } else if (c === '>') {\n            this.openTag();\n          } else if (c === '/') {\n            this.state = this.S.OPEN_TAG_SLASH;\n          } else if (SAX.isMatch(nameStart, c)) {\n            this.attribName = c;\n            this.attribValue = '';\n            this.state = this.S.ATTRIB_NAME;\n          } else {\n            this.strictFail('Invalid attribute name');\n          }\n          continue;\n\n        case this.S.ATTRIB_NAME:\n          if (c === '=') {\n            this.state = this.S.ATTRIB_VALUE;\n          } else if (c === '>') {\n            this.strictFail('Attribute without value');\n            this.attribValue = this.attribName;\n            this.attrib();\n            this.openTag();\n          } else if (SAX.isWhitespace(c)) {\n            this.state = this.S.ATTRIB_NAME_SAW_WHITE;\n          } else if (SAX.isMatch(nameBody, c)) {\n            this.attribName += c;\n          } else {\n            this.strictFail('Invalid attribute name');\n          }\n          continue;\n\n        case this.S.ATTRIB_NAME_SAW_WHITE:\n          if (c === '=') {\n            this.state = this.S.ATTRIB_VALUE;\n          } else if (SAX.isWhitespace(c)) {\n            continue;\n          } else {\n            this.strictFail('Attribute without value');\n            this.tag.attributes[this.attribName] = '';\n            this.attribValue = '';\n            this.emitNode('onattribute', {\n              name: this.attribName,\n              value: ''\n            });\n            this.attribName = '';\n            if (c === '>') {\n              this.openTag();\n            } else if (SAX.isMatch(nameStart, c)) {\n              this.attribName = c;\n              this.state = this.S.ATTRIB_NAME;\n            } else {\n              this.strictFail('Invalid attribute name');\n              this.state = this.S.ATTRIB;\n            }\n          }\n          continue;\n\n        case this.S.ATTRIB_VALUE:\n          if (SAX.isWhitespace(c)) {\n            continue;\n          } else if (SAX.isQuote(c)) {\n            this.q = c;\n            this.state = this.S.ATTRIB_VALUE_QUOTED;\n          } else {\n            this.strictFail('Unquoted attribute value');\n            this.state = this.S.ATTRIB_VALUE_UNQUOTED;\n            this.attribValue = c;\n          }\n          continue;\n\n        case this.S.ATTRIB_VALUE_QUOTED:\n          if (c !== this.q) {\n            if (c === '&') {\n              this.state = this.S.ATTRIB_VALUE_ENTITY_Q;\n            } else {\n              this.attribValue += c;\n            }\n            continue;\n          }\n          this.attrib();\n          this.q = '';\n          this.state = this.S.ATTRIB_VALUE_CLOSED;\n          continue;\n\n        case this.S.ATTRIB_VALUE_CLOSED:\n          if (SAX.isWhitespace(c)) {\n            this.state = this.S.ATTRIB;\n          } else if (c === '>') {\n            this.openTag();\n          } else if (c === '/') {\n            this.state = this.S.OPEN_TAG_SLASH;\n          } else if (SAX.isMatch(nameStart, c)) {\n            this.strictFail('No whitespace between attributes');\n            this.attribName = c;\n            this.attribValue = '';\n            this.state = this.S.ATTRIB_NAME;\n          } else {\n            this.strictFail('Invalid attribute name');\n          }\n          continue;\n\n        case this.S.ATTRIB_VALUE_UNQUOTED:\n          if (!SAX.isAttribEnd(c)) {\n            if (c === '&') {\n              this.state = this.S.ATTRIB_VALUE_ENTITY_U;\n            } else {\n              this.attribValue += c;\n            }\n            continue;\n          }\n          this.attrib();\n          if (c === '>') {\n            this.openTag();\n          } else {\n            this.state = this.S.ATTRIB;\n          }\n          continue;\n\n        case this.S.CLOSE_TAG:\n          if (!this.tagName) {\n            if (SAX.isWhitespace(c)) {\n              continue;\n            } else if (SAX.notMatch(nameStart, c)) {\n              if (this.script) {\n                this.script += `</${c}`;\n                this.state = this.S.SCRIPT;\n              } else {\n                this.strictFail('Invalid tagname in closing tag.');\n              }\n            } else {\n              this.tagName = c;\n            }\n          } else if (c === '>') {\n            this.closeTag();\n          } else if (SAX.isMatch(nameBody, c)) {\n            this.tagName += c;\n          } else if (this.script) {\n            this.script += `</${this.tagName}`;\n            this.tagName = '';\n            this.state = this.S.SCRIPT;\n          } else {\n            if (!SAX.isWhitespace(c)) {\n              this.strictFail('Invalid tagname in closing tag');\n            }\n            this.state = this.S.CLOSE_TAG_SAW_WHITE;\n          }\n          continue;\n\n        case this.S.CLOSE_TAG_SAW_WHITE:\n          if (SAX.isWhitespace(c)) {\n            continue;\n          }\n          if (c === '>') {\n            this.closeTag();\n          } else {\n            this.strictFail('Invalid characters in closing tag');\n          }\n          continue;\n\n        case this.S.TEXT_ENTITY:\n        case this.S.ATTRIB_VALUE_ENTITY_Q:\n        case this.S.ATTRIB_VALUE_ENTITY_U:\n          let returnState;\n          let buffer;\n          switch (this.state) {\n            case this.S.TEXT_ENTITY:\n              returnState = this.S.TEXT;\n              buffer = 'textNode';\n              break;\n\n            case this.S.ATTRIB_VALUE_ENTITY_Q:\n              returnState = this.S.ATTRIB_VALUE_QUOTED;\n              buffer = 'attribValue';\n              break;\n\n            case this.S.ATTRIB_VALUE_ENTITY_U:\n              returnState = this.S.ATTRIB_VALUE_UNQUOTED;\n              buffer = 'attribValue';\n              break;\n\n            default:\n              throw new Error(`Unknown state: ${this.state}`);\n          }\n\n          if (c === ';') {\n            this[buffer] += this.parseEntity();\n            this.entity = '';\n            this.state = returnState;\n          } else if (SAX.isMatch(this.entity.length ? entityBody : entityStart, c)) {\n            this.entity += c;\n          } else {\n            this.strictFail('Invalid character in entity name');\n            this[buffer] += `&${this.entity}${c}`;\n            this.entity = '';\n            this.state = returnState;\n          }\n\n          continue;\n\n        default:\n          throw new Error(`Unknown state: ${this.state}`);\n      }\n    } // while\n\n    if (this.position >= this.bufferCheckPosition) {\n      this.checkBufferLength();\n    }\n    return this;\n  }\n\n  protected emit(event: string, data?: Error | {}): void {\n    if (this.events.hasOwnProperty(event)) {\n      const eventName = event.replace(/^on/, '');\n      this.events[event](data, eventName, this);\n    }\n  }\n\n  protected clearBuffers(): void {\n    for (let i = 0, l = this.BUFFERS.length; i < l; i++) {\n      this[this[i]] = '';\n    }\n  }\n\n  protected flushBuffers(): void {\n    this.closeText();\n    if (this.cdata !== '') {\n      this.emitNode('oncdata', this.cdata);\n      this.cdata = '';\n    }\n    if (this.script !== '') {\n      this.emitNode('onscript', this.script);\n      this.script = '';\n    }\n  }\n\n  protected end(): SAXParser {\n    if (this.sawRoot && !this.closedRoot) this.strictFail('Unclosed root tag');\n    if (\n      this.state !== this.S.BEGIN &&\n      this.state !== this.S.BEGIN_WHITESPACE &&\n      this.state !== this.S.TEXT\n    ) {\n      this.errorFunction('Unexpected end');\n    }\n    this.closeText();\n    this.c = '';\n    this.closed = true;\n    this.emit('onend');\n    return new SAXParser(this.opt);\n  }\n\n  protected errorFunction(er: string): this {\n    this.closeText();\n    if (this.trackPosition) {\n      er += `\\nLine: ${this.line}\\nColumn: ${this.column}\\nChar: ${this.c}`;\n    }\n    const error = new Error(er);\n    this.error = error;\n    this.emit('onerror', error);\n    return this;\n  }\n\n  private attrib(): void {\n    if (!this.strict) {\n      this.attribName = this.attribName[this.looseCase]();\n    }\n\n    if (\n      this.attribList.indexOf(this.attribName) !== -1 ||\n      this.tag.attributes.hasOwnProperty(this.attribName)\n    ) {\n      this.attribName = this.attribValue = '';\n      return;\n    }\n\n    if (this.opt.xmlns) {\n      const qn = SAX.qname(this.attribName, true);\n      const prefix = qn.prefix;\n      const local = qn.local;\n\n      if (prefix === 'xmlns') {\n        // namespace binding attribute. push the binding into scope\n        if (local === 'xml' && this.attribValue !== this.XML_NAMESPACE) {\n          this.strictFail(\n            `xml: prefix must be bound to ${this.XML_NAMESPACE}\\n` + `Actual: ${this.attribValue}`\n          );\n        } else if (local === 'xmlns' && this.attribValue !== this.XMLNS_NAMESPACE) {\n          this.strictFail(\n            `xmlns: prefix must be bound to ${this.XMLNS_NAMESPACE}\\n` +\n              `Actual: ${this.attribValue}`\n          );\n        } else {\n          const tag = this.tag;\n          const parent = this.tags[this.tags.length - 1] || this;\n          if (tag.ns === parent.ns) {\n            tag.ns = Object.create(parent.ns);\n          }\n          tag.ns[local] = this.attribValue;\n        }\n      }\n\n      // defer onattribute events until all attributes have been seen\n      // so any new bindings can take effect. preserve attribute order\n      // so deferred events can be emitted in document order\n      this.attribList.push([this.attribName, this.attribValue]);\n    } else {\n      // in non-xmlns mode, we can emit the event right away\n      this.tag.attributes[this.attribName] = this.attribValue;\n      this.emitNode('onattribute', {\n        name: this.attribName,\n        value: this.attribValue\n      });\n    }\n\n    this.attribName = this.attribValue = '';\n  }\n\n  private newTag(): void {\n    if (!this.strict) this.tagName = this.tagName[this.looseCase]();\n    const parent = this.tags[this.tags.length - 1] || this;\n    const tag: any = (this.tag = {name: this.tagName, attributes: {}});\n\n    // will be overridden if tag contains an xmlns=\"foo\" or xmlns:foo=\"bar\"\n    if (this.opt.xmlns) {\n      tag.ns = parent.ns;\n    }\n    this.attribList.length = 0;\n    this.emitNode('onopentagstart', tag);\n  }\n\n  private parseEntity(): string | number {\n    let entity = this.entity;\n    const entityLC = entity.toLowerCase();\n    let num = NaN;\n    let numStr = '';\n\n    if (this.ENTITIES[entity]) {\n      return this.ENTITIES[entity];\n    }\n    if (this.ENTITIES[entityLC]) {\n      return this.ENTITIES[entityLC];\n    }\n    entity = entityLC;\n    if (entity.charAt(0) === '#') {\n      if (entity.charAt(1) === 'x') {\n        entity = entity.slice(2);\n        // TODO: remove tslint:disable\n        // tslint:disable-next-line\n        num = parseInt(entity, 16);\n        numStr = num.toString(16);\n      } else {\n        entity = entity.slice(1);\n        // TODO: remove tslint:disable\n        // tslint:disable-next-line\n        num = parseInt(entity, 10);\n        numStr = num.toString(10);\n      }\n    }\n\n    entity = entity.replace(/^0+/, '');\n    if (isNaN(num) || numStr.toLowerCase() !== entity) {\n      this.strictFail('Invalid character entity');\n      return `&${this.entity};`;\n    }\n\n    return String.fromCodePoint(num);\n  }\n\n  private beginWhiteSpace(c: string): void {\n    if (c === '<') {\n      this.state = this.S.OPEN_WAKA;\n      this.startTagPosition = this.position;\n    } else if (!SAX.isWhitespace(c)) {\n      // have to process this as a text node.\n      // weird, but happens.\n      this.strictFail('Non-whitespace before first tag.');\n      this.textNode = c;\n      this.state = this.S.TEXT;\n    } else {\n    }\n  }\n\n  private strictFail(message: string): void {\n    if (typeof this !== 'object' || !(this instanceof SAXParser)) {\n      throw new Error('bad call to strictFail');\n    }\n    if (this.strict) {\n      this.errorFunction(message);\n    }\n  }\n\n  private textApplyOptions(text: string): string {\n    if (this.opt.trim) text = text.trim();\n    if (this.opt.normalize) text = text.replace(/\\s+/g, ' ');\n    return text;\n  }\n\n  private emitNode(nodeType: string, data?: {}): void {\n    if (this.textNode) this.closeText();\n    this.emit(nodeType, data);\n  }\n\n  private closeText(): void {\n    this.textNode = this.textApplyOptions(this.textNode);\n    // TODO: figure out why this.textNode can be \"\" and \"undefined\"\n    if (this.textNode !== undefined && this.textNode !== '' && this.textNode !== 'undefined') {\n      this.emit('ontext', this.textNode);\n    }\n    this.textNode = '';\n  }\n\n  private checkBufferLength(): void {\n    const maxAllowed = Math.max(this.opt.MAX_BUFFER_LENGTH, 10);\n    let maxActual = 0;\n    for (let i = 0, l = this.BUFFERS.length; i < l; i++) {\n      const len = this[this.BUFFERS[i]]?.length || 0;\n      if (len > maxAllowed) {\n        // Text/cdata nodes can get big, and since they're buffered,\n        // we can get here under normal conditions.\n        // Avoid issues by emitting the text node now,\n        // so at least it won't get any bigger.\n        switch (this.BUFFERS[i]) {\n          case 'textNode':\n            this.closeText();\n            break;\n          case 'cdata':\n            this.emitNode('oncdata', this.cdata);\n            this.cdata = '';\n            break;\n          case 'script':\n            this.emitNode('onscript', this.script);\n            this.script = '';\n            break;\n          default:\n            this.errorFunction(`Max buffer length exceeded: ${this.BUFFERS[i]}`);\n        }\n      }\n      maxActual = Math.max(maxActual, len);\n    }\n    // schedule the next check for the earliest possible buffer overrun.\n    const m = this.opt.MAX_BUFFER_LENGTH - maxActual;\n    this.bufferCheckPosition = m + this.position;\n  }\n\n  private openTag(selfClosing?: boolean): void {\n    if (this.opt.xmlns) {\n      // emit namespace binding events\n      const tag = this.tag;\n\n      // add namespace info to tag\n      const qn = SAX.qname(this.tagName);\n      tag.prefix = qn.prefix;\n      tag.local = qn.local;\n      tag.uri = tag.ns[qn.prefix] || '';\n\n      if (tag.prefix && !tag.uri) {\n        this.strictFail(`Unbound namespace prefix: ${JSON.stringify(this.tagName)}`);\n        tag.uri = qn.prefix;\n      }\n\n      const parent = this.tags[this.tags.length - 1] || this;\n      if (tag.ns && parent.ns !== tag.ns) {\n        const that = this;\n        Object.keys(tag.ns).forEach((p) => {\n          that.emitNode('onopennamespace', {\n            prefix: p,\n            uri: tag.ns[p]\n          });\n        });\n      }\n\n      // handle deferred onattribute events\n      // Note: do not apply default ns to attributes:\n      //   http://www.w3.org/TR/REC-xml-names/#defaulting\n      for (let i = 0, l = this.attribList.length; i < l; i++) {\n        const nv = this.attribList[i];\n        const name = nv[0];\n        const value = nv[1];\n        const qualName = SAX.qname(name, true);\n        const prefix = qualName.prefix;\n        const local = qualName.local;\n        const uri = prefix === '' ? '' : tag.ns[prefix] || '';\n        const a = {\n          name,\n          value,\n          prefix,\n          local,\n          uri\n        };\n\n        // if there's any attributes with an undefined namespace,\n        // then fail on them now.\n        if (prefix && prefix !== 'xmlns' && !uri) {\n          this.strictFail(`Unbound namespace prefix: ${JSON.stringify(prefix)}`);\n          a.uri = prefix;\n        }\n        this.tag.attributes[name] = a;\n        this.emitNode('onattribute', a);\n      }\n      this.attribList.length = 0;\n    }\n\n    this.tag.isSelfClosing = Boolean(selfClosing);\n\n    // process the tag\n    this.sawRoot = true;\n    this.tags.push(this.tag);\n    this.emitNode('onopentag', this.tag);\n    if (!selfClosing) {\n      // special case for <script> in non-strict mode.\n      if (!this.noscript && this.tagName.toLowerCase() === 'script') {\n        this.state = this.S.SCRIPT;\n      } else {\n        this.state = this.S.TEXT;\n      }\n      this.tag = null;\n      this.tagName = '';\n    }\n    this.attribName = this.attribValue = '';\n    this.attribList.length = 0;\n  }\n\n  private closeTag(): void {\n    if (!this.tagName) {\n      this.strictFail('Weird empty close tag.');\n      this.textNode += '</>';\n      this.state = this.S.TEXT;\n      return;\n    }\n\n    if (this.script) {\n      if (this.tagName !== 'script') {\n        this.script += `</${this.tagName}>`;\n        this.tagName = '';\n        this.state = this.S.SCRIPT;\n        return;\n      }\n      this.emitNode('onscript', this.script);\n      this.script = '';\n    }\n\n    // first make sure that the closing tag actually exists.\n    // <a><b></c></b></a> will close everything, otherwise.\n    let t = this.tags.length;\n    let tagName = this.tagName;\n    if (!this.strict) {\n      tagName = tagName[this.looseCase]();\n    }\n    while (t--) {\n      const close = this.tags[t];\n      if (close.name !== tagName) {\n        // fail the first time in strict mode\n        this.strictFail('Unexpected close tag');\n      } else {\n        break;\n      }\n    }\n\n    // didn't find it.  we already failed for strict, so just abort.\n    if (t < 0) {\n      this.strictFail(`Unmatched closing tag: ${this.tagName}`);\n      this.textNode += `</${this.tagName}>`;\n      this.state = this.S.TEXT;\n      return;\n    }\n    this.tagName = tagName;\n    let s = this.tags.length;\n    while (s-- > t) {\n      const tag = (this.tag = this.tags.pop());\n      this.tagName = this.tag.name;\n      this.emitNode('onclosetag', this.tagName);\n\n      const x: {[index: string]: any} = {};\n      for (const i in tag.ns) {\n        if (tag.ns.hasOwnProperty(i)) {\n          x[i] = tag.ns[i];\n        }\n      }\n\n      const parent = this.tags[this.tags.length - 1] || this;\n      if (this.opt.xmlns && tag.ns !== parent.ns) {\n        // remove namespace bindings introduced by tag\n        const that = this;\n        Object.keys(tag.ns).forEach((p) => {\n          const n = tag.ns[p];\n          that.emitNode('onclosenamespace', {prefix: p, uri: n});\n        });\n      }\n    }\n    if (t === 0) this.closedRoot = true;\n    this.tagName = this.attribValue = this.attribName = '';\n    this.attribList.length = 0;\n    this.state = this.S.TEXT;\n  }\n}\n\n/**\n *\n * @todo Weird inheritance, with some variables initialized in subclass\n */\nexport class SAXParser extends SAX {\n  static ENTITIES = ENTITIES;\n\n  opt: Required<SAXParserOptions> = DEFAULT_SAX_PARSER_OPTIONS;\n\n  events: Required<SAXEvents> = DEFAULT_SAX_EVENTS;\n\n  constructor(opt?: SAXParserOptions) {\n    super();\n\n    this.clearBuffers();\n\n    this.opt = opt = {...this.opt, ...opt};\n\n    this.events = {...this.events, ...opt};\n\n    this.q = this.c = '';\n    this.opt.lowercase = this.opt.lowercase || this.opt.lowercasetags;\n    this.bufferCheckPosition = this.opt.MAX_BUFFER_LENGTH;\n    this.looseCase = this.opt.lowercase ? 'toLowerCase' : 'toUpperCase';\n    this.tags = [];\n    this.closed = this.closedRoot = this.sawRoot = false;\n    this.tag = this.error = null;\n    this.strict = Boolean(this.opt.strict);\n    this.noscript = Boolean(this.opt.strict || this.opt.noscript);\n    this.state = this.S.BEGIN;\n    this.strictEntities = this.opt.strictEntities;\n    this.ENTITIES = this.strictEntities\n      ? Object.create(this.XML_ENTITIES)\n      : Object.create(this.ENTITIES);\n    this.attribList = [];\n\n    // namespaces form a prototype chain.\n    // it always points at the current tag,\n    // which protos to its parent tag.\n    if (this.opt.xmlns) {\n      this.ns = Object.create(this.rootNS);\n    }\n\n    // mostly just for error reporting\n    this.trackPosition = this.opt.position !== false;\n    if (this.trackPosition) {\n      this.position = this.line = this.column = 0;\n    }\n    this.emit('onready');\n  }\n\n  resume(): this {\n    this.error = null;\n    return this;\n  }\n\n  close(): this | SAXParser {\n    return this.write(null);\n  }\n\n  flush(): void {\n    this.flushBuffers();\n  }\n}\n"],"mappings":"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AE,GAAG;EACTC,MAAM,EAAE,GAAG;EACXC,KAAK,EAAE,GAAG;EACVC,MAAM,EAAE,GAAG;EACXC,IAAI,EAAE,GAAG;EACTC,MAAM,EAAE,GAAG;EACXC,MAAM,EAAE,GAAG;EACXC,KAAK,EAAE,GAAG;EACVC,MAAM,EAAE,GAAG;EACXC,MAAM,EAAE,GAAG;EACXC,MAAM,EAAE,GAAG;EACXC,IAAI,EAAE,GAAG;EACTC,KAAK,EAAE,GAAG;EACVC,KAAK,EAAE,GAAG;EACVC,MAAM,EAAE,GAAG;EACXC,KAAK,EAAE,GAAG;EACVC,MAAM,EAAE,GAAG;EACXC,IAAI,EAAE,GAAG;EACTC,MAAM,EAAE,GAAG;EACXC,IAAI,EAAE,GAAG;EACTC,IAAI,EAAE,GAAG;EACTC,GAAG,EAAE,GAAG;EACRC,IAAI,EAAE,GAAG;EACTC,KAAK,EAAE,GAAG;EACVC,IAAI,EAAE,GAAG;EACTC,KAAK,EAAE,GAAG;EACVC,MAAM,EAAE,GAAG;EACXC,GAAG,EAAE,GAAG;EACRC,MAAM,EAAE,GAAG;EACXC,IAAI,EAAE,GAAG;EACTC,GAAG,EAAE,GAAG;EACRC,IAAI,EAAE,GAAG;EACTC,KAAK,EAAE,GAAG;EACVC,GAAG,EAAE,GAAG;EACRC,GAAG,EAAE,GAAG;EACRC,IAAI,EAAE,GAAG;EACTC,GAAG,EAAE,GAAG;EACRC,MAAM,EAAE,GAAG;EACXC,IAAI,EAAE,GAAG;EACTC,IAAI,EAAE,GAAG;EACTC,IAAI,EAAE,GAAG;EACTC,KAAK,EAAE,GAAG;EACVC,KAAK,EAAE,GAAG;EACVC,IAAI,EAAE,GAAG;EACTC,MAAM,EAAE,GAAG;EACXC,KAAK,EAAE,GAAG;EACVC,IAAI,EAAE,GAAG;EACTC,KAAK,EAAE,GAAG;EACVC,MAAM,EAAE,GAAG;EACXC,MAAM,EAAE,GAAG;EACXC,MAAM,EAAE,GAAG;EACXC,MAAM,EAAE,GAAG;EACXC,KAAK,EAAE,GAAG;EACVC,MAAM,EAAE,GAAG;EACXC,KAAK,EAAE,GAAG;EACVC,KAAK,EAAE,GAAG;EACVC,MAAM,EAAE,GAAG;EACXC,MAAM,EAAE,GAAG;EACXC,IAAI,EAAE,GAAG;EACTC,IAAI,EAAE,GAAG;EACTC,IAAI,EAAE,GAAG;EACTC,KAAK,EAAE,GAAG;EACVC,KAAK,EAAE,GAAG;EACVC,IAAI,EAAE,GAAG;EACTC,KAAK,EAAE,GAAG;EACVC,KAAK,EAAE,GAAG;EACVC,OAAO,EAAE,GAAG;EACZC,IAAI,EAAE,GAAG;EACTC,GAAG,EAAE,GAAG;EACRC,KAAK,EAAE,GAAG;EACVC,IAAI,EAAE,GAAG;EACTC,KAAK,EAAE,GAAG;EACVC,MAAM,EAAE,GAAG;EACXC,EAAE,EAAE,GAAG;EACPC,EAAE,EAAE,GAAG;EACPC,EAAE,EAAE,GAAG;EACPC,OAAO,EAAE,GAAG;EACZC,EAAE,EAAE,GAAG;EACPC,GAAG,EAAE,GAAG;EACRC,KAAK,EAAE,GAAG;EACVC,GAAG,EAAE,GAAG;EACRC,OAAO,EAAE,GAAG;EACZC,GAAG,EAAE,GAAG;EACRC,GAAG,EAAE,GAAG;EACRC,GAAG,EAAE,GAAG;EACRC,KAAK,EAAE,GAAG;EACVC,KAAK,EAAE,GAAG;EACVC,IAAI,EAAE,GAAG;EACTC,KAAK,EAAE,GAAG;EACVC,KAAK,EAAE,GAAG;EACVC,OAAO,EAAE,GAAG;EACZC,IAAI,EAAE,GAAG;EACTC,GAAG,EAAE,GAAG;EACRC,KAAK,EAAE,GAAG;EACVC,IAAI,EAAE,GAAG;EACTC,KAAK,EAAE,GAAG;EACVC,MAAM,EAAE,GAAG;EACXC,EAAE,EAAE,GAAG;EACPC,EAAE,EAAE,GAAG;EACPC,EAAE,EAAE,GAAG;EACPC,OAAO,EAAE,GAAG;EACZC,EAAE,EAAE,GAAG;EACPC,GAAG,EAAE,GAAG;EACRC,MAAM,EAAE,GAAG;EACXC,KAAK,EAAE,GAAG;EACVC,GAAG,EAAE,GAAG;EACRC,OAAO,EAAE,GAAG;EACZC,GAAG,EAAE,GAAG;EACRC,GAAG,EAAE,GAAG;EACRC,GAAG,EAAE,GAAG;EACRC,KAAK,EAAE,GAAG;EACVC,QAAQ,EAAE,GAAG;EACbC,KAAK,EAAE,GAAG;EACVC,GAAG,EAAE,GAAG;EACRC,IAAI,EAAE,IAAI;EACVC,IAAI,EAAE,IAAI;EACVC,MAAM,EAAE,IAAI;EACZC,IAAI,EAAE,IAAI;EACVC,GAAG,EAAE,IAAI;EACTC,GAAG,EAAE,IAAI;EACTC,GAAG,EAAE,IAAI;EACTC,KAAK,EAAE,IAAI;EACXC,KAAK,EAAE,IAAI;EACXC,KAAK,EAAE,IAAI;EACXC,KAAK,EAAE,IAAI;EACXC,KAAK,EAAE,IAAI;EACXC,KAAK,EAAE,IAAI;EACXC,KAAK,EAAE,IAAI;EACXC,KAAK,EAAE,IAAI;EACXC,MAAM,EAAE,IAAI;EACZC,MAAM,EAAE,IAAI;EACZC,IAAI,EAAE,IAAI;EACVC,MAAM,EAAE,IAAI;EACZC,MAAM,EAAE,IAAI;EACZC,KAAK,EAAE,IAAI;EACXC,KAAK,EAAE,IAAI;EACXC,MAAM,EAAE,IAAI;EACZC,MAAM,EAAE,IAAI;EACZC,KAAK,EAAE,IAAI;EACXC,KAAK,EAAE,IAAI;EACXC,IAAI,EAAE,IAAI;EACVC,KAAK,EAAE,IAAI;EACXC,MAAM,EAAE,IAAI;EACZC,IAAI,EAAE,IAAI;EACVC,KAAK,EAAE,IAAI;EACXC,OAAO,EAAE,IAAI;EACbC,IAAI,EAAE,IAAI;EACVC,IAAI,EAAE,IAAI;EACVC,IAAI,EAAE,IAAI;EACVC,IAAI,EAAE,IAAI;EACVC,IAAI,EAAE,IAAI;EACVC,KAAK,EAAE,IAAI;EACXC,IAAI,EAAE,IAAI;EACVC,IAAI,EAAE,IAAI;EACVC,IAAI,EAAE,IAAI;EACVC,IAAI,EAAE,IAAI;EACVC,IAAI,EAAE,IAAI;EACVC,MAAM,EAAE,IAAI;EACZC,IAAI,EAAE,IAAI;EACVC,KAAK,EAAE,IAAI;EACXC,KAAK,EAAE,IAAI;EACXC,KAAK,EAAE,IAAI;EACXC,IAAI,EAAE,IAAI;EACVC,KAAK,EAAE,IAAI;EACXC,EAAE,EAAE,IAAI;EACRC,IAAI,EAAE,IAAI;EACVC,GAAG,EAAE,IAAI;EACTC,KAAK,EAAE,IAAI;EACXC,MAAM,EAAE,IAAI;EACZC,KAAK,EAAE,IAAI;EACXC,IAAI,EAAE,IAAI;EACVC,KAAK,EAAE,IAAI;EACXC,GAAG,EAAE,IAAI;EACTC,GAAG,EAAE,IAAI;EACTC,EAAE,EAAE,IAAI;EACRC,GAAG,EAAE,IAAI;EACTC,GAAG,EAAE,IAAI;EACTC,GAAG,EAAE,IAAI;EACTC,MAAM,EAAE,IAAI;EACZC,GAAG,EAAE,IAAI;EACTC,IAAI,EAAE,IAAI;EACVC,KAAK,EAAE,IAAI;EACXC,EAAE,EAAE,IAAI;EACRC,KAAK,EAAE,IAAI;EACXC,EAAE,EAAE,IAAI;EACRC,EAAE,EAAE,IAAI;EACRC,GAAG,EAAE,IAAI;EACTC,GAAG,EAAE,IAAI;EACTC,IAAI,EAAE,IAAI;EACVC,IAAI,EAAE,IAAI;EACVC,IAAI,EAAE,IAAI;EACVC,KAAK,EAAE,IAAI;EACXC,MAAM,EAAE,IAAI;EACZC,IAAI,EAAE,IAAI;EACVC,IAAI,EAAE,IAAI;EACVC,KAAK,EAAE,IAAI;EACXC,KAAK,EAAE,IAAI;EACXC,MAAM,EAAE,IAAI;EACZC,MAAM,EAAE,IAAI;EACZC,IAAI,EAAE,IAAI;EACVC,IAAI,EAAE,IAAI;EACVC,GAAG,EAAE,IAAI;EACTC,MAAM,EAAE,IAAI;EACZC,KAAK,EAAE,IAAI;EACXC,MAAM,EAAE,IAAI;EACZC,KAAK,EAAE;AACT,CAAC;AAEDC,MAAM,CAACC,IAAI,CAAC/P,QAAQ,CAAC,CAACgQ,OAAO,CAAEC,GAAG,IAAK;EACrC,MAAMC,CAAC,GAAGlQ,QAAQ,CAACiQ,GAAG,CAAC;EACvBjQ,QAAQ,CAACiQ,GAAG,CAAC,GAAG,OAAOC,CAAC,KAAK,QAAQ,GAAGC,MAAM,CAACC,YAAY,CAACF,CAAC,CAAC,GAAGA,CAAC;AACpE,CAAC,CAAC;;AAKF,MAAeG,GAAG,CAAC;;EAwGjBC,WAAW,GAAG;IAAA,gCAvGK5Q,MAAM;IAAA,kCACoB;MAI3C,GAAGM;IACL,CAAC;IAAA;IAAA,sCAIiD;MAChDC,GAAG,EAAE,GAAG;MACRC,EAAE,EAAE,GAAG;MACPC,EAAE,EAAE,GAAG;MACPC,IAAI,EAAE,GAAG;MACTC,IAAI,EAAE;IACR,CAAC;IAAA,2BACkB,CAAC;IAAA;IAAA,uCAEM,KAAK;IAAA,gCACZ,CAAC;IAAA,8BACH,CAAC;IAAA,2BACJ,EAAE;IAAA;IAAA,2BAEF,EAAE;IAAA;IAAA,gCAEG,KAAK;IAAA,8BACA,EAAE;IAAA,mCACJ,EAAE;IAAA,oCACD,KAAK;IAAA,iCACR,KAAK;IAAA,gCACN,KAAK;IAAA;IAAA;IAAA;IAAA,kCAIH,KAAK;IAAA,oCACI,EAAE;IAAA;IAAA,kCAEX,CAAC;IAAA,+BAEkB;MACtCkQ,KAAK,EAAE,IAAI,CAACC,CAAC,EAAE;MACfC,gBAAgB,EAAE,IAAI,CAACD,CAAC,EAAE;MAC1BE,IAAI,EAAE,IAAI,CAACF,CAAC,EAAE;MACdG,WAAW,EAAE,IAAI,CAACH,CAAC,EAAE;MACrBI,SAAS,EAAE,IAAI,CAACJ,CAAC,EAAE;MACnBK,SAAS,EAAE,IAAI,CAACL,CAAC,EAAE;MACnBM,gBAAgB,EAAE,IAAI,CAACN,CAAC,EAAE;MAC1BO,OAAO,EAAE,IAAI,CAACP,CAAC,EAAE;MACjBQ,cAAc,EAAE,IAAI,CAACR,CAAC,EAAE;MACxBS,WAAW,EAAE,IAAI,CAACT,CAAC,EAAE;MACrBU,kBAAkB,EAAE,IAAI,CAACV,CAAC,EAAE;MAC5BW,gBAAgB,EAAE,IAAI,CAACX,CAAC,EAAE;MAC1BY,OAAO,EAAE,IAAI,CAACZ,CAAC,EAAE;MACjBa,cAAc,EAAE,IAAI,CAACb,CAAC,EAAE;MACxBc,aAAa,EAAE,IAAI,CAACd,CAAC,EAAE;MACvBe,KAAK,EAAE,IAAI,CAACf,CAAC,EAAE;MACfgB,YAAY,EAAE,IAAI,CAAChB,CAAC,EAAE;MACtBiB,cAAc,EAAE,IAAI,CAACjB,CAAC,EAAE;MACxBkB,SAAS,EAAE,IAAI,CAAClB,CAAC,EAAE;MACnBmB,cAAc,EAAE,IAAI,CAACnB,CAAC,EAAE;MACxBoB,gBAAgB,EAAE,IAAI,CAACpB,CAAC,EAAE;MAC1BqB,QAAQ,EAAE,IAAI,CAACrB,CAAC,EAAE;MAClBsB,cAAc,EAAE,IAAI,CAACtB,CAAC,EAAE;MACxBuB,MAAM,EAAE,IAAI,CAACvB,CAAC,EAAE;MAChBwB,WAAW,EAAE,IAAI,CAACxB,CAAC,EAAE;MACrByB,qBAAqB,EAAE,IAAI,CAACzB,CAAC,EAAE;MAC/B0B,YAAY,EAAE,IAAI,CAAC1B,CAAC,EAAE;MACtB2B,mBAAmB,EAAE,IAAI,CAAC3B,CAAC,EAAE;MAC7B4B,mBAAmB,EAAE,IAAI,CAAC5B,CAAC,EAAE;MAC7B6B,qBAAqB,EAAE,IAAI,CAAC7B,CAAC,EAAE;MAC/B8B,qBAAqB,EAAE,IAAI,CAAC9B,CAAC,EAAE;MAC/B+B,qBAAqB,EAAE,IAAI,CAAC/B,CAAC,EAAE;MAC/BgC,SAAS,EAAE,IAAI,CAAChC,CAAC,EAAE;MACnBiC,mBAAmB,EAAE,IAAI,CAACjC,CAAC,EAAE;MAC7BkC,MAAM,EAAE,IAAI,CAAClC,CAAC,EAAE;MAChBmC,aAAa,EAAE,IAAI,CAACnC,CAAC;IACvB,CAAC;IAAA,iCAEoC7Q,OAAO;IAAA,+BAE5B,SAAS;IAAA,iCACP,SAAS;IAAA,uCACH,sCAAsC;IAAA,yCACpC,+BAA+B;IAAA,gCAClC;MACrBiT,GAAG,EAAE,IAAI,CAACC,aAAa;MACvBxT,KAAK,EAAE,IAAI,CAACyT;IACd,CAAC;IAAA;IAAA;IAAA,kCAGkB,EAAE;IAAA;IAAA;IAAA;IAAA;IAAA,gCAKJ,EAAE;IAAA;IAAA;IAAA,+BAGH,EAAE;IAAA,gCACD,EAAE;IAAA,0CACQ,CAAC;IAG1B,IAAI,CAACtC,CAAC,GAAG,CAAC;IAEV,KAAK,MAAMuC,CAAC,IAAI,IAAI,CAACC,KAAK,EAAE;MAC1B,IAAI,IAAI,CAACA,KAAK,CAACC,cAAc,CAACF,CAAC,CAAC,EAAE;QAChC,IAAI,CAACC,KAAK,CAAC,IAAI,CAACA,KAAK,CAACD,CAAC,CAAC,CAAC,GAAGA,CAAC;MAC/B;IACF;;IAGA,IAAI,CAACvC,CAAC,GAAG,IAAI,CAACwC,KAAK;EACrB;EAEA,OAAeE,MAAM,CAACC,KAAa,EAAEC,CAAS,EAAU;IACtD,IAAIC,MAAM,GAAG,EAAE;IACf,IAAID,CAAC,GAAGD,KAAK,CAACG,MAAM,EAAE;MACpBD,MAAM,GAAGF,KAAK,CAACD,MAAM,CAACE,CAAC,CAAC;IAC1B;IACA,OAAOC,MAAM;EACf;EAEA,OAAeE,YAAY,CAACC,CAAS,EAAW;IAC9C,OAAOA,CAAC,KAAK,GAAG,IAAIA,CAAC,KAAK,IAAI,IAAIA,CAAC,KAAK,IAAI,IAAIA,CAAC,KAAK,IAAI;EAC5D;EAEA,OAAeC,OAAO,CAACD,CAAS,EAAW;IACzC,OAAOA,CAAC,KAAK,GAAG,IAAIA,CAAC,KAAK,GAAG;EAC/B;EAEA,OAAeE,WAAW,CAACF,CAAS,EAAW;IAC7C,OAAOA,CAAC,KAAK,GAAG,IAAInD,GAAG,CAACkD,YAAY,CAACC,CAAC,CAAC;EACzC;EAEA,OAAeG,OAAO,CAACC,KAAa,EAAEJ,CAAS,EAAW;IACxD,OAAOI,KAAK,CAACC,IAAI,CAACL,CAAC,CAAC;EACtB;EAEA,OAAeM,QAAQ,CAACF,KAAa,EAAEJ,CAAS,EAAW;IACzD,OAAO,CAACnD,GAAG,CAACsD,OAAO,CAACC,KAAK,EAAEJ,CAAC,CAAC;EAC/B;EAEA,OAAeO,KAAK,CAClBC,IAAY,EACZC,SAA4B,EACK;IACjC,MAAMb,CAAC,GAAGY,IAAI,CAACE,OAAO,CAAC,GAAG,CAAC;IAC3B,MAAMC,QAAQ,GAAGf,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE,EAAEY,IAAI,CAAC,GAAGA,IAAI,CAACI,KAAK,CAAC,GAAG,CAAC;IACrD,IAAIC,MAAM,GAAGF,QAAQ,CAAC,CAAC,CAAC;IACxB,IAAIG,KAAK,GAAGH,QAAQ,CAAC,CAAC,CAAC;;IAGvB,IAAIF,SAAS,IAAID,IAAI,KAAK,OAAO,EAAE;MACjCK,MAAM,GAAG,OAAO;MAChBC,KAAK,GAAG,EAAE;IACZ;IAEA,OAAO;MAACD,MAAM;MAAEC;IAAK,CAAC;EACxB;EAEAC,KAAK,CAACpB,KAA6B,EAAoB;IACrD,IAAI,IAAI,CAACqB,KAAK,EAAE;MACd,MAAM,IAAI,CAACA,KAAK;IAClB;IACA,IAAI,IAAI,CAACC,MAAM,EAAE;MACf,OAAO,IAAI,CAACC,aAAa,CAAC,sDAAsD,CAAC;IACnF;IACA,IAAIvB,KAAK,KAAK,IAAI,EAAE;MAClB,OAAO,IAAI,CAACwB,GAAG,EAAE;IACnB;IACA,IAAI,OAAOxB,KAAK,KAAK,QAAQ,EAAE;MAC7BA,KAAK,GAAGA,KAAK,CAACyB,QAAQ,EAAE;IAC1B;IACA,IAAIxB,CAAC,GAAG,CAAC;IACT,IAAII,CAAS;IACb,OAAO,IAAI,EAAE;MACXA,CAAC,GAAGnD,GAAG,CAAC6C,MAAM,CAACC,KAAK,EAAEC,CAAC,EAAE,CAAC;MAC1B,IAAI,CAACI,CAAC,GAAGA,CAAC;MAEV,IAAI,CAACA,CAAC,EAAE;QACN;MACF;MAEA,IAAI,IAAI,CAACqB,aAAa,EAAE;QACtB,IAAI,CAACtV,QAAQ,EAAE;QACf,IAAIiU,CAAC,KAAK,IAAI,EAAE;UACd,IAAI,CAACsB,IAAI,EAAE;UACX,IAAI,CAACC,MAAM,GAAG,CAAC;QACjB,CAAC,MAAM;UACL,IAAI,CAACA,MAAM,EAAE;QACf;MACF;MAEA,QAAQ,IAAI,CAACC,KAAK;QAChB,KAAK,IAAI,CAACxE,CAAC,CAACD,KAAK;UACf,IAAI,CAACyE,KAAK,GAAG,IAAI,CAACxE,CAAC,CAACC,gBAAgB;UACpC,IAAI+C,CAAC,KAAK,QAAQ,EAAE;YAClB;UACF;UACA,IAAI,CAACyB,eAAe,CAACzB,CAAC,CAAC;UACvB;QAEF,KAAK,IAAI,CAAChD,CAAC,CAACC,gBAAgB;UAC1B,IAAI,CAACwE,eAAe,CAACzB,CAAC,CAAC;UACvB;QAEF,KAAK,IAAI,CAAChD,CAAC,CAACE,IAAI;UACd,IAAI,IAAI,CAACwE,OAAO,IAAI,CAAC,IAAI,CAACC,UAAU,EAAE;YACpC,MAAMC,MAAM,GAAGhC,CAAC,GAAG,CAAC;YACpB,OAAOI,CAAC,IAAIA,CAAC,KAAK,GAAG,IAAIA,CAAC,KAAK,GAAG,EAAE;cAClCA,CAAC,GAAGnD,GAAG,CAAC6C,MAAM,CAACC,KAAK,EAAEC,CAAC,EAAE,CAAC;cAC1B,IAAII,CAAC,IAAI,IAAI,CAACqB,aAAa,EAAE;gBAC3B,IAAI,CAACtV,QAAQ,EAAE;gBACf,IAAIiU,CAAC,KAAK,IAAI,EAAE;kBACd,IAAI,CAACsB,IAAI,EAAE;kBACX,IAAI,CAACC,MAAM,GAAG,CAAC;gBACjB,CAAC,MAAM;kBACL,IAAI,CAACA,MAAM,EAAE;gBACf;cACF;YACF;YACA,IAAI,CAACM,QAAQ,IAAIlC,KAAK,CAACmC,SAAS,CAACF,MAAM,EAAEhC,CAAC,GAAG,CAAC,CAAC;UACjD;UACA,IAAII,CAAC,KAAK,GAAG,IAAI,EAAE,IAAI,CAAC0B,OAAO,IAAI,IAAI,CAACC,UAAU,IAAI,CAAC,IAAI,CAACpW,MAAM,CAAC,EAAE;YACnE,IAAI,CAACiW,KAAK,GAAG,IAAI,CAACxE,CAAC,CAACI,SAAS;YAC7B,IAAI,CAAC2E,gBAAgB,GAAG,IAAI,CAAChW,QAAQ;UACvC,CAAC,MAAM;YACL,IAAI,CAAC8Q,GAAG,CAACkD,YAAY,CAACC,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC0B,OAAO,IAAI,IAAI,CAACC,UAAU,CAAC,EAAE;cAC9D,IAAI,CAACK,UAAU,CAAC,iCAAiC,CAAC;YACpD;YACA,IAAIhC,CAAC,KAAK,GAAG,EAAE;cACb,IAAI,CAACwB,KAAK,GAAG,IAAI,CAACxE,CAAC,CAACG,WAAW;YACjC,CAAC,MAAM;cACL,IAAI,CAAC0E,QAAQ,IAAI7B,CAAC;YACpB;UACF;UACA;QAEF,KAAK,IAAI,CAAChD,CAAC,CAACkC,MAAM;UAEhB,IAAIc,CAAC,KAAK,GAAG,EAAE;YACb,IAAI,CAACwB,KAAK,GAAG,IAAI,CAACxE,CAAC,CAACmC,aAAa;UACnC,CAAC,MAAM;YACL,IAAI,CAAC8C,MAAM,IAAIjC,CAAC;UAClB;UACA;QAEF,KAAK,IAAI,CAAChD,CAAC,CAACmC,aAAa;UACvB,IAAIa,CAAC,KAAK,GAAG,EAAE;YACb,IAAI,CAACwB,KAAK,GAAG,IAAI,CAACxE,CAAC,CAACgC,SAAS;UAC/B,CAAC,MAAM;YACL,IAAI,CAACiD,MAAM,eAAQjC,CAAC,CAAE;YACtB,IAAI,CAACwB,KAAK,GAAG,IAAI,CAACxE,CAAC,CAACkC,MAAM;UAC5B;UACA;QAEF,KAAK,IAAI,CAAClC,CAAC,CAACI,SAAS;UAEnB,IAAI4C,CAAC,KAAK,GAAG,EAAE;YACb,IAAI,CAACwB,KAAK,GAAG,IAAI,CAACxE,CAAC,CAACK,SAAS;YAC7B,IAAI,CAAC6E,QAAQ,GAAG,EAAE;UACpB,CAAC,MAAM,IAAIrF,GAAG,CAACkD,YAAY,CAACC,CAAC,CAAC,EAAE;UAEhC,CAAC,MAAM,IAAInD,GAAG,CAACsD,OAAO,CAAC/T,SAAS,EAAE4T,CAAC,CAAC,EAAE;YACpC,IAAI,CAACwB,KAAK,GAAG,IAAI,CAACxE,CAAC,CAACqB,QAAQ;YAC5B,IAAI,CAAC8D,OAAO,GAAGnC,CAAC;UAClB,CAAC,MAAM,IAAIA,CAAC,KAAK,GAAG,EAAE;YACpB,IAAI,CAACwB,KAAK,GAAG,IAAI,CAACxE,CAAC,CAACgC,SAAS;YAC7B,IAAI,CAACmD,OAAO,GAAG,EAAE;UACnB,CAAC,MAAM,IAAInC,CAAC,KAAK,GAAG,EAAE;YACpB,IAAI,CAACwB,KAAK,GAAG,IAAI,CAACxE,CAAC,CAACkB,SAAS;YAC7B,IAAI,CAACkE,YAAY,GAAG,IAAI,CAACC,YAAY,GAAG,EAAE;UAC5C,CAAC,MAAM;YACL,IAAI,CAACL,UAAU,CAAC,aAAa,CAAC;YAE9B,IAAI,IAAI,CAACD,gBAAgB,GAAG,CAAC,GAAG,IAAI,CAAChW,QAAQ,EAAE;cAC7C,MAAMuW,GAAG,GAAG,IAAI,CAACvW,QAAQ,GAAG,IAAI,CAACgW,gBAAgB;cACjD/B,CAAC,GAAG,IAAIuC,KAAK,CAACD,GAAG,CAAC,CAACE,IAAI,CAAC,GAAG,CAAC,GAAGxC,CAAC;YAClC;YACA,IAAI,CAAC6B,QAAQ,eAAQ7B,CAAC,CAAE;YACxB,IAAI,CAACwB,KAAK,GAAG,IAAI,CAACxE,CAAC,CAACE,IAAI;UAC1B;UACA;QAEF,KAAK,IAAI,CAACF,CAAC,CAACK,SAAS;UACnB,IAAI,CAAC,IAAI,CAAC6E,QAAQ,GAAGlC,CAAC,EAAEyC,WAAW,EAAE,KAAK,IAAI,CAAC1E,KAAK,EAAE;YACpD,IAAI,CAAC2E,QAAQ,CAAC,aAAa,CAAC;YAC5B,IAAI,CAAClB,KAAK,GAAG,IAAI,CAACxE,CAAC,CAACe,KAAK;YACzB,IAAI,CAACmE,QAAQ,GAAG,EAAE;YAClB,IAAI,CAACS,KAAK,GAAG,EAAE;UACjB,CAAC,MAAM,IAAI,IAAI,CAACT,QAAQ,GAAGlC,CAAC,KAAK,IAAI,EAAE;YACrC,IAAI,CAACwB,KAAK,GAAG,IAAI,CAACxE,CAAC,CAACY,OAAO;YAC3B,IAAI,CAACgF,OAAO,GAAG,EAAE;YACjB,IAAI,CAACV,QAAQ,GAAG,EAAE;UACpB,CAAC,MAAM,IAAI,CAAC,IAAI,CAACA,QAAQ,GAAGlC,CAAC,EAAEyC,WAAW,EAAE,KAAK,IAAI,CAAClF,OAAO,EAAE;YAC7D,IAAI,CAACiE,KAAK,GAAG,IAAI,CAACxE,CAAC,CAACO,OAAO;YAC3B,IAAI,IAAI,CAACsF,OAAO,IAAI,IAAI,CAACnB,OAAO,EAAE;cAChC,IAAI,CAACM,UAAU,CAAC,6CAA6C,CAAC;YAChE;YACA,IAAI,CAACa,OAAO,GAAG,EAAE;YACjB,IAAI,CAACX,QAAQ,GAAG,EAAE;UACpB,CAAC,MAAM,IAAIlC,CAAC,KAAK,GAAG,EAAE;YACpB,IAAI,CAAC0C,QAAQ,CAAC,mBAAmB,EAAE,IAAI,CAACR,QAAQ,CAAC;YACjD,IAAI,CAACA,QAAQ,GAAG,EAAE;YAClB,IAAI,CAACV,KAAK,GAAG,IAAI,CAACxE,CAAC,CAACE,IAAI;UAC1B,CAAC,MAAM,IAAIL,GAAG,CAACoD,OAAO,CAACD,CAAC,CAAC,EAAE;YACzB,IAAI,CAACwB,KAAK,GAAG,IAAI,CAACxE,CAAC,CAACM,gBAAgB;YACpC,IAAI,CAAC4E,QAAQ,IAAIlC,CAAC;UACpB,CAAC,MAAM;YACL,IAAI,CAACkC,QAAQ,IAAIlC,CAAC;UACpB;UACA;QAEF,KAAK,IAAI,CAAChD,CAAC,CAACM,gBAAgB;UAC1B,IAAI0C,CAAC,KAAK,IAAI,CAAC8C,CAAC,EAAE;YAChB,IAAI,CAACtB,KAAK,GAAG,IAAI,CAACxE,CAAC,CAACK,SAAS;YAC7B,IAAI,CAACyF,CAAC,GAAG,EAAE;UACb;UACA,IAAI,CAACZ,QAAQ,IAAIlC,CAAC;UAClB;QAEF,KAAK,IAAI,CAAChD,CAAC,CAACO,OAAO;UACjB,IAAIyC,CAAC,KAAK,GAAG,EAAE;YACb,IAAI,CAACwB,KAAK,GAAG,IAAI,CAACxE,CAAC,CAACE,IAAI;YACxB,IAAI,CAACwF,QAAQ,CAAC,WAAW,EAAE,IAAI,CAACG,OAAO,CAAC;YACxC,IAAI,CAACA,OAAO,GAAG,IAAI;UACrB,CAAC,MAAM;YACL,IAAI,CAACA,OAAO,IAAI7C,CAAC;YACjB,IAAIA,CAAC,KAAK,GAAG,EAAE;cACb,IAAI,CAACwB,KAAK,GAAG,IAAI,CAACxE,CAAC,CAACS,WAAW;YACjC,CAAC,MAAM,IAAIZ,GAAG,CAACoD,OAAO,CAACD,CAAC,CAAC,EAAE;cACzB,IAAI,CAACwB,KAAK,GAAG,IAAI,CAACxE,CAAC,CAACQ,cAAc;cAClC,IAAI,CAACsF,CAAC,GAAG9C,CAAC;YACZ;UACF;UACA;QAEF,KAAK,IAAI,CAAChD,CAAC,CAACQ,cAAc;UACxB,IAAI,CAACqF,OAAO,IAAI7C,CAAC;UACjB,IAAIA,CAAC,KAAK,IAAI,CAAC8C,CAAC,EAAE;YAChB,IAAI,CAACA,CAAC,GAAG,EAAE;YACX,IAAI,CAACtB,KAAK,GAAG,IAAI,CAACxE,CAAC,CAACO,OAAO;UAC7B;UACA;QAEF,KAAK,IAAI,CAACP,CAAC,CAACS,WAAW;UACrB,IAAI,CAACoF,OAAO,IAAI7C,CAAC;UACjB,IAAIA,CAAC,KAAK,GAAG,EAAE;YACb,IAAI,CAACwB,KAAK,GAAG,IAAI,CAACxE,CAAC,CAACO,OAAO;UAC7B,CAAC,MAAM,IAAIV,GAAG,CAACoD,OAAO,CAACD,CAAC,CAAC,EAAE;YACzB,IAAI,CAACwB,KAAK,GAAG,IAAI,CAACxE,CAAC,CAACU,kBAAkB;YACtC,IAAI,CAACoF,CAAC,GAAG9C,CAAC;UACZ;UACA;QAEF,KAAK,IAAI,CAAChD,CAAC,CAACU,kBAAkB;UAC5B,IAAI,CAACmF,OAAO,IAAI7C,CAAC;UACjB,IAAIA,CAAC,KAAK,IAAI,CAAC8C,CAAC,EAAE;YAChB,IAAI,CAACtB,KAAK,GAAG,IAAI,CAACxE,CAAC,CAACS,WAAW;YAC/B,IAAI,CAACqF,CAAC,GAAG,EAAE;UACb;UACA;QAEF,KAAK,IAAI,CAAC9F,CAAC,CAACY,OAAO;UACjB,IAAIoC,CAAC,KAAK,GAAG,EAAE;YACb,IAAI,CAACwB,KAAK,GAAG,IAAI,CAACxE,CAAC,CAACa,cAAc;UACpC,CAAC,MAAM;YACL,IAAI,CAAC+E,OAAO,IAAI5C,CAAC;UACnB;UACA;QAEF,KAAK,IAAI,CAAChD,CAAC,CAACa,cAAc;UACxB,IAAImC,CAAC,KAAK,GAAG,EAAE;YACb,IAAI,CAACwB,KAAK,GAAG,IAAI,CAACxE,CAAC,CAACc,aAAa;YACjC,IAAI,CAAC8E,OAAO,GAAG,IAAI,CAACG,gBAAgB,CAAC,IAAI,CAACH,OAAO,CAAC;YAClD,IAAI,IAAI,CAACA,OAAO,EAAE;cAChB,IAAI,CAACF,QAAQ,CAAC,WAAW,EAAE,IAAI,CAACE,OAAO,CAAC;YAC1C;YACA,IAAI,CAACA,OAAO,GAAG,EAAE;UACnB,CAAC,MAAM;YACL,IAAI,CAACA,OAAO,eAAQ5C,CAAC,CAAE;YACvB,IAAI,CAACwB,KAAK,GAAG,IAAI,CAACxE,CAAC,CAACY,OAAO;UAC7B;UACA;QAEF,KAAK,IAAI,CAACZ,CAAC,CAACc,aAAa;UACvB,IAAIkC,CAAC,KAAK,GAAG,EAAE;YACb,IAAI,CAACgC,UAAU,CAAC,mBAAmB,CAAC;YAGpC,IAAI,CAACY,OAAO,gBAAS5C,CAAC,CAAE;YACxB,IAAI,CAACwB,KAAK,GAAG,IAAI,CAACxE,CAAC,CAACY,OAAO;UAC7B,CAAC,MAAM;YACL,IAAI,CAAC4D,KAAK,GAAG,IAAI,CAACxE,CAAC,CAACE,IAAI;UAC1B;UACA;QAEF,KAAK,IAAI,CAACF,CAAC,CAACe,KAAK;UACf,IAAIiC,CAAC,KAAK,GAAG,EAAE;YACb,IAAI,CAACwB,KAAK,GAAG,IAAI,CAACxE,CAAC,CAACgB,YAAY;UAClC,CAAC,MAAM;YACL,IAAI,CAAC2E,KAAK,IAAI3C,CAAC;UACjB;UACA;QAEF,KAAK,IAAI,CAAChD,CAAC,CAACgB,YAAY;UACtB,IAAIgC,CAAC,KAAK,GAAG,EAAE;YACb,IAAI,CAACwB,KAAK,GAAG,IAAI,CAACxE,CAAC,CAACiB,cAAc;UACpC,CAAC,MAAM;YACL,IAAI,CAAC0E,KAAK,eAAQ3C,CAAC,CAAE;YACrB,IAAI,CAACwB,KAAK,GAAG,IAAI,CAACxE,CAAC,CAACe,KAAK;UAC3B;UACA;QAEF,KAAK,IAAI,CAACf,CAAC,CAACiB,cAAc;UACxB,IAAI+B,CAAC,KAAK,GAAG,EAAE;YACb,IAAI,IAAI,CAAC2C,KAAK,EAAE;cACd,IAAI,CAACD,QAAQ,CAAC,SAAS,EAAE,IAAI,CAACC,KAAK,CAAC;YACtC;YACA,IAAI,CAACD,QAAQ,CAAC,cAAc,CAAC;YAC7B,IAAI,CAACC,KAAK,GAAG,EAAE;YACf,IAAI,CAACnB,KAAK,GAAG,IAAI,CAACxE,CAAC,CAACE,IAAI;UAC1B,CAAC,MAAM,IAAI8C,CAAC,KAAK,GAAG,EAAE;YACpB,IAAI,CAAC2C,KAAK,IAAI,GAAG;UACnB,CAAC,MAAM;YACL,IAAI,CAACA,KAAK,gBAAS3C,CAAC,CAAE;YACtB,IAAI,CAACwB,KAAK,GAAG,IAAI,CAACxE,CAAC,CAACe,KAAK;UAC3B;UACA;QAEF,KAAK,IAAI,CAACf,CAAC,CAACkB,SAAS;UACnB,IAAI8B,CAAC,KAAK,GAAG,EAAE;YACb,IAAI,CAACwB,KAAK,GAAG,IAAI,CAACxE,CAAC,CAACoB,gBAAgB;UACtC,CAAC,MAAM,IAAIvB,GAAG,CAACkD,YAAY,CAACC,CAAC,CAAC,EAAE;YAC9B,IAAI,CAACwB,KAAK,GAAG,IAAI,CAACxE,CAAC,CAACmB,cAAc;UACpC,CAAC,MAAM;YACL,IAAI,CAACiE,YAAY,IAAIpC,CAAC;UACxB;UACA;QAEF,KAAK,IAAI,CAAChD,CAAC,CAACmB,cAAc;UACxB,IAAI,CAAC,IAAI,CAACkE,YAAY,IAAIxF,GAAG,CAACkD,YAAY,CAACC,CAAC,CAAC,EAAE;YAC7C;UACF,CAAC,MAAM,IAAIA,CAAC,KAAK,GAAG,EAAE;YACpB,IAAI,CAACwB,KAAK,GAAG,IAAI,CAACxE,CAAC,CAACoB,gBAAgB;UACtC,CAAC,MAAM;YACL,IAAI,CAACiE,YAAY,IAAIrC,CAAC;UACxB;UACA;QAEF,KAAK,IAAI,CAAChD,CAAC,CAACoB,gBAAgB;UAC1B,IAAI4B,CAAC,KAAK,GAAG,EAAE;YACb,IAAI,CAAC0C,QAAQ,CAAC,yBAAyB,EAAE;cACvClC,IAAI,EAAE,IAAI,CAAC4B,YAAY;cACvBY,IAAI,EAAE,IAAI,CAACX;YACb,CAAC,CAAC;YACF,IAAI,CAACD,YAAY,GAAG,IAAI,CAACC,YAAY,GAAG,EAAE;YAC1C,IAAI,CAACb,KAAK,GAAG,IAAI,CAACxE,CAAC,CAACE,IAAI;UAC1B,CAAC,MAAM;YACL,IAAI,CAACmF,YAAY,eAAQrC,CAAC,CAAE;YAC5B,IAAI,CAACwB,KAAK,GAAG,IAAI,CAACxE,CAAC,CAACmB,cAAc;UACpC;UACA;QAEF,KAAK,IAAI,CAACnB,CAAC,CAACqB,QAAQ;UAClB,IAAIxB,GAAG,CAACsD,OAAO,CAAC9T,QAAQ,EAAE2T,CAAC,CAAC,EAAE;YAC5B,IAAI,CAACmC,OAAO,IAAInC,CAAC;UACnB,CAAC,MAAM;YACL,IAAI,CAACiD,MAAM,EAAE;YACb,IAAIjD,CAAC,KAAK,GAAG,EAAE;cACb,IAAI,CAACkD,OAAO,EAAE;YAChB,CAAC,MAAM,IAAIlD,CAAC,KAAK,GAAG,EAAE;cACpB,IAAI,CAACwB,KAAK,GAAG,IAAI,CAACxE,CAAC,CAACsB,cAAc;YACpC,CAAC,MAAM;cACL,IAAI,CAACzB,GAAG,CAACkD,YAAY,CAACC,CAAC,CAAC,EAAE;gBACxB,IAAI,CAACgC,UAAU,CAAC,+BAA+B,CAAC;cAClD;cACA,IAAI,CAACR,KAAK,GAAG,IAAI,CAACxE,CAAC,CAACuB,MAAM;YAC5B;UACF;UACA;QAEF,KAAK,IAAI,CAACvB,CAAC,CAACsB,cAAc;UACxB,IAAI0B,CAAC,KAAK,GAAG,EAAE;YACb,IAAI,CAACkD,OAAO,CAAC,IAAI,CAAC;YAClB,IAAI,CAACC,QAAQ,EAAE;UACjB,CAAC,MAAM;YACL,IAAI,CAACnB,UAAU,CAAC,gDAAgD,CAAC;YACjE,IAAI,CAACR,KAAK,GAAG,IAAI,CAACxE,CAAC,CAACuB,MAAM;UAC5B;UACA;QAEF,KAAK,IAAI,CAACvB,CAAC,CAACuB,MAAM;UAEhB,IAAI1B,GAAG,CAACkD,YAAY,CAACC,CAAC,CAAC,EAAE;YACvB;UACF,CAAC,MAAM,IAAIA,CAAC,KAAK,GAAG,EAAE;YACpB,IAAI,CAACkD,OAAO,EAAE;UAChB,CAAC,MAAM,IAAIlD,CAAC,KAAK,GAAG,EAAE;YACpB,IAAI,CAACwB,KAAK,GAAG,IAAI,CAACxE,CAAC,CAACsB,cAAc;UACpC,CAAC,MAAM,IAAIzB,GAAG,CAACsD,OAAO,CAAC/T,SAAS,EAAE4T,CAAC,CAAC,EAAE;YACpC,IAAI,CAACoD,UAAU,GAAGpD,CAAC;YACnB,IAAI,CAACqD,WAAW,GAAG,EAAE;YACrB,IAAI,CAAC7B,KAAK,GAAG,IAAI,CAACxE,CAAC,CAACwB,WAAW;UACjC,CAAC,MAAM;YACL,IAAI,CAACwD,UAAU,CAAC,wBAAwB,CAAC;UAC3C;UACA;QAEF,KAAK,IAAI,CAAChF,CAAC,CAACwB,WAAW;UACrB,IAAIwB,CAAC,KAAK,GAAG,EAAE;YACb,IAAI,CAACwB,KAAK,GAAG,IAAI,CAACxE,CAAC,CAAC0B,YAAY;UAClC,CAAC,MAAM,IAAIsB,CAAC,KAAK,GAAG,EAAE;YACpB,IAAI,CAACgC,UAAU,CAAC,yBAAyB,CAAC;YAC1C,IAAI,CAACqB,WAAW,GAAG,IAAI,CAACD,UAAU;YAClC,IAAI,CAACE,MAAM,EAAE;YACb,IAAI,CAACJ,OAAO,EAAE;UAChB,CAAC,MAAM,IAAIrG,GAAG,CAACkD,YAAY,CAACC,CAAC,CAAC,EAAE;YAC9B,IAAI,CAACwB,KAAK,GAAG,IAAI,CAACxE,CAAC,CAACyB,qBAAqB;UAC3C,CAAC,MAAM,IAAI5B,GAAG,CAACsD,OAAO,CAAC9T,QAAQ,EAAE2T,CAAC,CAAC,EAAE;YACnC,IAAI,CAACoD,UAAU,IAAIpD,CAAC;UACtB,CAAC,MAAM;YACL,IAAI,CAACgC,UAAU,CAAC,wBAAwB,CAAC;UAC3C;UACA;QAEF,KAAK,IAAI,CAAChF,CAAC,CAACyB,qBAAqB;UAC/B,IAAIuB,CAAC,KAAK,GAAG,EAAE;YACb,IAAI,CAACwB,KAAK,GAAG,IAAI,CAACxE,CAAC,CAAC0B,YAAY;UAClC,CAAC,MAAM,IAAI7B,GAAG,CAACkD,YAAY,CAACC,CAAC,CAAC,EAAE;YAC9B;UACF,CAAC,MAAM;YACL,IAAI,CAACgC,UAAU,CAAC,yBAAyB,CAAC;YAC1C,IAAI,CAACuB,GAAG,CAACC,UAAU,CAAC,IAAI,CAACJ,UAAU,CAAC,GAAG,EAAE;YACzC,IAAI,CAACC,WAAW,GAAG,EAAE;YACrB,IAAI,CAACX,QAAQ,CAAC,aAAa,EAAE;cAC3BlC,IAAI,EAAE,IAAI,CAAC4C,UAAU;cACrBK,KAAK,EAAE;YACT,CAAC,CAAC;YACF,IAAI,CAACL,UAAU,GAAG,EAAE;YACpB,IAAIpD,CAAC,KAAK,GAAG,EAAE;cACb,IAAI,CAACkD,OAAO,EAAE;YAChB,CAAC,MAAM,IAAIrG,GAAG,CAACsD,OAAO,CAAC/T,SAAS,EAAE4T,CAAC,CAAC,EAAE;cACpC,IAAI,CAACoD,UAAU,GAAGpD,CAAC;cACnB,IAAI,CAACwB,KAAK,GAAG,IAAI,CAACxE,CAAC,CAACwB,WAAW;YACjC,CAAC,MAAM;cACL,IAAI,CAACwD,UAAU,CAAC,wBAAwB,CAAC;cACzC,IAAI,CAACR,KAAK,GAAG,IAAI,CAACxE,CAAC,CAACuB,MAAM;YAC5B;UACF;UACA;QAEF,KAAK,IAAI,CAACvB,CAAC,CAAC0B,YAAY;UACtB,IAAI7B,GAAG,CAACkD,YAAY,CAACC,CAAC,CAAC,EAAE;YACvB;UACF,CAAC,MAAM,IAAInD,GAAG,CAACoD,OAAO,CAACD,CAAC,CAAC,EAAE;YACzB,IAAI,CAAC8C,CAAC,GAAG9C,CAAC;YACV,IAAI,CAACwB,KAAK,GAAG,IAAI,CAACxE,CAAC,CAAC2B,mBAAmB;UACzC,CAAC,MAAM;YACL,IAAI,CAACqD,UAAU,CAAC,0BAA0B,CAAC;YAC3C,IAAI,CAACR,KAAK,GAAG,IAAI,CAACxE,CAAC,CAAC6B,qBAAqB;YACzC,IAAI,CAACwE,WAAW,GAAGrD,CAAC;UACtB;UACA;QAEF,KAAK,IAAI,CAAChD,CAAC,CAAC2B,mBAAmB;UAC7B,IAAIqB,CAAC,KAAK,IAAI,CAAC8C,CAAC,EAAE;YAChB,IAAI9C,CAAC,KAAK,GAAG,EAAE;cACb,IAAI,CAACwB,KAAK,GAAG,IAAI,CAACxE,CAAC,CAAC8B,qBAAqB;YAC3C,CAAC,MAAM;cACL,IAAI,CAACuE,WAAW,IAAIrD,CAAC;YACvB;YACA;UACF;UACA,IAAI,CAACsD,MAAM,EAAE;UACb,IAAI,CAACR,CAAC,GAAG,EAAE;UACX,IAAI,CAACtB,KAAK,GAAG,IAAI,CAACxE,CAAC,CAAC4B,mBAAmB;UACvC;QAEF,KAAK,IAAI,CAAC5B,CAAC,CAAC4B,mBAAmB;UAC7B,IAAI/B,GAAG,CAACkD,YAAY,CAACC,CAAC,CAAC,EAAE;YACvB,IAAI,CAACwB,KAAK,GAAG,IAAI,CAACxE,CAAC,CAACuB,MAAM;UAC5B,CAAC,MAAM,IAAIyB,CAAC,KAAK,GAAG,EAAE;YACpB,IAAI,CAACkD,OAAO,EAAE;UAChB,CAAC,MAAM,IAAIlD,CAAC,KAAK,GAAG,EAAE;YACpB,IAAI,CAACwB,KAAK,GAAG,IAAI,CAACxE,CAAC,CAACsB,cAAc;UACpC,CAAC,MAAM,IAAIzB,GAAG,CAACsD,OAAO,CAAC/T,SAAS,EAAE4T,CAAC,CAAC,EAAE;YACpC,IAAI,CAACgC,UAAU,CAAC,kCAAkC,CAAC;YACnD,IAAI,CAACoB,UAAU,GAAGpD,CAAC;YACnB,IAAI,CAACqD,WAAW,GAAG,EAAE;YACrB,IAAI,CAAC7B,KAAK,GAAG,IAAI,CAACxE,CAAC,CAACwB,WAAW;UACjC,CAAC,MAAM;YACL,IAAI,CAACwD,UAAU,CAAC,wBAAwB,CAAC;UAC3C;UACA;QAEF,KAAK,IAAI,CAAChF,CAAC,CAAC6B,qBAAqB;UAC/B,IAAI,CAAChC,GAAG,CAACqD,WAAW,CAACF,CAAC,CAAC,EAAE;YACvB,IAAIA,CAAC,KAAK,GAAG,EAAE;cACb,IAAI,CAACwB,KAAK,GAAG,IAAI,CAACxE,CAAC,CAAC+B,qBAAqB;YAC3C,CAAC,MAAM;cACL,IAAI,CAACsE,WAAW,IAAIrD,CAAC;YACvB;YACA;UACF;UACA,IAAI,CAACsD,MAAM,EAAE;UACb,IAAItD,CAAC,KAAK,GAAG,EAAE;YACb,IAAI,CAACkD,OAAO,EAAE;UAChB,CAAC,MAAM;YACL,IAAI,CAAC1B,KAAK,GAAG,IAAI,CAACxE,CAAC,CAACuB,MAAM;UAC5B;UACA;QAEF,KAAK,IAAI,CAACvB,CAAC,CAACgC,SAAS;UACnB,IAAI,CAAC,IAAI,CAACmD,OAAO,EAAE;YACjB,IAAItF,GAAG,CAACkD,YAAY,CAACC,CAAC,CAAC,EAAE;cACvB;YACF,CAAC,MAAM,IAAInD,GAAG,CAACyD,QAAQ,CAAClU,SAAS,EAAE4T,CAAC,CAAC,EAAE;cACrC,IAAI,IAAI,CAACiC,MAAM,EAAE;gBACf,IAAI,CAACA,MAAM,gBAASjC,CAAC,CAAE;gBACvB,IAAI,CAACwB,KAAK,GAAG,IAAI,CAACxE,CAAC,CAACkC,MAAM;cAC5B,CAAC,MAAM;gBACL,IAAI,CAAC8C,UAAU,CAAC,iCAAiC,CAAC;cACpD;YACF,CAAC,MAAM;cACL,IAAI,CAACG,OAAO,GAAGnC,CAAC;YAClB;UACF,CAAC,MAAM,IAAIA,CAAC,KAAK,GAAG,EAAE;YACpB,IAAI,CAACmD,QAAQ,EAAE;UACjB,CAAC,MAAM,IAAItG,GAAG,CAACsD,OAAO,CAAC9T,QAAQ,EAAE2T,CAAC,CAAC,EAAE;YACnC,IAAI,CAACmC,OAAO,IAAInC,CAAC;UACnB,CAAC,MAAM,IAAI,IAAI,CAACiC,MAAM,EAAE;YACtB,IAAI,CAACA,MAAM,gBAAS,IAAI,CAACE,OAAO,CAAE;YAClC,IAAI,CAACA,OAAO,GAAG,EAAE;YACjB,IAAI,CAACX,KAAK,GAAG,IAAI,CAACxE,CAAC,CAACkC,MAAM;UAC5B,CAAC,MAAM;YACL,IAAI,CAACrC,GAAG,CAACkD,YAAY,CAACC,CAAC,CAAC,EAAE;cACxB,IAAI,CAACgC,UAAU,CAAC,gCAAgC,CAAC;YACnD;YACA,IAAI,CAACR,KAAK,GAAG,IAAI,CAACxE,CAAC,CAACiC,mBAAmB;UACzC;UACA;QAEF,KAAK,IAAI,CAACjC,CAAC,CAACiC,mBAAmB;UAC7B,IAAIpC,GAAG,CAACkD,YAAY,CAACC,CAAC,CAAC,EAAE;YACvB;UACF;UACA,IAAIA,CAAC,KAAK,GAAG,EAAE;YACb,IAAI,CAACmD,QAAQ,EAAE;UACjB,CAAC,MAAM;YACL,IAAI,CAACnB,UAAU,CAAC,mCAAmC,CAAC;UACtD;UACA;QAEF,KAAK,IAAI,CAAChF,CAAC,CAACG,WAAW;QACvB,KAAK,IAAI,CAACH,CAAC,CAAC8B,qBAAqB;QACjC,KAAK,IAAI,CAAC9B,CAAC,CAAC+B,qBAAqB;UAC/B,IAAI2E,WAAW;UACf,IAAIC,MAAM;UACV,QAAQ,IAAI,CAACnC,KAAK;YAChB,KAAK,IAAI,CAACxE,CAAC,CAACG,WAAW;cACrBuG,WAAW,GAAG,IAAI,CAAC1G,CAAC,CAACE,IAAI;cACzByG,MAAM,GAAG,UAAU;cACnB;YAEF,KAAK,IAAI,CAAC3G,CAAC,CAAC8B,qBAAqB;cAC/B4E,WAAW,GAAG,IAAI,CAAC1G,CAAC,CAAC2B,mBAAmB;cACxCgF,MAAM,GAAG,aAAa;cACtB;YAEF,KAAK,IAAI,CAAC3G,CAAC,CAAC+B,qBAAqB;cAC/B2E,WAAW,GAAG,IAAI,CAAC1G,CAAC,CAAC6B,qBAAqB;cAC1C8E,MAAM,GAAG,aAAa;cACtB;YAEF;cACE,MAAM,IAAIC,KAAK,0BAAmB,IAAI,CAACpC,KAAK,EAAG;UAAC;UAGpD,IAAIxB,CAAC,KAAK,GAAG,EAAE;YACb,IAAI,CAAC2D,MAAM,CAAC,IAAI,IAAI,CAACE,WAAW,EAAE;YAClC,IAAI,CAACC,MAAM,GAAG,EAAE;YAChB,IAAI,CAACtC,KAAK,GAAGkC,WAAW;UAC1B,CAAC,MAAM,IAAI7G,GAAG,CAACsD,OAAO,CAAC,IAAI,CAAC2D,MAAM,CAAChE,MAAM,GAAGvT,UAAU,GAAGD,WAAW,EAAE0T,CAAC,CAAC,EAAE;YACxE,IAAI,CAAC8D,MAAM,IAAI9D,CAAC;UAClB,CAAC,MAAM;YACL,IAAI,CAACgC,UAAU,CAAC,kCAAkC,CAAC;YACnD,IAAI,CAAC2B,MAAM,CAAC,eAAQ,IAAI,CAACG,MAAM,SAAG9D,CAAC,CAAE;YACrC,IAAI,CAAC8D,MAAM,GAAG,EAAE;YAChB,IAAI,CAACtC,KAAK,GAAGkC,WAAW;UAC1B;UAEA;QAEF;UACE,MAAM,IAAIE,KAAK,0BAAmB,IAAI,CAACpC,KAAK,EAAG;MAAC;IAEtD;;IAEA,IAAI,IAAI,CAACzV,QAAQ,IAAI,IAAI,CAACgY,mBAAmB,EAAE;MAC7C,IAAI,CAACC,iBAAiB,EAAE;IAC1B;IACA,OAAO,IAAI;EACb;EAEUC,IAAI,CAACC,KAAa,EAAEC,IAAiB,EAAQ;IACrD,IAAI,IAAI,CAACC,MAAM,CAAC3E,cAAc,CAACyE,KAAK,CAAC,EAAE;MACrC,MAAMG,SAAS,GAAGH,KAAK,CAACI,OAAO,CAAC,KAAK,EAAE,EAAE,CAAC;MAC1C,IAAI,CAACF,MAAM,CAACF,KAAK,CAAC,CAACC,IAAI,EAAEE,SAAS,EAAE,IAAI,CAAC;IAC3C;EACF;EAEUE,YAAY,GAAS;IAC7B,KAAK,IAAI3E,CAAC,GAAG,CAAC,EAAE4E,CAAC,GAAG,IAAI,CAACrY,OAAO,CAAC2T,MAAM,EAAEF,CAAC,GAAG4E,CAAC,EAAE5E,CAAC,EAAE,EAAE;MACnD,IAAI,CAAC,IAAI,CAACA,CAAC,CAAC,CAAC,GAAG,EAAE;IACpB;EACF;EAEU6E,YAAY,GAAS;IAC7B,IAAI,CAACC,SAAS,EAAE;IAChB,IAAI,IAAI,CAAC/B,KAAK,KAAK,EAAE,EAAE;MACrB,IAAI,CAACD,QAAQ,CAAC,SAAS,EAAE,IAAI,CAACC,KAAK,CAAC;MACpC,IAAI,CAACA,KAAK,GAAG,EAAE;IACjB;IACA,IAAI,IAAI,CAACV,MAAM,KAAK,EAAE,EAAE;MACtB,IAAI,CAACS,QAAQ,CAAC,UAAU,EAAE,IAAI,CAACT,MAAM,CAAC;MACtC,IAAI,CAACA,MAAM,GAAG,EAAE;IAClB;EACF;EAEUd,GAAG,GAAc;IACzB,IAAI,IAAI,CAACO,OAAO,IAAI,CAAC,IAAI,CAACC,UAAU,EAAE,IAAI,CAACK,UAAU,CAAC,mBAAmB,CAAC;IAC1E,IACE,IAAI,CAACR,KAAK,KAAK,IAAI,CAACxE,CAAC,CAACD,KAAK,IAC3B,IAAI,CAACyE,KAAK,KAAK,IAAI,CAACxE,CAAC,CAACC,gBAAgB,IACtC,IAAI,CAACuE,KAAK,KAAK,IAAI,CAACxE,CAAC,CAACE,IAAI,EAC1B;MACA,IAAI,CAACgE,aAAa,CAAC,gBAAgB,CAAC;IACtC;IACA,IAAI,CAACwD,SAAS,EAAE;IAChB,IAAI,CAAC1E,CAAC,GAAG,EAAE;IACX,IAAI,CAACiB,MAAM,GAAG,IAAI;IAClB,IAAI,CAACgD,IAAI,CAAC,OAAO,CAAC;IAClB,OAAO,IAAIU,SAAS,CAAC,IAAI,CAACC,GAAG,CAAC;EAChC;EAEU1D,aAAa,CAAC2D,EAAU,EAAQ;IACxC,IAAI,CAACH,SAAS,EAAE;IAChB,IAAI,IAAI,CAACrD,aAAa,EAAE;MACtBwD,EAAE,sBAAe,IAAI,CAACvD,IAAI,uBAAa,IAAI,CAACC,MAAM,qBAAW,IAAI,CAACvB,CAAC,CAAE;IACvE;IACA,MAAMgB,KAAK,GAAG,IAAI4C,KAAK,CAACiB,EAAE,CAAC;IAC3B,IAAI,CAAC7D,KAAK,GAAGA,KAAK;IAClB,IAAI,CAACiD,IAAI,CAAC,SAAS,EAAEjD,KAAK,CAAC;IAC3B,OAAO,IAAI;EACb;EAEQsC,MAAM,GAAS;IACrB,IAAI,CAAC,IAAI,CAAC/X,MAAM,EAAE;MAChB,IAAI,CAAC6X,UAAU,GAAG,IAAI,CAACA,UAAU,CAAC,IAAI,CAAC0B,SAAS,CAAC,EAAE;IACrD;IAEA,IACE,IAAI,CAACC,UAAU,CAACrE,OAAO,CAAC,IAAI,CAAC0C,UAAU,CAAC,KAAK,CAAC,CAAC,IAC/C,IAAI,CAACG,GAAG,CAACC,UAAU,CAAC/D,cAAc,CAAC,IAAI,CAAC2D,UAAU,CAAC,EACnD;MACA,IAAI,CAACA,UAAU,GAAG,IAAI,CAACC,WAAW,GAAG,EAAE;MACvC;IACF;IAEA,IAAI,IAAI,CAACuB,GAAG,CAAC/Y,KAAK,EAAE;MAClB,MAAMmZ,EAAE,GAAGnI,GAAG,CAAC0D,KAAK,CAAC,IAAI,CAAC6C,UAAU,EAAE,IAAI,CAAC;MAC3C,MAAMvC,MAAM,GAAGmE,EAAE,CAACnE,MAAM;MACxB,MAAMC,KAAK,GAAGkE,EAAE,CAAClE,KAAK;MAEtB,IAAID,MAAM,KAAK,OAAO,EAAE;QAEtB,IAAIC,KAAK,KAAK,KAAK,IAAI,IAAI,CAACuC,WAAW,KAAK,IAAI,CAAChE,aAAa,EAAE;UAC9D,IAAI,CAAC2C,UAAU,CACb,uCAAgC,IAAI,CAAC3C,aAAa,4BAAkB,IAAI,CAACgE,WAAW,CAAE,CACvF;QACH,CAAC,MAAM,IAAIvC,KAAK,KAAK,OAAO,IAAI,IAAI,CAACuC,WAAW,KAAK,IAAI,CAAC/D,eAAe,EAAE;UACzE,IAAI,CAAC0C,UAAU,CACb,yCAAkC,IAAI,CAAC1C,eAAe,4BACzC,IAAI,CAAC+D,WAAW,CAAE,CAChC;QACH,CAAC,MAAM;UACL,MAAME,GAAG,GAAG,IAAI,CAACA,GAAG;UACpB,MAAM0B,MAAM,GAAG,IAAI,CAACC,IAAI,CAAC,IAAI,CAACA,IAAI,CAACpF,MAAM,GAAG,CAAC,CAAC,IAAI,IAAI;UACtD,IAAIyD,GAAG,CAAC4B,EAAE,KAAKF,MAAM,CAACE,EAAE,EAAE;YACxB5B,GAAG,CAAC4B,EAAE,GAAG7I,MAAM,CAAC8I,MAAM,CAACH,MAAM,CAACE,EAAE,CAAC;UACnC;UACA5B,GAAG,CAAC4B,EAAE,CAACrE,KAAK,CAAC,GAAG,IAAI,CAACuC,WAAW;QAClC;MACF;;MAKA,IAAI,CAAC0B,UAAU,CAACM,IAAI,CAAC,CAAC,IAAI,CAACjC,UAAU,EAAE,IAAI,CAACC,WAAW,CAAC,CAAC;IAC3D,CAAC,MAAM;MAEL,IAAI,CAACE,GAAG,CAACC,UAAU,CAAC,IAAI,CAACJ,UAAU,CAAC,GAAG,IAAI,CAACC,WAAW;MACvD,IAAI,CAACX,QAAQ,CAAC,aAAa,EAAE;QAC3BlC,IAAI,EAAE,IAAI,CAAC4C,UAAU;QACrBK,KAAK,EAAE,IAAI,CAACJ;MACd,CAAC,CAAC;IACJ;IAEA,IAAI,CAACD,UAAU,GAAG,IAAI,CAACC,WAAW,GAAG,EAAE;EACzC;EAEQJ,MAAM,GAAS;IACrB,IAAI,CAAC,IAAI,CAAC1X,MAAM,EAAE,IAAI,CAAC4W,OAAO,GAAG,IAAI,CAACA,OAAO,CAAC,IAAI,CAAC2C,SAAS,CAAC,EAAE;IAC/D,MAAMG,MAAM,GAAG,IAAI,CAACC,IAAI,CAAC,IAAI,CAACA,IAAI,CAACpF,MAAM,GAAG,CAAC,CAAC,IAAI,IAAI;IACtD,MAAMyD,GAAQ,GAAI,IAAI,CAACA,GAAG,GAAG;MAAC/C,IAAI,EAAE,IAAI,CAAC2B,OAAO;MAAEqB,UAAU,EAAE,CAAC;IAAC,CAAE;;IAGlE,IAAI,IAAI,CAACoB,GAAG,CAAC/Y,KAAK,EAAE;MAClB0X,GAAG,CAAC4B,EAAE,GAAGF,MAAM,CAACE,EAAE;IACpB;IACA,IAAI,CAACJ,UAAU,CAACjF,MAAM,GAAG,CAAC;IAC1B,IAAI,CAAC4C,QAAQ,CAAC,gBAAgB,EAAEa,GAAG,CAAC;EACtC;EAEQM,WAAW,GAAoB;IACrC,IAAIC,MAAM,GAAG,IAAI,CAACA,MAAM;IACxB,MAAMwB,QAAQ,GAAGxB,MAAM,CAACyB,WAAW,EAAE;IACrC,IAAIC,GAAG,GAAGC,GAAG;IACb,IAAIC,MAAM,GAAG,EAAE;IAEf,IAAI,IAAI,CAAClZ,QAAQ,CAACsX,MAAM,CAAC,EAAE;MACzB,OAAO,IAAI,CAACtX,QAAQ,CAACsX,MAAM,CAAC;IAC9B;IACA,IAAI,IAAI,CAACtX,QAAQ,CAAC8Y,QAAQ,CAAC,EAAE;MAC3B,OAAO,IAAI,CAAC9Y,QAAQ,CAAC8Y,QAAQ,CAAC;IAChC;IACAxB,MAAM,GAAGwB,QAAQ;IACjB,IAAIxB,MAAM,CAACpE,MAAM,CAAC,CAAC,CAAC,KAAK,GAAG,EAAE;MAC5B,IAAIoE,MAAM,CAACpE,MAAM,CAAC,CAAC,CAAC,KAAK,GAAG,EAAE;QAC5BoE,MAAM,GAAGA,MAAM,CAAC6B,KAAK,CAAC,CAAC,CAAC;QAGxBH,GAAG,GAAGI,QAAQ,CAAC9B,MAAM,EAAE,EAAE,CAAC;QAC1B4B,MAAM,GAAGF,GAAG,CAACpE,QAAQ,CAAC,EAAE,CAAC;MAC3B,CAAC,MAAM;QACL0C,MAAM,GAAGA,MAAM,CAAC6B,KAAK,CAAC,CAAC,CAAC;QAGxBH,GAAG,GAAGI,QAAQ,CAAC9B,MAAM,EAAE,EAAE,CAAC;QAC1B4B,MAAM,GAAGF,GAAG,CAACpE,QAAQ,CAAC,EAAE,CAAC;MAC3B;IACF;IAEA0C,MAAM,GAAGA,MAAM,CAACQ,OAAO,CAAC,KAAK,EAAE,EAAE,CAAC;IAClC,IAAIuB,KAAK,CAACL,GAAG,CAAC,IAAIE,MAAM,CAACH,WAAW,EAAE,KAAKzB,MAAM,EAAE;MACjD,IAAI,CAAC9B,UAAU,CAAC,0BAA0B,CAAC;MAC3C,kBAAW,IAAI,CAAC8B,MAAM;IACxB;IAEA,OAAOnH,MAAM,CAACmJ,aAAa,CAACN,GAAG,CAAC;EAClC;EAEQ/D,eAAe,CAACzB,CAAS,EAAQ;IACvC,IAAIA,CAAC,KAAK,GAAG,EAAE;MACb,IAAI,CAACwB,KAAK,GAAG,IAAI,CAACxE,CAAC,CAACI,SAAS;MAC7B,IAAI,CAAC2E,gBAAgB,GAAG,IAAI,CAAChW,QAAQ;IACvC,CAAC,MAAM,IAAI,CAAC8Q,GAAG,CAACkD,YAAY,CAACC,CAAC,CAAC,EAAE;MAG/B,IAAI,CAACgC,UAAU,CAAC,kCAAkC,CAAC;MACnD,IAAI,CAACH,QAAQ,GAAG7B,CAAC;MACjB,IAAI,CAACwB,KAAK,GAAG,IAAI,CAACxE,CAAC,CAACE,IAAI;IAC1B,CAAC,MAAM,CACP;EACF;EAEQ8E,UAAU,CAAC+D,OAAe,EAAQ;IACxC,IAAI,OAAO,IAAI,KAAK,QAAQ,IAAI,EAAE,IAAI,YAAYpB,SAAS,CAAC,EAAE;MAC5D,MAAM,IAAIf,KAAK,CAAC,wBAAwB,CAAC;IAC3C;IACA,IAAI,IAAI,CAACrY,MAAM,EAAE;MACf,IAAI,CAAC2V,aAAa,CAAC6E,OAAO,CAAC;IAC7B;EACF;EAEQhD,gBAAgB,CAACiD,IAAY,EAAU;IAC7C,IAAI,IAAI,CAACpB,GAAG,CAAC5Y,IAAI,EAAEga,IAAI,GAAGA,IAAI,CAACha,IAAI,EAAE;IACrC,IAAI,IAAI,CAAC4Y,GAAG,CAAC3Y,SAAS,EAAE+Z,IAAI,GAAGA,IAAI,CAAC1B,OAAO,CAAC,MAAM,EAAE,GAAG,CAAC;IACxD,OAAO0B,IAAI;EACb;EAEQtD,QAAQ,CAACuD,QAAgB,EAAE9B,IAAS,EAAQ;IAClD,IAAI,IAAI,CAACtC,QAAQ,EAAE,IAAI,CAAC6C,SAAS,EAAE;IACnC,IAAI,CAACT,IAAI,CAACgC,QAAQ,EAAE9B,IAAI,CAAC;EAC3B;EAEQO,SAAS,GAAS;IACxB,IAAI,CAAC7C,QAAQ,GAAG,IAAI,CAACkB,gBAAgB,CAAC,IAAI,CAAClB,QAAQ,CAAC;IAEpD,IAAI,IAAI,CAACA,QAAQ,KAAK/V,SAAS,IAAI,IAAI,CAAC+V,QAAQ,KAAK,EAAE,IAAI,IAAI,CAACA,QAAQ,KAAK,WAAW,EAAE;MACxF,IAAI,CAACoC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAACpC,QAAQ,CAAC;IACpC;IACA,IAAI,CAACA,QAAQ,GAAG,EAAE;EACpB;EAEQmC,iBAAiB,GAAS;IAChC,MAAMkC,UAAU,GAAGC,IAAI,CAACC,GAAG,CAAC,IAAI,CAACxB,GAAG,CAACpZ,iBAAiB,EAAE,EAAE,CAAC;IAC3D,IAAI6a,SAAS,GAAG,CAAC;IACjB,KAAK,IAAIzG,CAAC,GAAG,CAAC,EAAE4E,CAAC,GAAG,IAAI,CAACrY,OAAO,CAAC2T,MAAM,EAAEF,CAAC,GAAG4E,CAAC,EAAE5E,CAAC,EAAE,EAAE;MAAA;MACnD,MAAM0G,GAAG,GAAG,6BAAI,CAAC,IAAI,CAACna,OAAO,CAACyT,CAAC,CAAC,CAAC,yDAArB,qBAAuBE,MAAM,KAAI,CAAC;MAC9C,IAAIwG,GAAG,GAAGJ,UAAU,EAAE;QAKpB,QAAQ,IAAI,CAAC/Z,OAAO,CAACyT,CAAC,CAAC;UACrB,KAAK,UAAU;YACb,IAAI,CAAC8E,SAAS,EAAE;YAChB;UACF,KAAK,OAAO;YACV,IAAI,CAAChC,QAAQ,CAAC,SAAS,EAAE,IAAI,CAACC,KAAK,CAAC;YACpC,IAAI,CAACA,KAAK,GAAG,EAAE;YACf;UACF,KAAK,QAAQ;YACX,IAAI,CAACD,QAAQ,CAAC,UAAU,EAAE,IAAI,CAACT,MAAM,CAAC;YACtC,IAAI,CAACA,MAAM,GAAG,EAAE;YAChB;UACF;YACE,IAAI,CAACf,aAAa,uCAAgC,IAAI,CAAC/U,OAAO,CAACyT,CAAC,CAAC,EAAG;QAAC;MAE3E;MACAyG,SAAS,GAAGF,IAAI,CAACC,GAAG,CAACC,SAAS,EAAEC,GAAG,CAAC;IACtC;IAEA,MAAMC,CAAC,GAAG,IAAI,CAAC3B,GAAG,CAACpZ,iBAAiB,GAAG6a,SAAS;IAChD,IAAI,CAACtC,mBAAmB,GAAGwC,CAAC,GAAG,IAAI,CAACxa,QAAQ;EAC9C;EAEQmX,OAAO,CAACsD,WAAqB,EAAQ;IAC3C,IAAI,IAAI,CAAC5B,GAAG,CAAC/Y,KAAK,EAAE;MAElB,MAAM0X,GAAG,GAAG,IAAI,CAACA,GAAG;;MAGpB,MAAMyB,EAAE,GAAGnI,GAAG,CAAC0D,KAAK,CAAC,IAAI,CAAC4B,OAAO,CAAC;MAClCoB,GAAG,CAAC1C,MAAM,GAAGmE,EAAE,CAACnE,MAAM;MACtB0C,GAAG,CAACzC,KAAK,GAAGkE,EAAE,CAAClE,KAAK;MACpByC,GAAG,CAACkD,GAAG,GAAGlD,GAAG,CAAC4B,EAAE,CAACH,EAAE,CAACnE,MAAM,CAAC,IAAI,EAAE;MAEjC,IAAI0C,GAAG,CAAC1C,MAAM,IAAI,CAAC0C,GAAG,CAACkD,GAAG,EAAE;QAC1B,IAAI,CAACzE,UAAU,qCAA8B0E,IAAI,CAACC,SAAS,CAAC,IAAI,CAACxE,OAAO,CAAC,EAAG;QAC5EoB,GAAG,CAACkD,GAAG,GAAGzB,EAAE,CAACnE,MAAM;MACrB;MAEA,MAAMoE,MAAM,GAAG,IAAI,CAACC,IAAI,CAAC,IAAI,CAACA,IAAI,CAACpF,MAAM,GAAG,CAAC,CAAC,IAAI,IAAI;MACtD,IAAIyD,GAAG,CAAC4B,EAAE,IAAIF,MAAM,CAACE,EAAE,KAAK5B,GAAG,CAAC4B,EAAE,EAAE;QAClC,MAAMyB,IAAI,GAAG,IAAI;QACjBtK,MAAM,CAACC,IAAI,CAACgH,GAAG,CAAC4B,EAAE,CAAC,CAAC3I,OAAO,CAAEqK,CAAC,IAAK;UACjCD,IAAI,CAAClE,QAAQ,CAAC,iBAAiB,EAAE;YAC/B7B,MAAM,EAAEgG,CAAC;YACTJ,GAAG,EAAElD,GAAG,CAAC4B,EAAE,CAAC0B,CAAC;UACf,CAAC,CAAC;QACJ,CAAC,CAAC;MACJ;;MAKA,KAAK,IAAIjH,CAAC,GAAG,CAAC,EAAE4E,CAAC,GAAG,IAAI,CAACO,UAAU,CAACjF,MAAM,EAAEF,CAAC,GAAG4E,CAAC,EAAE5E,CAAC,EAAE,EAAE;QACtD,MAAMkH,EAAE,GAAG,IAAI,CAAC/B,UAAU,CAACnF,CAAC,CAAC;QAC7B,MAAMY,IAAI,GAAGsG,EAAE,CAAC,CAAC,CAAC;QAClB,MAAMrD,KAAK,GAAGqD,EAAE,CAAC,CAAC,CAAC;QACnB,MAAMnG,QAAQ,GAAG9D,GAAG,CAAC0D,KAAK,CAACC,IAAI,EAAE,IAAI,CAAC;QACtC,MAAMK,MAAM,GAAGF,QAAQ,CAACE,MAAM;QAC9B,MAAMC,KAAK,GAAGH,QAAQ,CAACG,KAAK;QAC5B,MAAM2F,GAAG,GAAG5F,MAAM,KAAK,EAAE,GAAG,EAAE,GAAG0C,GAAG,CAAC4B,EAAE,CAACtE,MAAM,CAAC,IAAI,EAAE;QACrD,MAAMkG,CAAC,GAAG;UACRvG,IAAI;UACJiD,KAAK;UACL5C,MAAM;UACNC,KAAK;UACL2F;QACF,CAAC;;QAID,IAAI5F,MAAM,IAAIA,MAAM,KAAK,OAAO,IAAI,CAAC4F,GAAG,EAAE;UACxC,IAAI,CAACzE,UAAU,qCAA8B0E,IAAI,CAACC,SAAS,CAAC9F,MAAM,CAAC,EAAG;UACtEkG,CAAC,CAACN,GAAG,GAAG5F,MAAM;QAChB;QACA,IAAI,CAAC0C,GAAG,CAACC,UAAU,CAAChD,IAAI,CAAC,GAAGuG,CAAC;QAC7B,IAAI,CAACrE,QAAQ,CAAC,aAAa,EAAEqE,CAAC,CAAC;MACjC;MACA,IAAI,CAAChC,UAAU,CAACjF,MAAM,GAAG,CAAC;IAC5B;IAEA,IAAI,CAACyD,GAAG,CAACyD,aAAa,GAAGC,OAAO,CAACT,WAAW,CAAC;;IAG7C,IAAI,CAAC9E,OAAO,GAAG,IAAI;IACnB,IAAI,CAACwD,IAAI,CAACG,IAAI,CAAC,IAAI,CAAC9B,GAAG,CAAC;IACxB,IAAI,CAACb,QAAQ,CAAC,WAAW,EAAE,IAAI,CAACa,GAAG,CAAC;IACpC,IAAI,CAACiD,WAAW,EAAE;MAEhB,IAAI,CAAC,IAAI,CAAC7a,QAAQ,IAAI,IAAI,CAACwW,OAAO,CAACoD,WAAW,EAAE,KAAK,QAAQ,EAAE;QAC7D,IAAI,CAAC/D,KAAK,GAAG,IAAI,CAACxE,CAAC,CAACkC,MAAM;MAC5B,CAAC,MAAM;QACL,IAAI,CAACsC,KAAK,GAAG,IAAI,CAACxE,CAAC,CAACE,IAAI;MAC1B;MACA,IAAI,CAACqG,GAAG,GAAG,IAAI;MACf,IAAI,CAACpB,OAAO,GAAG,EAAE;IACnB;IACA,IAAI,CAACiB,UAAU,GAAG,IAAI,CAACC,WAAW,GAAG,EAAE;IACvC,IAAI,CAAC0B,UAAU,CAACjF,MAAM,GAAG,CAAC;EAC5B;EAEQqD,QAAQ,GAAS;IACvB,IAAI,CAAC,IAAI,CAAChB,OAAO,EAAE;MACjB,IAAI,CAACH,UAAU,CAAC,wBAAwB,CAAC;MACzC,IAAI,CAACH,QAAQ,IAAI,KAAK;MACtB,IAAI,CAACL,KAAK,GAAG,IAAI,CAACxE,CAAC,CAACE,IAAI;MACxB;IACF;IAEA,IAAI,IAAI,CAAC+E,MAAM,EAAE;MACf,IAAI,IAAI,CAACE,OAAO,KAAK,QAAQ,EAAE;QAC7B,IAAI,CAACF,MAAM,gBAAS,IAAI,CAACE,OAAO,MAAG;QACnC,IAAI,CAACA,OAAO,GAAG,EAAE;QACjB,IAAI,CAACX,KAAK,GAAG,IAAI,CAACxE,CAAC,CAACkC,MAAM;QAC1B;MACF;MACA,IAAI,CAACwD,QAAQ,CAAC,UAAU,EAAE,IAAI,CAACT,MAAM,CAAC;MACtC,IAAI,CAACA,MAAM,GAAG,EAAE;IAClB;;IAIA,IAAIiF,CAAC,GAAG,IAAI,CAAChC,IAAI,CAACpF,MAAM;IACxB,IAAIqC,OAAO,GAAG,IAAI,CAACA,OAAO;IAC1B,IAAI,CAAC,IAAI,CAAC5W,MAAM,EAAE;MAChB4W,OAAO,GAAGA,OAAO,CAAC,IAAI,CAAC2C,SAAS,CAAC,EAAE;IACrC;IACA,OAAOoC,CAAC,EAAE,EAAE;MACV,MAAMC,KAAK,GAAG,IAAI,CAACjC,IAAI,CAACgC,CAAC,CAAC;MAC1B,IAAIC,KAAK,CAAC3G,IAAI,KAAK2B,OAAO,EAAE;QAE1B,IAAI,CAACH,UAAU,CAAC,sBAAsB,CAAC;MACzC,CAAC,MAAM;QACL;MACF;IACF;;IAGA,IAAIkF,CAAC,GAAG,CAAC,EAAE;MACT,IAAI,CAAClF,UAAU,kCAA2B,IAAI,CAACG,OAAO,EAAG;MACzD,IAAI,CAACN,QAAQ,gBAAS,IAAI,CAACM,OAAO,MAAG;MACrC,IAAI,CAACX,KAAK,GAAG,IAAI,CAACxE,CAAC,CAACE,IAAI;MACxB;IACF;IACA,IAAI,CAACiF,OAAO,GAAGA,OAAO;IACtB,IAAI5C,CAAC,GAAG,IAAI,CAAC2F,IAAI,CAACpF,MAAM;IACxB,OAAOP,CAAC,EAAE,GAAG2H,CAAC,EAAE;MACd,MAAM3D,GAAG,GAAI,IAAI,CAACA,GAAG,GAAG,IAAI,CAAC2B,IAAI,CAACkC,GAAG,EAAG;MACxC,IAAI,CAACjF,OAAO,GAAG,IAAI,CAACoB,GAAG,CAAC/C,IAAI;MAC5B,IAAI,CAACkC,QAAQ,CAAC,YAAY,EAAE,IAAI,CAACP,OAAO,CAAC;MAEzC,MAAMkF,CAAyB,GAAG,CAAC,CAAC;MACpC,KAAK,MAAMzH,CAAC,IAAI2D,GAAG,CAAC4B,EAAE,EAAE;QACtB,IAAI5B,GAAG,CAAC4B,EAAE,CAAC1F,cAAc,CAACG,CAAC,CAAC,EAAE;UAC5ByH,CAAC,CAACzH,CAAC,CAAC,GAAG2D,GAAG,CAAC4B,EAAE,CAACvF,CAAC,CAAC;QAClB;MACF;MAEA,MAAMqF,MAAM,GAAG,IAAI,CAACC,IAAI,CAAC,IAAI,CAACA,IAAI,CAACpF,MAAM,GAAG,CAAC,CAAC,IAAI,IAAI;MACtD,IAAI,IAAI,CAAC8E,GAAG,CAAC/Y,KAAK,IAAI0X,GAAG,CAAC4B,EAAE,KAAKF,MAAM,CAACE,EAAE,EAAE;QAE1C,MAAMyB,IAAI,GAAG,IAAI;QACjBtK,MAAM,CAACC,IAAI,CAACgH,GAAG,CAAC4B,EAAE,CAAC,CAAC3I,OAAO,CAAEqK,CAAC,IAAK;UACjC,MAAMS,CAAC,GAAG/D,GAAG,CAAC4B,EAAE,CAAC0B,CAAC,CAAC;UACnBD,IAAI,CAAClE,QAAQ,CAAC,kBAAkB,EAAE;YAAC7B,MAAM,EAAEgG,CAAC;YAAEJ,GAAG,EAAEa;UAAC,CAAC,CAAC;QACxD,CAAC,CAAC;MACJ;IACF;IACA,IAAIJ,CAAC,KAAK,CAAC,EAAE,IAAI,CAACvF,UAAU,GAAG,IAAI;IACnC,IAAI,CAACQ,OAAO,GAAG,IAAI,CAACkB,WAAW,GAAG,IAAI,CAACD,UAAU,GAAG,EAAE;IACtD,IAAI,CAAC2B,UAAU,CAACjF,MAAM,GAAG,CAAC;IAC1B,IAAI,CAAC0B,KAAK,GAAG,IAAI,CAACxE,CAAC,CAACE,IAAI;EAC1B;AACF;;AAMA,OAAO,MAAMyH,SAAS,SAAS9H,GAAG,CAAC;EAOjCC,WAAW,CAAC8H,GAAsB,EAAE;IAClC,KAAK,EAAE;IAAC,6BALwBtZ,0BAA0B;IAAA,gCAE9BnB,kBAAkB;IAK9C,IAAI,CAACoa,YAAY,EAAE;IAEnB,IAAI,CAACK,GAAG,GAAGA,GAAG,GAAG;MAAC,GAAG,IAAI,CAACA,GAAG;MAAE,GAAGA;IAAG,CAAC;IAEtC,IAAI,CAACR,MAAM,GAAG;MAAC,GAAG,IAAI,CAACA,MAAM;MAAE,GAAGQ;IAAG,CAAC;IAEtC,IAAI,CAAC9B,CAAC,GAAG,IAAI,CAAC9C,CAAC,GAAG,EAAE;IACpB,IAAI,CAAC4E,GAAG,CAACnZ,SAAS,GAAG,IAAI,CAACmZ,GAAG,CAACnZ,SAAS,IAAI,IAAI,CAACmZ,GAAG,CAAClZ,aAAa;IACjE,IAAI,CAACqY,mBAAmB,GAAG,IAAI,CAACa,GAAG,CAACpZ,iBAAiB;IACrD,IAAI,CAACsZ,SAAS,GAAG,IAAI,CAACF,GAAG,CAACnZ,SAAS,GAAG,aAAa,GAAG,aAAa;IACnE,IAAI,CAACyZ,IAAI,GAAG,EAAE;IACd,IAAI,CAACjE,MAAM,GAAG,IAAI,CAACU,UAAU,GAAG,IAAI,CAACD,OAAO,GAAG,KAAK;IACpD,IAAI,CAAC6B,GAAG,GAAG,IAAI,CAACvC,KAAK,GAAG,IAAI;IAC5B,IAAI,CAACzV,MAAM,GAAG0b,OAAO,CAAC,IAAI,CAACrC,GAAG,CAACrZ,MAAM,CAAC;IACtC,IAAI,CAACI,QAAQ,GAAGsb,OAAO,CAAC,IAAI,CAACrC,GAAG,CAACrZ,MAAM,IAAI,IAAI,CAACqZ,GAAG,CAACjZ,QAAQ,CAAC;IAC7D,IAAI,CAAC6V,KAAK,GAAG,IAAI,CAACxE,CAAC,CAACD,KAAK;IACzB,IAAI,CAACnR,cAAc,GAAG,IAAI,CAACgZ,GAAG,CAAChZ,cAAc;IAC7C,IAAI,CAACY,QAAQ,GAAG,IAAI,CAACZ,cAAc,GAC/B0Q,MAAM,CAAC8I,MAAM,CAAC,IAAI,CAACmC,YAAY,CAAC,GAChCjL,MAAM,CAAC8I,MAAM,CAAC,IAAI,CAAC5Y,QAAQ,CAAC;IAChC,IAAI,CAACuY,UAAU,GAAG,EAAE;;IAKpB,IAAI,IAAI,CAACH,GAAG,CAAC/Y,KAAK,EAAE;MAClB,IAAI,CAACsZ,EAAE,GAAG7I,MAAM,CAAC8I,MAAM,CAAC,IAAI,CAACoC,MAAM,CAAC;IACtC;;IAGA,IAAI,CAACnG,aAAa,GAAG,IAAI,CAACuD,GAAG,CAAC7Y,QAAQ,KAAK,KAAK;IAChD,IAAI,IAAI,CAACsV,aAAa,EAAE;MACtB,IAAI,CAACtV,QAAQ,GAAG,IAAI,CAACuV,IAAI,GAAG,IAAI,CAACC,MAAM,GAAG,CAAC;IAC7C;IACA,IAAI,CAAC0C,IAAI,CAAC,SAAS,CAAC;EACtB;EAEAwD,MAAM,GAAS;IACb,IAAI,CAACzG,KAAK,GAAG,IAAI;IACjB,OAAO,IAAI;EACb;EAEAmG,KAAK,GAAqB;IACxB,OAAO,IAAI,CAACpG,KAAK,CAAC,IAAI,CAAC;EACzB;EAEA2G,KAAK,GAAS;IACZ,IAAI,CAACjD,YAAY,EAAE;EACrB;AACF;AAAC,gBA3DYE,SAAS,cACFnY,QAAQ"}