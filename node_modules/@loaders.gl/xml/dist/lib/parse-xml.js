"use strict";
// loaders.gl, MIT license
Object.defineProperty(exports, "__esModule", { value: true });
exports.parseXMLInBatches = exports.parseXML = void 0;
const xml_parser_1 = require("../lib/parser/xml-parser");
const fast_xml_parser_1 = require("fast-xml-parser");
function parseXML(text, options) {
    const parser = new fast_xml_parser_1.XMLParser({
        ignoreAttributes: false,
        attributeNamePrefix: '',
        // parseAttributeValue: true,
        ...options?.xml
    });
    const parsedXML = parser.parse(text);
    return parsedXML;
}
exports.parseXML = parseXML;
/**
 * @todo Build a streaming XML parser based on sax-js
 * @param text
 * @param options
 * @returns
 */
function parseXMLInBatches(text, options) {
    const parser = new xml_parser_1.XMLParser({
        ...options,
        strict: true
    });
    parser.write(text);
    parser.close();
    return parser.result;
}
exports.parseXMLInBatches = parseXMLInBatches;
