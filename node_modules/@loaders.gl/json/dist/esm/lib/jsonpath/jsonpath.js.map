{"version":3,"file":"jsonpath.js","names":["JSONPath","constructor","path","Array","isArray","push","split","Error","clone","toString","join","name","pop","set","length","equals","other","i","setFieldAtPath","object","value","shift","field","component","getFieldAtPath"],"sources":["../../../../src/lib/jsonpath/jsonpath.ts"],"sourcesContent":["/**\n * A parser for a minimal subset of the jsonpath standard\n * Full JSON path parsers for JS exist but are quite large (bundle size)\n *\n * Supports\n *\n *   `$.component.component.component`\n */\nexport default class JSONPath {\n  path: string[];\n\n  constructor(path: JSONPath | string[] | string | null = null) {\n    this.path = ['$'];\n\n    if (path instanceof JSONPath) {\n      // @ts-ignore\n      this.path = [...path.path];\n      return;\n    }\n\n    if (Array.isArray(path)) {\n      this.path.push(...path);\n      return;\n    }\n\n    // Parse a string as a JSONPath\n    if (typeof path === 'string') {\n      this.path = path.split('.');\n      if (this.path[0] !== '$') {\n        throw new Error('JSONPaths must start with $');\n      }\n    }\n  }\n\n  clone(): JSONPath {\n    return new JSONPath(this);\n  }\n\n  toString(): string {\n    return this.path.join('.');\n  }\n\n  push(name: string): void {\n    this.path.push(name);\n  }\n\n  pop() {\n    return this.path.pop();\n  }\n\n  set(name: string): void {\n    this.path[this.path.length - 1] = name;\n  }\n\n  equals(other: JSONPath): boolean {\n    if (!this || !other || this.path.length !== other.path.length) {\n      return false;\n    }\n\n    for (let i = 0; i < this.path.length; ++i) {\n      if (this.path[i] !== other.path[i]) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  /**\n   * Sets the value pointed at by path\n   * TODO - handle root path\n   * @param object\n   * @param value\n   */\n  setFieldAtPath(object, value) {\n    const path = [...this.path];\n    path.shift();\n    const field = path.pop();\n    for (const component of path) {\n      object = object[component];\n    }\n    // @ts-ignore\n    object[field] = value;\n  }\n\n  /**\n   * Gets the value pointed at by path\n   * TODO - handle root path\n   * @param object\n   */\n  getFieldAtPath(object) {\n    const path = [...this.path];\n    path.shift();\n    const field = path.pop();\n    for (const component of path) {\n      object = object[component];\n    }\n    // @ts-ignore\n    return object[field];\n  }\n}\n"],"mappings":";AAQA,eAAe,MAAMA,QAAQ,CAAC;EAG5BC,WAAW,GAAmD;IAAA,IAAlDC,IAAyC,uEAAG,IAAI;IAAA;IAC1D,IAAI,CAACA,IAAI,GAAG,CAAC,GAAG,CAAC;IAEjB,IAAIA,IAAI,YAAYF,QAAQ,EAAE;MAE5B,IAAI,CAACE,IAAI,GAAG,CAAC,GAAGA,IAAI,CAACA,IAAI,CAAC;MAC1B;IACF;IAEA,IAAIC,KAAK,CAACC,OAAO,CAACF,IAAI,CAAC,EAAE;MACvB,IAAI,CAACA,IAAI,CAACG,IAAI,CAAC,GAAGH,IAAI,CAAC;MACvB;IACF;;IAGA,IAAI,OAAOA,IAAI,KAAK,QAAQ,EAAE;MAC5B,IAAI,CAACA,IAAI,GAAGA,IAAI,CAACI,KAAK,CAAC,GAAG,CAAC;MAC3B,IAAI,IAAI,CAACJ,IAAI,CAAC,CAAC,CAAC,KAAK,GAAG,EAAE;QACxB,MAAM,IAAIK,KAAK,CAAC,6BAA6B,CAAC;MAChD;IACF;EACF;EAEAC,KAAK,GAAa;IAChB,OAAO,IAAIR,QAAQ,CAAC,IAAI,CAAC;EAC3B;EAEAS,QAAQ,GAAW;IACjB,OAAO,IAAI,CAACP,IAAI,CAACQ,IAAI,CAAC,GAAG,CAAC;EAC5B;EAEAL,IAAI,CAACM,IAAY,EAAQ;IACvB,IAAI,CAACT,IAAI,CAACG,IAAI,CAACM,IAAI,CAAC;EACtB;EAEAC,GAAG,GAAG;IACJ,OAAO,IAAI,CAACV,IAAI,CAACU,GAAG,EAAE;EACxB;EAEAC,GAAG,CAACF,IAAY,EAAQ;IACtB,IAAI,CAACT,IAAI,CAAC,IAAI,CAACA,IAAI,CAACY,MAAM,GAAG,CAAC,CAAC,GAAGH,IAAI;EACxC;EAEAI,MAAM,CAACC,KAAe,EAAW;IAC/B,IAAI,CAAC,IAAI,IAAI,CAACA,KAAK,IAAI,IAAI,CAACd,IAAI,CAACY,MAAM,KAAKE,KAAK,CAACd,IAAI,CAACY,MAAM,EAAE;MAC7D,OAAO,KAAK;IACd;IAEA,KAAK,IAAIG,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG,IAAI,CAACf,IAAI,CAACY,MAAM,EAAE,EAAEG,CAAC,EAAE;MACzC,IAAI,IAAI,CAACf,IAAI,CAACe,CAAC,CAAC,KAAKD,KAAK,CAACd,IAAI,CAACe,CAAC,CAAC,EAAE;QAClC,OAAO,KAAK;MACd;IACF;IAEA,OAAO,IAAI;EACb;;EAQAC,cAAc,CAACC,MAAM,EAAEC,KAAK,EAAE;IAC5B,MAAMlB,IAAI,GAAG,CAAC,GAAG,IAAI,CAACA,IAAI,CAAC;IAC3BA,IAAI,CAACmB,KAAK,EAAE;IACZ,MAAMC,KAAK,GAAGpB,IAAI,CAACU,GAAG,EAAE;IACxB,KAAK,MAAMW,SAAS,IAAIrB,IAAI,EAAE;MAC5BiB,MAAM,GAAGA,MAAM,CAACI,SAAS,CAAC;IAC5B;IAEAJ,MAAM,CAACG,KAAK,CAAC,GAAGF,KAAK;EACvB;;EAOAI,cAAc,CAACL,MAAM,EAAE;IACrB,MAAMjB,IAAI,GAAG,CAAC,GAAG,IAAI,CAACA,IAAI,CAAC;IAC3BA,IAAI,CAACmB,KAAK,EAAE;IACZ,MAAMC,KAAK,GAAGpB,IAAI,CAACU,GAAG,EAAE;IACxB,KAAK,MAAMW,SAAS,IAAIrB,IAAI,EAAE;MAC5BiB,MAAM,GAAGA,MAAM,CAACI,SAAS,CAAC;IAC5B;IAEA,OAAOJ,MAAM,CAACG,KAAK,CAAC;EACtB;AACF"}