{"version":3,"file":"clarinet.js","names":["MAX_BUFFER_LENGTH","Number","MAX_SAFE_INTEGER","STATE","Char","tab","lineFeed","carriageReturn","space","doubleQuote","plus","comma","minus","period","_0","_9","colon","E","openBracket","backslash","closeBracket","a","b","e","f","l","n","r","s","t","u","openBrace","closeBrace","stringTokenPattern","DEFAULT_OPTIONS","onready","onopenobject","onkey","oncloseobject","onopenarray","onclosearray","onvalue","onerror","onend","onchunkparsed","ClarinetParser","options","BEGIN","textNode","undefined","numberNode","emit","state","VALUE","depth","_error","_closeValue","c","closed","error","write","event","data","chunk","end","i","charCodeAt","p","position","line","column","OPEN_OBJECT","OPEN_ARRAY","isWhitespace","OPEN_KEY","stack","push","CLOSE_KEY","pop","CLOSE_OBJECT","STRING","emitNode","CLOSE_ARRAY","TRUE","FALSE","NULL","String","fromCharCode","NUMBER_DIGIT","starti","slashed","unicodeI","STRING_BIGLOOP","unicodeS","parseInt","substring","lastIndex","reResult","exec","length","index","TRUE2","TRUE3","FALSE2","FALSE3","FALSE4","NULL2","NULL3","NUMBER_DECIMAL_POINT","indexOf","_closeNumber","bufferCheckPosition","checkBufferLength","parseFloat","message","Error","parser","maxAllowed","Math","max","maxActual","buffer","len"],"sources":["../../../../src/lib/clarinet/clarinet.ts"],"sourcesContent":["// loaders.gl, MIT license\n// This is a fork of the clarinet library, originally BSD license (see LICENSE file)\n// loaders.gl changes:\n// - typescript port\n\nexport type ClarinetEvent =\n  | 'onvalue'\n  | 'onstring'\n  | 'onkey'\n  | 'onopenobject'\n  | 'oncloseobject'\n  | 'onopenarray'\n  | 'onclosearray'\n  | 'onerror'\n  | 'onend'\n  | 'onready';\n\n// Removes the MAX_BUFFER_LENGTH, originally set to 64 * 1024\nconst MAX_BUFFER_LENGTH = Number.MAX_SAFE_INTEGER;\n// const DEBUG = false;\n\nenum STATE {\n  BEGIN = 0,\n  VALUE, // general stuff\n  OPEN_OBJECT, // {\n  CLOSE_OBJECT, // }\n  OPEN_ARRAY, // [\n  CLOSE_ARRAY, // ]\n  TEXT_ESCAPE, // \\ stuff\n  STRING, // \"\"\n  BACKSLASH,\n  END, // No more stack\n  OPEN_KEY, // , \"a\"\n  CLOSE_KEY, // :\n  TRUE, // r\n  TRUE2, // u\n  TRUE3, // e\n  FALSE, // a\n  FALSE2, // l\n  FALSE3, // s\n  FALSE4, // e\n  NULL, // u\n  NULL2, // l\n  NULL3, // l\n  NUMBER_DECIMAL_POINT, // .\n  NUMBER_DIGIT // [0-9]\n}\n\nconst Char = {\n  tab: 0x09, // \\t\n  lineFeed: 0x0a, // \\n\n  carriageReturn: 0x0d, // \\r\n  space: 0x20, // \" \"\n\n  doubleQuote: 0x22, // \"\n  plus: 0x2b, // +\n  comma: 0x2c, // ,\n  minus: 0x2d, // -\n  period: 0x2e, // .\n\n  _0: 0x30, // 0\n  _9: 0x39, // 9\n\n  colon: 0x3a, // :\n\n  E: 0x45, // E\n\n  openBracket: 0x5b, // [\n  backslash: 0x5c, // \\\n  closeBracket: 0x5d, // ]\n\n  a: 0x61, // a\n  b: 0x62, // b\n  e: 0x65, // e\n  f: 0x66, // f\n  l: 0x6c, // l\n  n: 0x6e, // n\n  r: 0x72, // r\n  s: 0x73, // s\n  t: 0x74, // t\n  u: 0x75, // u\n\n  openBrace: 0x7b, // {\n  closeBrace: 0x7d // }\n};\n\nconst stringTokenPattern = /[\\\\\"\\n]/g;\n\ntype ParserEvent = (parser: ClarinetParser, event: string, data?: any) => void;\n\nexport type ClarinetParserOptions = {\n  onready?: ParserEvent;\n  onopenobject?: ParserEvent;\n  onkey?: ParserEvent;\n  oncloseobject?: ParserEvent;\n  onopenarray?: ParserEvent;\n  onclosearray?: ParserEvent;\n  onvalue?: ParserEvent;\n  onerror?: ParserEvent;\n  onend?: ParserEvent;\n  onchunkparsed?: ParserEvent;\n};\n\nconst DEFAULT_OPTIONS: Required<ClarinetParserOptions> = {\n  onready: () => {},\n  onopenobject: () => {},\n  onkey: () => {},\n  oncloseobject: () => {},\n  onopenarray: () => {},\n  onclosearray: () => {},\n  onvalue: () => {},\n  onerror: () => {},\n  onend: () => {},\n  onchunkparsed: () => {}\n};\nexport default class ClarinetParser {\n  protected options: Required<ClarinetParserOptions> = DEFAULT_OPTIONS;\n\n  bufferCheckPosition = MAX_BUFFER_LENGTH;\n  q = '';\n  c = '';\n  p = '';\n  closed = false;\n  closedRoot = false;\n  sawRoot = false;\n  // tag = null;\n  error: Error | null = null;\n  state = STATE.BEGIN;\n  stack: STATE[] = [];\n  // mostly just for error reporting\n  position: number = 0;\n  column: number = 0;\n  line: number = 1;\n  slashed: boolean = false;\n  unicodeI: number = 0;\n  unicodeS: string | null = null;\n  depth: number = 0;\n\n  textNode;\n  numberNode;\n\n  constructor(options: ClarinetParserOptions = {}) {\n    this.options = {...DEFAULT_OPTIONS, ...options};\n    this.textNode = undefined;\n    this.numberNode = '';\n    this.emit('onready');\n  }\n\n  end() {\n    if (this.state !== STATE.VALUE || this.depth !== 0) this._error('Unexpected end');\n\n    this._closeValue();\n    this.c = '';\n    this.closed = true;\n    this.emit('onend');\n    return this;\n  }\n\n  resume() {\n    this.error = null;\n    return this;\n  }\n\n  close() {\n    return this.write(null);\n  }\n\n  // protected\n\n  emit(event: string, data?: any): void {\n    // if (DEBUG) console.log('-- emit', event, data);\n    this.options[event]?.(data, this);\n  }\n\n  emitNode(event: string, data?: any): void {\n    this._closeValue();\n    this.emit(event, data);\n  }\n\n  /* eslint-disable no-continue */\n  // eslint-disable-next-line complexity, max-statements\n  write(chunk) {\n    if (this.error) {\n      throw this.error;\n    }\n    if (this.closed) {\n      return this._error('Cannot write after close. Assign an onready handler.');\n    }\n    if (chunk === null) {\n      return this.end();\n    }\n    let i = 0;\n    let c = chunk.charCodeAt(0);\n    let p = this.p;\n    // if (DEBUG) console.log(`write -> [${  chunk  }]`);\n    while (c) {\n      p = c;\n      this.c = c = chunk.charCodeAt(i++);\n      // if chunk doesnt have next, like streaming char by char\n      // this way we need to check if previous is really previous\n      // if not we need to reset to what the this says is the previous\n      // from buffer\n      if (p !== c) {\n        this.p = p;\n      } else {\n        p = this.p;\n      }\n\n      if (!c) break;\n\n      // if (DEBUG) console.log(i, c, STATE[this.state]);\n      this.position++;\n      if (c === Char.lineFeed) {\n        this.line++;\n        this.column = 0;\n      } else this.column++;\n\n      switch (this.state) {\n        case STATE.BEGIN:\n          if (c === Char.openBrace) this.state = STATE.OPEN_OBJECT;\n          else if (c === Char.openBracket) this.state = STATE.OPEN_ARRAY;\n          else if (!isWhitespace(c)) {\n            this._error('Non-whitespace before {[.');\n          }\n          continue;\n\n        case STATE.OPEN_KEY:\n        case STATE.OPEN_OBJECT:\n          if (isWhitespace(c)) continue;\n          if (this.state === STATE.OPEN_KEY) this.stack.push(STATE.CLOSE_KEY);\n          else if (c === Char.closeBrace) {\n            this.emit('onopenobject');\n            this.depth++;\n            this.emit('oncloseobject');\n            this.depth--;\n            this.state = this.stack.pop() || STATE.VALUE;\n            continue;\n          } else this.stack.push(STATE.CLOSE_OBJECT);\n          if (c === Char.doubleQuote) this.state = STATE.STRING;\n          else this._error('Malformed object key should start with \"');\n          continue;\n\n        case STATE.CLOSE_KEY:\n        case STATE.CLOSE_OBJECT:\n          if (isWhitespace(c)) continue;\n          // let event = this.state === STATE.CLOSE_KEY ? 'key' : 'object';\n          if (c === Char.colon) {\n            if (this.state === STATE.CLOSE_OBJECT) {\n              this.stack.push(STATE.CLOSE_OBJECT);\n              this._closeValue('onopenobject');\n              this.depth++;\n            } else this._closeValue('onkey');\n            this.state = STATE.VALUE;\n          } else if (c === Char.closeBrace) {\n            this.emitNode('oncloseobject');\n            this.depth--;\n            this.state = this.stack.pop() || STATE.VALUE;\n          } else if (c === Char.comma) {\n            if (this.state === STATE.CLOSE_OBJECT) this.stack.push(STATE.CLOSE_OBJECT);\n            this._closeValue();\n            this.state = STATE.OPEN_KEY;\n          } else this._error('Bad object');\n          continue;\n\n        case STATE.OPEN_ARRAY: // after an array there always a value\n        case STATE.VALUE:\n          if (isWhitespace(c)) continue;\n          if (this.state === STATE.OPEN_ARRAY) {\n            this.emit('onopenarray');\n            this.depth++;\n            this.state = STATE.VALUE;\n            if (c === Char.closeBracket) {\n              this.emit('onclosearray');\n              this.depth--;\n              this.state = this.stack.pop() || STATE.VALUE;\n              continue;\n            } else {\n              this.stack.push(STATE.CLOSE_ARRAY);\n            }\n          }\n          if (c === Char.doubleQuote) this.state = STATE.STRING;\n          else if (c === Char.openBrace) this.state = STATE.OPEN_OBJECT;\n          else if (c === Char.openBracket) this.state = STATE.OPEN_ARRAY;\n          else if (c === Char.t) this.state = STATE.TRUE;\n          else if (c === Char.f) this.state = STATE.FALSE;\n          else if (c === Char.n) this.state = STATE.NULL;\n          else if (c === Char.minus) {\n            // keep and continue\n            this.numberNode += '-';\n          } else if (Char._0 <= c && c <= Char._9) {\n            this.numberNode += String.fromCharCode(c);\n            this.state = STATE.NUMBER_DIGIT;\n          } else this._error('Bad value');\n          continue;\n\n        case STATE.CLOSE_ARRAY:\n          if (c === Char.comma) {\n            this.stack.push(STATE.CLOSE_ARRAY);\n            this._closeValue('onvalue');\n            this.state = STATE.VALUE;\n          } else if (c === Char.closeBracket) {\n            this.emitNode('onclosearray');\n            this.depth--;\n            this.state = this.stack.pop() || STATE.VALUE;\n          } else if (isWhitespace(c)) continue;\n          else this._error('Bad array');\n          continue;\n\n        case STATE.STRING:\n          if (this.textNode === undefined) {\n            this.textNode = '';\n          }\n\n          // thanks thejh, this is an about 50% performance improvement.\n          let starti = i - 1;\n          let slashed = this.slashed;\n          let unicodeI = this.unicodeI;\n          // eslint-disable-next-line no-constant-condition, no-labels\n          STRING_BIGLOOP: while (true) {\n            // if (DEBUG) console.log(i, c, STATE[this.state], slashed);\n            // zero means \"no unicode active\". 1-4 mean \"parse some more\". end after 4.\n            while (unicodeI > 0) {\n              this.unicodeS += String.fromCharCode(c);\n              c = chunk.charCodeAt(i++);\n              this.position++;\n              if (unicodeI === 4) {\n                // TODO this might be slow? well, probably not used too often anyway\n                this.textNode += String.fromCharCode(parseInt(this.unicodeS as string, 16));\n                unicodeI = 0;\n                starti = i - 1;\n              } else {\n                unicodeI++;\n              }\n              // we can just break here: no stuff we skipped that still has to be sliced out or so\n              // eslint-disable-next-line no-labels\n              if (!c) break STRING_BIGLOOP;\n            }\n            if (c === Char.doubleQuote && !slashed) {\n              this.state = this.stack.pop() || STATE.VALUE;\n              this.textNode += chunk.substring(starti, i - 1);\n              this.position += i - 1 - starti;\n              break;\n            }\n            if (c === Char.backslash && !slashed) {\n              slashed = true;\n              this.textNode += chunk.substring(starti, i - 1);\n              this.position += i - 1 - starti;\n              c = chunk.charCodeAt(i++);\n              this.position++;\n              if (!c) break;\n            }\n            if (slashed) {\n              slashed = false;\n              if (c === Char.n) {\n                this.textNode += '\\n';\n              } else if (c === Char.r) {\n                this.textNode += '\\r';\n              } else if (c === Char.t) {\n                this.textNode += '\\t';\n              } else if (c === Char.f) {\n                this.textNode += '\\f';\n              } else if (c === Char.b) {\n                this.textNode += '\\b';\n              } else if (c === Char.u) {\n                // \\uxxxx. meh!\n                unicodeI = 1;\n                this.unicodeS = '';\n              } else {\n                this.textNode += String.fromCharCode(c);\n              }\n              c = chunk.charCodeAt(i++);\n              this.position++;\n              starti = i - 1;\n              if (!c) break;\n              else continue;\n            }\n\n            stringTokenPattern.lastIndex = i;\n            const reResult = stringTokenPattern.exec(chunk);\n            if (reResult === null) {\n              i = chunk.length + 1;\n              this.textNode += chunk.substring(starti, i - 1);\n              this.position += i - 1 - starti;\n              break;\n            }\n            i = reResult.index + 1;\n            c = chunk.charCodeAt(reResult.index);\n            if (!c) {\n              this.textNode += chunk.substring(starti, i - 1);\n              this.position += i - 1 - starti;\n              break;\n            }\n          }\n          this.slashed = slashed;\n          this.unicodeI = unicodeI;\n          continue;\n\n        case STATE.TRUE:\n          if (c === Char.r) this.state = STATE.TRUE2;\n          else this._error(`Invalid true started with t${c}`);\n          continue;\n\n        case STATE.TRUE2:\n          if (c === Char.u) this.state = STATE.TRUE3;\n          else this._error(`Invalid true started with tr${c}`);\n          continue;\n\n        case STATE.TRUE3:\n          if (c === Char.e) {\n            this.emit('onvalue', true);\n            this.state = this.stack.pop() || STATE.VALUE;\n          } else this._error(`Invalid true started with tru${c}`);\n          continue;\n\n        case STATE.FALSE:\n          if (c === Char.a) this.state = STATE.FALSE2;\n          else this._error(`Invalid false started with f${c}`);\n          continue;\n\n        case STATE.FALSE2:\n          if (c === Char.l) this.state = STATE.FALSE3;\n          else this._error(`Invalid false started with fa${c}`);\n          continue;\n\n        case STATE.FALSE3:\n          if (c === Char.s) this.state = STATE.FALSE4;\n          else this._error(`Invalid false started with fal${c}`);\n          continue;\n\n        case STATE.FALSE4:\n          if (c === Char.e) {\n            this.emit('onvalue', false);\n            this.state = this.stack.pop() || STATE.VALUE;\n          } else this._error(`Invalid false started with fals${c}`);\n          continue;\n\n        case STATE.NULL:\n          if (c === Char.u) this.state = STATE.NULL2;\n          else this._error(`Invalid null started with n${c}`);\n          continue;\n\n        case STATE.NULL2:\n          if (c === Char.l) this.state = STATE.NULL3;\n          else this._error(`Invalid null started with nu${c}`);\n          continue;\n\n        case STATE.NULL3:\n          if (c === Char.l) {\n            this.emit('onvalue', null);\n            this.state = this.stack.pop() || STATE.VALUE;\n          } else this._error(`Invalid null started with nul${c}`);\n          continue;\n\n        case STATE.NUMBER_DECIMAL_POINT:\n          if (c === Char.period) {\n            this.numberNode += '.';\n            this.state = STATE.NUMBER_DIGIT;\n          } else this._error('Leading zero not followed by .');\n          continue;\n\n        case STATE.NUMBER_DIGIT:\n          if (Char._0 <= c && c <= Char._9) this.numberNode += String.fromCharCode(c);\n          else if (c === Char.period) {\n            if (this.numberNode.indexOf('.') !== -1) this._error('Invalid number has two dots');\n            this.numberNode += '.';\n          } else if (c === Char.e || c === Char.E) {\n            if (this.numberNode.indexOf('e') !== -1 || this.numberNode.indexOf('E') !== -1)\n              this._error('Invalid number has two exponential');\n            this.numberNode += 'e';\n          } else if (c === Char.plus || c === Char.minus) {\n            // @ts-expect-error\n            if (!(p === Char.e || p === Char.E)) this._error('Invalid symbol in number');\n            this.numberNode += String.fromCharCode(c);\n          } else {\n            this._closeNumber();\n            i--; // go back one\n            this.state = this.stack.pop() || STATE.VALUE;\n          }\n          continue;\n\n        default:\n          this._error(`Unknown state: ${this.state}`);\n      }\n    }\n    if (this.position >= this.bufferCheckPosition) {\n      checkBufferLength(this);\n    }\n\n    this.emit('onchunkparsed');\n\n    return this;\n  }\n\n  _closeValue(event: string = 'onvalue'): void {\n    if (this.textNode !== undefined) {\n      this.emit(event, this.textNode);\n    }\n    this.textNode = undefined;\n  }\n\n  _closeNumber(): void {\n    if (this.numberNode) this.emit('onvalue', parseFloat(this.numberNode));\n    this.numberNode = '';\n  }\n\n  _error(message: string = ''): void {\n    this._closeValue();\n    message += `\\nLine: ${this.line}\\nColumn: ${this.column}\\nChar: ${this.c}`;\n    const error = new Error(message);\n    this.error = error;\n    this.emit('onerror', error);\n  }\n}\n\nfunction isWhitespace(c): boolean {\n  return c === Char.carriageReturn || c === Char.lineFeed || c === Char.space || c === Char.tab;\n}\n\nfunction checkBufferLength(parser) {\n  const maxAllowed = Math.max(MAX_BUFFER_LENGTH, 10);\n  let maxActual = 0;\n\n  for (const buffer of ['textNode', 'numberNode']) {\n    const len = parser[buffer] === undefined ? 0 : parser[buffer].length;\n    if (len > maxAllowed) {\n      switch (buffer) {\n        case 'text':\n          // TODO - should this be closeValue?\n          // closeText(parser);\n          break;\n\n        default:\n          parser._error(`Max buffer length exceeded: ${buffer}`);\n      }\n    }\n    maxActual = Math.max(maxActual, len);\n  }\n  parser.bufferCheckPosition = MAX_BUFFER_LENGTH - maxActual + parser.position;\n}\n"],"mappings":"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"}