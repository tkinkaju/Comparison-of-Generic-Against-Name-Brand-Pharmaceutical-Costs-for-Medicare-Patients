{"version":3,"file":"jsonpath.js","names":["JSONPath","path","Array","isArray","push","split","Error","join","name","pop","length","other","i","object","value","shift","field","component"],"sources":["../../../../src/lib/jsonpath/jsonpath.ts"],"sourcesContent":["/**\n * A parser for a minimal subset of the jsonpath standard\n * Full JSON path parsers for JS exist but are quite large (bundle size)\n *\n * Supports\n *\n *   `$.component.component.component`\n */\nexport default class JSONPath {\n  path: string[];\n\n  constructor(path: JSONPath | string[] | string | null = null) {\n    this.path = ['$'];\n\n    if (path instanceof JSONPath) {\n      // @ts-ignore\n      this.path = [...path.path];\n      return;\n    }\n\n    if (Array.isArray(path)) {\n      this.path.push(...path);\n      return;\n    }\n\n    // Parse a string as a JSONPath\n    if (typeof path === 'string') {\n      this.path = path.split('.');\n      if (this.path[0] !== '$') {\n        throw new Error('JSONPaths must start with $');\n      }\n    }\n  }\n\n  clone(): JSONPath {\n    return new JSONPath(this);\n  }\n\n  toString(): string {\n    return this.path.join('.');\n  }\n\n  push(name: string): void {\n    this.path.push(name);\n  }\n\n  pop() {\n    return this.path.pop();\n  }\n\n  set(name: string): void {\n    this.path[this.path.length - 1] = name;\n  }\n\n  equals(other: JSONPath): boolean {\n    if (!this || !other || this.path.length !== other.path.length) {\n      return false;\n    }\n\n    for (let i = 0; i < this.path.length; ++i) {\n      if (this.path[i] !== other.path[i]) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  /**\n   * Sets the value pointed at by path\n   * TODO - handle root path\n   * @param object\n   * @param value\n   */\n  setFieldAtPath(object, value) {\n    const path = [...this.path];\n    path.shift();\n    const field = path.pop();\n    for (const component of path) {\n      object = object[component];\n    }\n    // @ts-ignore\n    object[field] = value;\n  }\n\n  /**\n   * Gets the value pointed at by path\n   * TODO - handle root path\n   * @param object\n   */\n  getFieldAtPath(object) {\n    const path = [...this.path];\n    path.shift();\n    const field = path.pop();\n    for (const component of path) {\n      object = object[component];\n    }\n    // @ts-ignore\n    return object[field];\n  }\n}\n"],"mappings":"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"}