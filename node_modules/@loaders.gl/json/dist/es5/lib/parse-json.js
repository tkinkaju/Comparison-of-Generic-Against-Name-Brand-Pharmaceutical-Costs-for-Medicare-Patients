"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = parseJSONSync;
var _typeof2 = _interopRequireDefault(require("@babel/runtime/helpers/typeof"));
function parseJSONSync(jsonText, options) {
  try {
    var _options$json;
    var json = JSON.parse(jsonText);
    if ((_options$json = options.json) !== null && _options$json !== void 0 && _options$json.table) {
      return getFirstArray(json) || json;
    }
    return json;
  } catch (error) {
    throw new Error('JSONLoader: failed to parse JSON');
  }
}
function getFirstArray(json) {
  if (Array.isArray(json)) {
    return json;
  }
  if (json && (0, _typeof2.default)(json) === 'object') {
    for (var _i = 0, _Object$values = Object.values(json); _i < _Object$values.length; _i++) {
      var value = _Object$values[_i];
      var array = getFirstArray(value);
      if (array) {
        return array;
      }
    }
  }
  return null;
}
//# sourceMappingURL=parse-json.js.map