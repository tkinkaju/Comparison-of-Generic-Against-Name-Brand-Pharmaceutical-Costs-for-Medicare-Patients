{"version":3,"file":"parse-3d-tile-header.js","names":["SIZEOF_UINT32","parse3DTileHeaderSync","tile","arrayBuffer","byteOffset","view","DataView","magic","getUint32","version","byteLength","Error"],"sources":["../../../../../src/lib/parsers/helpers/parse-3d-tile-header.ts"],"sourcesContent":["// This file is derived from the Cesium code base under Apache 2 license\n// See LICENSE.md and https://github.com/AnalyticalGraphicsInc/cesium/blob/master/LICENSE.md\n\nconst SIZEOF_UINT32 = 4;\n\n/* PARSE FIXED HEADER:\nPopulates\n  magic, // identifies type of tile\n  type, // String version of magic\n  version,\n  byteLength\n */\nexport function parse3DTileHeaderSync(tile, arrayBuffer, byteOffset = 0) {\n  const view = new DataView(arrayBuffer);\n\n  tile.magic = view.getUint32(byteOffset, true);\n  byteOffset += SIZEOF_UINT32;\n\n  tile.version = view.getUint32(byteOffset, true);\n  byteOffset += SIZEOF_UINT32;\n\n  tile.byteLength = view.getUint32(byteOffset, true);\n  byteOffset += SIZEOF_UINT32;\n\n  // TODO - move version check into each tile parser?\n  if (tile.version !== 1) {\n    throw new Error(`3D Tile Version ${tile.version} not supported`);\n  }\n\n  return byteOffset; // Indicates where the parsing ended\n}\n"],"mappings":";;;;;;;AAGA,IAAMA,aAAa,GAAG,CAAC;;AAShB,SAASC,qBAAqB,CAACC,IAAI,EAAEC,WAAW,EAAkB;EAAA,IAAhBC,UAAU,uEAAG,CAAC;EACrE,IAAMC,IAAI,GAAG,IAAIC,QAAQ,CAACH,WAAW,CAAC;EAEtCD,IAAI,CAACK,KAAK,GAAGF,IAAI,CAACG,SAAS,CAACJ,UAAU,EAAE,IAAI,CAAC;EAC7CA,UAAU,IAAIJ,aAAa;EAE3BE,IAAI,CAACO,OAAO,GAAGJ,IAAI,CAACG,SAAS,CAACJ,UAAU,EAAE,IAAI,CAAC;EAC/CA,UAAU,IAAIJ,aAAa;EAE3BE,IAAI,CAACQ,UAAU,GAAGL,IAAI,CAACG,SAAS,CAACJ,UAAU,EAAE,IAAI,CAAC;EAClDA,UAAU,IAAIJ,aAAa;;EAG3B,IAAIE,IAAI,CAACO,OAAO,KAAK,CAAC,EAAE;IACtB,MAAM,IAAIE,KAAK,2BAAoBT,IAAI,CAACO,OAAO,oBAAiB;EAClE;EAEA,OAAOL,UAAU;AACnB"}