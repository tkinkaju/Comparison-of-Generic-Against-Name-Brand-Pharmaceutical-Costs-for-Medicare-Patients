{"version":3,"file":"lerc-loader.js","names":["Lerc","VERSION","LERCLoader","id","name","module","version","worker","extensions","mimeTypes","options","wms","parse","arrayBuffer","parseLERC","load","pixelBlock","decode","lerc","_typecheckLERCLoader"],"sources":["../../src/lerc-loader.ts"],"sourcesContent":["// loaders.gl, MIT license\n\nimport type {LoaderWithParser, LoaderOptions} from '@loaders.gl/loader-utils';\nimport type {LERCData} from './lib/lerc/lerc-types';\nimport * as Lerc from 'lerc';\n\n// __VERSION__ is injected by babel-plugin-version-inline\n// @ts-ignore TS2304: Cannot find name '__VERSION__'.\nconst VERSION = typeof __VERSION__ !== 'undefined' ? __VERSION__ : 'latest';\n\nexport type LERCLoaderOptions = LoaderOptions & {\n  lerc?: {\n    /**\tThe number of bytes to skip in the input byte stream. A valid Lerc file is expected at that position. */\n    inputOffset?: number;\n    /**\tIt is recommended to use the returned mask instead of setting this value. */\n    noDataValue?: number;\n    /**\t(ndepth LERC2 only) If true, returned depth values are pixel-interleaved. */\n    returnInterleaved?: boolean;\n  };\n};\n\n/**\n * Loader for the LERC raster format\n */\nexport const LERCLoader = {\n  id: 'lerc',\n  name: 'LERC',\n\n  module: 'wms',\n  version: VERSION,\n  worker: false,\n  extensions: ['lrc', 'lerc', 'lerc2', 'lerc1'],\n  mimeTypes: ['application/octet-stream'],\n  // test: ?,\n  options: {\n    wms: {}\n  },\n  parse: async (arrayBuffer: ArrayBuffer, options?: LERCLoaderOptions) =>\n    parseLERC(arrayBuffer, options)\n};\n\nasync function parseLERC(arrayBuffer: ArrayBuffer, options?: LERCLoaderOptions): Promise<LERCData> {\n  // Load the WASM library\n  await Lerc.load();\n  // Perform the decode\n  const pixelBlock = Lerc.decode(arrayBuffer, options?.lerc);\n  return pixelBlock;\n}\n\nexport const _typecheckLERCLoader: LoaderWithParser = LERCLoader;\n"],"mappings":";;AAIA,OAAO,KAAKA,IAAI,MAAM,MAAM;;AAI5B,MAAMC,OAAO,GAAG,cAAkB,KAAK,WAAW,aAAiB,QAAQ;AAgB3E,OAAO,MAAMC,UAAU,GAAG;EACxBC,EAAE,EAAE,MAAM;EACVC,IAAI,EAAE,MAAM;EAEZC,MAAM,EAAE,KAAK;EACbC,OAAO,EAAEL,OAAO;EAChBM,MAAM,EAAE,KAAK;EACbC,UAAU,EAAE,CAAC,KAAK,EAAE,MAAM,EAAE,OAAO,EAAE,OAAO,CAAC;EAC7CC,SAAS,EAAE,CAAC,0BAA0B,CAAC;EAEvCC,OAAO,EAAE;IACPC,GAAG,EAAE,CAAC;EACR,CAAC;EACDC,KAAK,EAAE,OAAOC,WAAwB,EAAEH,OAA2B,KACjEI,SAAS,CAACD,WAAW,EAAEH,OAAO;AAClC,CAAC;AAED,eAAeI,SAAS,CAACD,WAAwB,EAAEH,OAA2B,EAAqB;EAEjG,MAAMV,IAAI,CAACe,IAAI,EAAE;EAEjB,MAAMC,UAAU,GAAGhB,IAAI,CAACiB,MAAM,CAACJ,WAAW,EAAEH,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEQ,IAAI,CAAC;EAC1D,OAAOF,UAAU;AACnB;AAEA,OAAO,MAAMG,oBAAsC,GAAGjB,UAAU"}