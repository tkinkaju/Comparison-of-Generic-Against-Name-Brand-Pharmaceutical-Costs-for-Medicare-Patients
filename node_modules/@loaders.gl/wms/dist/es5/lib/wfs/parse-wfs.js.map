{"version":3,"file":"parse-wfs.js","names":["parseWFSCapabilities","text","options","xml","removeNSPrefix","parsedXML","XMLLoader","parseTextSync","xmlCapabilities","Capabilities","uncapitalizeKeys","object","newObject","Object","entries","key","value","uncapitalize","str","charAt","toLowerCase","slice"],"sources":["../../../../src/lib/wfs/parse-wfs.ts"],"sourcesContent":["// loaders.gl, MIT license\n\nimport type {WFSCapabilities} from './wfs-types';\n\nimport {XMLLoader} from '@loaders.gl/xml';\n\n// GetCapabilities\n\n/**\n * Parses a typed data structure from raw XML for `GetCapabilities` response\n * @note Error handlings is fairly weak\n */\nexport function parseWFSCapabilities(text: string, options): WFSCapabilities {\n  // Remove namespaces in XML\n  options = {...options, xml: {...options?.xml, removeNSPrefix: true}};\n  const parsedXML = XMLLoader.parseTextSync(text, options);\n  const xmlCapabilities: any = parsedXML.Capabilities || parsedXML;\n  return uncapitalizeKeys(xmlCapabilities);\n}\n\nfunction uncapitalizeKeys(object: any): any {\n  if (object && typeof object === 'object') {\n    const newObject = {};\n    for (const [key, value] of Object.entries(object)) {\n      newObject[uncapitalize(key)] = uncapitalizeKeys(value);\n    }\n    return newObject;\n  }\n  return object;\n}\n\n/**\n * Uncapitalize first letter of a string\n * @param {string} str\n * @returns {string}\n */\nfunction uncapitalize(str: string): string {\n  return typeof str === 'string' ? str.charAt(0).toLowerCase() + str.slice(1) : str;\n}\n"],"mappings":";;;;;;;;;;AAIA;AAA0C;AAAA;;AAQnC,SAASA,oBAAoB,CAACC,IAAY,EAAEC,OAAO,EAAmB;EAAA;EAE3EA,OAAO,mCAAOA,OAAO;IAAEC,GAAG,8CAAMD,OAAO,6CAAP,SAASC,GAAG;MAAEC,cAAc,EAAE;IAAI;EAAC,EAAC;EACpE,IAAMC,SAAS,GAAGC,cAAS,CAACC,aAAa,CAACN,IAAI,EAAEC,OAAO,CAAC;EACxD,IAAMM,eAAoB,GAAGH,SAAS,CAACI,YAAY,IAAIJ,SAAS;EAChE,OAAOK,gBAAgB,CAACF,eAAe,CAAC;AAC1C;AAEA,SAASE,gBAAgB,CAACC,MAAW,EAAO;EAC1C,IAAIA,MAAM,IAAI,sBAAOA,MAAM,MAAK,QAAQ,EAAE;IACxC,IAAMC,SAAS,GAAG,CAAC,CAAC;IACpB,mCAA2BC,MAAM,CAACC,OAAO,CAACH,MAAM,CAAC,qCAAE;MAA9C;QAAOI,GAAG;QAAEC,KAAK;MACpBJ,SAAS,CAACK,YAAY,CAACF,GAAG,CAAC,CAAC,GAAGL,gBAAgB,CAACM,KAAK,CAAC;IACxD;IACA,OAAOJ,SAAS;EAClB;EACA,OAAOD,MAAM;AACf;;AAOA,SAASM,YAAY,CAACC,GAAW,EAAU;EACzC,OAAO,OAAOA,GAAG,KAAK,QAAQ,GAAGA,GAAG,CAACC,MAAM,CAAC,CAAC,CAAC,CAACC,WAAW,EAAE,GAAGF,GAAG,CAACG,KAAK,CAAC,CAAC,CAAC,GAAGH,GAAG;AACnF"}