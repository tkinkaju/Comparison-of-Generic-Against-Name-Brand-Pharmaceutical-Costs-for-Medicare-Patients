// Copyright (c) 2022 Uber Technologies, Inc.
//
// Permission is hereby granted, free of charge, to any person obtaining a copy
// of this software and associated documentation files (the "Software"), to deal
// in the Software without restriction, including without limitation the rights
// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
// copies of the Software, and to permit persons to whom the Software is
// furnished to do so, subject to the following conditions:
//
// The above copyright notice and this permission notice shall be included in
// all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
// THE SOFTWARE.

"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _interopRequireWildcard = require("@babel/runtime/helpers/interopRequireWildcard");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = exports.StyledToggleOption = void 0;

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _taggedTemplateLiteral2 = _interopRequireDefault(require("@babel/runtime/helpers/taggedTemplateLiteral"));

var _react = _interopRequireWildcard(require("react"));

var _styledComponents = _interopRequireDefault(require("styled-components"));

var _orderByList = _interopRequireDefault(require("../../common/icons/order-by-list"));

var _orderByDataset = _interopRequireDefault(require("../../common/icons/order-by-dataset"));

var _styledComponents2 = require("../../common/styled-components");

var _localization = require("@kepler.gl/localization");

var _templateObject, _templateObject2, _templateObject3;

function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { (0, _defineProperty2["default"])(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }

var PanelViewListToggleContainer = _styledComponents["default"].div.attrs({
  className: 'panel-view-list-toggle'
})(_templateObject || (_templateObject = (0, _taggedTemplateLiteral2["default"])([""])));

var PanelViewListToggleWrapper = _styledComponents["default"].div.attrs({
  className: 'panel-view-list-toggle-inner'
})(_templateObject2 || (_templateObject2 = (0, _taggedTemplateLiteral2["default"])(["\n  display: flex;\n  justify-content: flex-end;\n  align-content: center;\n  gap: 10px;\n"])));

var StyledToggleOption = _styledComponents["default"].div.attrs({
  className: 'layer-panel-toggle-option'
})(_templateObject3 || (_templateObject3 = (0, _taggedTemplateLiteral2["default"])(["\n  color: ", ";\n  :hover {\n    cursor: pointer;\n    color: ", ";\n  }\n"])), function (props) {
  return props.active ? props.theme.layerPanelToggleOptionColorActive : props.theme.layerPanelToggleOptionColor;
}, function (props) {
  return props.theme.layerPanelToggleOptionColorActive;
});

exports.StyledToggleOption = StyledToggleOption;

function ToggleOptionFactory() {
  var ToggleOption = function ToggleOption(_ref) {
    var isActive = _ref.isActive,
        onClick = _ref.onClick,
        option = _ref.option;
    return /*#__PURE__*/_react["default"].createElement(StyledToggleOption, {
      "data-tip": true,
      "data-for": "".concat(option.id, "-toggle-option"),
      active: isActive,
      onClick: onClick
    }, /*#__PURE__*/_react["default"].createElement(option.iconComponent, {
      height: "20px"
    }), /*#__PURE__*/_react["default"].createElement(_styledComponents2.Tooltip, {
      id: "".concat(option.id, "-toggle-option"),
      effect: "solid",
      delayShow: 500,
      place: "bottom"
    }, /*#__PURE__*/_react["default"].createElement("span", null, /*#__PURE__*/_react["default"].createElement(_localization.FormattedMessage, {
      id: option.label
    }))));
  };

  return ToggleOption;
}

var TOGGLE_OPTIONS = [{
  id: 'list',
  iconComponent: _orderByList["default"],
  value: 'list',
  label: 'List'
}, {
  id: 'sort-by-dataset',
  iconComponent: _orderByDataset["default"],
  value: 'sortByDataset',
  label: 'Sort by dataset'
}];
PanelViewListToggleFactory.deps = [ToggleOptionFactory];

function PanelViewListToggleFactory(ToggleOption) {
  var PanelViewListToggle = function PanelViewListToggle(props) {
    var layerPanelListViewMode = props.layerPanelListViewMode,
        toggleLayerPanelListView = props.toggleLayerPanelListView;

    var toggleListView = function toggleListView(listView) {
      return toggleLayerPanelListView(listView);
    };

    var options = (0, _react.useMemo)(function () {
      return TOGGLE_OPTIONS.map(function (opt) {
        return _objectSpread(_objectSpread({}, opt), {}, {
          isActive: layerPanelListViewMode === opt.value
        });
      });
    }, [layerPanelListViewMode]);
    return /*#__PURE__*/_react["default"].createElement(PanelViewListToggleContainer, null, /*#__PURE__*/_react["default"].createElement(PanelViewListToggleWrapper, null, options.map(function (opt) {
      return /*#__PURE__*/_react["default"].createElement(ToggleOption, {
        key: opt.id,
        onClick: function onClick() {
          return toggleListView(opt.value);
        },
        option: opt,
        isActive: opt.isActive
      });
    })));
  };

  return PanelViewListToggle;
}

var _default = PanelViewListToggleFactory;
exports["default"] = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9zaWRlLXBhbmVsL2xheWVyLXBhbmVsL3BhbmVsLXZpZXctbGlzdC10b2dnbGUudHN4Il0sIm5hbWVzIjpbIlBhbmVsVmlld0xpc3RUb2dnbGVDb250YWluZXIiLCJzdHlsZWQiLCJkaXYiLCJhdHRycyIsImNsYXNzTmFtZSIsIlBhbmVsVmlld0xpc3RUb2dnbGVXcmFwcGVyIiwiU3R5bGVkVG9nZ2xlT3B0aW9uIiwicHJvcHMiLCJhY3RpdmUiLCJ0aGVtZSIsImxheWVyUGFuZWxUb2dnbGVPcHRpb25Db2xvckFjdGl2ZSIsImxheWVyUGFuZWxUb2dnbGVPcHRpb25Db2xvciIsIlRvZ2dsZU9wdGlvbkZhY3RvcnkiLCJUb2dnbGVPcHRpb24iLCJpc0FjdGl2ZSIsIm9uQ2xpY2siLCJvcHRpb24iLCJpZCIsImxhYmVsIiwiVE9HR0xFX09QVElPTlMiLCJpY29uQ29tcG9uZW50IiwiT3JkZXJCeUxpc3QiLCJ2YWx1ZSIsIk9yZGVyQnlEYXRhc2V0IiwiUGFuZWxWaWV3TGlzdFRvZ2dsZUZhY3RvcnkiLCJkZXBzIiwiUGFuZWxWaWV3TGlzdFRvZ2dsZSIsImxheWVyUGFuZWxMaXN0Vmlld01vZGUiLCJ0b2dnbGVMYXllclBhbmVsTGlzdFZpZXciLCJ0b2dnbGVMaXN0VmlldyIsImxpc3RWaWV3Iiwib3B0aW9ucyIsIm1hcCIsIm9wdCJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBb0JBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOzs7Ozs7OztBQWNBLElBQU1BLDRCQUE0QixHQUFHQyw2QkFBT0MsR0FBUCxDQUFXQyxLQUFYLENBQWlCO0FBQ3BEQyxFQUFBQSxTQUFTLEVBQUU7QUFEeUMsQ0FBakIsQ0FBSCxzRkFBbEM7O0FBSUEsSUFBTUMsMEJBQTBCLEdBQUdKLDZCQUFPQyxHQUFQLENBQVdDLEtBQVgsQ0FBaUI7QUFDbERDLEVBQUFBLFNBQVMsRUFBRTtBQUR1QyxDQUFqQixDQUFILGtMQUFoQzs7QUFTTyxJQUFN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QixFQURYO0FBRUUsUUFBQSxPQUFPLEVBQUU7QUFBQSxpQkFBTVksY0FBYyxDQUFDSSxHQUFHLENBQUNYLEtBQUwsQ0FBcEI7QUFBQSxTQUZYO0FBR0UsUUFBQSxNQUFNLEVBQUVXLEdBSFY7QUFJRSxRQUFBLFFBQVEsRUFBRUEsR0FBRyxDQUFDbkI7QUFKaEIsUUFEYztBQUFBLEtBQWYsQ0FESCxDQURGLENBREY7QUFjRCxHQXZCRDs7QUF5QkEsU0FBT1ksbUJBQVA7QUFDRDs7ZUFFY0YsMEIiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgKGMpIDIwMjIgVWJlciBUZWNobm9sb2dpZXMsIEluYy5cbi8vXG4vLyBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYSBjb3B5XG4vLyBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZSBcIlNvZnR3YXJlXCIpLCB0byBkZWFsXG4vLyBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzXG4vLyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsXG4vLyBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXNcbi8vIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnM6XG4vL1xuLy8gVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWQgaW5cbi8vIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuLy9cbi8vIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MgT1Jcbi8vIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLFxuLy8gRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFXG4vLyBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SIE9USEVSXG4vLyBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLFxuLy8gT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTlxuLy8gVEhFIFNPRlRXQVJFLlxuXG5pbXBvcnQgUmVhY3QsIHt1c2VNZW1vfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgc3R5bGVkIGZyb20gJ3N0eWxlZC1jb21wb25lbnRzJztcbmltcG9ydCBPcmRlckJ5TGlzdCBmcm9tICcuLi8uLi9jb21tb24vaWNvbnMvb3JkZXItYnktbGlzdCc7XG5pbXBvcnQgT3JkZXJCeURhdGFzZXQgZnJvbSAnLi4vLi4vY29tbW9uL2ljb25zL29yZGVyLWJ5LWRhdGFzZXQnO1xuaW1wb3J0IHtUb29sdGlwfSBmcm9tICcuLi8uLi9jb21tb24vc3R5bGVkLWNvbXBvbmVudHMnO1xuaW1wb3J0IHtGb3JtYXR0ZWRNZXNzYWdlfSBmcm9tICdAa2VwbGVyLmdsL2xvY2FsaXphdGlvbic7XG5pbXBvcnQge0xheWVyUGFuZWxMaXN0Vmlld30gZnJvbSAnQGtlcGxlci5nbC90eXBlcyc7XG5cbnR5cGUgVG9nZ2xlT3B0aW9uUHJvcHMgPSB7XG4gIGlzQWN0aXZlOiBib29sZWFuO1xuICBvbkNsaWNrOiAoKSA9PiB2b2lkO1xuICBvcHRpb246IHR5cGVvZiBUT0dHTEVfT1BUSU9OU1swXTtcbn07XG5cbnR5cGUgUGFuZWxWaWV3TGlzdFRvZ2dsZVByb3BzID0ge1xuICBsYXllclBhbmVsTGlzdFZpZXdNb2RlOiBMYXllclBhbmVsTGlzdFZpZXc7XG4gIHRvZ2dsZUxheWVyUGFuZWxMaXN0VmlldzogKHZpZXc6IHN0cmluZykgPT4gdm9pZDtcbn07XG5cbmNvbnN0IFBhbmVsVmlld0xpc3RUb2dnbGVDb250YWluZXIgPSBzdHlsZWQuZGl2LmF0dHJzKHtcbiAgY2xhc3NOYW1lOiAncGFuZWwtdmlldy1saXN0LXRvZ2dsZSdcbn0pYGA7XG5cbmNvbnN0IFBhbmVsVmlld0xpc3RUb2dnbGVXcmFwcGVyID0gc3R5bGVkLmRpdi5hdHRycyh7XG4gIGNsYXNzTmFtZTogJ3BhbmVsLXZpZXctbGlzdC10b2dnbGUtaW5uZXInXG59KWBcbiAgZGlzcGxheTogZmxleDtcbiAganVzdGlmeS1jb250ZW50OiBmbGV4LWVuZDtcbiAgYWxpZ24tY29udGVudDogY2VudGVyO1xuICBnYXA6IDEwcHg7XG5gO1xuXG5leHBvcnQgY29uc3QgU3R5bGVkVG9nZ2xlT3B0aW9uID0gc3R5bGVkLmRpdi5hdHRycyh7XG4gIGNsYXNzTmFtZTogJ2xheWVyLXBhbmVsLXRvZ2dsZS1vcHRpb24nXG59KTx7YWN0aXZlOiBib29sZWFufT5gXG4gIGNvbG9yOiAke3Byb3BzID0+XG4gICAgcHJvcHMuYWN0aXZlXG4gICAgICA/IHByb3BzLnRoZW1lLmxheWVyUGFuZWxUb2dnbGVPcHRpb25Db2xvckFjdGl2ZVxuICAgICAgOiBwcm9wcy50aGVtZS5sYXllclBhbmVsVG9nZ2xlT3B0aW9uQ29sb3J9O1xuICA6aG92ZXIge1xuICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICBjb2xvcjogJHtwcm9wcyA9PiBwcm9wcy50aGVtZS5sYXllclBhbmVsVG9nZ2xlT3B0aW9uQ29sb3JBY3RpdmV9O1xuICB9XG5gO1xuXG5mdW5jdGlvbiBUb2dnbGVPcHRpb25GYWN0b3J5KCkge1xuICBjb25zdCBUb2dnbGVPcHRpb246IFJlYWN0LkZDPFRvZ2dsZU9wdGlvblByb3BzPiA9ICh7aXNBY3RpdmUsIG9uQ2xpY2ssIG9wdGlvbn0pID0+IChcbiAgICA8U3R5bGVkVG9nZ2xlT3B0aW9uXG4gICAgICBkYXRhLXRpcFxuICAgICAgZGF0YS1mb3I9e2Ake29wdGlvbi5pZH0tdG9nZ2xlLW9wdGlvbmB9XG4gICAgICBhY3RpdmU9e2lzQWN0aXZlfVxuICAgICAgb25DbGljaz17b25DbGlja31cbiAgICA+XG4gICAgICA8b3B0aW9uLmljb25Db21wb25lbnQgaGVpZ2h0PVwiMjBweFwiIC8+XG4gICAgICA8VG9vbHRpcCBpZD17YCR7b3B0aW9uLmlkfS10b2dnbGUtb3B0aW9uYH0gZWZmZWN0PVwic29saWRcIiBkZWxheVNob3c9ezUwMH0gcGxhY2U9XCJib3R0b21cIj5cbiAgICAgICAgPHNwYW4+XG4gICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2UgaWQ9e29wdGlvbi5sYWJlbH0gLz5cbiAgICAgICAgPC9zcGFuPlxuICAgICAgPC9Ub29sdGlwPlxuICAgIDwvU3R5bGVkVG9nZ2xlT3B0aW9uPlxuICApO1xuXG4gIHJldHVybiBUb2dnbGVPcHRpb247XG59XG5cbmNvbnN0IFRPR0dMRV9PUFRJT05TID0gW1xuICB7XG4gICAgaWQ6ICdsaXN0JyxcbiAgICBpY29uQ29tcG9uZW50OiBPcmRlckJ5TGlzdCxcbiAgICB2YWx1ZTogJ2xpc3QnLFxuICAgIGxhYmVsOiAnTGlzdCdcbiAgfSxcbiAge1xuICAgIGlkOiAnc29ydC1ieS1kYXRhc2V0JyxcbiAgICBpY29uQ29tcG9uZW50OiBPcmRlckJ5RGF0YXNldCxcbiAgICB2YWx1ZTogJ3NvcnRCeURhdGFzZXQnLFxuICAgIGxhYmVsOiAnU29ydCBieSBkYXRhc2V0J1xuICB9XG5dO1xuXG5QYW5lbFZpZXdMaXN0VG9nZ2xlRmFjdG9yeS5kZXBzID0gW1RvZ2dsZU9wdGlvbkZhY3RvcnldO1xuXG5mdW5jdGlvbiBQYW5lbFZpZXdMaXN0VG9nZ2xlRmFjdG9yeShUb2dnbGVPcHRpb246IFJldHVyblR5cGU8dHlwZW9mIFRvZ2dsZU9wdGlvbkZhY3Rvcnk+KSB7XG4gIGNvbnN0IFBhbmVsVmlld0xpc3RUb2dnbGU6IFJlYWN0LkZDPFBhbmVsVmlld0xpc3RUb2dnbGVQcm9wcz4gPSBwcm9wcyA9PiB7XG4gICAgY29uc3Qge2xheWVyUGFuZWxMaXN0Vmlld01vZGUsIHRvZ2dsZUxheWVyUGFuZWxMaXN0Vmlld30gPSBwcm9wcztcblxuICAgIGNvbnN0IHRvZ2dsZUxpc3RWaWV3ID0gKGxpc3RWaWV3OiBzdHJpbmcpID0+IHRvZ2dsZUxheWVyUGFuZWxMaXN0VmlldyhsaXN0Vmlldyk7XG4gICAgY29uc3Qgb3B0aW9ucyA9IHVzZU1lbW8oXG4gICAgICAoKSA9PiBUT0dHTEVfT1BUSU9OUy5tYXAob3B0ID0+ICh7Li4ub3B0LCBpc0FjdGl2ZTogbGF5ZXJQYW5lbExpc3RWaWV3TW9kZSA9PT0gb3B0LnZhbHVlfSkpLFxuICAgICAgW2xheWVyUGFuZWxMaXN0Vmlld01vZGVdXG4gICAgKTtcblxuICAgIHJldHVybiAoXG4gICAgICA8UGFuZWxWaWV3TGlzdFRvZ2dsZUNvbnRhaW5lcj5cbiAgICAgICAgPFBhbmVsVmlld0xpc3RUb2dnbGVXcmFwcGVyPlxuICAgICAgICAgIHtvcHRpb25zLm1hcChvcHQgPT4gKFxuICAgICAgICAgICAgPFRvZ2dsZU9wdGlvblxuICAgICAgICAgICAgICBrZXk9e29wdC5pZH1cbiAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gdG9nZ2xlTGlzdFZpZXcob3B0LnZhbHVlKX1cbiAgICAgICAgICAgICAgb3B0aW9uPXtvcHR9XG4gICAgICAgICAgICAgIGlzQWN0aXZlPXtvcHQuaXNBY3RpdmV9XG4gICAgICAgICAgICAvPlxuICAgICAgICAgICkpfVxuICAgICAgICA8L1BhbmVsVmlld0xpc3RUb2dnbGVXcmFwcGVyPlxuICAgICAgPC9QYW5lbFZpZXdMaXN0VG9nZ2xlQ29udGFpbmVyPlxuICAgICk7XG4gIH07XG5cbiAgcmV0dXJuIFBhbmVsVmlld0xpc3RUb2dnbGU7XG59XG5cbmV4cG9ydCBkZWZhdWx0IFBhbmVsVmlld0xpc3RUb2dnbGVGYWN0b3J5O1xuIl19