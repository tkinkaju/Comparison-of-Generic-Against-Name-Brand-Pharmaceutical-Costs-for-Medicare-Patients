// Copyright (c) 2022 Uber Technologies, Inc.
//
// Permission is hereby granted, free of charge, to any person obtaining a copy
// of this software and associated documentation files (the "Software"), to deal
// in the Software without restriction, including without limitation the rights
// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
// copies of the Software, and to permit persons to whom the Software is
// furnished to do so, subject to the following conditions:
//
// The above copyright notice and this permission notice shall be included in
// all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
// THE SOFTWARE.

"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _interopRequireWildcard = require("@babel/runtime/helpers/interopRequireWildcard");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = TimeRangeSliderFactory;

var _taggedTemplateLiteral2 = _interopRequireDefault(require("@babel/runtime/helpers/taggedTemplateLiteral"));

var _react = _interopRequireWildcard(require("react"));

var _lodash = _interopRequireDefault(require("lodash.throttle"));

var _styledComponents = _interopRequireDefault(require("styled-components"));

var _rangeSlider = _interopRequireDefault(require("./range-slider"));

var _timeSliderMarker = _interopRequireDefault(require("./time-slider-marker"));

var _playbackControls = _interopRequireDefault(require("./animation-control/playback-controls"));

var _timeRangeSliderTimeTitle = _interopRequireDefault(require("./time-range-slider-time-title"));

var _templateObject;

var animationControlWidth = 176;

var StyledSliderContainer = _styledComponents["default"].div(_templateObject || (_templateObject = (0, _taggedTemplateLiteral2["default"])(["\n  align-items: flex-end;\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  padding-left: ", "px;\n\n  .timeline-container .kg-slider {\n    display: none;\n  }\n\n  .playback-controls {\n    margin-left: 22px;\n  }\n"])), function (props) {
  return props.isEnlarged ? 24 : 0;
});

TimeRangeSliderFactory.deps = [_playbackControls["default"], _rangeSlider["default"], _timeSliderMarker["default"], _timeRangeSliderTimeTitle["default"]];

function TimeRangeSliderFactory(PlaybackControls, RangeSlider, TimeSliderMarker, TimeRangeSliderTimeTitle) {
  var TimeRangeSlider = function TimeRangeSlider(props) {
    var domain = props.domain,
        value = props.value,
        isEnlarged = props.isEnlarged,
        hideTimeTitle = props.hideTimeTitle,
        isAnimating = props.isAnimating,
        resetAnimation = props.resetAnimation,
        timeFormat = props.timeFormat,
        timezone = props.timezone,
        histogram = props.histogram,
        plotType = props.plotType,
        lineChart = props.lineChart,
        step = props.step,
        isAnimatable = props.isAnimatable,
        speed = props.speed,
        animationWindow = props.animationWindow,
        updateAnimationSpeed = props.updateAnimationSpeed,
        setFilterAnimationWindow = props.setFilterAnimationWindow,
        toggleAnimation = props.toggleAnimation,
        onChange = props.onChange;
    var throttledOnchange = (0, _react.useMemo)(function () {
      return (0, _lodash["default"])(onChange, 20);
    }, [onChange]);
    return /*#__PURE__*/_react["default"].createElement("div", {
      className: "time-range-slider"
    }, !hideTimeTitle ? /*#__PURE__*/_react["default"].createElement("div", {
      className: "time-range-slider__title",
      style: {
        width: isEnlarged ? "calc(100% - ".concat(animationControlWidth, "px)") : '100%'
      }
    }, /*#__PURE__*/_react["default"].createElement(TimeRangeSliderTimeTitle, {
      timeFormat: timeFormat,
      timezone: timezone,
      value: value,
      isEnlarged: isEnlarged
    })) : null, /*#__PURE__*/_react["default"].createElement(StyledSliderContainer, {
      className: "time-range-slider__container",
      isEnlarged: isEnlarged
    }, /*#__PURE__*/_react["default"].createElement("div", {
      className: "timeline-container",
      style: {
        width: isEnlarged ? "calc(100% - ".concat(animationControlWidth, "px)") : '100%'
      }
    }, /*#__PURE__*/_react["default"].createElement(RangeSlider, {
      range: domain,
      value0: value[0],
      value1: value[1],
      histogram: histogram,
      lineChart: lineChart,
      plotType: plotType,
      isEnlarged: isEnlarged,
      showInput: false,
      step: step,
      onChange: throttledOnchange,
      xAxis: TimeSliderMarker,
      timezone: timezone,
      timeFormat: timeFormat
    })), isEnlarged ? /*#__PURE__*/_react["default"].createElement(PlaybackControls, {
      isAnimatable: isAnimatable,
      width: animationControlWidth,
      speed: speed,
      animationWindow: animationWindow,
      updateAnimationSpeed: updateAnimationSpeed,
      setFilterAnimationWindow: setFilterAnimationWindow,
      pauseAnimation: toggleAnimation,
      resetAnimation: resetAnimation,
      isAnimating: isAnimating,
      startAnimation: toggleAnimation
    }) : null));
  };

  return /*#__PURE__*/_react["default"].memo(TimeRangeSlider);
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9jb21tb24vdGltZS1yYW5nZS1zbGlkZXIudHN4Il0sIm5hbWVzIjpbImFuaW1hdGlvbkNvbnRyb2xXaWR0aCIsIlN0eWxlZFNsaWRlckNvbnRhaW5lciIsInN0eWxlZCIsImRpdiIsInByb3BzIiwiaXNFbmxhcmdlZCIsIlRpbWVSYW5nZVNsaWRlckZhY3RvcnkiLCJkZXBzIiwiUGxheWJhY2tDb250cm9sc0ZhY3RvcnkiLCJSYW5nZVNsaWRlckZhY3RvcnkiLCJUaW1lU2xpZGVyTWFya2VyRmFjdG9yeSIsIlRpbWVSYW5nZVNsaWRlclRpbWVUaXRsZUZhY3RvcnkiLCJQbGF5YmFja0NvbnRyb2xzIiwiUmFuZ2VTbGlkZXIiLCJUaW1lU2xpZGVyTWFya2VyIiwiVGltZVJhbmdlU2xpZGVyVGltZVRpdGxlIiwiVGltZVJhbmdlU2xpZGVyIiwiZG9tYWluIiwidmFsdWUiLCJoaWRlVGltZVRpdGxlIiwiaXNBbmltYXRpbmciLCJyZXNldEFuaW1hdGlvbiIsInRpbWVGb3JtYXQiLCJ0aW1lem9uZSIsImhpc3RvZ3JhbSIsInBsb3RUeXBlIiwibGluZUNoYXJ0Iiwic3RlcCIsImlzQW5pbWF0YWJsZSIsInNwZWVkIiwiYW5pbWF0aW9uV2luZG93IiwidXBkYXRlQW5pbWF0aW9uU3BlZWQiLCJzZXRGaWx0ZXJBbmltYXRpb25XaW5kb3ciLCJ0b2dnbGVBbmltYXRpb24iLCJvbkNoYW5nZSIsInRocm90dGxlZE9uY2hhbmdlIiwid2lkdGgiLCJSZWFjdCIsIm1lbW8iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFvQkE7O0FBQ0E7O0FBQ0E7O0FBRUE7O0FBQ0E7O0FBQ0E7O0FBQ0E7Ozs7QUFHQSxJQUFNQSxxQkFBcUIsR0FBRyxHQUE5Qjs7QUE0QkEsSUFBTUMscUJBQXFCLEdBQUdDLDZCQUFPQyxHQUFWLCtVQUtULFVBQUFDLEtBQUs7QUFBQSxTQUFLQSxLQUFLLENBQUNDLFVBQU4sR0FBbUIsRUFBbkIsR0FBd0IsQ0FBN0I7QUFBQSxD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QURUO0FBRUUsTUFBQSxNQUFNLEVBQUVDLEtBQUssQ0FBQyxDQUFELENBRmY7QUFHRSxNQUFBLE1BQU0sRUFBRUEsS0FBSyxDQUFDLENBQUQsQ0FIZjtBQUlFLE1BQUEsU0FBUyxFQUFFTSxTQUpiO0FBS0UsTUFBQSxTQUFTLEVBQUVFLFNBTGI7QUFNRSxNQUFBLFFBQVEsRUFBRUQsUUFOWjtBQU9FLE1BQUEsVUFBVSxFQUFFcEIsVUFQZDtBQVFFLE1BQUEsU0FBUyxFQUFFLEtBUmI7QUFTRSxNQUFBLElBQUksRUFBRXNCLElBVFI7QUFVRSxNQUFBLFFBQVEsRUFBRVEsaUJBVlo7QUFXRSxNQUFBLEtBQUssRUFBRXJCLGdCQVhUO0FBWUUsTUFBQSxRQUFRLEVBQUVTLFFBWlo7QUFhRSxNQUFBLFVBQVUsRUFBRUQ7QUFiZCxNQU5GLENBREYsRUF1QkdqQixVQUFVLGdCQUNULGdDQUFDLGdCQUFEO0FBQ0UsTUFBQSxZQUFZLEVBQUV1QixZQURoQjtBQUVFLE1BQUEsS0FBSyxFQUFFNUIscUJBRlQ7QUFHRSxNQUFBLEtBQUssRUFBRTZCLEtBSFQ7QUFJRSxNQUFBLGVBQWUsRUFBRUMsZUFKbkI7QUFLRSxNQUFBLG9CQUFvQixFQUFFQyxvQkFMeEI7QUFNRSxNQUFBLHdCQUF3QixFQUFFQyx3QkFONUI7QUFPRSxNQUFBLGNBQWMsRUFBRUMsZUFQbEI7QUFRRSxNQUFBLGNBQWMsRUFBRVosY0FSbEI7QUFTRSxNQUFBLFdBQVcsRUFBRUQsV0FUZjtBQVVFLE1BQUEsY0FBYyxFQUFFYTtBQVZsQixNQURTLEdBYVAsSUFwQ04sQ0FoQkYsQ0FERjtBQXlERCxHQWpGRDs7QUFtRkEsc0JBQU9JLGtCQUFNQyxJQUFOLENBQVd0QixlQUFYLENBQVA7QUFDRCIsInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAoYykgMjAyMiBVYmVyIFRlY2hub2xvZ2llcywgSW5jLlxuLy9cbi8vIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhIGNvcHlcbi8vIG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlIFwiU29mdHdhcmVcIiksIHRvIGRlYWxcbi8vIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHNcbi8vIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGxcbi8vIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpc1xuLy8gZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgY29uZGl0aW9uczpcbi8vXG4vLyBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZCBpblxuLy8gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG4vL1xuLy8gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTUyBPUlxuLy8gSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFksXG4vLyBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTiBOTyBFVkVOVCBTSEFMTCBUSEVcbi8vIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVJcbi8vIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HIEZST00sXG4vLyBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SIE9USEVSIERFQUxJTkdTIElOXG4vLyBUSEUgU09GVFdBUkUuXG5cbmltcG9ydCBSZWFjdCwge3VzZU1lbW99IGZyb20gJ3JlYWN0JztcbmltcG9ydCB0aHJvdHRsZSBmcm9tICdsb2Rhc2gudGhyb3R0bGUnO1xuaW1wb3J0IHN0eWxlZCBmcm9tICdzdHlsZWQtY29tcG9uZW50cyc7XG5cbmltcG9ydCBSYW5nZVNsaWRlckZhY3RvcnkgZnJvbSAnLi9yYW5nZS1zbGlkZXInO1xuaW1wb3J0IFRpbWVTbGlkZXJNYXJrZXJGYWN0b3J5IGZyb20gJy4vdGltZS1zbGlkZXItbWFya2VyJztcbmltcG9ydCBQbGF5YmFja0NvbnRyb2xzRmFjdG9yeSBmcm9tICcuL2FuaW1hdGlvbi1jb250cm9sL3BsYXliYWNrLWNvbnRyb2xzJztcbmltcG9ydCBUaW1lUmFuZ2VTbGlkZXJUaW1lVGl0bGVGYWN0b3J5IGZyb20gJy4vdGltZS1yYW5nZS1zbGlkZXItdGltZS10aXRsZSc7XG5pbXBvcnQge0hpc3RvZ3JhbUJpbiwgTGluZUNoYXJ0fSBmcm9tICdAa2VwbGVyLmdsL3R5cGVzJztcblxuY29uc3QgYW5pbWF0aW9uQ29udHJvbFdpZHRoID0gMTc2O1xuXG5pbnRlcmZhY2UgU3R5bGVkU2xpZGVyQ29udGFpbmVyUHJvcHMge1xuICBpc0VubGFyZ2VkPzogYm9vbGVhbjtcbn1cblxudHlwZSBUaW1lUmFuZ2VTbGlkZXJQcm9wcyA9IHtcbiAgZG9tYWluPzogW251bWJlciwgbnVtYmVyXTtcbiAgdmFsdWU6IFtudW1iZXIsIG51bWJlcl07XG4gIGlzRW5sYXJnZWQ/OiBib29sZWFuO1xuICBoaWRlVGltZVRpdGxlPzogYm9vbGVhbjtcbiAgaXNBbmltYXRpbmc6IGJvb2xlYW47XG4gIHRpbWVGb3JtYXQ6IHN0cmluZztcbiAgdGltZXpvbmU/OiBzdHJpbmcgfCBudWxsO1xuICBoaXN0b2dyYW0/OiBIaXN0b2dyYW1CaW5bXTtcbiAgcGxvdFR5cGU/OiBzdHJpbmc7XG4gIGxpbmVDaGFydD86IExpbmVDaGFydDtcbiAgc3RlcDogbnVtYmVyO1xuICBpc0FuaW1hdGFibGU/OiBib29sZWFuO1xuICBzcGVlZDogbnVtYmVyO1xuICBhbmltYXRpb25XaW5kb3c6IHN0cmluZztcbiAgcmVzZXRBbmltYXRpb24/OiAoKSA9PiB2b2lkO1xuICB0b2dnbGVBbmltYXRpb246ICgpID0+IHZvaWQ7XG4gIHVwZGF0ZUFuaW1hdGlvblNwZWVkPzogKHZhbDogbnVtYmVyKSA9PiB2b2lkO1xuICBzZXRGaWx0ZXJBbmltYXRpb25XaW5kb3c/OiAoaWQ6IHN0cmluZykgPT4gdm9pZDtcbiAgb25DaGFuZ2U6ICh2OiBudW1iZXJbXSkgPT4gdm9pZDtcbn07XG5cbmNvbnN0IFN0eWxlZFNsaWRlckNvbnRhaW5lciA9IHN0eWxlZC5kaXY8U3R5bGVkU2xpZGVyQ29udGFpbmVyUHJvcHM+YFxuICBhbGlnbi1pdGVtczogZmxleC1lbmQ7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGZsZXgtZGlyZWN0aW9uOiByb3c7XG4gIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcbiAgcGFkZGluZy1sZWZ0OiAke3Byb3BzID0+IChwcm9wcy5pc0VubGFyZ2VkID8gMjQgOiAwKX1weDtcblxuICAudGltZWxpbmUtY29udGFpbmVyIC5rZy1zbGlkZXIge1xuICAgIGRpc3BsYXk6IG5vbmU7XG4gIH1cblxuICAucGxheWJhY2stY29udHJvbHMge1xuICAgIG1hcmdpbi1sZWZ0OiAyMnB4O1xuICB9XG5gO1xuXG5UaW1lUmFuZ2VTbGlkZXJGYWN0b3J5LmRlcHMgPSBbXG4gIFBsYXliYWNrQ29udHJvbHNGYWN0b3J5LFxuICBSYW5nZVNsaWRlckZhY3RvcnksXG4gIFRpbWVTbGlkZXJNYXJrZXJGYWN0b3J5LFxuICBUaW1lUmFuZ2VTbGlkZXJUaW1lVGl0bGVGYWN0b3J5XG5dO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBUaW1lUmFuZ2VTbGlkZXJGYWN0b3J5KFxuICBQbGF5YmFja0NvbnRyb2xzOiBSZXR1cm5UeXBlPHR5cGVvZiBQbGF5YmFja0NvbnRyb2xzRmFjdG9yeT4sXG4gIFJhbmdlU2xpZGVyOiBSZXR1cm5UeXBlPHR5cGVvZiBSYW5nZVNsaWRlckZhY3Rvcnk+LFxuICBUaW1lU2xpZGVyTWFya2VyOiBSZXR1cm5UeXBlPHR5cGVvZiBUaW1lU2xpZGVyTWFya2VyRmFjdG9yeT4sXG4gIFRpbWVSYW5nZVNsaWRlclRpbWVUaXRsZTogUmV0dXJuVHlwZTx0eXBlb2YgVGltZVJhbmdlU2xpZGVyVGltZVRpdGxlRmFjdG9yeT5cbikge1xuICBjb25zdCBUaW1lUmFuZ2VTbGlkZXI6IFJlYWN0LkZDPFRpbWVSYW5nZVNsaWRlclByb3BzPiA9IHByb3BzID0+IHtcbiAgICBjb25zdCB7XG4gICAgICBkb21haW4sXG4gICAgICB2YWx1ZSxcbiAgICAgIGlzRW5sYXJnZWQsXG4gICAgICBoaWRlVGltZVRpdGxlLFxuICAgICAgaXNBbmltYXRpbmcsXG4gICAgICByZXNldEFuaW1hdGlvbixcbiAgICAgIHRpbWVGb3JtYXQsXG4gICAgICB0aW1lem9uZSxcbiAgICAgIGhpc3RvZ3JhbSxcbiAgICAgIHBsb3RUeXBlLFxuICAgICAgbGluZUNoYXJ0LFxuICAgICAgc3RlcCxcbiAgICAgIGlzQW5pbWF0YWJsZSxcbiAgICAgIHNwZWVkLFxuICAgICAgYW5pbWF0aW9uV2luZG93LFxuICAgICAgdXBkYXRlQW5pbWF0aW9uU3BlZWQsXG4gICAgICBzZXRGaWx0ZXJBbmltYXRpb25XaW5kb3csXG4gICAgICB0b2dnbGVBbmltYXRpb24sXG4gICAgICBvbkNoYW5nZVxuICAgIH0gPSBwcm9wcztcbiAgICBjb25zdCB0aHJvdHRsZWRPbmNoYW5nZSA9IHVzZU1lbW8oKCkgPT4gdGhyb3R0bGUob25DaGFuZ2UsIDIwKSwgW29uQ2hhbmdlXSk7XG5cbiAgICByZXR1cm4gKFxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0aW1lLXJhbmdlLXNsaWRlclwiPlxuICAgICAgICB7IWhpZGVUaW1lVGl0bGUgPyAoXG4gICAgICAgICAgPGRpdlxuICAgICAgICAgICAgY2xhc3NOYW1lPVwidGltZS1yYW5nZS1zbGlkZXJfX3RpdGxlXCJcbiAgICAgICAgICAgIHN0eWxlPXt7XG4gICAgICAgICAgICAgIHdpZHRoOiBpc0VubGFyZ2VkID8gYGNhbGMoMTAwJSAtICR7YW5pbWF0aW9uQ29udHJvbFdpZHRofXB4KWAgOiAnMTAwJSdcbiAgICAgICAgICAgIH19XG4gICAgICAgICAgPlxuICAgICAgICAgICAgPFRpbWVSYW5nZVNsaWRlclRpbWVUaXRsZVxuICAgICAgICAgICAgICB0aW1lRm9ybWF0PXt0aW1lRm9ybWF0fVxuICAgICAgICAgICAgICB0aW1lem9uZT17dGltZXpvbmV9XG4gICAgICAgICAgICAgIHZhbHVlPXt2YWx1ZX1cbiAgICAgICAgICAgICAgaXNFbmxhcmdlZD17aXNFbmxhcmdlZH1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICkgOiBudWxsfVxuICAgICAgICA8U3R5bGVkU2xpZGVyQ29udGFpbmVyIGNsYXNzTmFtZT1cInRpbWUtcmFuZ2Utc2xpZGVyX19jb250YWluZXJcIiBpc0VubGFyZ2VkPXtpc0VubGFyZ2VkfT5cbiAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICBjbGFzc05hbWU9XCJ0aW1lbGluZS1jb250YWluZXJcIlxuICAgICAgICAgICAgc3R5bGU9e3tcbiAgICAgICAgICAgICAgd2lkdGg6IGlzRW5sYXJnZWQgPyBgY2FsYygxMDAlIC0gJHthbmltYXRpb25Db250cm9sV2lkdGh9cHgpYCA6ICcxMDAlJ1xuICAgICAgICAgICAgfX1cbiAgICAgICAgICA+XG4gICAgICAgICAgICA8UmFuZ2VTbGlkZXJcbiAgICAgICAgICAgICAgcmFuZ2U9e2RvbWFpbn1cbiAgICAgICAgICAgICAgdmFsdWUwPXt2YWx1ZVswXX1cbiAgICAgICAgICAgICAgdmFsdWUxPXt2YWx1ZVsxXX1cbiAgICAgICAgICAgICAgaGlzdG9ncmFtPXtoaXN0b2dyYW19XG4gICAgICAgICAgICAgIGxpbmVDaGFydD17bGluZUNoYXJ0fVxuICAgICAgICAgICAgICBwbG90VHlwZT17cGxvdFR5cGV9XG4gICAgICAgICAgICAgIGlzRW5sYXJnZWQ9e2lzRW5sYXJnZWR9XG4gICAgICAgICAgICAgIHNob3dJbnB1dD17ZmFsc2V9XG4gICAgICAgICAgICAgIHN0ZXA9e3N0ZXB9XG4gICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aHJvdHRsZWRPbmNoYW5nZX1cbiAgICAgICAgICAgICAgeEF4aXM9e1RpbWVTbGlkZXJNYXJrZXJ9XG4gICAgICAgICAgICAgIHRpbWV6b25lPXt0aW1lem9uZX1cbiAgICAgICAgICAgICAgdGltZUZvcm1hdD17dGltZUZvcm1hdH1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAge2lzRW5sYXJnZWQgPyAoXG4gICAgICAgICAgICA8UGxheWJhY2tDb250cm9sc1xuICAgICAgICAgICAgICBpc0FuaW1hdGFibGU9e2lzQW5pbWF0YWJsZX1cbiAgICAgICAgICAgICAgd2lkdGg9e2FuaW1hdGlvbkNvbnRyb2xXaWR0aH1cbiAgICAgICAgICAgICAgc3BlZWQ9e3NwZWVkfVxuICAgICAgICAgICAgICBhbmltYXRpb25XaW5kb3c9e2FuaW1hdGlvbldpbmRvd31cbiAgICAgICAgICAgICAgdXBkYXRlQW5pbWF0aW9uU3BlZWQ9e3VwZGF0ZUFuaW1hdGlvblNwZWVkfVxuICAgICAgICAgICAgICBzZXRGaWx0ZXJBbmltYXRpb25XaW5kb3c9e3NldEZpbHRlckFuaW1hdGlvbldpbmRvd31cbiAgICAgICAgICAgICAgcGF1c2VBbmltYXRpb249e3RvZ2dsZUFuaW1hdGlvbn1cbiAgICAgICAgICAgICAgcmVzZXRBbmltYXRpb249e3Jlc2V0QW5pbWF0aW9ufVxuICAgICAgICAgICAgICBpc0FuaW1hdGluZz17aXNBbmltYXRpbmd9XG4gICAgICAgICAgICAgIHN0YXJ0QW5pbWF0aW9uPXt0b2dnbGVBbmltYXRpb259XG4gICAgICAgICAgICAvPlxuICAgICAgICAgICkgOiBudWxsfVxuICAgICAgICA8L1N0eWxlZFNsaWRlckNvbnRhaW5lcj5cbiAgICAgIDwvZGl2PlxuICAgICk7XG4gIH07XG5cbiAgcmV0dXJuIFJlYWN0Lm1lbW8oVGltZVJhbmdlU2xpZGVyKTtcbn1cbiJdfQ==