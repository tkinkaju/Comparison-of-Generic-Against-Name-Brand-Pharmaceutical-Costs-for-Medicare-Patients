// Copyright (c) 2022 Uber Technologies, Inc.
//
// Permission is hereby granted, free of charge, to any person obtaining a copy
// of this software and associated documentation files (the "Software"), to deal
// in the Software without restriction, including without limitation the rights
// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
// copies of the Software, and to permit persons to whom the Software is
// furnished to do so, subject to the following conditions:
//
// The above copyright notice and this permission notice shall be included in
// all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
// THE SOFTWARE.

"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _interopRequireWildcard = require("@babel/runtime/helpers/interopRequireWildcard");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = exports.TableSection = exports.Container = void 0;

var _toConsumableArray2 = _interopRequireDefault(require("@babel/runtime/helpers/toConsumableArray"));

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _assertThisInitialized2 = _interopRequireDefault(require("@babel/runtime/helpers/assertThisInitialized"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _extends2 = _interopRequireDefault(require("@babel/runtime/helpers/extends"));

var _taggedTemplateLiteral2 = _interopRequireDefault(require("@babel/runtime/helpers/taggedTemplateLiteral"));

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _react = _interopRequireWildcard(require("react"));

var _reactVirtualized = require("react-virtualized");

var _styledComponents = _interopRequireWildcard(require("styled-components"));

var _classnames2 = _interopRequireDefault(require("classnames"));

var _reselect = require("reselect");

var _lodash = _interopRequireDefault(require("lodash.get"));

var _lodash2 = _interopRequireDefault(require("lodash.debounce"));

var _grid = _interopRequireDefault(require("./grid"));

var _headerCell = _interopRequireDefault(require("./header-cell"));

var _utils = require("@kepler.gl/utils");

var _cellSize = require("./cell-size");

var _constants = require("@kepler.gl/constants");

var _fieldToAlignRight, _templateObject;

function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { (0, _defineProperty2["default"])(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var defaultHeaderRowHeight = 55;
var defaultRowHeight = 32;
var overscanColumnCount = 10;
var overscanRowCount = 10;
var fieldToAlignRight = (_fieldToAlignRight = {}, (0, _defineProperty2["default"])(_fieldToAlignRight, _constants.ALL_FIELD_TYPES.integer, true), (0, _defineProperty2["default"])(_fieldToAlignRight, _constants.ALL_FIELD_TYPES.real, true), _fieldToAlignRight);

var Container = _styledComponents["default"].div(_templateObject || (_templateObject = (0, _taggedTemplateLiteral2["default"])(["\n  display: flex;\n  font-size: 11px;\n  flex-grow: 1;\n  color: ", ";\n  width: 100%;\n\n  .ReactVirtualized__Grid:focus,\n  .ReactVirtualized__Grid:active {\n    outline: 0;\n  }\n\n  .cell {\n    &::-webkit-scrollbar {\n      display: none;\n    }\n  }\n\n  *:focus {\n    outline: 0;\n  }\n\n  .results-table-wrapper {\n    position: relative;\n    min-height: 100%;\n    max-height: 100%;\n    display: flex;\n    flex-direction: row;\n    flex-grow: 1;\n    overflow: hidden;\n    border-top: none;\n\n    .scroll-in-ui-thread::after {\n      content: '';\n      height: 100%;\n      left: 0;\n      position: absolute;\n      pointer-events: none;\n      top: 0;\n      width: 100%;\n    }\n\n    .grid-row {\n      position: relative;\n      display: flex;\n      flex-direction: row;\n    }\n    .grid-column {\n      display: flex;\n      flex-direction: column;\n      flex: 1 1 auto;\n    }\n    .pinned-grid-container {\n      flex: 0 0 75px;\n      z-index: 10;\n      position: absolute;\n      left: 0;\n      top: 0;\n      border-right: 2px solid ", ";\n    }\n\n    .header-grid {\n      overflow: hidden !important;\n    }\n\n    .even-row {\n      background-color: ", ";\n    }\n    .odd-row {\n      background-color: ", ";\n    }\n    .cell,\n    .header-cell {\n      width: 100%;\n      height: 100%;\n      display: flex;\n      flex-direction: column;\n      justify-content: center;\n      align-items: flex-start;\n      text-align: center;\n      overflow: hidden;\n\n      .n-sort-idx {\n        font-size: 9px;\n      }\n    }\n    .cell {\n      border-bottom: 1px solid ", ";\n      border-right: 1px solid ", ";\n      white-space: nowrap;\n      overflow: auto;\n      padding: 0 ", "px;\n      font-size: ", "px;\n\n      .result-link {\n        text-decoration: none;\n      }\n    }\n    .cell.end-cell,\n    .header-cell.end-cell {\n      border-right: none;\n      padding-right: ", "px;\n    }\n    .cell.first-cell,\n    .header-cell.first-cell {\n      padding-left: ", "px;\n    }\n    .cell.bottom-cell {\n      border-bottom: none;\n    }\n    .cell.align-right {\n      align-items: flex-end;\n    }\n  }\n\n  :focus {\n    outline: none;\n  }\n"])), function (props) {
  return props.theme.dataTableTextColor;
}, function (props) {
  return props.theme.pinnedGridBorderColor;
}, function (props) {
  return props.theme.evenRowBackground;
}, function (props) {
  return props.theme.oddRowBackground;
}, function (props) {
  return props.theme.cellBorderColor;
}, function (props) {
  return props.theme.cellBorderColor;
}, function (props) {
  return props.theme.cellPaddingSide;
}, function (props) {
  return props.theme.cellFontSize;
}, function (props) {
  return props.theme.cellPaddingSide + props.theme.edgeCellPaddingSide;
}, function (props) {
  return props.theme.cellPaddingSide + props.theme.edgeCellPaddingSide;
});

exports.Container = Container;
var defaultColumnWidth = 200;

var columnWidthFunction = function columnWidthFunction(columns, cellSizeCache, ghost) {
  return function (_ref) {
    var index = _ref.index;
    return (columns[index] || {}).ghost ? ghost : cellSizeCache[columns[index]] || defaultColumnWidth;
  };
};

/*
 * This is an accessor method used to generalize getting a cell from a data row
 */
var getRowCell = function getRowCell(_ref2) {
  var dataContainer = _ref2.dataContainer,
      columns = _ref2.columns,
      column = _ref2.column,
      colMeta = _ref2.colMeta,
      rowIndex = _ref2.rowIndex,
      sortOrder = _ref2.sortOrder;
  var rowIdx = sortOrder && sortOrder.length ? (0, _lodash["default"])(sortOrder, rowIndex) : rowIndex;
  var type = colMeta[column].type;
  var value = dataContainer.valueAt(rowIdx, columns.indexOf(column));
  if (value === undefined) value = 'Err';
  return (0, _utils.parseFieldValue)(value, type);
};

var TableSection = function TableSection(_ref3) {
  var classList = _ref3.classList,
      isPinned = _ref3.isPinned,
      columns = _ref3.columns,
      headerGridProps = _ref3.headerGridProps,
      fixedWidth = _ref3.fixedWidth,
      _ref3$fixedHeight = _ref3.fixedHeight,
      fixedHeight = _ref3$fixedHeight === void 0 ? undefined : _ref3$fixedHeight,
      onScroll = _ref3.onScroll,
      scrollTop = _ref3.scrollTop,
      dataGridProps = _ref3.dataGridProps,
      columnWidth = _ref3.columnWidth,
      _ref3$setGridRef = _ref3.setGridRef,
      setGridRef = _ref3$setGridRef === void 0 ? undefined : _ref3$setGridRef,
      headerCellRender = _ref3.headerCellRender,
      dataCellRender = _ref3.dataCellRender,
      _ref3$scrollLeft = _ref3.scrollLeft,
      scrollLeft = _ref3$scrollLeft === void 0 ? 0 : _ref3$scrollLeft;
  return /*#__PURE__*/_react["default"].createElement(_reactVirtualized.AutoSizer, null, function (_ref4) {
    var width = _ref4.width,
        height = _ref4.height;
    var gridDimension = {
      columnCount: columns.length,
      columnWidth: columnWidth,
      width: fixedWidth || width
    };
    var dataGridHeight = fixedHeight || height;
    return /*#__PURE__*/_react["default"].createElement(_react["default"].Fragment, null, /*#__PURE__*/_react["default"].createElement("div", {
      className: (0, _classnames2["default"])('scroll-in-ui-thread', classList === null || classList === void 0 ? void 0 : classList.header)
    }, /*#__PURE__*/_react["default"].createElement(_grid["default"], (0, _extends2["default"])({
      cellRenderer: headerCellRender
    }, headerGridProps, gridDimension, {
      scrollLeft: scrollLeft,
      onScroll: onScroll
    }))), /*#__PURE__*/_react["default"].createElement("div", {
      className: (0, _classnames2["default"])('scroll-in-ui-thread', classList === null || classList === void 0 ? void 0 : classList.rows),
      style: {
        top: headerGridProps.height
      }
    }, /*#__PURE__*/_react["default"].createElement(_grid["default"], (0, _extends2["default"])({
      cellRenderer: dataCellRender
    }, dataGridProps, gridDimension, {
      className: isPinned ? 'pinned-grid' : 'body-grid',
      height: dataGridHeight - headerGridProps.height,
      onScroll: onScroll,
      scrollTop: scrollTop,
      setGridRef: setGridRef
    }))));
  });
};

exports.TableSection = TableSection;
DataTableFactory.deps = [_headerCell["default"]];

function DataTableFactory(HeaderCell) {
  var DataTable = /*#__PURE__*/function (_Component) {
    (0, _inherits2["default"])(DataTable, _Component);

    var _super = _createSuper(DataTable);

    function DataTable() {
      var _this;

      (0, _classCallCheck2["default"])(this, DataTable);

      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
        args[_key] = arguments[_key];
      }

      _this = _super.call.apply(_super, [this].concat(args));
      (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "state", {
        cellSizeCache: {},
        moreOptionsColumn: null
      });
      (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "root", /*#__PURE__*/(0, _react.createRef)());
      (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "columns", function (props) {
        return props.columns;
      });
      (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "pinnedColumns", function (props) {
        return props.pinnedColumns;
      });
      (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "unpinnedColumns", (0, _reselect.createSelector)(_this.columns, _this.pinnedColumns, function (columns, pinnedColumns) {
        return !Array.isArray(pinnedColumns) ? columns : columns.filter(function (c) {
          return !pinnedColumns.includes(c);
        });
      }));
      (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "toggleMoreOptions", function (moreOptionsColumn) {
        return _this.setState({
          moreOptionsColumn: _this.state.moreOptionsColumn === moreOptionsColumn ? null : moreOptionsColumn
        });
      });
      (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "getCellSizeCache", function () {
        var _this$props = _this.props,
            _this$props$cellSizeC = _this$props.cellSizeCache,
            propsCache = _this$props$cellSizeC === void 0 ? {} : _this$props$cellSizeC,
            fixedWidth = _this$props.fixedWidth,
            _this$props$pinnedCol = _this$props.pinnedColumns,
            pinnedColumns = _this$props$pinnedCol === void 0 ? [] : _this$props$pinnedCol;

        var unpinnedColumns = _this.unpinnedColumns(_this.props);

        var width = fixedWidth ? fixedWidth : _this.root.current ? _this.root.current.clientWidth : 0; // pin column border is 2 pixel vs 1 pixel

        var adjustWidth = pinnedColumns.length ? width - 1 : width;

        var _ref5 = (0, _cellSize.adjustCellsToContainer)(adjustWidth, propsCache, pinnedColumns, unpinnedColumns),
            cellSizeCache = _ref5.cellSizeCache,
            ghost = _ref5.ghost;

        return {
          cellSizeCache: cellSizeCache,
          ghost: ghost
        };
      });
      (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "doScaleCellsToWidth", function () {
        _this.setState(_this.getCellSizeCache());
      });
      (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "scaleCellsToWidth", (0, _lodash2["default"])(_this.doScaleCellsToWidth, 300));
      (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "renderDataCell", function (columns, isPinned, props) {
        return function (cellInfo) {
          var _classnames;

          var columnIndex = cellInfo.columnIndex,
              key = cellInfo.key,
              style = cellInfo.style,
              rowIndex = cellInfo.rowIndex;
          var dataContainer = props.dataContainer,
              colMeta = props.colMeta;
          var column = columns[columnIndex];
          var isGhost = column.ghost;
          var rowCell = isGhost ? '' : getRowCell(_objectSpread(_objectSpread({}, props), {}, {
            column: column,
            rowIndex: rowIndex
          }));
          var type = isGhost ? null : colMeta[column].type;
          var lastRowIndex = dataContainer ? dataContainer.numRows() - 1 : 0;
          var endCell = columnIndex === columns.length - 1;
          var firstCell = columnIndex === 0;
          var bottomCell = rowIndex === lastRowIndex;
          var alignRight = fieldToAlignRight[Number(type)];

          var cell = /*#__PURE__*/_react["default"].createElement("div", {
            className: (0, _classnames2["default"])('cell', (_classnames = {}, (0, _defineProperty2["default"])(_classnames, rowIndex % 2 === 0 ? 'even-row' : 'odd-row', true), (0, _defineProperty2["default"])(_classnames, "row-".concat(rowIndex), true), (0, _defineProperty2["default"])(_classnames, 'pinned-cell', isPinned), (0, _defineProperty2["default"])(_classnames, 'first-cell', firstCell), (0, _defineProperty2["default"])(_classnames, 'end-cell', endCell), (0, _defineProperty2["default"])(_classnames, 'bottom-cell', bottomCell), (0, _defineProperty2["default"])(_classnames, 'align-right', alignRight), _classnames)),
            key: key,
            style: style,
            title: isGhost ? undefined : rowCell
          }, "".concat(rowCell).concat(endCell ? '\n' : '\t'));

          return cell;
        };
      });
      return _this;
    }

    (0, _createClass2["default"])(DataTable, [{
      key: "componentDidMount",
      value: function componentDidMount() {
        window.addEventListener('resize', this.scaleCellsToWidth);
        this.scaleCellsToWidth();
      }
    }, {
      key: "componentDidUpdate",
      value: function componentDidUpdate(prevProps) {
        if (this.props.cellSizeCache !== prevProps.cellSizeCache || this.props.pinnedColumns !== prevProps.pinnedColumns) {
          this.scaleCellsToWidth();
        }
      }
    }, {
      key: "componentWillUnmount",
      value: function componentWillUnmount() {
        window.removeEventListener('resize', this.scaleCellsToWidth); // fix Warning: Can't perform a React state update on an unmounted component

        this.setState = function () {
          return;
        };
      }
    }, {
      key: "renderHeaderCell",
      value: function renderHeaderCell(columns, isPinned, props, toggleMoreOptions, moreOptionsColumn) {
        return function (cellInfo) {
          return /*#__PURE__*/_react["default"].createElement(HeaderCell, {
            cellInfo: cellInfo,
            key: cellInfo.columnIndex,
            columns: columns,
            isPinned: isPinned,
            props: props,
            toggleMoreOptions: toggleMoreOptions,
            moreOptionsColumn: moreOptionsColumn
          });
        };
      }
    }, {
      key: "render",
      value: function render() {
        var _this2 = this;

        var _this$props2 = this.props,
            dataContainer = _this$props2.dataContainer,
            _this$props2$pinnedCo = _this$props2.pinnedColumns,
            pinnedColumns = _this$props2$pinnedCo === void 0 ? [] : _this$props2$pinnedCo,
            _this$props2$theme = _this$props2.theme,
            theme = _this$props2$theme === void 0 ? {} : _this$props2$theme,
            fixedWidth = _this$props2.fixedWidth,
            _this$props2$fixedHei = _this$props2.fixedHeight,
            fixedHeight = _this$props2$fixedHei === void 0 ? 0 : _this$props2$fixedHei,
            showStats = _this$props2.showStats;
        var unpinnedColumns = this.unpinnedColumns(this.props);
        var _this$state = this.state,
            _this$state$cellSizeC = _this$state.cellSizeCache,
            cellSizeCache = _this$state$cellSizeC === void 0 ? {} : _this$state$cellSizeC,
            moreOptionsColumn = _this$state.moreOptionsColumn,
            ghost = _this$state.ghost;
        var unpinnedColumnsGhost = ghost ? [].concat((0, _toConsumableArray2["default"])(unpinnedColumns), [{
          ghost: true
        }]) : unpinnedColumns;
        var pinnedColumnsWidth = pinnedColumns.reduce(function (acc, val) {
          return acc + (0, _lodash["default"])(cellSizeCache, val, 0);
        }, 0);
        var hasPinnedColumns = Boolean(pinnedColumns.length);
        var _theme$headerRowHeigh = theme.headerRowHeight,
            headerRowHeight = _theme$headerRowHeigh === void 0 ? defaultHeaderRowHeight : _theme$headerRowHeigh,
            _theme$headerRowWStat = theme.headerRowWStatsHeight,
            headerRowWStatsHeight = _theme$headerRowWStat === void 0 ? defaultHeaderRowHeight : _theme$headerRowWStat,
            _theme$rowHeight = theme.rowHeight,
            rowHeight = _theme$rowHeight === void 0 ? defaultRowHeight : _theme$rowHeight;
        var headerGridProps = {
          cellSizeCache: cellSizeCache,
          className: 'header-grid',
          height: showStats ? headerRowWStatsHeight : headerRowHeight,
          rowCount: 1,
          rowHeight: showStats ? headerRowWStatsHeight : headerRowHeight
        };
        var dataGridProps = {
          cellSizeCache: cellSizeCache,
          overscanColumnCount: overscanColumnCount,
          overscanRowCount: overscanRowCount,
          rowCount: dataContainer ? dataContainer.numRows() : 0,
          rowHeight: rowHeight
        };
        return /*#__PURE__*/_react["default"].createElement(Container, {
          className: "data-table-container",
          ref: this.root
        }, Object.keys(cellSizeCache).length ? /*#__PURE__*/_react["default"].createElement(_reactVirtualized.ScrollSync, null, function (_ref6) {
          var _onScroll = _ref6.onScroll,
              scrollLeft = _ref6.scrollLeft,
              scrollTop = _ref6.scrollTop;
          return /*#__PURE__*/_react["default"].createElement("div", {
            className: "results-table-wrapper"
          }, hasPinnedColumns && /*#__PURE__*/_react["default"].createElement("div", {
            key: "pinned-columns",
            className: "pinned-columns grid-row"
          }, /*#__PURE__*/_react["default"].createElement(TableSection, {
            classList: {
              header: 'pinned-columns--header pinned-grid-container',
              rows: 'pinned-columns--rows pinned-grid-container'
            },
            isPinned: true,
            columns: pinnedColumns,
            headerGridProps: headerGridProps,
            fixedWidth: pinnedColumnsWidth,
            onScroll: function onScroll(args) {
              return _onScroll(_objectSpread(_objectSpread({}, args), {}, {
                scrollLeft: scrollLeft
              }));
            },
            scrollTop: scrollTop,
            dataGridProps: dataGridProps,
            columnWidth: columnWidthFunction(pinnedColumns, cellSizeCache),
            headerCellRender: _this2.renderHeaderCell(pinnedColumns, true, _this2.props, _this2.toggleMoreOptions, moreOptionsColumn),
            dataCellRender: _this2.renderDataCell(pinnedColumns, true, _this2.props)
          })), /*#__PURE__*/_react["default"].createElement("div", {
            key: "unpinned-columns",
            style: {
              marginLeft: "".concat(hasPinnedColumns ? "".concat(pinnedColumnsWidth, "px") : '0')
            },
            className: "unpinned-columns grid-column"
          }, /*#__PURE__*/_react["default"].createElement(TableSection, {
            classList: {
              header: 'unpinned-columns--header unpinned-grid-container',
              rows: 'unpinned-columns--rows unpinned-grid-container'
            },
            isPinned: false,
            columns: unpinnedColumnsGhost,
            headerGridProps: headerGridProps,
            fixedWidth: fixedWidth,
            fixedHeight: fixedHeight,
            onScroll: _onScroll,
            scrollTop: scrollTop,
            scrollLeft: scrollLeft,
            dataGridProps: dataGridProps,
            columnWidth: columnWidthFunction(unpinnedColumnsGhost, cellSizeCache, ghost),
            headerCellRender: _this2.renderHeaderCell(unpinnedColumnsGhost, false, _this2.props, _this2.toggleMoreOptions, moreOptionsColumn),
            dataCellRender: _this2.renderDataCell(unpinnedColumnsGhost, false, _this2.props)
          })));
        }) : null);
      }
    }]);
    return DataTable;
  }(_react.Component);

  (0, _defineProperty2["default"])(DataTable, "defaultProps", {
    dataContainer: null,
    pinnedColumns: [],
    colMeta: {},
    cellSizeCache: {},
    sortColumn: {},
    fixedWidth: null,
    fixedHeight: null,
    theme: {},
    showStats: false
  });
  return (0, _styledComponents.withTheme)(DataTable);
}

var _default = DataTableFactory;
exports["default"] = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9jb21tb24vZGF0YS10YWJsZS9pbmRleC50c3giXSwibmFtZXMiOlsiZGVmYXVsdEhlYWRlclJvd0hlaWdodCIsImRlZmF1bHRSb3dIZWlnaHQiLCJvdmVyc2NhbkNvbHVtbkNvdW50Iiwib3ZlcnNjYW5Sb3dDb3VudCIsImZpZWxkVG9BbGlnblJpZ2h0IiwiQUxMX0ZJRUxEX1RZUEVTIiwiaW50ZWdlciIsInJlYWwiLCJDb250YWluZXIiLCJzdHlsZWQiLCJkaXYiLCJwcm9wcyIsInRoZW1lIiwiZGF0YVRhYmxlVGV4dENvbG9yIiwicGlubmVkR3JpZEJvcmRlckNvbG9yIiwiZXZlblJvd0JhY2tncm91bmQiLCJvZGRSb3dCYWNrZ3JvdW5kIiwiY2VsbEJvcmRlckNvbG9yIiwiY2VsbFBhZGRpbmdTaWRlIiwiY2VsbEZvbnRTaXplIiwiZWRnZUNlbGxQYWRkaW5nU2lkZSIsImRlZmF1bHRDb2x1bW5XaWR0aCIsImNvbHVtbldpZHRoRnVuY3Rpb24iLCJjb2x1bW5zIiwiY2VsbFNpemVDYWNoZSIsImdob3N0IiwiaW5kZXgiLCJnZXRSb3dDZWxsIiwiZGF0YUNvbnRhaW5lciIsImNvbHVtbiIsImNvbE1ldGEiLCJyb3dJbmRleCIsInNvcnRPcmRlciIsInJvd0lkeCIsImxlbmd0aCIsInR5cGUiLCJ2YWx1ZSIsInZhbHVlQXQiLCJpbmRleE9mIiwidW5kZWZpbmVkIiwiVGFibGVTZWN0aW9uIiwiY2xhc3NMaXN0IiwiaXNQaW5uZWQiLCJoZWFkZXJHcmlkUHJvcHMiLCJmaXhlZFdpZHRoIiwiZml4ZWRIZWlnaHQiLCJvblNjcm9sbCIsInNjcm9sbFRvcCIsImRhdGFHcmlkUHJvcHMiLCJjb2x1bW5XaWR0aCIsInNldEdyaWRSZWYiLCJoZWFkZXJDZWxsUmVuZGVyIiwiZGF0YUNlbGxSZW5kZXIiLCJzY3JvbGxMZWZ0Iiwid2lkdGgiLCJoZWlnaHQiLCJncmlkRGltZW5zaW9uIiwiY29sdW1uQ291bnQiLCJkYXRhR3JpZEhlaWdodCIsImhlYWRlciIsInJvd3MiLCJ0b3AiLCJEYXRhVGFibGVGYWN0b3J5IiwiZGVwcyIsIkhlYWRlckNlbGxGYWN0b3J5IiwiSGVhZGVyQ2VsbCIsIkRhdGFUYWJsZSIsIm1vcmVPcHRpb25zQ29sdW1uIiwicGlubmVkQ29sdW1ucyIsIkFycmF5IiwiaXNBcnJheSIsImZpbHRlciIsImMiLCJpbmNsdWRlcyIsInNldFN0YXRlIiwic3RhdGUiLCJwcm9wc0NhY2hlIiwidW5waW5uZWRDb2x1bW5zIiwicm9vdCIsImN1cnJlbnQiLCJjbGllbnRXaWR0aCIsImFkanVzdFdpZHRoIiwiZ2V0Q2VsbFNpemVDYWNoZSIsImRvU2NhbGVDZWxsc1RvV2lkdGgiLCJjZWxsSW5mbyIsImNvbHVtbkluZGV4Iiwia2V5Iiwic3R5bGUiLCJpc0dob3N0Iiwicm93Q2VsbCIsImxhc3RSb3dJbmRleCIsIm51bVJvd3MiLCJlbmRDZWxsIiwiZmlyc3RDZWxsIiwiYm90dG9tQ2VsbCIsImFsaWduUmlnaHQiLCJOdW1iZXIiLCJjZWxsIiwid2luZG93IiwiYWRkRXZlbnRMaXN0ZW5lciIsInNjYWxlQ2VsbHNUb1dpZHRoIiwicHJldlByb3BzIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsInRvZ2dsZU1vcmVPcHRpb25zIiwic2hvd1N0YXRzIiwidW5waW5uZWRDb2x1bW5zR2hvc3QiLCJwaW5uZWRDb2x1bW5zV2lkdGgiLCJyZWR1Y2UiLCJhY2MiLCJ2YWwiLCJoYXNQaW5uZWRDb2x1bW5zIiwiQm9vbGVhbiIsImhlYWRlclJvd0hlaWdodCIsImhlYWRlclJvd1dTdGF0c0hlaWdodCIsInJvd0hlaWdodCIsImNsYXNzTmFtZSIsInJvd0NvdW50IiwiT2JqZWN0Iiwia2V5cyIsImFyZ3MiLCJyZW5kZXJIZWFkZXJDZWxsIiwicmVuZGVyRGF0YUNlbGwiLCJtYXJnaW5MZWZ0IiwiQ29tcG9uZW50Iiwic29ydENvbHVtbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQW9CQTs7QUFDQTs7QUFDQTs7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LElBTlE7QUFPcEJDLElBQUFBLFdBQVcsRUFBRSxJQVBPO0FBUXBCakMsSUFBQUEsS0FBSyxFQUFFLEVBUmE7QUFTcEI0RixJQUFBQSxTQUFTLEVBQUU7QUFUUyxHQUZrRDtBQW9RMUUsU0FBTyxpQ0FBVXRDLFNBQVYsQ0FBUDtBQUNEOztlQUVjSixnQiIsInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAoYykgMjAyMiBVYmVyIFRlY2hub2xvZ2llcywgSW5jLlxuLy9cbi8vIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhIGNvcHlcbi8vIG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlIFwiU29mdHdhcmVcIiksIHRvIGRlYWxcbi8vIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHNcbi8vIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGxcbi8vIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpc1xuLy8gZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgY29uZGl0aW9uczpcbi8vXG4vLyBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZCBpblxuLy8gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG4vL1xuLy8gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTUyBPUlxuLy8gSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFksXG4vLyBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTiBOTyBFVkVOVCBTSEFMTCBUSEVcbi8vIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVJcbi8vIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HIEZST00sXG4vLyBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SIE9USEVSIERFQUxJTkdTIElOXG4vLyBUSEUgU09GVFdBUkUuXG5cbmltcG9ydCBSZWFjdCwge0NvbXBvbmVudCwgY3JlYXRlUmVmfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQge1Njcm9sbFN5bmMsIEF1dG9TaXplciwgT25TY3JvbGxQYXJhbXMsIEdyaWRQcm9wcywgSW5kZXh9IGZyb20gJ3JlYWN0LXZpcnR1YWxpemVkJztcbmltcG9ydCBzdHlsZWQsIHt3aXRoVGhlbWV9IGZyb20gJ3N0eWxlZC1jb21wb25lbnRzJztcbmltcG9ydCBjbGFzc25hbWVzIGZyb20gJ2NsYXNzbmFtZXMnO1xuaW1wb3J0IHtjcmVhdGVTZWxlY3Rvcn0gZnJvbSAncmVzZWxlY3QnO1xuaW1wb3J0IGdldCBmcm9tICdsb2Rhc2guZ2V0JztcbmltcG9ydCBkZWJvdW5jZSBmcm9tICdsb2Rhc2guZGVib3VuY2UnO1xuXG5pbXBvcnQge0NlbGxTaXplQ2FjaGV9IGZyb20gJy4vY2VsbC1zaXplJztcblxuaW1wb3J0IEdyaWQgZnJvbSAnLi9ncmlkJztcbmltcG9ydCBIZWFkZXJDZWxsRmFjdG9yeSBmcm9tICcuL2hlYWRlci1jZWxsJztcblxuaW1wb3J0IHtwYXJzZUZpZWxkVmFsdWUsIERhdGFDb250YWluZXJJbnRlcmZhY2V9IGZyb20gJ0BrZXBsZXIuZ2wvdXRpbHMnO1xuaW1wb3J0IHthZGp1c3RDZWxsc1RvQ29udGFpbmVyfSBmcm9tICcuL2NlbGwtc2l6ZSc7XG5cbmltcG9ydCB7QUxMX0ZJRUxEX1RZUEVTfSBmcm9tICdAa2VwbGVyLmdsL2NvbnN0YW50cyc7XG5cbmNvbnN0IGRlZmF1bHRIZWFkZXJSb3dIZWlnaHQgPSA1NTtcbmNvbnN0IGRlZmF1bHRSb3dIZWlnaHQgPSAzMjtcbmNvbnN0IG92ZXJzY2FuQ29sdW1uQ291bnQgPSAxMDtcbmNvbnN0IG92ZXJzY2FuUm93Q291bnQgPSAxMDtcbmNvbnN0IGZpZWxkVG9BbGlnblJpZ2h0ID0ge1xuICBbQUxMX0ZJRUxEX1RZUEVTLmludGVnZXJdOiB0cnVlLFxuICBbQUxMX0ZJRUxEX1RZUEVTLnJlYWxdOiB0cnVlXG59O1xuXG5leHBvcnQgY29uc3QgQ29udGFpbmVyID0gc3R5bGVkLmRpdmBcbiAgZGlzcGxheTogZmxleDtcbiAgZm9udC1zaXplOiAxMXB4O1xuICBmbGV4LWdyb3c6IDE7XG4gIGNvbG9yOiAke3Byb3BzID0+IHByb3BzLnRoZW1lLmRhdGFUYWJsZVRleHRDb2xvcn07XG4gIHdpZHRoOiAxMDAlO1xuXG4gIC5SZWFjdFZpcnR1YWxpemVkX19HcmlkOmZvY3VzLFxuICAuUmVhY3RWaXJ0dWFsaXplZF9fR3JpZDphY3RpdmUge1xuICAgIG91dGxpbmU6IDA7XG4gIH1cblxuICAuY2VsbCB7XG4gICAgJjo6LXdlYmtpdC1zY3JvbGxiYXIge1xuICAgICAgZGlzcGxheTogbm9uZTtcbiAgICB9XG4gIH1cblxuICAqOmZvY3VzIHtcbiAgICBvdXRsaW5lOiAwO1xuICB9XG5cbiAgLnJlc3VsdHMtdGFibGUtd3JhcHBlciB7XG4gICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgIG1pbi1oZWlnaHQ6IDEwMCU7XG4gICAgbWF4LWhlaWdodDogMTAwJTtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGZsZXgtZGlyZWN0aW9uOiByb3c7XG4gICAgZmxleC1ncm93OiAxO1xuICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgYm9yZGVyLXRvcDogbm9uZTtcblxuICAgIC5zY3JvbGwtaW4tdWktdGhyZWFkOjphZnRlciB7XG4gICAgICBjb250ZW50OiAnJztcbiAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgIGxlZnQ6IDA7XG4gICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICBwb2ludGVyLWV2ZW50czogbm9uZTtcbiAgICAgIHRvcDogMDtcbiAgICAgIHdpZHRoOiAxMDAlO1xuICAgIH1cblxuICAgIC5ncmlkLXJvdyB7XG4gICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgZmxleC1kaXJlY3Rpb246IHJvdztcbiAgICB9XG4gICAgLmdyaWQtY29sdW1uIHtcbiAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgZmxleDogMSAxIGF1dG87XG4gICAgfVxuICAgIC5waW5uZWQtZ3JpZC1jb250YWluZXIge1xuICAgICAgZmxleDogMCAwIDc1cHg7XG4gICAgICB6LWluZGV4OiAxMDtcbiAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgIGxlZnQ6IDA7XG4gICAgICB0b3A6IDA7XG4gICAgICBib3JkZXItcmlnaHQ6IDJweCBzb2xpZCAke3Byb3BzID0+IHByb3BzLnRoZW1lLnBpbm5lZEdyaWRCb3JkZXJDb2xvcn07XG4gICAgfVxuXG4gICAgLmhlYWRlci1ncmlkIHtcbiAgICAgIG92ZXJmbG93OiBoaWRkZW4gIWltcG9ydGFudDtcbiAgICB9XG5cbiAgICAuZXZlbi1yb3cge1xuICAgICAgYmFja2dyb3VuZC1jb2xvcjogJHtwcm9wcyA9PiBwcm9wcy50aGVtZS5ldmVuUm93QmFja2dyb3VuZH07XG4gICAgfVxuICAgIC5vZGQtcm93IHtcbiAgICAgIGJhY2tncm91bmQtY29sb3I6ICR7cHJvcHMgPT4gcHJvcHMudGhlbWUub2RkUm93QmFja2dyb3VuZH07XG4gICAgfVxuICAgIC5jZWxsLFxuICAgIC5oZWFkZXItY2VsbCB7XG4gICAgICB3aWR0aDogMTAwJTtcbiAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgICBhbGlnbi1pdGVtczogZmxleC1zdGFydDtcbiAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgIG92ZXJmbG93OiBoaWRkZW47XG5cbiAgICAgIC5uLXNvcnQtaWR4IHtcbiAgICAgICAgZm9udC1zaXplOiA5cHg7XG4gICAgICB9XG4gICAgfVxuICAgIC5jZWxsIHtcbiAgICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAke3Byb3BzID0+IHByb3BzLnRoZW1lLmNlbGxCb3JkZXJDb2xvcn07XG4gICAgICBib3JkZXItcmlnaHQ6IDFweCBzb2xpZCAke3Byb3BzID0+IHByb3BzLnRoZW1lLmNlbGxCb3JkZXJDb2xvcn07XG4gICAgICB3aGl0ZS1zcGFjZTogbm93cmFwO1xuICAgICAgb3ZlcmZsb3c6IGF1dG87XG4gICAgICBwYWRkaW5nOiAwICR7cHJvcHMgPT4gcHJvcHMudGhlbWUuY2VsbFBhZGRpbmdTaWRlfXB4O1xuICAgICAgZm9udC1zaXplOiAke3Byb3BzID0+IHByb3BzLnRoZW1lLmNlbGxGb250U2l6ZX1weDtcblxuICAgICAgLnJlc3VsdC1saW5rIHtcbiAgICAgICAgdGV4dC1kZWNvcmF0aW9uOiBub25lO1xuICAgICAgfVxuICAgIH1cbiAgICAuY2VsbC5lbmQtY2VsbCxcbiAgICAuaGVhZGVyLWNlbGwuZW5kLWNlbGwge1xuICAgICAgYm9yZGVyLXJpZ2h0OiBub25lO1xuICAgICAgcGFkZGluZy1yaWdodDogJHtwcm9wcyA9PiBwcm9wcy50aGVtZS5jZWxsUGFkZGluZ1NpZGUgKyBwcm9wcy50aGVtZS5lZGdlQ2VsbFBhZGRpbmdTaWRlfXB4O1xuICAgIH1cbiAgICAuY2VsbC5maXJzdC1jZWxsLFxuICAgIC5oZWFkZXItY2VsbC5maXJzdC1jZWxsIHtcbiAgICAgIHBhZGRpbmctbGVmdDogJHtwcm9wcyA9PiBwcm9wcy50aGVtZS5jZWxsUGFkZGluZ1NpZGUgKyBwcm9wcy50aGVtZS5lZGdlQ2VsbFBhZGRpbmdTaWRlfXB4O1xuICAgIH1cbiAgICAuY2VsbC5ib3R0b20tY2VsbCB7XG4gICAgICBib3JkZXItYm90dG9tOiBub25lO1xuICAgIH1cbiAgICAuY2VsbC5hbGlnbi1yaWdodCB7XG4gICAgICBhbGlnbi1pdGVtczogZmxleC1lbmQ7XG4gICAgfVxuICB9XG5cbiAgOmZvY3VzIHtcbiAgICBvdXRsaW5lOiBub25lO1xuICB9XG5gO1xuXG5jb25zdCBkZWZhdWx0Q29sdW1uV2lkdGggPSAyMDA7XG5cbmV4cG9ydCB0eXBlIENvbE1ldGEgPSB7XG4gIFtrZXk6IHN0cmluZ106IHtcbiAgICBjb2xJZHg6IG51bWJlcjtcbiAgICBuYW1lOiBzdHJpbmc7XG4gICAgZGlzcGxheU5hbWU6IHN0cmluZztcbiAgICB0eXBlOiBzdHJpbmc7XG4gICAgZm9ybWF0Pzogc3RyaW5nO1xuICAgIGNvbHVtblN0YXRzPzogYW55O1xuICB9O1xufTtcblxuZXhwb3J0IHR5cGUgU29ydENvbHVtbiA9IHtcbiAgY29sdW1uPzogc3RyaW5nO1xuICBtb2RlPzogc3RyaW5nO1xufTtcblxuY29uc3QgY29sdW1uV2lkdGhGdW5jdGlvbiA9IChjb2x1bW5zLCBjZWxsU2l6ZUNhY2hlLCBnaG9zdD8pID0+ICh7aW5kZXh9KSA9PiB7XG4gIHJldHVybiAoY29sdW1uc1tpbmRleF0gfHwge30pLmdob3N0ID8gZ2hvc3QgOiBjZWxsU2l6ZUNhY2hlW2NvbHVtbnNbaW5kZXhdXSB8fCBkZWZhdWx0Q29sdW1uV2lkdGg7XG59O1xuXG5pbnRlcmZhY2UgR2V0Um93Q2VsbFByb3BzIHtcbiAgZGF0YUNvbnRhaW5lcjogRGF0YUNvbnRhaW5lckludGVyZmFjZTtcbiAgY29sdW1uczogKHN0cmluZyAmIHtnaG9zdD86IGJvb2xlYW59KVtdO1xuICBjb2x1bW46IHN0cmluZztcbiAgY29sTWV0YTtcbiAgcm93SW5kZXg6IG51bWJlcjtcbiAgc29ydE9yZGVyPzogbnVtYmVyW10gfCBudWxsO1xufVxuXG4vKlxuICogVGhpcyBpcyBhbiBhY2Nlc3NvciBtZXRob2QgdXNlZCB0byBnZW5lcmFsaXplIGdldHRpbmcgYSBjZWxsIGZyb20gYSBkYXRhIHJvd1xuICovXG5jb25zdCBnZXRSb3dDZWxsID0gKHtcbiAgZGF0YUNvbnRhaW5lcixcbiAgY29sdW1ucyxcbiAgY29sdW1uLFxuICBjb2xNZXRhLFxuICByb3dJbmRleCxcbiAgc29ydE9yZGVyXG59OiBHZXRSb3dDZWxsUHJvcHMpID0+IHtcbiAgY29uc3Qgcm93SWR4ID0gc29ydE9yZGVyICYmIHNvcnRPcmRlci5sZW5ndGggPyBnZXQoc29ydE9yZGVyLCByb3dJbmRleCkgOiByb3dJbmRleDtcbiAgY29uc3Qge3R5cGV9ID0gY29sTWV0YVtjb2x1bW5dO1xuXG4gIGxldCB2YWx1ZSA9IGRhdGFDb250YWluZXIudmFsdWVBdChyb3dJZHgsIGNvbHVtbnMuaW5kZXhPZihjb2x1bW4pKTtcbiAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHZhbHVlID0gJ0Vycic7XG4gIHJldHVybiBwYXJzZUZpZWxkVmFsdWUodmFsdWUsIHR5cGUpO1xufTtcblxuaW50ZXJmYWNlIFRhYmxlU2VjdGlvblByb3BzIHtcbiAgY2xhc3NMaXN0Pzoge1xuICAgIGhlYWRlcjogc3RyaW5nO1xuICAgIHJvd3M6IHN0cmluZztcbiAgfTtcbiAgaXNQaW5uZWQ/OiBib29sZWFuO1xuICBjb2x1bW5zOiAoc3RyaW5nICYge2dob3N0PzogYm9vbGVhbn0pW107XG4gIGhlYWRlckdyaWRQcm9wcz87XG4gIGZpeGVkV2lkdGg/OiBudW1iZXI7XG4gIGZpeGVkSGVpZ2h0PzogbnVtYmVyO1xuICBvblNjcm9sbD86IChwYXJhbXM6IE9uU2Nyb2xsUGFyYW1zKSA9PiB2b2lkO1xuICBzY3JvbGxUb3A/OiBudW1iZXI7XG4gIGRhdGFHcmlkUHJvcHM6IHtcbiAgICByb3dIZWlnaHQ6IG51bWJlciB8ICgocGFyYW1zOiBJbmRleCkgPT4gbnVtYmVyKTtcbiAgICByb3dDb3VudDogbnVtYmVyO1xuICB9ICYgUGFydGlhbDxHcmlkUHJvcHM+O1xuICBjb2x1bW5XaWR0aD87XG4gIHNldEdyaWRSZWY/OiBGdW5jdGlvbjtcbiAgaGVhZGVyQ2VsbFJlbmRlcj87XG4gIGRhdGFDZWxsUmVuZGVyPztcbiAgc2Nyb2xsTGVmdD86IG51bWJlcjtcbn1cblxuZXhwb3J0IGNvbnN0IFRhYmxlU2VjdGlvbiA9ICh7XG4gIGNsYXNzTGlzdCxcbiAgaXNQaW5uZWQsXG4gIGNvbHVtbnMsXG4gIGhlYWRlckdyaWRQcm9wcyxcbiAgZml4ZWRXaWR0aCxcbiAgZml4ZWRIZWlnaHQgPSB1bmRlZmluZWQsXG4gIG9uU2Nyb2xsLFxuICBzY3JvbGxUb3AsXG4gIGRhdGFHcmlkUHJvcHMsXG4gIGNvbHVtbldpZHRoLFxuICBzZXRHcmlkUmVmID0gdW5kZWZpbmVkLFxuICBoZWFkZXJDZWxsUmVuZGVyLFxuICBkYXRhQ2VsbFJlbmRlcixcbiAgc2Nyb2xsTGVmdCA9IDBcbn06IFRhYmxlU2VjdGlvblByb3BzKSA9PiAoXG4gIDxBdXRvU2l6ZXI+XG4gICAgeyh7d2lkdGgsIGhlaWdodH0pID0+IHtcbiAgICAgIGNvbnN0IGdyaWREaW1lbnNpb24gPSB7XG4gICAgICAgIGNvbHVtbkNvdW50OiBjb2x1bW5zLmxlbmd0aCxcbiAgICAgICAgY29sdW1uV2lkdGgsXG4gICAgICAgIHdpZHRoOiBmaXhlZFdpZHRoIHx8IHdpZHRoXG4gICAgICB9O1xuICAgICAgY29uc3QgZGF0YUdyaWRIZWlnaHQgPSBmaXhlZEhlaWdodCB8fCBoZWlnaHQ7XG4gICAgICByZXR1cm4gKFxuICAgICAgICA8PlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtjbGFzc25hbWVzKCdzY3JvbGwtaW4tdWktdGhyZWFkJywgY2xhc3NMaXN0Py5oZWFkZXIpfT5cbiAgICAgICAgICAgIDxHcmlkXG4gICAgICAgICAgICAgIGNlbGxSZW5kZXJlcj17aGVhZGVyQ2VsbFJlbmRlcn1cbiAgICAgICAgICAgICAgey4uLmhlYWRlckdyaWRQcm9wc31cbiAgICAgICAgICAgICAgey4uLmdyaWREaW1lbnNpb259XG4gICAgICAgICAgICAgIHNjcm9sbExlZnQ9e3Njcm9sbExlZnR9XG4gICAgICAgICAgICAgIG9uU2Nyb2xsPXtvblNjcm9sbH1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPGRpdlxuICAgICAgICAgICAgY2xhc3NOYW1lPXtjbGFzc25hbWVzKCdzY3JvbGwtaW4tdWktdGhyZWFkJywgY2xhc3NMaXN0Py5yb3dzKX1cbiAgICAgICAgICAgIHN0eWxlPXt7XG4gICAgICAgICAgICAgIHRvcDogaGVhZGVyR3JpZFByb3BzLmhlaWdodFxuICAgICAgICAgICAgfX1cbiAgICAgICAgICA+XG4gICAgICAgICAgICA8R3JpZFxuICAgICAgICAgICAgICBjZWxsUmVuZGVyZXI9e2RhdGFDZWxsUmVuZGVyfVxuICAgICAgICAgICAgICB7Li4uZGF0YUdyaWRQcm9wc31cbiAgICAgICAgICAgICAgey4uLmdyaWREaW1lbnNpb259XG4gICAgICAgICAgICAgIGNsYXNzTmFtZT17aXNQaW5uZWQgPyAncGlubmVkLWdyaWQnIDogJ2JvZHktZ3JpZCd9XG4gICAgICAgICAgICAgIGhlaWdodD17ZGF0YUdyaWRIZWlnaHQgLSBoZWFkZXJHcmlkUHJvcHMuaGVpZ2h0fVxuICAgICAgICAgICAgICBvblNjcm9sbD17b25TY3JvbGx9XG4gICAgICAgICAgICAgIHNjcm9sbFRvcD17c2Nyb2xsVG9wfVxuICAgICAgICAgICAgICBzZXRHcmlkUmVmPXtzZXRHcmlkUmVmfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC8+XG4gICAgICApO1xuICAgIH19XG4gIDwvQXV0b1NpemVyPlxuKTtcblxuZXhwb3J0IGludGVyZmFjZSBEYXRhVGFibGVQcm9wcyB7XG4gIGRhdGFJZD86IHN0cmluZztcbiAgc2hvd1N0YXRzPzogYm9vbGVhbjtcbiAgY2VsbFNpemVDYWNoZT86IENlbGxTaXplQ2FjaGU7XG4gIHBpbm5lZENvbHVtbnM/OiBzdHJpbmdbXTtcbiAgY29sdW1uczogKHN0cmluZyAmIHtnaG9zdD86IGJvb2xlYW59KVtdO1xuICBmaXhlZFdpZHRoPzogbnVtYmVyO1xuICB0aGVtZT86IGFueTtcbiAgZGF0YUNvbnRhaW5lcjogRGF0YUNvbnRhaW5lckludGVyZmFjZTtcbiAgZml4ZWRIZWlnaHQ/OiBudW1iZXI7XG4gIGNvbE1ldGE6IENvbE1ldGE7XG4gIHNvcnRDb2x1bW4/OiBTb3J0Q29sdW1uO1xuICBzb3J0VGFibGVDb2x1bW46IChjb2x1bW46IHN0cmluZywgbW9kZT86IHN0cmluZykgPT4gdm9pZDtcbiAgcGluVGFibGVDb2x1bW46IChjb2x1bW46IHN0cmluZykgPT4gdm9pZDtcbiAgY29weVRhYmxlQ29sdW1uOiAoY29sdW1uOiBzdHJpbmcpID0+IHZvaWQ7XG4gIHNvcnRPcmRlcj86IG51bWJlcltdIHwgbnVsbDtcbn1cblxuaW50ZXJmYWNlIERhdGFUYWJsZVN0YXRlIHtcbiAgY2VsbFNpemVDYWNoZT86IENlbGxTaXplQ2FjaGU7XG4gIG1vcmVPcHRpb25zQ29sdW1uPztcbiAgZ2hvc3Q/O1xufVxuXG5EYXRhVGFibGVGYWN0b3J5LmRlcHMgPSBbSGVhZGVyQ2VsbEZhY3RvcnldO1xuZnVuY3Rpb24gRGF0YVRhYmxlRmFjdG9yeShIZWFkZXJDZWxsOiBSZXR1cm5UeXBlPHR5cGVvZiBIZWFkZXJDZWxsRmFjdG9yeT4pIHtcbiAgY2xhc3MgRGF0YVRhYmxlIGV4dGVuZHMgQ29tcG9uZW50PERhdGFUYWJsZVByb3BzLCBEYXRhVGFibGVTdGF0ZT4ge1xuICAgIHN0YXRpYyBkZWZhdWx0UHJvcHMgPSB7XG4gICAgICBkYXRhQ29udGFpbmVyOiBudWxsLFxuICAgICAgcGlubmVkQ29sdW1uczogW10sXG4gICAgICBjb2xNZXRhOiB7fSxcbiAgICAgIGNlbGxTaXplQ2FjaGU6IHt9LFxuICAgICAgc29ydENvbHVtbjoge30sXG4gICAgICBmaXhlZFdpZHRoOiBudWxsLFxuICAgICAgZml4ZWRIZWlnaHQ6IG51bGwsXG4gICAgICB0aGVtZToge30sXG4gICAgICBzaG93U3RhdHM6IGZhbHNlXG4gICAgfTtcblxuICAgIHN0YXRlOiBEYXRhVGFibGVTdGF0ZSA9IHtcbiAgICAgIGNlbGxTaXplQ2FjaGU6IHt9LFxuICAgICAgbW9yZU9wdGlvbnNDb2x1bW46IG51bGxcbiAgICB9O1xuXG4gICAgY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgdGhpcy5zY2FsZUNlbGxzVG9XaWR0aCk7XG4gICAgICB0aGlzLnNjYWxlQ2VsbHNUb1dpZHRoKCk7XG4gICAgfVxuXG4gICAgY29tcG9uZW50RGlkVXBkYXRlKHByZXZQcm9wcykge1xuICAgICAgaWYgKFxuICAgICAgICB0aGlzLnByb3BzLmNlbGxTaXplQ2FjaGUgIT09IHByZXZQcm9wcy5jZWxsU2l6ZUNhY2hlIHx8XG4gICAgICAgIHRoaXMucHJvcHMucGlubmVkQ29sdW1ucyAhPT0gcHJldlByb3BzLnBpbm5lZENvbHVtbnNcbiAgICAgICkge1xuICAgICAgICB0aGlzLnNjYWxlQ2VsbHNUb1dpZHRoKCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigncmVzaXplJywgdGhpcy5zY2FsZUNlbGxzVG9XaWR0aCk7XG4gICAgICAvLyBmaXggV2FybmluZzogQ2FuJ3QgcGVyZm9ybSBhIFJlYWN0IHN0YXRlIHVwZGF0ZSBvbiBhbiB1bm1vdW50ZWQgY29tcG9uZW50XG4gICAgICB0aGlzLnNldFN0YXRlID0gKCkgPT4ge1xuICAgICAgICByZXR1cm47XG4gICAgICB9O1xuICAgIH1cblxuICAgIHJvb3QgPSBjcmVhdGVSZWY8SFRNTERpdkVsZW1lbnQ+KCk7XG4gICAgY29sdW1ucyA9IChwcm9wczogRGF0YVRhYmxlUHJvcHMpID0+IHByb3BzLmNvbHVtbnM7XG4gICAgcGlubmVkQ29sdW1ucyA9IChwcm9wczogRGF0YVRhYmxlUHJvcHMpID0+IHByb3BzLnBpbm5lZENvbHVtbnM7XG4gICAgdW5waW5uZWRDb2x1bW5zID0gY3JlYXRlU2VsZWN0b3IodGhpcy5jb2x1bW5zLCB0aGlzLnBpbm5lZENvbHVtbnMsIChjb2x1bW5zLCBwaW5uZWRDb2x1bW5zKSA9PlxuICAgICAgIUFycmF5LmlzQXJyYXkocGlubmVkQ29sdW1ucykgPyBjb2x1bW5zIDogY29sdW1ucy5maWx0ZXIoYyA9PiAhcGlubmVkQ29sdW1ucy5pbmNsdWRlcyhjKSlcbiAgICApO1xuXG4gICAgdG9nZ2xlTW9yZU9wdGlvbnMgPSBtb3JlT3B0aW9uc0NvbHVtbiA9PlxuICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgIG1vcmVPcHRpb25zQ29sdW1uOlxuICAgICAgICAgIHRoaXMuc3RhdGUubW9yZU9wdGlvbnNDb2x1bW4gPT09IG1vcmVPcHRpb25zQ29sdW1uID8gbnVsbCA6IG1vcmVPcHRpb25zQ29sdW1uXG4gICAgICB9KTtcblxuICAgIGdldENlbGxTaXplQ2FjaGUgPSAoKSA9PiB7XG4gICAgICBjb25zdCB7Y2VsbFNpemVDYWNoZTogcHJvcHNDYWNoZSA9IHt9LCBmaXhlZFdpZHRoLCBwaW5uZWRDb2x1bW5zID0gW119ID0gdGhpcy5wcm9wcztcbiAgICAgIGNvbnN0IHVucGlubmVkQ29sdW1ucyA9IHRoaXMudW5waW5uZWRDb2x1bW5zKHRoaXMucHJvcHMpO1xuXG4gICAgICBjb25zdCB3aWR0aCA9IGZpeGVkV2lkdGggPyBmaXhlZFdpZHRoIDogdGhpcy5yb290LmN1cnJlbnQgPyB0aGlzLnJvb3QuY3VycmVudC5jbGllbnRXaWR0aCA6IDA7XG5cbiAgICAgIC8vIHBpbiBjb2x1bW4gYm9yZGVyIGlzIDIgcGl4ZWwgdnMgMSBwaXhlbFxuICAgICAgY29uc3QgYWRqdXN0V2lkdGggPSBwaW5uZWRDb2x1bW5zLmxlbmd0aCA/IHdpZHRoIC0gMSA6IHdpZHRoO1xuICAgICAgY29uc3Qge2NlbGxTaXplQ2FjaGUsIGdob3N0fSA9IGFkanVzdENlbGxzVG9Db250YWluZXIoXG4gICAgICAgIGFkanVzdFdpZHRoLFxuICAgICAgICBwcm9wc0NhY2hlLFxuICAgICAgICBwaW5uZWRDb2x1bW5zLFxuICAgICAgICB1bnBpbm5lZENvbHVtbnNcbiAgICAgICkgYXMge2NlbGxTaXplQ2FjaGU6IHt9OyBnaG9zdDogbnVtYmVyIHwgbnVsbCB8IHVuZGVmaW5lZH07XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIGNlbGxTaXplQ2FjaGUsXG4gICAgICAgIGdob3N0XG4gICAgICB9O1xuICAgIH07XG5cbiAgICBkb1NjYWxlQ2VsbHNUb1dpZHRoID0gKCkgPT4ge1xuICAgICAgdGhpcy5zZXRTdGF0ZSh0aGlzLmdldENlbGxTaXplQ2FjaGUoKSk7XG4gICAgfTtcblxuICAgIHNjYWxlQ2VsbHNUb1dpZHRoID0gZGVib3VuY2UodGhpcy5kb1NjYWxlQ2VsbHNUb1dpZHRoLCAzMDApO1xuXG4gICAgcmVuZGVyRGF0YUNlbGwgPSAoY29sdW1ucywgaXNQaW5uZWQsIHByb3BzOiBEYXRhVGFibGVQcm9wcykgPT4ge1xuICAgICAgcmV0dXJuIGNlbGxJbmZvID0+IHtcbiAgICAgICAgY29uc3Qge2NvbHVtbkluZGV4LCBrZXksIHN0eWxlLCByb3dJbmRleH0gPSBjZWxsSW5mbztcbiAgICAgICAgY29uc3Qge2RhdGFDb250YWluZXIsIGNvbE1ldGF9ID0gcHJvcHM7XG4gICAgICAgIGNvbnN0IGNvbHVtbiA9IGNvbHVtbnNbY29sdW1uSW5kZXhdO1xuICAgICAgICBjb25zdCBpc0dob3N0ID0gY29sdW1uLmdob3N0O1xuXG4gICAgICAgIGNvbnN0IHJvd0NlbGwgPSBpc0dob3N0ID8gJycgOiBnZXRSb3dDZWxsKHsuLi5wcm9wcywgY29sdW1uLCByb3dJbmRleH0pO1xuICAgICAgICBjb25zdCB0eXBlID0gaXNHaG9zdCA/IG51bGwgOiBjb2xNZXRhW2NvbHVtbl0udHlwZTtcblxuICAgICAgICBjb25zdCBsYXN0Um93SW5kZXggPSBkYXRhQ29udGFpbmVyID8gZGF0YUNvbnRhaW5lci5udW1Sb3dzKCkgLSAxIDogMDtcblxuICAgICAgICBjb25zdCBlbmRDZWxsID0gY29sdW1uSW5kZXggPT09IGNvbHVtbnMubGVuZ3RoIC0gMTtcbiAgICAgICAgY29uc3QgZmlyc3RDZWxsID0gY29sdW1uSW5kZXggPT09IDA7XG4gICAgICAgIGNvbnN0IGJvdHRvbUNlbGwgPSByb3dJbmRleCA9PT0gbGFzdFJvd0luZGV4O1xuICAgICAgICBjb25zdCBhbGlnblJpZ2h0ID0gZmllbGRUb0FsaWduUmlnaHRbTnVtYmVyKHR5cGUpXTtcblxuICAgICAgICBjb25zdCBjZWxsID0gKFxuICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgIGNsYXNzTmFtZT17Y2xhc3NuYW1lcygnY2VsbCcsIHtcbiAgICAgICAgICAgICAgW3Jvd0luZGV4ICUgMiA9PT0gMCA/ICdldmVuLXJvdycgOiAnb2RkLXJvdyddOiB0cnVlLFxuICAgICAgICAgICAgICBbYHJvdy0ke3Jvd0luZGV4fWBdOiB0cnVlLFxuICAgICAgICAgICAgICAncGlubmVkLWNlbGwnOiBpc1Bpbm5lZCxcbiAgICAgICAgICAgICAgJ2ZpcnN0LWNlbGwnOiBmaXJzdENlbGwsXG4gICAgICAgICAgICAgICdlbmQtY2VsbCc6IGVuZENlbGwsXG4gICAgICAgICAgICAgICdib3R0b20tY2VsbCc6IGJvdHRvbUNlbGwsXG4gICAgICAgICAgICAgICdhbGlnbi1yaWdodCc6IGFsaWduUmlnaHRcbiAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAga2V5PXtrZXl9XG4gICAgICAgICAgICBzdHlsZT17c3R5bGV9XG4gICAgICAgICAgICB0aXRsZT17aXNHaG9zdCA/IHVuZGVmaW5lZCA6IHJvd0NlbGx9XG4gICAgICAgICAgPlxuICAgICAgICAgICAge2Ake3Jvd0NlbGx9JHtlbmRDZWxsID8gJ1xcbicgOiAnXFx0J31gfVxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICApO1xuXG4gICAgICAgIHJldHVybiBjZWxsO1xuICAgICAgfTtcbiAgICB9O1xuXG4gICAgcmVuZGVySGVhZGVyQ2VsbChjb2x1bW5zLCBpc1Bpbm5lZCwgcHJvcHMsIHRvZ2dsZU1vcmVPcHRpb25zLCBtb3JlT3B0aW9uc0NvbHVtbikge1xuICAgICAgcmV0dXJuIGNlbGxJbmZvID0+IChcbiAgICAgICAgPEhlYWRlckNlbGxcbiAgICAgICAgICBjZWxsSW5mbz17Y2VsbEluZm99XG4gICAgICAgICAga2V5PXtjZWxsSW5mby5jb2x1bW5JbmRleH1cbiAgICAgICAgICBjb2x1bW5zPXtjb2x1bW5zfVxuICAgICAgICAgIGlzUGlubmVkPXtpc1Bpbm5lZH1cbiAgICAgICAgICBwcm9wcz17cHJvcHN9XG4gICAgICAgICAgdG9nZ2xlTW9yZU9wdGlvbnM9e3RvZ2dsZU1vcmVPcHRpb25zfVxuICAgICAgICAgIG1vcmVPcHRpb25zQ29sdW1uPXttb3JlT3B0aW9uc0NvbHVtbn1cbiAgICAgICAgLz5cbiAgICAgICk7XG4gICAgfVxuICAgIHJlbmRlcigpIHtcbiAgICAgIGNvbnN0IHtcbiAgICAgICAgZGF0YUNvbnRhaW5lcixcbiAgICAgICAgcGlubmVkQ29sdW1ucyA9IFtdLFxuICAgICAgICB0aGVtZSA9IHt9LFxuICAgICAgICBmaXhlZFdpZHRoLFxuICAgICAgICBmaXhlZEhlaWdodCA9IDAsXG4gICAgICAgIHNob3dTdGF0c1xuICAgICAgfSA9IHRoaXMucHJvcHM7XG4gICAgICBjb25zdCB1bnBpbm5lZENvbHVtbnMgPSB0aGlzLnVucGlubmVkQ29sdW1ucyh0aGlzLnByb3BzKTtcblxuICAgICAgY29uc3Qge2NlbGxTaXplQ2FjaGUgPSB7fSwgbW9yZU9wdGlvbnNDb2x1bW4sIGdob3N0fSA9IHRoaXMuc3RhdGU7XG4gICAgICBjb25zdCB1bnBpbm5lZENvbHVtbnNHaG9zdCA9IGdob3N0XG4gICAgICAgID8gWy4uLnVucGlubmVkQ29sdW1ucywge2dob3N0OiB0cnVlfSBhcyBzdHJpbmcgJiB7Z2hvc3Q6IGJvb2xlYW59XVxuICAgICAgICA6IHVucGlubmVkQ29sdW1ucztcbiAgICAgIGNvbnN0IHBpbm5lZENvbHVtbnNXaWR0aCA9IHBpbm5lZENvbHVtbnMucmVkdWNlKFxuICAgICAgICAoYWNjLCB2YWwpID0+IGFjYyArIChnZXQoY2VsbFNpemVDYWNoZSwgdmFsLCAwKSBhcyBudW1iZXIpLFxuICAgICAgICAwXG4gICAgICApO1xuXG4gICAgICBjb25zdCBoYXNQaW5uZWRDb2x1bW5zID0gQm9vbGVhbihwaW5uZWRDb2x1bW5zLmxlbmd0aCk7XG4gICAgICBjb25zdCB7XG4gICAgICAgIGhlYWRlclJvd0hlaWdodCA9IGRlZmF1bHRIZWFkZXJSb3dIZWlnaHQsXG4gICAgICAgIGhlYWRlclJvd1dTdGF0c0hlaWdodCA9IGRlZmF1bHRIZWFkZXJSb3dIZWlnaHQsXG4gICAgICAgIHJvd0hlaWdodCA9IGRlZmF1bHRSb3dIZWlnaHRcbiAgICAgIH0gPSB0aGVtZTtcblxuICAgICAgY29uc3QgaGVhZGVyR3JpZFByb3BzID0ge1xuICAgICAgICBjZWxsU2l6ZUNhY2hlLFxuICAgICAgICBjbGFzc05hbWU6ICdoZWFkZXItZ3JpZCcsXG4gICAgICAgIGhlaWdodDogc2hvd1N0YXRzID8gaGVhZGVyUm93V1N0YXRzSGVpZ2h0IDogaGVhZGVyUm93SGVpZ2h0LFxuICAgICAgICByb3dDb3VudDogMSxcbiAgICAgICAgcm93SGVpZ2h0OiBzaG93U3RhdHMgPyBoZWFkZXJSb3dXU3RhdHNIZWlnaHQgOiBoZWFkZXJSb3dIZWlnaHRcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IGRhdGFHcmlkUHJvcHMgPSB7XG4gICAgICAgIGNlbGxTaXplQ2FjaGUsXG4gICAgICAgIG92ZXJzY2FuQ29sdW1uQ291bnQsXG4gICAgICAgIG92ZXJzY2FuUm93Q291bnQsXG4gICAgICAgIHJvd0NvdW50OiBkYXRhQ29udGFpbmVyID8gZGF0YUNvbnRhaW5lci5udW1Sb3dzKCkgOiAwLFxuICAgICAgICByb3dIZWlnaHRcbiAgICAgIH07XG5cbiAgICAgIHJldHVybiAoXG4gICAgICAgIDxDb250YWluZXIgY2xhc3NOYW1lPVwiZGF0YS10YWJsZS1jb250YWluZXJcIiByZWY9e3RoaXMucm9vdH0+XG4gICAgICAgICAge09iamVjdC5rZXlzKGNlbGxTaXplQ2FjaGUpLmxlbmd0aCA/IChcbiAgICAgICAgICAgIDxTY3JvbGxTeW5jPlxuICAgICAgICAgICAgICB7KHtvblNjcm9sbCwgc2Nyb2xsTGVmdCwgc2Nyb2xsVG9wfSkgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJlc3VsdHMtdGFibGUtd3JhcHBlclwiPlxuICAgICAgICAgICAgICAgICAgICB7aGFzUGlubmVkQ29sdW1ucyAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiBrZXk9XCJwaW5uZWQtY29sdW1uc1wiIGNsYXNzTmFtZT1cInBpbm5lZC1jb2x1bW5zIGdyaWQtcm93XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8VGFibGVTZWN0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTGlzdD17e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcjogJ3Bpbm5lZC1jb2x1bW5zLS1oZWFkZXIgcGlubmVkLWdyaWQtY29udGFpbmVyJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3dzOiAncGlubmVkLWNvbHVtbnMtLXJvd3MgcGlubmVkLWdyaWQtY29udGFpbmVyJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICBpc1Bpbm5lZFxuICAgICAgICAgICAgICAgICAgICAgICAgICBjb2x1bW5zPXtwaW5uZWRDb2x1bW5zfVxuICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJHcmlkUHJvcHM9e2hlYWRlckdyaWRQcm9wc31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgZml4ZWRXaWR0aD17cGlubmVkQ29sdW1uc1dpZHRofVxuICAgICAgICAgICAgICAgICAgICAgICAgICBvblNjcm9sbD17YXJncyA9PiBvblNjcm9sbCh7Li4uYXJncywgc2Nyb2xsTGVmdH0pfVxuICAgICAgICAgICAgICAgICAgICAgICAgICBzY3JvbGxUb3A9e3Njcm9sbFRvcH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YUdyaWRQcm9wcz17ZGF0YUdyaWRQcm9wc31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgY29sdW1uV2lkdGg9e2NvbHVtbldpZHRoRnVuY3Rpb24ocGlubmVkQ29sdW1ucywgY2VsbFNpemVDYWNoZSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlckNlbGxSZW5kZXI9e3RoaXMucmVuZGVySGVhZGVyQ2VsbChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwaW5uZWRDb2x1bW5zLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9wcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRvZ2dsZU1vcmVPcHRpb25zLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vcmVPcHRpb25zQ29sdW1uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFDZWxsUmVuZGVyPXt0aGlzLnJlbmRlckRhdGFDZWxsKHBpbm5lZENvbHVtbnMsIHRydWUsIHRoaXMucHJvcHMpfVxuICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgIGtleT1cInVucGlubmVkLWNvbHVtbnNcIlxuICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7XG4gICAgICAgICAgICAgICAgICAgICAgICBtYXJnaW5MZWZ0OiBgJHtoYXNQaW5uZWRDb2x1bW5zID8gYCR7cGlubmVkQ29sdW1uc1dpZHRofXB4YCA6ICcwJ31gXG4gICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ1bnBpbm5lZC1jb2x1bW5zIGdyaWQtY29sdW1uXCJcbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgIDxUYWJsZVNlY3Rpb25cbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTGlzdD17e1xuICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXI6ICd1bnBpbm5lZC1jb2x1bW5zLS1oZWFkZXIgdW5waW5uZWQtZ3JpZC1jb250YWluZXInLFxuICAgICAgICAgICAgICAgICAgICAgICAgICByb3dzOiAndW5waW5uZWQtY29sdW1ucy0tcm93cyB1bnBpbm5lZC1ncmlkLWNvbnRhaW5lcidcbiAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICBpc1Bpbm5lZD17ZmFsc2V9XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2x1bW5zPXt1bnBpbm5lZENvbHVtbnNHaG9zdH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlckdyaWRQcm9wcz17aGVhZGVyR3JpZFByb3BzfVxuICAgICAgICAgICAgICAgICAgICAgICAgZml4ZWRXaWR0aD17Zml4ZWRXaWR0aH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGZpeGVkSGVpZ2h0PXtmaXhlZEhlaWdodH1cbiAgICAgICAgICAgICAgICAgICAgICAgIG9uU2Nyb2xsPXtvblNjcm9sbH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHNjcm9sbFRvcD17c2Nyb2xsVG9wfVxuICAgICAgICAgICAgICAgICAgICAgICAgc2Nyb2xsTGVmdD17c2Nyb2xsTGVmdH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFHcmlkUHJvcHM9e2RhdGFHcmlkUHJvcHN9XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2x1bW5XaWR0aD17Y29sdW1uV2lkdGhGdW5jdGlvbihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdW5waW5uZWRDb2x1bW5zR2hvc3QsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNlbGxTaXplQ2FjaGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGdob3N0XG4gICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyQ2VsbFJlbmRlcj17dGhpcy5yZW5kZXJIZWFkZXJDZWxsKFxuICAgICAgICAgICAgICAgICAgICAgICAgICB1bnBpbm5lZENvbHVtbnNHaG9zdCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJvcHMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudG9nZ2xlTW9yZU9wdGlvbnMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIG1vcmVPcHRpb25zQ29sdW1uXG4gICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YUNlbGxSZW5kZXI9e3RoaXMucmVuZGVyRGF0YUNlbGwoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHVucGlubmVkQ29sdW1uc0dob3N0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9wc1xuICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgIH19XG4gICAgICAgICAgICA8L1Njcm9sbFN5bmM+XG4gICAgICAgICAgKSA6IG51bGx9XG4gICAgICAgIDwvQ29udGFpbmVyPlxuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gd2l0aFRoZW1lKERhdGFUYWJsZSk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IERhdGFUYWJsZUZhY3Rvcnk7XG4iXX0=