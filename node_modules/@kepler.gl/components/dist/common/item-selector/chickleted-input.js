// Copyright (c) 2022 Uber Technologies, Inc.
//
// Permission is hereby granted, free of charge, to any person obtaining a copy
// of this software and associated documentation files (the "Software"), to deal
// in the Software without restriction, including without limitation the rights
// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
// copies of the Software, and to permit persons to whom the Software is
// furnished to do so, subject to the following conditions:
//
// The above copyright notice and this permission notice shall be included in
// all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
// THE SOFTWARE.

"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = exports.ChickletTag = exports.ChickletButton = void 0;

var _taggedTemplateLiteral2 = _interopRequireDefault(require("@babel/runtime/helpers/taggedTemplateLiteral"));

var _react = _interopRequireDefault(require("react"));

var _styledComponents = _interopRequireDefault(require("styled-components"));

var _delete = _interopRequireDefault(require("../icons/delete"));

var _localization = require("@kepler.gl/localization");

var _templateObject, _templateObject2, _templateObject3;

var ChickletButton = _styledComponents["default"].div(_templateObject || (_templateObject = (0, _taggedTemplateLiteral2["default"])(["\n  background: ", ";\n  border-radius: 1px;\n  color: ", ";\n  font-size: 11px;\n  line-height: 20px;\n  margin: 4px 10px 4px 3px;\n  padding: 2px 6px;\n  display: flex;\n  align-items: center;\n  max-width: calc(100% - 8px);\n\n  :hover {\n    color: ", ";\n  }\n"])), function (props) {
  return props.inputTheme === 'light' ? props.theme.chickletBgdLT : props.theme.chickletBgd;
}, function (props) {
  return props.inputTheme === 'light' ? props.theme.textColorLT : props.theme.textColor;
}, function (props) {
  return props.inputTheme === 'light' ? props.theme.textColorHlLT : props.theme.textColorHl;
});

exports.ChickletButton = ChickletButton;

var ChickletTag = _styledComponents["default"].span(_templateObject2 || (_templateObject2 = (0, _taggedTemplateLiteral2["default"])(["\n  margin-right: 10px;\n  text-overflow: ellipsis;\n  width: 100%;\n  overflow: hidden;\n\n  :hover {\n    overflow: visible;\n  }\n"])));

exports.ChickletTag = ChickletTag;

var Chicklet = function Chicklet(_ref) {
  var disabled = _ref.disabled,
      name = _ref.name,
      remove = _ref.remove,
      inputTheme = _ref.inputTheme;
  return /*#__PURE__*/_react["default"].createElement(ChickletButton, {
    inputTheme: inputTheme
  }, /*#__PURE__*/_react["default"].createElement(ChickletTag, null, name), /*#__PURE__*/_react["default"].createElement(_delete["default"], {
    onClick: disabled ? undefined : remove
  }));
};

var ChickletedInputContainer = _styledComponents["default"].div(_templateObject3 || (_templateObject3 = (0, _taggedTemplateLiteral2["default"])(["\n  ", "\n      \n  color: ", ";\n  overflow: hidden;\n"])), function (props) {
  return props.inputTheme === 'secondary' ? props.theme.secondaryChickletedInput : props.inputTheme === 'light' ? props.theme.chickletedInputLT : props.theme.chickletedInput;
}, function (props) {
  return props.hasPlaceholder ? props.theme.selectColorPlaceHolder : props.theme.selectColor;
});

var ChickletedInput = function ChickletedInput(_ref2) {
  var disabled = _ref2.disabled,
      onClick = _ref2.onClick,
      className = _ref2.className,
      _ref2$selectedItems = _ref2.selectedItems,
      selectedItems = _ref2$selectedItems === void 0 ? [] : _ref2$selectedItems,
      _ref2$placeholder = _ref2.placeholder,
      placeholder = _ref2$placeholder === void 0 ? '' : _ref2$placeholder,
      removeItem = _ref2.removeItem,
      _ref2$displayOption = _ref2.displayOption,
      displayOption = _ref2$displayOption === void 0 ? function (d) {
    return d;
  } : _ref2$displayOption,
      inputTheme = _ref2.inputTheme,
      CustomChickletComponent = _ref2.CustomChickletComponent;
  return /*#__PURE__*/_react["default"].createElement(ChickletedInputContainer, {
    className: "".concat(className, " chickleted-input"),
    onClick: onClick,
    inputTheme: inputTheme,
    hasPlaceholder: !selectedItems || !selectedItems.length
  }, selectedItems.length > 0 ? selectedItems.map(function (item, i) {
    var chickletProps = {
      inputTheme: inputTheme,
      disabled: disabled,
      key: "".concat(displayOption(item), "_").concat(i),
      name: displayOption(item),
      displayOption: displayOption,
      item: item,
      remove: function remove(e) {
        return removeItem(item, e);
      }
    };
    return CustomChickletComponent ? /*#__PURE__*/_react["default"].createElement(CustomChickletComponent, chickletProps) : /*#__PURE__*/_react["default"].createElement(Chicklet, chickletProps);
  }) : /*#__PURE__*/_react["default"].createElement("span", {
    className: "".concat(className, " chickleted-input__placeholder")
  }, /*#__PURE__*/_react["default"].createElement(_localization.FormattedMessage, {
    id: placeholder || 'placeholder.enterValue'
  })));
};

var _default = ChickletedInput;
exports["default"] = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9jb21tb24vaXRlbS1zZWxlY3Rvci9jaGlja2xldGVkLWlucHV0LnRzeCJdLCJuYW1lcyI6WyJDaGlja2xldEJ1dHRvbiIsInN0eWxlZCIsImRpdiIsInByb3BzIiwiaW5wdXRUaGVtZSIsInRoZW1lIiwiY2hpY2tsZXRCZ2RMVCIsImNoaWNrbGV0QmdkIiwidGV4dENvbG9yTFQiLCJ0ZXh0Q29sb3IiLCJ0ZXh0Q29sb3JIbExUIiwidGV4dENvbG9ySGwiLCJDaGlja2xldFRhZyIsInNwYW4iLCJDaGlja2xldCIsImRpc2FibGVkIiwibmFtZSIsInJlbW92ZSIsInVuZGVmaW5lZCIsIkNoaWNrbGV0ZWRJbnB1dENvbnRhaW5lciIsInNlY29uZGFyeUNoaWNrbGV0ZWRJbnB1dCIsImNoaWNrbGV0ZWRJbnB1dExUIiwiY2hpY2tsZXRlZElucHV0IiwiaGFzUGxhY2Vob2xkZXIiLCJzZWxlY3RDb2xvclBsYWNlSG9sZGVyIiwic2VsZWN0Q29sb3IiLCJDaGlja2xldGVkSW5wdXQiLCJvbkNsaWNrIiwiY2xhc3NOYW1lIiwic2VsZWN0ZWRJdGVtcyIsInBsYWNlaG9sZGVyIiwicmVtb3ZlSXRlbSIsImRpc3BsYXlPcHRpb24iLCJkIiwiQ3VzdG9tQ2hpY2tsZXRDb21wb25lbnQiLCJsZW5ndGgiLCJtYXAiLCJpdGVtIiwiaSIsImNoaWNrbGV0UHJvcHMiLCJrZXkiLCJlIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQW9CQTs7QUFFQTs7QUFDQTs7QUFDQTs7OztBQXVCTyxJQUFNQSxjQUFjLEdBQUdDLDZCQUFPQyxHQUFWLGdXQUNYLFVBQUFDLEtBQUs7QUFBQSxTQUNqQkEsS0FBSyxDQUFDQyxVQUFOLEtBQXFCLE9BQXJCLEdBQStCRCxLQUFLLENBQUNFLEtBQU4sQ0FBWUMsYUFBM0MsR0FBMkRILEtBQUssQ0FBQ0UsS0FBTixDQUFZRSxXQUR0RDtBQUFBLENBRE0sRUFJaEIsVUFBQUosS0FBSztBQUFBLFNBQ1pBLEtBQUssQ0FBQ0Ms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SGlCO0FBSXBCdEIsTUFBQUEsSUFBSSxFQUFFZ0IsYUFBYSxDQUFDSyxJQUFELENBSkM7QUFLcEJMLE1BQUFBLGFBQWEsRUFBYkEsYUFMb0I7QUFNcEJLLE1BQUFBLElBQUksRUFBSkEsSUFOb0I7QUFPcEJwQixNQUFBQSxNQUFNLEVBQUUsZ0JBQUF3QixDQUFDO0FBQUEsZUFBSVYsVUFBVSxDQUFDTSxJQUFELEVBQU9JLENBQVAsQ0FBZDtBQUFBO0FBUFcsS0FBdEI7QUFTQSxXQUFPUCx1QkFBdUIsZ0JBQzVCLGdDQUFDLHVCQUFELEVBQTZCSyxhQUE3QixDQUQ0QixnQkFHNUIsZ0NBQUMsUUFBRCxFQUFjQSxhQUFkLENBSEY7QUFLRCxHQWZELENBREQsZ0JBa0JDO0FBQU0sSUFBQSxTQUFTLFlBQUtYLFNBQUw7QUFBZixrQkFDRSxnQ0FBQyw4QkFBRDtBQUFrQixJQUFBLEVBQUUsRUFBRUUsV0FBVyxJQUFJO0FBQXJDLElBREYsQ0F4QkosQ0FYc0Q7QUFBQSxDQUF4RDs7ZUEwQ2VKLGUiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgKGMpIDIwMjIgVWJlciBUZWNobm9sb2dpZXMsIEluYy5cbi8vXG4vLyBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYSBjb3B5XG4vLyBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZSBcIlNvZnR3YXJlXCIpLCB0byBkZWFsXG4vLyBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzXG4vLyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsXG4vLyBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXNcbi8vIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnM6XG4vL1xuLy8gVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWQgaW5cbi8vIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuLy9cbi8vIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MgT1Jcbi8vIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLFxuLy8gRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFXG4vLyBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SIE9USEVSXG4vLyBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLFxuLy8gT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTlxuLy8gVEhFIFNPRlRXQVJFLlxuXG5pbXBvcnQgUmVhY3QsIHtFbGVtZW50VHlwZSwgTW91c2VFdmVudEhhbmRsZXIsIFJlYWN0Tm9kZX0gZnJvbSAncmVhY3QnO1xuXG5pbXBvcnQgc3R5bGVkIGZyb20gJ3N0eWxlZC1jb21wb25lbnRzJztcbmltcG9ydCBEZWxldGUgZnJvbSAnLi4vaWNvbnMvZGVsZXRlJztcbmltcG9ydCB7Rm9ybWF0dGVkTWVzc2FnZX0gZnJvbSAnQGtlcGxlci5nbC9sb2NhbGl6YXRpb24nO1xuXG5pbnRlcmZhY2UgQ2hpY2tsZXRlZElucHV0UHJvcHMge1xuICAvLyByZXF1aXJlZCBwcm9wZXJ0aWVzXG4gIG9uQ2xpY2s6IE1vdXNlRXZlbnRIYW5kbGVyPEhUTUxEaXZFbGVtZW50PjtcbiAgcmVtb3ZlSXRlbTogRnVuY3Rpb247XG5cbiAgLy8gb3B0aW9uYWwgcHJvcGVydGllc1xuICBzZWxlY3RlZEl0ZW1zPzogYW55W107XG4gIGRpc2FibGVkPzogYm9vbGVhbjtcbiAgZGlzcGxheU9wdGlvbj86IEZ1bmN0aW9uO1xuICBmb2N1cz86IGJvb2xlYW47XG4gIGVycm9yPzogYm9vbGVhbjtcbiAgcGxhY2Vob2xkZXI/OiBzdHJpbmc7XG4gIGlucHV0VGhlbWU/OiBzdHJpbmc7XG4gIEN1c3RvbUNoaWNrbGV0Q29tcG9uZW50PzogRWxlbWVudFR5cGU7XG4gIGNsYXNzTmFtZT86IHN0cmluZztcbn1cblxuaW50ZXJmYWNlIENoaWNrbGV0QnV0dG9uUHJvcHMge1xuICBpbnB1dFRoZW1lPzogc3RyaW5nO1xufVxuXG5leHBvcnQgY29uc3QgQ2hpY2tsZXRCdXR0b24gPSBzdHlsZWQuZGl2PENoaWNrbGV0QnV0dG9uUHJvcHM+YFxuICBiYWNrZ3JvdW5kOiAke3Byb3BzID0+XG4gICAgcHJvcHMuaW5wdXRUaGVtZSA9PT0gJ2xpZ2h0JyA/IHByb3BzLnRoZW1lLmNoaWNrbGV0QmdkTFQgOiBwcm9wcy50aGVtZS5jaGlja2xldEJnZH07XG4gIGJvcmRlci1yYWRpdXM6IDFweDtcbiAgY29sb3I6ICR7cHJvcHMgPT5cbiAgICBwcm9wcy5pbnB1dFRoZW1lID09PSAnbGlnaHQnID8gcHJvcHMudGhlbWUudGV4dENvbG9yTFQgOiBwcm9wcy50aGVtZS50ZXh0Q29sb3J9O1xuICBmb250LXNpemU6IDExcHg7XG4gIGxpbmUtaGVpZ2h0OiAyMHB4O1xuICBtYXJnaW46IDRweCAxMHB4IDRweCAzcHg7XG4gIHBhZGRpbmc6IDJweCA2cHg7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIG1heC13aWR0aDogY2FsYygxMDAlIC0gOHB4KTtcblxuICA6aG92ZXIge1xuICAgIGNvbG9yOiAke3Byb3BzID0+XG4gICAgICBwcm9wcy5pbnB1dFRoZW1lID09PSAnbGlnaHQnID8gcHJvcHMudGhlbWUudGV4dENvbG9ySGxMVCA6IHByb3BzLnRoZW1lLnRleHRDb2xvckhsfTtcbiAgfVxuYDtcblxuZXhwb3J0IGNvbnN0IENoaWNrbGV0VGFnID0gc3R5bGVkLnNwYW5gXG4gIG1hcmdpbi1yaWdodDogMTBweDtcbiAgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7XG4gIHdpZHRoOiAxMDAlO1xuICBvdmVyZmxvdzogaGlkZGVuO1xuXG4gIDpob3ZlciB7XG4gICAgb3ZlcmZsb3c6IHZpc2libGU7XG4gIH1cbmA7XG5cbmludGVyZmFjZSBDaGlja2xldFByb3BzIHtcbiAgZGlzYWJsZWQ/OiBib29sZWFuO1xuICBuYW1lOiBSZWFjdE5vZGU7XG4gIHJlbW92ZT86IE1vdXNlRXZlbnRIYW5kbGVyPFNWR1NWR0VsZW1lbnQ+O1xuICBpbnB1dFRoZW1lPzogc3RyaW5nO1xufVxuXG5jb25zdCBDaGlja2xldCA9ICh7ZGlzYWJsZWQsIG5hbWUsIHJlbW92ZSwgaW5wdXRUaGVtZX06IENoaWNrbGV0UHJvcHMpID0+IChcbiAgPENoaWNrbGV0QnV0dG9uIGlucHV0VGhlbWU9e2lucHV0VGhlbWV9PlxuICAgIDxDaGlja2xldFRhZz57bmFtZX08L0NoaWNrbGV0VGFnPlxuICAgIDxEZWxldGUgb25DbGljaz17ZGlzYWJsZWQgPyB1bmRlZmluZWQgOiByZW1vdmV9IC8+XG4gIDwvQ2hpY2tsZXRCdXR0b24+XG4pO1xuXG5pbnRlcmZhY2UgQ2hpY2tsZXRlZElucHV0Q29udGFpbmVyUHJvcHMge1xuICBpbnB1dFRoZW1lPzogc3RyaW5nO1xuICBoYXNQbGFjZWhvbGRlcj86IGJvb2xlYW47XG59XG5cbmNvbnN0IENoaWNrbGV0ZWRJbnB1dENvbnRhaW5lciA9IHN0eWxlZC5kaXY8Q2hpY2tsZXRlZElucHV0Q29udGFpbmVyUHJvcHM+YFxuICAke3Byb3BzID0+XG4gICAgcHJvcHMuaW5wdXRUaGVtZSA9PT0gJ3NlY29uZGFyeSdcbiAgICAgID8gcHJvcHMudGhlbWUuc2Vjb25kYXJ5Q2hpY2tsZXRlZElucHV0XG4gICAgICA6IHByb3BzLmlucHV0VGhlbWUgPT09ICdsaWdodCdcbiAgICAgID8gcHJvcHMudGhlbWUuY2hpY2tsZXRlZElucHV0TFRcbiAgICAgIDogcHJvcHMudGhlbWUuY2hpY2tsZXRlZElucHV0fVxuICAgICAgXG4gIGNvbG9yOiAke3Byb3BzID0+XG4gICAgcHJvcHMuaGFzUGxhY2Vob2xkZXIgPyBwcm9wcy50aGVtZS5zZWxlY3RDb2xvclBsYWNlSG9sZGVyIDogcHJvcHMudGhlbWUuc2VsZWN0Q29sb3J9O1xuICBvdmVyZmxvdzogaGlkZGVuO1xuYDtcblxuY29uc3QgQ2hpY2tsZXRlZElucHV0OiBSZWFjdC5GQzxDaGlja2xldGVkSW5wdXRQcm9wcz4gPSAoe1xuICBkaXNhYmxlZCxcbiAgb25DbGljayxcbiAgY2xhc3NOYW1lLFxuICBzZWxlY3RlZEl0ZW1zID0gW10sXG4gIHBsYWNlaG9sZGVyID0gJycsXG4gIHJlbW92ZUl0ZW0sXG4gIGRpc3BsYXlPcHRpb24gPSBkID0+IGQsXG4gIGlucHV0VGhlbWUsXG4gIEN1c3RvbUNoaWNrbGV0Q29tcG9uZW50XG59KSA9PiAoXG4gIDxDaGlja2xldGVkSW5wdXRDb250YWluZXJcbiAgICBjbGFzc05hbWU9e2Ake2NsYXNzTmFtZX0gY2hpY2tsZXRlZC1pbnB1dGB9XG4gICAgb25DbGljaz17b25DbGlja31cbiAgICBpbnB1dFRoZW1lPXtpbnB1dFRoZW1lfVxuICAgIGhhc1BsYWNlaG9sZGVyPXshc2VsZWN0ZWRJdGVtcyB8fCAhc2VsZWN0ZWRJdGVtcy5sZW5ndGh9XG4gID5cbiAgICB7c2VsZWN0ZWRJdGVtcy5sZW5ndGggPiAwID8gKFxuICAgICAgc2VsZWN0ZWRJdGVtcy5tYXAoKGl0ZW0sIGkpID0+IHtcbiAgICAgICAgY29uc3QgY2hpY2tsZXRQcm9wcyA9IHtcbiAgICAgICAgICBpbnB1dFRoZW1lLFxuICAgICAgICAgIGRpc2FibGVkLFxuICAgICAgICAgIGtleTogYCR7ZGlzcGxheU9wdGlvbihpdGVtKX1fJHtpfWAsXG4gICAgICAgICAgbmFtZTogZGlzcGxheU9wdGlvbihpdGVtKSxcbiAgICAgICAgICBkaXNwbGF5T3B0aW9uLFxuICAgICAgICAgIGl0ZW0sXG4gICAgICAgICAgcmVtb3ZlOiBlID0+IHJlbW92ZUl0ZW0oaXRlbSwgZSlcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIEN1c3RvbUNoaWNrbGV0Q29tcG9uZW50ID8gKFxuICAgICAgICAgIDxDdXN0b21DaGlja2xldENvbXBvbmVudCB7Li4uY2hpY2tsZXRQcm9wc30gLz5cbiAgICAgICAgKSA6IChcbiAgICAgICAgICA8Q2hpY2tsZXQgey4uLmNoaWNrbGV0UHJvcHN9IC8+XG4gICAgICAgICk7XG4gICAgICB9KVxuICAgICkgOiAoXG4gICAgICA8c3BhbiBjbGFzc05hbWU9e2Ake2NsYXNzTmFtZX0gY2hpY2tsZXRlZC1pbnB1dF9fcGxhY2Vob2xkZXJgfT5cbiAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2UgaWQ9e3BsYWNlaG9sZGVyIHx8ICdwbGFjZWhvbGRlci5lbnRlclZhbHVlJ30gLz5cbiAgICAgIDwvc3Bhbj5cbiAgICApfVxuICA8L0NoaWNrbGV0ZWRJbnB1dENvbnRhaW5lcj5cbik7XG5cbmV4cG9ydCBkZWZhdWx0IENoaWNrbGV0ZWRJbnB1dDtcbiJdfQ==