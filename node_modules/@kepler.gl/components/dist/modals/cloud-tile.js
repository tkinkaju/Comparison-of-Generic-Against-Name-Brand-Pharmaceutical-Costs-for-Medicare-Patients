// Copyright (c) 2022 Uber Technologies, Inc.
//
// Permission is hereby granted, free of charge, to any person obtaining a copy
// of this software and associated documentation files (the "Software"), to deal
// in the Software without restriction, including without limitation the rights
// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
// copies of the Software, and to permit persons to whom the Software is
// furnished to do so, subject to the following conditions:
//
// The above copyright notice and this permission notice shall be included in
// all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
// THE SOFTWARE.

"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _taggedTemplateLiteral2 = _interopRequireDefault(require("@babel/runtime/helpers/taggedTemplateLiteral"));

var _react = _interopRequireDefault(require("react"));

var _styledComponents = _interopRequireDefault(require("styled-components"));

var _icons = require("../common/icons");

var _styledComponents2 = require("../common/styled-components");

var _loadingSpinner = _interopRequireDefault(require("../common/loading-spinner"));

var _templateObject, _templateObject2, _templateObject3, _templateObject4;

var StyledTileWrapper = _styledComponents["default"].div.attrs({
  className: 'provider-tile__wrapper'
})(_templateObject || (_templateObject = (0, _taggedTemplateLiteral2["default"])(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: flex-start;\n  border-radius: 2px;\n  border: 1px solid\n    ", ";\n  color: ", ";\n  cursor: pointer;\n  font-weight: 500;\n  width: 120px;\n  height: 168px;\n  background-color: #ffffff;\n  transition: ", ";\n  position: relative;\n  :hover {\n    border: 1px solid ", ";\n    color: ", ";\n  }\n\n  .button {\n    margin-top: 20px;\n  }\n"])), function (props) {
  return props.selected ? props.theme.primaryBtnBgd : props.theme.selectBorderColorLT;
}, function (props) {
  return props.selected ? props.theme.primaryBtnBgd : props.theme.selectBorderColorLT;
}, function (props) {
  return props.theme.transition;
}, function (props) {
  return props.theme.primaryBtnBgd;
}, function (props) {
  return props.theme.primaryBtnBgd;
});

var StyledBox = (0, _styledComponents["default"])(_styledComponents2.CenterVerticalFlexbox)(_templateObject2 || (_templateObject2 = (0, _taggedTemplateLiteral2["default"])(["\n  margin-right: 12px;\n"])));

var StyledCloudName = _styledComponents["default"].div(_templateObject3 || (_templateObject3 = (0, _taggedTemplateLiteral2["default"])(["\n  font-size: 12px;\n  margin-top: 12px;\n  margin-bottom: 4px;\n"])));

var StyledUserName = _styledComponents["default"].div(_templateObject4 || (_templateObject4 = (0, _taggedTemplateLiteral2["default"])(["\n  font-size: 11px;\n  margin-top: 8px;\n  text-align: center;\n  color: ", ";\n  overflow: hidden;\n  width: 100px;\n  text-overflow: ellipsis;\n"])), function (props) {
  return props.theme.primaryBtnActBgd;
});

var LoginButton = function LoginButton(_ref) {
  var onClick = _ref.onClick;
  return /*#__PURE__*/_react["default"].createElement(_styledComponents2.Button, {
    className: "login-button",
    link: true,
    small: true,
    onClick: onClick
  }, /*#__PURE__*/_react["default"].createElement(_icons.Login, null), "Login");
};

var LogoutButton = function LogoutButton(_ref2) {
  var onClick = _ref2.onClick;
  return /*#__PURE__*/_react["default"].createElement(_styledComponents2.Button, {
    className: "logout-button",
    link: true,
    small: true,
    onClick: onClick
  }, /*#__PURE__*/_react["default"].createElement(_icons.Logout, null), "Logout");
};

var ActionButton = function ActionButton(_ref3) {
  var isConnected = _ref3.isConnected,
      _ref3$actionName = _ref3.actionName,
      actionName = _ref3$actionName === void 0 ? null : _ref3$actionName,
      isReady = _ref3.isReady;
  return isConnected && actionName ? /*#__PURE__*/_react["default"].createElement(_styledComponents2.Button, {
    className: "cloud-tile__action",
    small: true,
    secondary: true,
    disabled: !isReady
  }, isReady ? actionName : /*#__PURE__*/_react["default"].createElement(_loadingSpinner["default"], {
    size: 12
  })) : null;
};

var CloudTile = function CloudTile(_ref4) {
  var onSelect = _ref4.onSelect,
      _ref4$onConnect = _ref4.onConnect,
      onConnect = _ref4$onConnect === void 0 ? null : _ref4$onConnect,
      _ref4$onLogout = _ref4.onLogout,
      onLogout = _ref4$onLogout === void 0 ? null : _ref4$onLogout,
      _ref4$actionName = _ref4.actionName,
      actionName = _ref4$actionName === void 0 ? null : _ref4$actionName,
      cloudProvider = _ref4.cloudProvider,
      onSetCloudProvider = _ref4.onSetCloudProvider,
      isSelected = _ref4.isSelected,
      isConnected = _ref4.isConnected,
      _ref4$isReady = _ref4.isReady,
      isReady = _ref4$isReady === void 0 ? true : _ref4$isReady;
  var userName = typeof cloudProvider.getUserName === 'function' ? cloudProvider.getUserName() : null;
  var onClickConnect = typeof onConnect === 'function' ? onConnect : function () {
    return cloudProvider.login(function () {
      return onSetCloudProvider(cloudProvider.name);
    });
  };
  var onClickLogout = typeof onLogout === 'function' ? onLogout : function () {
    return cloudProvider.logout(function () {
      return isSelected ? onSetCloudProvider(null) : null;
    });
  };
  return /*#__PURE__*/_react["default"].createElement(StyledBox, null, /*#__PURE__*/_react["default"].createElement(StyledTileWrapper, {
    onClick: isConnected ? onSelect : onClickConnect,
    selected: isSelected
  }, /*#__PURE__*/_react["default"].createElement(StyledCloudName, null, cloudProvider.displayName || cloudProvider.name), cloudProvider.icon ? /*#__PURE__*/_react["default"].createElement(cloudProvider.icon, {
    height: "64px"
  }) : null, /*#__PURE__*/_react["default"].createElement(ActionButton, {
    isConnected: isConnected,
    actionName: actionName,
    isReady: isReady
  }), userName && /*#__PURE__*/_react["default"].createElement(StyledUserName, null, userName), isSelected && /*#__PURE__*/_react["default"].createElement(_styledComponents2.CheckMark, null)), isConnected ? /*#__PURE__*/_react["default"].createElement(LogoutButton, {
    onClick: onClickLogout
  }) : /*#__PURE__*/_react["default"].createElement(LoginButton, {
    onClick: onClickConnect
  }));
};

var _default = CloudTile;
exports["default"] = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9tb2RhbHMvY2xvdWQtdGlsZS50c3giXSwibmFtZXMiOlsiU3R5bGVkVGlsZVdyYXBwZXIiLCJzdHlsZWQiLCJkaXYiLCJhdHRycyIsImNsYXNzTmFtZSIsInByb3BzIiwic2VsZWN0ZWQiLCJ0aGVtZSIsInByaW1hcnlCdG5CZ2QiLCJzZWxlY3RCb3JkZXJDb2xvckxUIiwidHJhbnNpdGlvbiIsIlN0eWxlZEJveCIsIkNlbnRlclZlcnRpY2FsRmxleGJveCIsIlN0eWxlZENsb3VkTmFtZSIsIlN0eWxlZFVzZXJOYW1lIiwicHJpbWFyeUJ0bkFjdEJnZCIsIkxvZ2luQnV0dG9uIiwib25DbGljayIsIkxvZ291dEJ1dHRvbiIsIkFjdGlvbkJ1dHRvbiIsImlzQ29ubmVjdGVkIiwiYWN0aW9uTmFtZSIsImlzUmVhZHkiLCJDbG91ZFRpbGUiLCJvblNlbGVjdCIsIm9uQ29ubmVjdCIsIm9uTG9nb3V0IiwiY2xvdWRQcm92aWRlciIsIm9uU2V0Q2xvdWRQcm92aWRlciIsImlzU2VsZWN0ZWQiLCJ1c2VyTmFtZSIsImdldFVzZXJOYW1lIiwib25DbGlja0Nvbm5lY3QiLCJsb2dpbiIsIm5hbWUiLCJvbkNsaWNrTG9nb3V0IiwibG9nb3V0IiwiZGlzcGxheU5hbWUiLCJpY29uIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQW9CQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7OztBQU9BLElBQU1BLGlCQUFpQixHQUFHQyw2QkFBT0MsR0FBUCxDQUFXQyxLQUFYLENBQWlCO0FBQ3pDQyxFQUFBQSxTQUFTLEVBQUU7QUFEOEIsQ0FBakIsQ0FBSCxzZ0JBU2pCLFVBQUFDLEtBQUs7QUFBQSxTQUFLQSxLQUFLLENBQUNDLFFBQU4sR0FBaUJELEtBQUssQ0FBQ0UsS0FBTixDQUFZQyxhQUE3QixHQUE2Q0gsS0FBSyxDQUFDRSxLQUFOLENBQVlFLG1CQUE5RDtBQUFBLENBVFksRUFVWixVQUFBSixLQUFLO0FBQUEsU0FBS0EsS0FBSyxDQUFDQyxRQUFO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REY7QUFnQkQsQ0FqREQ7O2VBbURlVCxTIiwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IChjKSAyMDIyIFViZXIgVGVjaG5vbG9naWVzLCBJbmMuXG4vL1xuLy8gUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEgY29weVxuLy8gb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUgXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbFxuLy8gaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0c1xuLy8gdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLCBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbFxuLy8gY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzXG4vLyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyBjb25kaXRpb25zOlxuLy9cbi8vIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkIGluXG4vLyBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cbi8vXG4vLyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTIE9SXG4vLyBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSxcbi8vIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRVxuLy8gQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUlxuLy8gTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSxcbi8vIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU5cbi8vIFRIRSBTT0ZUV0FSRS5cblxuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBzdHlsZWQgZnJvbSAnc3R5bGVkLWNvbXBvbmVudHMnO1xuaW1wb3J0IHtMb2dvdXQsIExvZ2lufSBmcm9tICcuLi9jb21tb24vaWNvbnMnO1xuaW1wb3J0IHtDZW50ZXJWZXJ0aWNhbEZsZXhib3gsIEJ1dHRvbiwgQ2hlY2tNYXJrfSBmcm9tICcuLi9jb21tb24vc3R5bGVkLWNvbXBvbmVudHMnO1xuaW1wb3J0IExvYWRpbmdTcGlubmVyIGZyb20gJy4uL2NvbW1vbi9sb2FkaW5nLXNwaW5uZXInO1xuaW1wb3J0IHtQcm92aWRlcn0gZnJvbSAnQGtlcGxlci5nbC9jbG91ZC1wcm92aWRlcnMnO1xuXG5pbnRlcmZhY2UgU3R5bGVkVGlsZVdyYXBwZXJQcm9wcyB7XG4gIHNlbGVjdGVkPzogYm9vbGVhbjtcbn1cblxuY29uc3QgU3R5bGVkVGlsZVdyYXBwZXIgPSBzdHlsZWQuZGl2LmF0dHJzKHtcbiAgY2xhc3NOYW1lOiAncHJvdmlkZXItdGlsZV9fd3JhcHBlcidcbn0pPFN0eWxlZFRpbGVXcmFwcGVyUHJvcHM+YFxuICBkaXNwbGF5OiBmbGV4O1xuICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICBqdXN0aWZ5LWNvbnRlbnQ6IGZsZXgtc3RhcnQ7XG4gIGJvcmRlci1yYWRpdXM6IDJweDtcbiAgYm9yZGVyOiAxcHggc29saWRcbiAgICAke3Byb3BzID0+IChwcm9wcy5zZWxlY3RlZCA/IHByb3BzLnRoZW1lLnByaW1hcnlCdG5CZ2QgOiBwcm9wcy50aGVtZS5zZWxlY3RCb3JkZXJDb2xvckxUKX07XG4gIGNvbG9yOiAke3Byb3BzID0+IChwcm9wcy5zZWxlY3RlZCA/IHByb3BzLnRoZW1lLnByaW1hcnlCdG5CZ2QgOiBwcm9wcy50aGVtZS5zZWxlY3RCb3JkZXJDb2xvckxUKX07XG4gIGN1cnNvcjogcG9pbnRlcjtcbiAgZm9udC13ZWlnaHQ6IDUwMDtcbiAgd2lkdGg6IDEyMHB4O1xuICBoZWlnaHQ6IDE2OHB4O1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmZmZmO1xuICB0cmFuc2l0aW9uOiAke3Byb3BzID0+IHByb3BzLnRoZW1lLnRyYW5zaXRpb259O1xuICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gIDpob3ZlciB7XG4gICAgYm9yZGVyOiAxcHggc29saWQgJHtwcm9wcyA9PiBwcm9wcy50aGVtZS5wcmltYXJ5QnRuQmdkfTtcbiAgICBjb2xvcjogJHtwcm9wcyA9PiBwcm9wcy50aGVtZS5wcmltYXJ5QnRuQmdkfTtcbiAgfVxuXG4gIC5idXR0b24ge1xuICAgIG1hcmdpbi10b3A6IDIwcHg7XG4gIH1cbmA7XG5cbmNvbnN0IFN0eWxlZEJveCA9IHN0eWxlZChDZW50ZXJWZXJ0aWNhbEZsZXhib3gpYFxuICBtYXJnaW4tcmlnaHQ6IDEycHg7XG5gO1xuXG5jb25zdCBTdHlsZWRDbG91ZE5hbWUgPSBzdHlsZWQuZGl2YFxuICBmb250LXNpemU6IDEycHg7XG4gIG1hcmdpbi10b3A6IDEycHg7XG4gIG1hcmdpbi1ib3R0b206IDRweDtcbmA7XG5cbmNvbnN0IFN0eWxlZFVzZXJOYW1lID0gc3R5bGVkLmRpdmBcbiAgZm9udC1zaXplOiAxMXB4O1xuICBtYXJnaW4tdG9wOiA4cHg7XG4gIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgY29sb3I6ICR7cHJvcHMgPT4gcHJvcHMudGhlbWUucHJpbWFyeUJ0bkFjdEJnZH07XG4gIG92ZXJmbG93OiBoaWRkZW47XG4gIHdpZHRoOiAxMDBweDtcbiAgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7XG5gO1xuXG5pbnRlcmZhY2UgT25DbGlja1Byb3BzIHtcbiAgb25DbGljaz86IFJlYWN0Lk1vdXNlRXZlbnRIYW5kbGVyPEhUTUxEaXZFbGVtZW50Pjtcbn1cblxuY29uc3QgTG9naW5CdXR0b24gPSAoe29uQ2xpY2t9OiBPbkNsaWNrUHJvcHMpID0+IChcbiAgPEJ1dHRvbiBjbGFzc05hbWU9XCJsb2dpbi1idXR0b25cIiBsaW5rIHNtYWxsIG9uQ2xpY2s9e29uQ2xpY2t9PlxuICAgIDxMb2dpbiAvPlxuICAgIExvZ2luXG4gIDwvQnV0dG9uPlxuKTtcblxuY29uc3QgTG9nb3V0QnV0dG9uID0gKHtvbkNsaWNrfTogT25DbGlja1Byb3BzKSA9PiAoXG4gIDxCdXR0b24gY2xhc3NOYW1lPVwibG9nb3V0LWJ1dHRvblwiIGxpbmsgc21hbGwgb25DbGljaz17b25DbGlja30+XG4gICAgPExvZ291dCAvPlxuICAgIExvZ291dFxuICA8L0J1dHRvbj5cbik7XG5cbmludGVyZmFjZSBBY3Rpb25CdXR0b25Qcm9wcyB7XG4gIGlzQ29ubmVjdGVkPzogYm9vbGVhbjtcbiAgYWN0aW9uTmFtZT86IHN0cmluZyB8IG51bGw7XG4gIGlzUmVhZHk/OiBib29sZWFuO1xufVxuXG5jb25zdCBBY3Rpb25CdXR0b24gPSAoe2lzQ29ubmVjdGVkLCBhY3Rpb25OYW1lID0gbnVsbCwgaXNSZWFkeX06IEFjdGlvbkJ1dHRvblByb3BzKSA9PlxuICBpc0Nvbm5lY3RlZCAmJiBhY3Rpb25OYW1lID8gKFxuICAgIDxCdXR0b24gY2xhc3NOYW1lPVwiY2xvdWQtdGlsZV9fYWN0aW9uXCIgc21hbGwgc2Vjb25kYXJ5IGRpc2FibGVkPXshaXNSZWFkeX0+XG4gICAgICB7aXNSZWFkeSA/IGFjdGlvbk5hbWUgOiA8TG9hZGluZ1NwaW5uZXIgc2l6ZT17MTJ9IC8+fVxuICAgIDwvQnV0dG9uPlxuICApIDogbnVsbDtcblxuaW50ZXJmYWNlIENsb3VkVGlsZVByb3BzIHtcbiAgb25TZWxlY3Q/OiBSZWFjdC5Nb3VzZUV2ZW50SGFuZGxlcjxIVE1MRGl2RWxlbWVudD47XG4gIC8vIGRlZmF1bHQgdG8gbG9naW5cbiAgb25Db25uZWN0PzogKCgpID0+IHZvaWQpIHwgbnVsbDtcbiAgLy8gZGVmYXVsdCB0byBsb2dvdXRcbiAgb25Mb2dvdXQ/OiAoKCkgPT4gdm9pZCkgfCBudWxsO1xuICAvLyBhY3Rpb24gbmFtZVxuICBhY3Rpb25OYW1lPzogc3RyaW5nIHwgbnVsbDtcbiAgLy8gY2xvdWQgcHJvdmlkZXIgY2xhc3NcbiAgY2xvdWRQcm92aWRlcjogUHJvdmlkZXI7XG4gIC8vIGZ1bmN0aW9uIHRvIHRha2UgYWZ0ZXIgbG9naW4gb3IgbG9nb3V0XG4gIG9uU2V0Q2xvdWRQcm92aWRlcjogKHByb3ZpZGVyTmFtZTogc3RyaW5nIHwgbnVsbCkgPT4gdm9pZDtcbiAgLy8gd2hldGhlciBwcm92aWRlciBpcyBzZWxlY3RlZCBhcyBjdXJyZW50UHJvdmlkZXJcbiAgaXNTZWxlY3RlZD86IGJvb2xlYW47XG4gIC8vIHdoZXRoZXIgdXNlciBoYXMgbG9nZ2VkIGluXG4gIGlzQ29ubmVjdGVkPzogYm9vbGVhbjtcbiAgaXNSZWFkeT86IGJvb2xlYW47XG59XG5cbmNvbnN0IENsb3VkVGlsZTogUmVhY3QuRkM8Q2xvdWRUaWxlUHJvcHM+ID0gKHtcbiAgLy8gYWN0aW9uIHdoZW4gY2xpY2sgb24gdGhlIHRpbGVcbiAgb25TZWxlY3QsXG4gIC8vIGRlZmF1bHQgdG8gbG9naW5cbiAgb25Db25uZWN0ID0gbnVsbCxcbiAgLy8gZGVmYXVsdCB0byBsb2dvdXRcbiAgb25Mb2dvdXQgPSBudWxsLFxuICAvLyBhY3Rpb24gbmFtZVxuICBhY3Rpb25OYW1lID0gbnVsbCxcbiAgLy8gY2xvdWQgcHJvdmlkZXIgY2xhc3NcbiAgY2xvdWRQcm92aWRlcixcbiAgLy8gZnVuY3Rpb24gdG8gdGFrZSBhZnRlciBsb2dpbiBvciBsb2dvdXRcbiAgb25TZXRDbG91ZFByb3ZpZGVyLFxuICAvLyB3aGV0aGVyIHByb3ZpZGVyIGlzIHNlbGVjdGVkIGFzIGN1cnJlbnRQcm92aWRlclxuICBpc1NlbGVjdGVkLFxuICAvLyB3aGV0aGVyIHVzZXIgaGFzIGxvZ2dlZCBpblxuICBpc0Nvbm5lY3RlZCxcblxuICBpc1JlYWR5ID0gdHJ1ZVxufSkgPT4ge1xuICBjb25zdCB1c2VyTmFtZSA9XG4gICAgdHlwZW9mIGNsb3VkUHJvdmlkZXIuZ2V0VXNlck5hbWUgPT09ICdmdW5jdGlvbicgPyBjbG91ZFByb3ZpZGVyLmdldFVzZXJOYW1lKCkgOiBudWxsO1xuXG4gIGNvbnN0IG9uQ2xpY2tDb25uZWN0ID1cbiAgICB0eXBlb2Ygb25Db25uZWN0ID09PSAnZnVuY3Rpb24nXG4gICAgICA/IG9uQ29ubmVjdFxuICAgICAgOiAoKSA9PiBjbG91ZFByb3ZpZGVyLmxvZ2luKCgpID0+IG9uU2V0Q2xvdWRQcm92aWRlcihjbG91ZFByb3ZpZGVyLm5hbWUpKTtcblxuICBjb25zdCBvbkNsaWNrTG9nb3V0ID1cbiAgICB0eXBlb2Ygb25Mb2dvdXQgPT09ICdmdW5jdGlvbidcbiAgICAgID8gb25Mb2dvdXRcbiAgICAgIDogKCkgPT4gY2xvdWRQcm92aWRlci5sb2dvdXQoKCkgPT4gKGlzU2VsZWN0ZWQgPyBvblNldENsb3VkUHJvdmlkZXIobnVsbCkgOiBudWxsKSk7XG5cbiAgcmV0dXJuIChcbiAgICA8U3R5bGVkQm94PlxuICAgICAgPFN0eWxlZFRpbGVXcmFwcGVyIG9uQ2xpY2s9e2lzQ29ubmVjdGVkID8gb25TZWxlY3QgOiBvbkNsaWNrQ29ubmVjdH0gc2VsZWN0ZWQ9e2lzU2VsZWN0ZWR9PlxuICAgICAgICA8U3R5bGVkQ2xvdWROYW1lPntjbG91ZFByb3ZpZGVyLmRpc3BsYXlOYW1lIHx8IGNsb3VkUHJvdmlkZXIubmFtZX08L1N0eWxlZENsb3VkTmFtZT5cbiAgICAgICAge2Nsb3VkUHJvdmlkZXIuaWNvbiA/IDxjbG91ZFByb3ZpZGVyLmljb24gaGVpZ2h0PVwiNjRweFwiIC8+IDogbnVsbH1cbiAgICAgICAgPEFjdGlvbkJ1dHRvbiBpc0Nvbm5lY3RlZD17aXNDb25uZWN0ZWR9IGFjdGlvbk5hbWU9e2FjdGlvbk5hbWV9IGlzUmVhZHk9e2lzUmVhZHl9IC8+XG4gICAgICAgIHt1c2VyTmFtZSAmJiA8U3R5bGVkVXNlck5hbWU+e3VzZXJOYW1lfTwvU3R5bGVkVXNlck5hbWU+fVxuICAgICAgICB7aXNTZWxlY3RlZCAmJiA8Q2hlY2tNYXJrIC8+fVxuICAgICAgPC9TdHlsZWRUaWxlV3JhcHBlcj5cbiAgICAgIHtpc0Nvbm5lY3RlZCA/IChcbiAgICAgICAgPExvZ291dEJ1dHRvbiBvbkNsaWNrPXtvbkNsaWNrTG9nb3V0fSAvPlxuICAgICAgKSA6IChcbiAgICAgICAgPExvZ2luQnV0dG9uIG9uQ2xpY2s9e29uQ2xpY2tDb25uZWN0fSAvPlxuICAgICAgKX1cbiAgICA8L1N0eWxlZEJveD5cbiAgKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IENsb3VkVGlsZTtcbiJdfQ==