(function webpackUniversalModuleDefinition(root, factory) {
  if (typeof exports === 'object' && typeof module === 'object')
    module.exports = factory();
  else if (typeof define === 'function' && define.amd) define([], factory);
        else if (typeof exports === 'object') exports['deck'] = factory();
  else root['deck'] = factory();})(globalThis, function () {
"use strict";var __exports__=(()=>{var ly=Object.create;var Un=Object.defineProperty;var dy=Object.getOwnPropertyDescriptor;var hy=Object.getOwnPropertyNames;var my=Object.getPrototypeOf,py=Object.prototype.hasOwnProperty;var le=(t,r)=>()=>(r||t((r={exports:{}}).exports,r),r.exports),mt=(t,r)=>{for(var e in r)Un(t,e,{get:r[e],enumerable:!0})},kn=(t,r,e,n)=>{if(r&&typeof r=="object"||typeof r=="function")for(let a of hy(r))!py.call(t,a)&&a!==e&&Un(t,a,{get:()=>r[a],enumerable:!(n=dy(r,a))||n.enumerable});return t},Ot=(t,r,e)=>(kn(t,r,"default"),e&&kn(e,r,"default")),m=(t,r,e)=>(e=t!=null?ly(my(t)):{},kn(r||!t||!t.__esModule?Un(e,"default",{value:t,enumerable:!0}):e,t)),vy=t=>kn(Un({},"__esModule",{value:!0}),t);var mr=le((Gx,tf)=>{tf.exports=globalThis.deck});var Y=le((Ux,nf)=>{function gy(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}nf.exports=gy});var Q=le((Nx,of)=>{function af(t,r){for(var e=0;e<r.length;e++){var n=r[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function yy(t,r,e){return r&&af(t.prototype,r),e&&af(t,e),t}of.exports=yy});var nt=le((Hx,sf)=>{function Ay(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}sf.exports=Ay});var ke=le((jx,bi)=>{function _i(t){return bi.exports=_i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},_i(t)}bi.exports=_i});var ff=le((Vx,uf)=>{var _y=ke();function by(t,r){for(;!Object.prototype.hasOwnProperty.call(t,r)&&(t=_y(t),t!==null););return t}uf.exports=by});var wt=le((Jx,Hn)=>{var Ey=ff();function Nn(t,r,e){return typeof Reflect<"u"&&Reflect.get?Hn.exports=Nn=Reflect.get:Hn.exports=Nn=function(a,i,o){var s=Ey(a,i);if(s){var u=Object.getOwnPropertyDescriptor(s,i);return u.get?u.get.call(o):u.value}},Nn(t,r,e||t)}Hn.exports=Nn});var xi=le((Xx,Bi)=>{function Ei(t,r){return Bi.exports=Ei=Object.setPrototypeOf||function(n,a){return n.__proto__=a,n},Ei(t,r)}Bi.exports=Ei});var He=le((zx,cf)=>{var By=xi();function xy(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),r&&By(t,r)}cf.exports=xy});var Ie=le((Kx,Vn)=>{function jn(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Vn.exports=jn=function(e){return typeof e}:Vn.exports=jn=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jn(t)}Vn.exports=jn});var je=le((Wx,lf)=>{var Ty=Ie(),Cy=nt();function Sy(t,r){return r&&(Ty(r)==="object"||typeof r=="function")?r:Cy(t)}lf.exports=Sy});var ae=le((Yx,df)=>{function My(t,r,e){return r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e,t}df.exports=My});var Ti=le((Qx,hf)=>{hf.exports=globalThis.luma});var pf=le(($x,mf)=>{function Ry(t){if(Array.isArray(t)){for(var r=0,e=new Array(t.length);r<t.length;r++)e[r]=t[r];return e}}mf.exports=Ry});var gf=le((qx,vf)=>{function Iy(t){if(Symbol.iterator in Object(t)||Object.prototype.toString.call(t)==="[object Arguments]")return Array.from(t)}vf.exports=Iy});var Af=le((Zx,yf)=>{function Oy(){throw new TypeError("Invalid attempt to spread non-iterable instance")}yf.exports=Oy});var Jt=le((eT,_f)=>{var wy=pf(),Fy=gf(),Ly=Af();function Dy(t){return wy(t)||Fy(t)||Ly()}_f.exports=Dy});var Yf=le((iC,Wf)=>{function AA(t){if(Array.isArray(t))return t}Wf.exports=AA});var $f=le((oC,Qf)=>{function _A(t,r){if(Symbol.iterator in Object(t)||Object.prototype.toString.call(t)==="[object Arguments]"){var e=[],n=!0,a=!1,i=void 0;try{for(var o=t[Symbol.iterator](),s;!(n=(s=o.next()).done)&&(e.push(s.value),!(r&&e.length===r));n=!0);}catch(u){a=!0,i=u}finally{try{!n&&o.return!=null&&o.return()}finally{if(a)throw i}}return e}}Qf.exports=_A});var Zf=le((sC,qf)=>{function bA(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}qf.exports=bA});var Qe=le((uC,ec)=>{var EA=Yf(),BA=$f(),xA=Zf();function TA(t,r){return EA(t)||BA(t,r)||xA()}ec.exports=TA});var yc=le((xS,ia)=>{var PA=xi();function GA(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function aa(t,r,e){return GA()?ia.exports=aa=Reflect.construct:ia.exports=aa=function(a,i,o){var s=[null];s.push.apply(s,i);var u=Function.bind.apply(a,s),f=new u;return o&&PA(f,o.prototype),f},aa.apply(null,arguments)}ia.exports=aa});var Ee=le((e2,Yc)=>{function Wc(t,r,e,n,a,i,o){try{var s=t[i](o),u=s.value}catch(f){e(f);return}s.done?r(u):Promise.resolve(u).then(n,a)}function ZA(t){return function(){var r=this,e=arguments;return new Promise(function(n,a){var i=t.apply(r,e);function o(u){Wc(i,n,a,o,s,"next",u)}function s(u){Wc(i,n,a,o,s,"throw",u)}o(void 0)})}}Yc.exports=ZA});var $c=le((t2,ji)=>{var Qc=function(t){"use strict";var r=Object.prototype,e=r.hasOwnProperty,n,a=typeof Symbol=="function"?Symbol:{},i=a.iterator||"@@iterator",o=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function u(E,b,C,U){var O=b&&b.prototype instanceof g?b:g,oe=Object.create(O.prototype),ie=new F(U||[]);return oe._invoke=N(E,C,ie),oe}t.wrap=u;function f(E,b,C){try{return{type:"normal",arg:E.call(b,C)}}catch(U){return{type:"throw",arg:U}}}var c="suspendedStart",l="suspendedYield",d="executing",h="completed",v={};function g(){}function y(){}function A(){}var _={};_[i]=function(){return this};var T=Object.getPrototypeOf,B=T&&T(T(V([])));B&&B!==r&&e.call(B,i)&&(_=B);var x=A.prototype=g.prototype=Object.create(_);y.prototype=x.constructor=A,A.constructor=y,A[s]=y.displayName="GeneratorFunction";function R(E){["next","throw","return"].forEach(function(b){E[b]=function(C){return this._invoke(b,C)}})}t.isGeneratorFunction=function(E){var b=typeof E=="function"&&E.constructor;return b?b===y||(b.displayName||b.name)==="GeneratorFunction":!1},t.mark=function(E){return Object.setPrototypeOf?Object.setPrototypeOf(E,A):(E.__proto__=A,s in E||(E[s]="GeneratorFunction")),E.prototype=Object.create(x),E},t.awrap=function(E){return{__await:E}};function L(E){function b(O,oe,ie,se){var Te=f(E[O],E,oe);if(Te.type==="throw")se(Te.arg);else{var xe=Te.arg,rt=xe.value;return rt&&typeof rt=="object"&&e.call(rt,"__await")?Promise.resolve(rt.__await).then(function(Ke){b("next",Ke,ie,se)},function(Ke){b("throw",Ke,ie,se)}):Promise.resolve(rt).then(function(Ke){xe.value=Ke,ie(xe)},function(Ke){return b("throw",Ke,ie,se)})}}var C;function U(O,oe){function ie(){return new Promise(function(se,Te){b(O,oe,se,Te)})}return C=C?C.then(ie,ie):ie()}this._invoke=U}R(L.prototype),L.prototype[o]=function(){return this},t.AsyncIterator=L,t.async=function(E,b,C,U){var O=new L(u(E,b,C,U));return t.isGeneratorFunction(b)?O:O.next().then(function(oe){return oe.done?oe.value:O.next()})};function N(E,b,C){var U=c;return function(oe,ie){if(U===d)throw new Error("Generator is already running");if(U===h){if(oe==="throw")throw ie;return k()}for(C.method=oe,C.arg=ie;;){var se=C.delegate;if(se){var Te=P(se,C);if(Te){if(Te===v)continue;return Te}}if(C.method==="next")C.sent=C._sent=C.arg;else if(C.method==="throw"){if(U===c)throw U=h,C.arg;C.dispatchException(C.arg)}else C.method==="return"&&C.abrupt("return",C.arg);U=d;var xe=f(E,b,C);if(xe.type==="normal"){if(U=C.done?h:l,xe.arg===v)continue;return{value:xe.arg,done:C.done}}else xe.type==="throw"&&(U=h,C.method="throw",C.arg=xe.arg)}}}function P(E,b){var C=E.iterator[b.method];if(C===n){if(b.delegate=null,b.method==="throw"){if(E.iterator.return&&(b.method="return",b.arg=n,P(E,b),b.method==="throw"))return v;b.method="throw",b.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var U=f(C,E.iterator,b.arg);if(U.type==="throw")return b.method="throw",b.arg=U.arg,b.delegate=null,v;var O=U.arg;if(!O)return b.method="throw",b.arg=new TypeError("iterator result is not an object"),b.delegate=null,v;if(O.done)b[E.resultName]=O.value,b.next=E.nextLoc,b.method!=="return"&&(b.method="next",b.arg=n);else return O;return b.delegate=null,v}R(x),x[s]="Generator",x[i]=function(){return this},x.toString=function(){return"[object Generator]"};function G(E){var b={tryLoc:E[0]};1 in E&&(b.catchLoc=E[1]),2 in E&&(b.finallyLoc=E[2],b.afterLoc=E[3]),this.tryEntries.push(b)}function H(E){var b=E.completion||{};b.type="normal",delete b.arg,E.completion=b}function F(E){this.tryEntries=[{tryLoc:"root"}],E.forEach(G,this),this.reset(!0)}t.keys=function(E){var b=[];for(var C in E)b.push(C);return b.reverse(),function U(){for(;b.length;){var O=b.pop();if(O in E)return U.value=O,U.done=!1,U}return U.done=!0,U}};function V(E){if(E){var b=E[i];if(b)return b.call(E);if(typeof E.next=="function")return E;if(!isNaN(E.length)){var C=-1,U=function O(){for(;++C<E.length;)if(e.call(E,C))return O.value=E[C],O.done=!1,O;return O.value=n,O.done=!0,O};return U.next=U}}return{next:k}}t.values=V;function k(){return{value:n,done:!0}}return F.prototype={constructor:F,reset:function(E){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(H),!E)for(var b in this)b.charAt(0)==="t"&&e.call(this,b)&&!isNaN(+b.slice(1))&&(this[b]=n)},stop:function(){this.done=!0;var E=this.tryEntries[0],b=E.completion;if(b.type==="throw")throw b.arg;return this.rval},dispatchException:function(E){if(this.done)throw E;var b=this;function C(Te,xe){return oe.type="throw",oe.arg=E,b.next=Te,xe&&(b.method="next",b.arg=n),!!xe}for(var U=this.tryEntries.length-1;U>=0;--U){var O=this.tryEntries[U],oe=O.completion;if(O.tryLoc==="root")return C("end");if(O.tryLoc<=this.prev){var ie=e.call(O,"catchLoc"),se=e.call(O,"finallyLoc");if(ie&&se){if(this.prev<O.catchLoc)return C(O.catchLoc,!0);if(this.prev<O.finallyLoc)return C(O.finallyLoc)}else if(ie){if(this.prev<O.catchLoc)return C(O.catchLoc,!0)}else if(se){if(this.prev<O.finallyLoc)return C(O.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(E,b){for(var C=this.tryEntries.length-1;C>=0;--C){var U=this.tryEntries[C];if(U.tryLoc<=this.prev&&e.call(U,"finallyLoc")&&this.prev<U.finallyLoc){var O=U;break}}O&&(E==="break"||E==="continue")&&O.tryLoc<=b&&b<=O.finallyLoc&&(O=null);var oe=O?O.completion:{};return oe.type=E,oe.arg=b,O?(this.method="next",this.next=O.finallyLoc,v):this.complete(oe)},complete:function(E,b){if(E.type==="throw")throw E.arg;return E.type==="break"||E.type==="continue"?this.next=E.arg:E.type==="return"?(this.rval=this.arg=E.arg,this.method="return",this.next="end"):E.type==="normal"&&b&&(this.next=b),v},finish:function(E){for(var b=this.tryEntries.length-1;b>=0;--b){var C=this.tryEntries[b];if(C.finallyLoc===E)return this.complete(C.completion,C.afterLoc),H(C),v}},catch:function(E){for(var b=this.tryEntries.length-1;b>=0;--b){var C=this.tryEntries[b];if(C.tryLoc===E){var U=C.completion;if(U.type==="throw"){var O=U.arg;H(C)}return O}}throw new Error("illegal catch attempt")},delegateYield:function(E,b,C){return this.delegate={iterator:V(E),resultName:b,nextLoc:C},this.method==="next"&&(this.arg=n),v}},t}(typeof ji=="object"?ji.exports:{});try{regeneratorRuntime=Qc}catch{Function("r","regeneratorRuntime = r")(Qc)}});var Be=le((r2,qc)=>{qc.exports=$c()});var tp=le(()=>{});var Gn={};mt(Gn,{ScenegraphLayer:()=>Ai,SimpleMeshLayer:()=>Ua});var pt={},rf=m(mr());Ot(pt,m(mr()));if(!rf.Layer)throw new Error("@deck.gl/core is not found");Ot(Gn,pt);var ah=m(Y()),ih=m(Q()),oh=m(nt()),an=m(wt()),sh=m(He()),uh=m(je()),tr=m(ke()),on=m(ae()),_t=m(mr()),At=m(Ti());var hc=m(Y()),mc=m(Q());var Yn=m(Ie()),Nr=m(Jt()),Df=m(ae()),Pf=m(Y()),Gf=m(Q());function w(t,r,e){return r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e,t}var bf=m(Ie());var Jn=m(Ie());function Ur(t){if(typeof window<"u"&&(0,Jn.default)(window.process)==="object"&&window.process.type==="renderer"||typeof process<"u"&&(0,Jn.default)(process.versions)==="object"&&Boolean(process.versions.electron))return!0;var r=(typeof navigator>"u"?"undefined":(0,Jn.default)(navigator))==="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent,e=t||r;return!!(e&&e.indexOf("Electron")>=0)}function Oe(){var t=(typeof process>"u"?"undefined":(0,bf.default)(process))==="object"&&String(process)==="[object process]"&&!process.browser;return!t||Ur()}var Ef=m(Ie()),Ft={self:typeof self<"u"&&self,window:typeof window<"u"&&window,global:typeof global<"u"&&global,document:typeof document<"u"&&document,process:(typeof process>"u"?"undefined":(0,Ef.default)(process))==="object"&&process};var Py=Ft.self||Ft.window||Ft.global,pr=Ft.window||Ft.self||Ft.global,Gy=Ft.document||{},Xt=Ft.process||{};var Xn="8.9.11",sT=Oe();var Ci=globalThis;function zn(t){if(!t&&!Oe())return"Node";if(Ur(t))return"Electron";var r=typeof navigator<"u"?navigator:{},e=t||r.userAgent||"";if(e.indexOf("Edge")>-1)return"Edge";var n=e.indexOf("MSIE ")!==-1,a=e.indexOf("Trident/")!==-1;return n||a?"IE":Ci.chrome?"Chrome":Ci.safari?"Safari":Ci.mozInnerScreenX?"Firefox":"Unknown"}var Bf=m(Y()),xf=m(Q());function ky(t){try{var r=window[t],e="__storage_test__";return r.setItem(e,e),r.removeItem(e),r}catch{return null}}var Tf=function(){function t(r){(0,Bf.default)(this,t);var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"sessionStorage";w(this,"storage",void 0),w(this,"id",void 0),w(this,"config",{}),this.storage=ky(n),this.id=r,this.config={},Object.assign(this.config,e),this._loadConfiguration()}return(0,xf.default)(t,[{key:"getConfiguration",value:function(){return this.config}},{key:"setConfiguration",value:function(e){return this.config={},this.updateConfiguration(e)}},{key:"updateConfiguration",value:function(e){if(Object.assign(this.config,e),this.storage){var n=JSON.stringify(this.config);this.storage.setItem(this.id,n)}return this}},{key:"_loadConfiguration",value:function(){var e={};if(this.storage){var n=this.storage.getItem(this.id);e=n?JSON.parse(n):{}}return Object.assign(this.config,e),this}}]),t}();function Cf(t){var r;return t<10?r="".concat(t.toFixed(2),"ms"):t<100?r="".concat(t.toFixed(1),"ms"):t<1e3?r="".concat(t.toFixed(0),"ms"):r="".concat((t/1e3).toFixed(2),"s"),r}function Sf(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:8,e=Math.max(r-t.length,0);return"".concat(" ".repeat(e)).concat(t)}function Kn(t,r,e){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:600,a=t.src.replace(/\(/g,"%28").replace(/\)/g,"%29");t.width>n&&(e=Math.min(e,n/t.width));var i=t.width*e,o=t.height*e,s=["font-size:1px;","padding:".concat(Math.floor(o/2),"px ").concat(Math.floor(i/2),"px;"),"line-height:".concat(o,"px;"),"background:url(".concat(a,");"),"background-size:".concat(i,"px ").concat(o,"px;"),"color:transparent;"].join("");return["".concat(r," %c+"),s]}var Wn;(function(t){t[t.BLACK=30]="BLACK",t[t.RED=31]="RED",t[t.GREEN=32]="GREEN",t[t.YELLOW=33]="YELLOW",t[t.BLUE=34]="BLUE",t[t.MAGENTA=35]="MAGENTA",t[t.CYAN=36]="CYAN",t[t.WHITE=37]="WHITE",t[t.BRIGHT_BLACK=90]="BRIGHT_BLACK",t[t.BRIGHT_RED=91]="BRIGHT_RED",t[t.BRIGHT_GREEN=92]="BRIGHT_GREEN",t[t.BRIGHT_YELLOW=93]="BRIGHT_YELLOW",t[t.BRIGHT_BLUE=94]="BRIGHT_BLUE",t[t.BRIGHT_MAGENTA=95]="BRIGHT_MAGENTA",t[t.BRIGHT_CYAN=96]="BRIGHT_CYAN",t[t.BRIGHT_WHITE=97]="BRIGHT_WHITE"})(Wn||(Wn={}));function Mf(t){return typeof t=="string"?Wn[t.toUpperCase()]||Wn.WHITE:t}function Rf(t,r,e){return!Oe&&typeof t=="string"&&(r&&(r=Mf(r),t="\x1B[".concat(r,"m").concat(t,"\x1B[39m")),e&&(r=Mf(e),t="\x1B[".concat(e+10,"m").concat(t,"\x1B[49m"))),t}function Uy(t,r){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=Ny(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var n=0,a=function(){};return{s:a,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(f){throw f},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,o=!1,s;return{s:function(){e=e.call(t)},n:function(){var f=e.next();return i=f.done,f},e:function(f){o=!0,s=f},f:function(){try{!i&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function Ny(t,r){if(t){if(typeof t=="string")return If(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return If(t,r)}}function If(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function Of(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:["constructor"],e=Object.getPrototypeOf(t),n=Object.getOwnPropertyNames(e),a=Uy(n),i;try{var o=function(){var u=i.value;typeof t[u]=="function"&&(r.find(function(f){return u===f})||(t[u]=t[u].bind(t)))};for(a.s();!(i=a.n()).done;)o()}catch(s){a.e(s)}finally{a.f()}}function vr(t,r){if(!t)throw new Error(r||"Assertion failed")}function zt(){var t;if(Oe&&"performance"in pr){var r,e;t=pr===null||pr===void 0||(r=pr.performance)===null||r===void 0||(e=r.now)===null||e===void 0?void 0:e.call(r)}else if("hrtime"in Xt){var n,a=Xt===null||Xt===void 0||(n=Xt.hrtime)===null||n===void 0?void 0:n.call(Xt);t=a[0]*1e3+a[1]/1e6}else t=Date.now();return t}var gr={debug:Oe&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},Hy={enabled:!0,level:0};function at(){}var wf={},Ff={once:!0},yr=function(){function t(){(0,Pf.default)(this,t);var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{id:""},e=r.id;w(this,"id",void 0),w(this,"VERSION",Xn),w(this,"_startTs",zt()),w(this,"_deltaTs",zt()),w(this,"_storage",void 0),w(this,"userData",{}),w(this,"LOG_THROTTLE_TIMEOUT",0),this.id=e,this._storage=new Tf("__probe-".concat(this.id,"__"),Hy),this.userData={},this.timeStamp("".concat(this.id," started")),Of(this),Object.seal(this)}return(0,Gf.default)(t,[{key:"level",get:function(){return this.getLevel()},set:function(e){this.setLevel(e)}},{key:"isEnabled",value:function(){return this._storage.config.enabled}},{key:"getLevel",value:function(){return this._storage.config.level}},{key:"getTotal",value:function(){return Number((zt()-this._startTs).toPrecision(10))}},{key:"getDelta",value:function(){return Number((zt()-this._deltaTs).toPrecision(10))}},{key:"priority",get:function(){return this.level},set:function(e){this.level=e}},{key:"getPriority",value:function(){return this.level}},{key:"enable",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return this._storage.updateConfiguration({enabled:e}),this}},{key:"setLevel",value:function(e){return this._storage.updateConfiguration({level:e}),this}},{key:"get",value:function(e){return this._storage.config[e]}},{key:"set",value:function(e,n){this._storage.updateConfiguration((0,Df.default)({},e,n))}},{key:"settings",value:function(){console.table?console.table(this._storage.config):console.log(this._storage.config)}},{key:"assert",value:function(e,n){vr(e,n)}},{key:"warn",value:function(e){return this._getLogFunction(0,e,gr.warn,arguments,Ff)}},{key:"error",value:function(e){return this._getLogFunction(0,e,gr.error,arguments)}},{key:"deprecated",value:function(e,n){return this.warn("`".concat(e,"` is deprecated and will be removed in a later version. Use `").concat(n,"` instead"))}},{key:"removed",value:function(e,n){return this.error("`".concat(e,"` has been removed. Use `").concat(n,"` instead"))}},{key:"probe",value:function(e,n){return this._getLogFunction(e,n,gr.log,arguments,{time:!0,once:!0})}},{key:"log",value:function(e,n){return this._getLogFunction(e,n,gr.debug,arguments)}},{key:"info",value:function(e,n){return this._getLogFunction(e,n,console.info,arguments)}},{key:"once",value:function(e,n){for(var a=arguments.length,i=new Array(a>2?a-2:0),o=2;o<a;o++)i[o-2]=arguments[o];return this._getLogFunction(e,n,gr.debug||gr.info,arguments,Ff)}},{key:"table",value:function(e,n,a){return n?this._getLogFunction(e,n,console.table||at,a&&[a],{tag:Xy(n)}):at}},{key:"image",value:function(e){var n=e.logLevel,a=e.priority,i=e.image,o=e.message,s=o===void 0?"":o,u=e.scale,f=u===void 0?1:u;return this._shouldLog(n||a)?Oe?Jy({image:i,message:s,scale:f}):Vy({image:i,message:s,scale:f}):at}},{key:"time",value:function(e,n){return this._getLogFunction(e,n,console.time?console.time:console.info)}},{key:"timeEnd",value:function(e,n){return this._getLogFunction(e,n,console.timeEnd?console.timeEnd:console.info)}},{key:"timeStamp",value:function(e,n){return this._getLogFunction(e,n,console.timeStamp||at)}},{key:"group",value:function(e,n){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{collapsed:!1},i=Lf({logLevel:e,message:n,opts:a}),o=a.collapsed;return i.method=(o?console.groupCollapsed:console.group)||console.info,this._getLogFunction(i)}},{key:"groupCollapsed",value:function(e,n){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.group(e,n,Object.assign({},a,{collapsed:!0}))}},{key:"groupEnd",value:function(e){return this._getLogFunction(e,"",console.groupEnd||at)}},{key:"withGroup",value:function(e,n,a){this.group(e,n)();try{a()}finally{this.groupEnd(e)()}}},{key:"trace",value:function(){console.trace&&console.trace()}},{key:"_shouldLog",value:function(e){return this.isEnabled()&&this.getLevel()>=kf(e)}},{key:"_getLogFunction",value:function(e,n,a,i,o){if(this._shouldLog(e)){var s;o=Lf({logLevel:e,message:n,args:i,opts:o}),a=a||o.method,vr(a),o.total=this.getTotal(),o.delta=this.getDelta(),this._deltaTs=zt();var u=o.tag||o.message;if(o.once)if(!wf[u])wf[u]=zt();else return at;return n=jy(this.id,o.message,o),(s=a).bind.apply(s,[console,n].concat((0,Nr.default)(o.args)))}return at}}]),t}();w(yr,"VERSION",Xn);function kf(t){if(!t)return 0;var r;switch((0,Yn.default)(t)){case"number":r=t;break;case"object":r=t.logLevel||t.priority||0;break;default:return 0}return vr(Number.isFinite(r)&&r>=0),r}function Lf(t){var r=t.logLevel,e=t.message;t.logLevel=kf(r);for(var n=t.args?Array.from(t.args):[];n.length&&n.shift()!==e;);switch((0,Yn.default)(r)){case"string":case"function":e!==void 0&&n.unshift(e),t.message=r;break;case"object":Object.assign(t,r);break;default:}typeof t.message=="function"&&(t.message=t.message());var a=(0,Yn.default)(t.message);return vr(a==="string"||a==="object"),Object.assign(t,{args:n},t.opts)}function jy(t,r,e){if(typeof r=="string"){var n=e.time?Sf(Cf(e.total)):"";r=e.time?"".concat(t,": ").concat(n,"  ").concat(r):"".concat(t,": ").concat(r),r=Rf(r,e.color,e.background)}return r}function Vy(t){var r=t.image,e=t.message,n=e===void 0?"":e,a=t.scale,i=a===void 0?1:a,o=null;try{o=module.require("asciify-image")}catch{}return o?function(){return o(r,{fit:"box",width:"".concat(Math.round(80*i),"%")}).then(function(s){return console.log(s)})}:at}function Jy(t){var r=t.image,e=t.message,n=e===void 0?"":e,a=t.scale,i=a===void 0?1:a;if(typeof r=="string"){var o=new Image;return o.onload=function(){var c,l=Kn(o,n,i);(c=console).log.apply(c,(0,Nr.default)(l))},o.src=r,at}var s=r.nodeName||"";if(s.toLowerCase()==="img"){var u;return(u=console).log.apply(u,(0,Nr.default)(Kn(r,n,i))),at}if(s.toLowerCase()==="canvas"){var f=new Image;return f.onload=function(){var c;return(c=console).log.apply(c,(0,Nr.default)(Kn(f,n,i)))},f.src=r.toDataURL(),at}return at}function Xy(t){for(var r in t)for(var e in t[r])return e||"untitled";return"empty"}var NT=new yr({id:"@probe.gl/log"});var I=new yr({id:"luma.gl"});function Ce(t,r){if(!t)throw new Error(r||"luma.gl: assertion failed.")}var zy="Invalid WebGLRenderingContext";var Ky="Requires WebGL2";function Ar(t){return typeof WebGLRenderingContext<"u"&&t instanceof WebGLRenderingContext||typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext?!0:Boolean(t&&Number.isFinite(t._version))}function j(t){return typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext?!0:Boolean(t&&t._version===2)}function Si(t){return j(t)?t:null}function Kt(t){return Ce(Ar(t),zy),t}function _e(t){return Ce(j(t),Ky),t}var Hr={};function Wy(t){globalThis.console&&globalThis.console.error&&globalThis.console.error(t)}function Yy(t){globalThis.console&&globalThis.console.log&&globalThis.console.log(t)}function Qy(t,r){Hr[t]=!0,r!==void 0&&Wy(r)}function $y(t){var r=t.getError;t.getError=function(){var n;do n=r.apply(t),n!==0&&(Hr[n]=!0);while(n!==0);for(n in Hr)if(Hr[n])return delete Hr[n],parseInt(n,10);return 0}}var jr=function t(r){var e=r.gl;this.ext=r,this.isAlive=!0,this.hasBeenBound=!1,this.elementArrayBuffer=null,this.attribs=new Array(r.maxVertexAttribs);for(var n=0;n<this.attribs.length;n++){var a=new t.VertexAttrib(e);this.attribs[n]=a}this.maxAttrib=0};jr.VertexAttrib=function(r){this.enabled=!1,this.buffer=null,this.size=4,this.type=5126,this.normalized=!1,this.stride=16,this.offset=0,this.cached="",this.recache()};jr.VertexAttrib.prototype.recache=function(){this.cached=[this.size,this.type,this.normalized,this.stride,this.offset].join(":")};var Wt=function(r){var e=this;this.gl=r,$y(r);var n=this.original={getParameter:r.getParameter,enableVertexAttribArray:r.enableVertexAttribArray,disableVertexAttribArray:r.disableVertexAttribArray,bindBuffer:r.bindBuffer,getVertexAttrib:r.getVertexAttrib,vertexAttribPointer:r.vertexAttribPointer};r.getParameter=function(i){return i===e.VERTEX_ARRAY_BINDING_OES?e.currentVertexArrayObject===e.defaultVertexArrayObject?null:e.currentVertexArrayObject:n.getParameter.apply(this,arguments)},r.enableVertexAttribArray=function(i){var o=e.currentVertexArrayObject;o.maxAttrib=Math.max(o.maxAttrib,i);var s=o.attribs[i];return s.enabled=!0,n.enableVertexAttribArray.apply(this,arguments)},r.disableVertexAttribArray=function(i){var o=e.currentVertexArrayObject;o.maxAttrib=Math.max(o.maxAttrib,i);var s=o.attribs[i];return s.enabled=!1,n.disableVertexAttribArray.apply(this,arguments)},r.bindBuffer=function(i,o){switch(i){case 34962:e.currentArrayBuffer=o;break;case 34963:e.currentVertexArrayObject.elementArrayBuffer=o;break;default:}return n.bindBuffer.apply(this,arguments)},r.getVertexAttrib=function(i,o){var s=e.currentVertexArrayObject,u=s.attribs[i];switch(o){case 34975:return u.buffer;case 34338:return u.enabled;case 34339:return u.size;case 34340:return u.stride;case 34341:return u.type;case 34922:return u.normalized;default:return n.getVertexAttrib.apply(this,arguments)}},r.vertexAttribPointer=function(i,o,s,u,f,c){var l=e.currentVertexArrayObject;l.maxAttrib=Math.max(l.maxAttrib,i);var d=l.attribs[i];return d.buffer=e.currentArrayBuffer,d.size=o,d.type=s,d.normalized=u,d.stride=f,d.offset=c,d.recache(),n.vertexAttribPointer.apply(this,arguments)},r.instrumentExtension&&r.instrumentExtension(this,"OES_vertex_array_object"),r.canvas&&r.canvas.addEventListener("webglcontextrestored",function(){Yy("OESVertexArrayObject emulation library context restored"),e.reset_()},!0),this.reset_()};Wt.prototype.VERTEX_ARRAY_BINDING_OES=34229;Wt.prototype.reset_=function(){var r=this.vertexArrayObjects!==void 0;if(r)for(var e=0;e<this.vertexArrayObjects.length;++e)this.vertexArrayObjects.isAlive=!1;var n=this.gl;this.maxVertexAttribs=n.getParameter(34921),this.defaultVertexArrayObject=new jr(this),this.currentVertexArrayObject=null,this.currentArrayBuffer=null,this.vertexArrayObjects=[this.defaultVertexArrayObject],this.bindVertexArrayOES(null)};Wt.prototype.createVertexArrayOES=function(){var r=new jr(this);return this.vertexArrayObjects.push(r),r};Wt.prototype.deleteVertexArrayOES=function(r){r.isAlive=!1,this.vertexArrayObjects.splice(this.vertexArrayObjects.indexOf(r),1),this.currentVertexArrayObject===r&&this.bindVertexArrayOES(null)};Wt.prototype.isVertexArrayOES=function(r){return!!(r&&r instanceof jr&&r.hasBeenBound&&r.ext===this)};Wt.prototype.bindVertexArrayOES=function(r){var e=this.gl;if(r&&!r.isAlive){Qy(1282,"bindVertexArrayOES: attempt to bind deleted arrayObject");return}var n=this.original,a=this.currentVertexArrayObject;this.currentVertexArrayObject=r||this.defaultVertexArrayObject,this.currentVertexArrayObject.hasBeenBound=!0;var i=this.currentVertexArrayObject;if(a!==i){(!a||i.elementArrayBuffer!==a.elementArrayBuffer)&&n.bindBuffer.call(e,34963,i.elementArrayBuffer);for(var o=this.currentArrayBuffer,s=Math.max(a?a.maxAttrib:0,i.maxAttrib),u=0;u<=s;u++){var f=i.attribs[u],c=a?a.attribs[u]:null;if((!a||f.enabled!==c.enabled)&&(f.enabled?n.enableVertexAttribArray.call(e,u):n.disableVertexAttribArray.call(e,u)),f.enabled){var l=!1;(!a||f.buffer!==c.buffer)&&(o!==f.buffer&&(n.bindBuffer.call(e,34962,f.buffer),o=f.buffer),l=!0),(l||f.cached!==c.cached)&&n.vertexAttribPointer.call(e,u,f.size,f.type,f.normalized,f.stride,f.offset)}}this.currentArrayBuffer!==o&&n.bindBuffer.call(e,34962,this.currentArrayBuffer)}};function Uf(t){if(typeof t.createVertexArray!="function"){var r=t.getSupportedExtensions;t.getSupportedExtensions=function(){var a=r.call(this)||[];return a.indexOf("OES_vertex_array_object")<0&&a.push("OES_vertex_array_object"),a};var e=t.getExtension;t.getExtension=function(a){var i=e.call(this,a);return i||(a!=="OES_vertex_array_object"?null:(t.__OESVertexArrayObject||(this.__OESVertexArrayObject=new Wt(this)),this.__OESVertexArrayObject))}}}var Vr=m(ae());var $=m(ae());var W,Nf="OES_element_index",Hf="WEBGL_draw_buffers",qy="EXT_disjoint_timer_query",Zy="EXT_disjoint_timer_query_webgl2",eA="EXT_texture_filter_anisotropic",jf="WEBGL_debug_renderer_info",tA=35723,rA=4352,nA=36795,aA=34047,iA=37445,oA=37446,de=function(r){return j(r)?void 0:0},sA=(W={},(0,$.default)(W,3074,function(r){return j(r)?void 0:36064}),(0,$.default)(W,tA,function(t){return j(t)?void 0:rA}),(0,$.default)(W,35977,de),(0,$.default)(W,32937,de),(0,$.default)(W,nA,function(t,r){var e=j(t)?t.getExtension(Zy):t.getExtension(qy);return e&&e.GPU_DISJOINT_EXT?r(e.GPU_DISJOINT_EXT):0}),(0,$.default)(W,iA,function(t,r){var e=t.getExtension(jf);return r(e&&e.UNMASKED_VENDOR_WEBGL||7936)}),(0,$.default)(W,oA,function(t,r){var e=t.getExtension(jf);return r(e&&e.UNMASKED_RENDERER_WEBGL||7937)}),(0,$.default)(W,aA,function(t,r){var e=t.luma.extensions[eA];return e?r(e.MAX_TEXTURE_MAX_ANISOTROPY_EXT):1}),(0,$.default)(W,32883,de),(0,$.default)(W,35071,de),(0,$.default)(W,37447,de),(0,$.default)(W,36063,function(r,e){if(!j(r)){var n=r.getExtension(Hf);return n?e(n.MAX_COLOR_ATTACHMENTS_WEBGL):0}}),(0,$.default)(W,35379,de),(0,$.default)(W,35374,de),(0,$.default)(W,35377,de),(0,$.default)(W,34852,function(r){if(!j(r)){var e=r.getExtension(Hf);return e?e.MAX_DRAW_BUFFERS_WEBGL:0}}),(0,$.default)(W,36203,function(r){return r.getExtension(Nf)?2147483647:65535}),(0,$.default)(W,33001,function(r){return r.getExtension(Nf)?16777216:65535}),(0,$.default)(W,33e3,function(r){return 16777216}),(0,$.default)(W,37157,de),(0,$.default)(W,35373,de),(0,$.default)(W,35657,de),(0,$.default)(W,36183,de),(0,$.default)(W,37137,de),(0,$.default)(W,34045,de),(0,$.default)(W,35978,de),(0,$.default)(W,35979,de),(0,$.default)(W,35968,de),(0,$.default)(W,35376,de),(0,$.default)(W,35375,de),(0,$.default)(W,35659,de),(0,$.default)(W,37154,de),(0,$.default)(W,35371,de),(0,$.default)(W,35658,de),(0,$.default)(W,35076,de),(0,$.default)(W,35077,de),(0,$.default)(W,35380,de),W);function Vf(t,r,e){var n=sA[e],a=typeof n=="function"?n(t,r,e):n,i=a!==void 0?a:r(e);return i}var _r,uA="OES_vertex_array_object",Jf="ANGLE_instanced_arrays",fA="WEBGL_draw_buffers",cA="EXT_disjoint_timer_query",lA="EXT_texture_filter_anisotropic",dA="VertexArray requires WebGL2 or OES_vertex_array_object extension";function hA(t,r){return{webgl2:j(t),ext:t.getExtension(r)}}var Mi=(_r={},(0,Vr.default)(_r,uA,{meta:{suffix:"OES"},createVertexArray:function(){Ce(!1,dA)},deleteVertexArray:function(){},bindVertexArray:function(){},isVertexArray:function(){return!1}}),(0,Vr.default)(_r,Jf,{meta:{suffix:"ANGLE"},vertexAttribDivisor:function(r,e){Ce(e===0,"WebGL instanced rendering not supported")},drawElementsInstanced:function(){},drawArraysInstanced:function(){}}),(0,Vr.default)(_r,fA,{meta:{suffix:"WEBGL"},drawBuffers:function(){Ce(!1)}}),(0,Vr.default)(_r,cA,{meta:{suffix:"EXT"},createQuery:function(){Ce(!1)},deleteQuery:function(){Ce(!1)},beginQuery:function(){Ce(!1)},endQuery:function(){},getQuery:function(r,e){return this.getQueryObject(r,e)},getQueryParameter:function(r,e){return this.getQueryObject(r,e)},getQueryObject:function(){}}),_r),Qn={readBuffer:function(r,e,n){j(r)&&e(n)},getVertexAttrib:function(r,e,n,a){var i=hA(r,Jf),o=i.webgl2,s=i.ext,u;switch(a){case 35069:u=o?void 0:!1;break;case 35070:u=!o&&!s?0:void 0;break;default:}return u!==void 0?u:e(n,a)},getProgramParameter:function(r,e,n,a){if(!j(r))switch(a){case 35967:return 35981;case 35971:return 0;case 35382:return 0;default:}return e(n,a)},getInternalformatParameter:function(r,e,n,a,i){if(!j(r))switch(i){case 32937:return new Int32Array([0]);default:}return r.getInternalformatParameter(n,a,i)},getTexParameter:function(r,e,n,a){switch(a){case 34046:var i=r.luma.extensions,o=i[lA];a=o&&o.TEXTURE_MAX_ANISOTROPY_EXT||34046;break;default:}return e(n,a)},getParameter:Vf,hint:function(r,e,n,a){return e(n,a)}};function zf(t,r){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=mA(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var n=0,a=function(){};return{s:a,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(f){throw f},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,o=!1,s;return{s:function(){e=e.call(t)},n:function(){var f=e.next();return i=f.done,f},e:function(f){o=!0,s=f},f:function(){try{!i&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function mA(t,r){if(t){if(typeof t=="string")return Xf(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return Xf(t,r)}}function Xf(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function Kf(t){t.luma=t.luma||{};var r=t.luma;return r.polyfilled||(Uf(t),pA(t),gA(t,Mi),vA(t,{target:r,target2:t}),r.polyfilled=!0),t}globalThis.polyfillContext=Kf;function pA(t){t.luma.extensions={};var r=t.getSupportedExtensions()||[],e=zf(r),n;try{for(e.s();!(n=e.n()).done;){var a=n.value;t.luma[a]=t.getExtension(a)}}catch(i){e.e(i)}finally{e.f()}}function vA(t,r){var e=r.target,n=r.target2;Object.keys(Qn).forEach(function(a){if(typeof Qn[a]=="function"){var i=t[a]?t[a].bind(t):function(){},o=Qn[a].bind(null,t,i);e[a]=o,n[a]=o}})}function gA(t,r){var e=zf(Object.getOwnPropertyNames(r)),n;try{for(e.s();!(n=e.n()).done;){var a=n.value;a!=="overrides"&&yA(t,{extension:a,target:t.luma,target2:t})}}catch(i){e.e(i)}finally{e.f()}}function yA(t,r){var e=r.extension,n=r.target,a=r.target2,i=Mi[e];Ce(i);for(var o=i.meta,s=o===void 0?{}:o,u=s.suffix,f=u===void 0?"":u,c=t.getExtension(e),l=function(){var g=h[d],y="".concat(g).concat(f),A=null;g==="meta"||typeof t[g]=="function"||(c&&typeof c[y]=="function"?A=function(){return c[y].apply(c,arguments)}:typeof i[g]=="function"&&(A=i[g].bind(n))),A&&(n[g]=A,a[g]=A)},d=0,h=Object.keys(i);d<h.length;d++)l()}var $n=m(Qe()),Ae=m(Jt()),p=m(ae());var D,S,it,qn=(D={},(0,p.default)(D,3042,!1),(0,p.default)(D,32773,new Float32Array([0,0,0,0])),(0,p.default)(D,32777,32774),(0,p.default)(D,34877,32774),(0,p.default)(D,32969,1),(0,p.default)(D,32968,0),(0,p.default)(D,32971,1),(0,p.default)(D,32970,0),(0,p.default)(D,3106,new Float32Array([0,0,0,0])),(0,p.default)(D,3107,[!0,!0,!0,!0]),(0,p.default)(D,2884,!1),(0,p.default)(D,2885,1029),(0,p.default)(D,2929,!1),(0,p.default)(D,2931,1),(0,p.default)(D,2932,513),(0,p.default)(D,2928,new Float32Array([0,1])),(0,p.default)(D,2930,!0),(0,p.default)(D,3024,!0),(0,p.default)(D,36006,null),(0,p.default)(D,2886,2305),(0,p.default)(D,33170,4352),(0,p.default)(D,2849,1),(0,p.default)(D,32823,!1),(0,p.default)(D,32824,0),(0,p.default)(D,10752,0),(0,p.default)(D,32938,1),(0,p.default)(D,32939,!1),(0,p.default)(D,3089,!1),(0,p.default)(D,3088,new Int32Array([0,0,1024,1024])),(0,p.default)(D,2960,!1),(0,p.default)(D,2961,0),(0,p.default)(D,2968,4294967295),(0,p.default)(D,36005,4294967295),(0,p.default)(D,2962,519),(0,p.default)(D,2967,0),(0,p.default)(D,2963,4294967295),(0,p.default)(D,34816,519),(0,p.default)(D,36003,0),(0,p.default)(D,36004,4294967295),(0,p.default)(D,2964,7680),(0,p.default)(D,2965,7680),(0,p.default)(D,2966,7680),(0,p.default)(D,34817,7680),(0,p.default)(D,34818,7680),(0,p.default)(D,34819,7680),(0,p.default)(D,2978,[0,0,1024,1024]),(0,p.default)(D,3333,4),(0,p.default)(D,3317,4),(0,p.default)(D,37440,!1),(0,p.default)(D,37441,!1),(0,p.default)(D,37443,37444),(0,p.default)(D,35723,4352),(0,p.default)(D,36010,null),(0,p.default)(D,35977,!1),(0,p.default)(D,3330,0),(0,p.default)(D,3332,0),(0,p.default)(D,3331,0),(0,p.default)(D,3314,0),(0,p.default)(D,32878,0),(0,p.default)(D,3316,0),(0,p.default)(D,3315,0),(0,p.default)(D,32877,0),D),Lt=function(r,e,n){return e?r.enable(n):r.disable(n)},tc=function(r,e,n){return r.hint(n,e)},$e=function(r,e,n){return r.pixelStorei(n,e)},CA=function(r,e){var n=j(r)?36009:36160;return r.bindFramebuffer(n,e)},SA=function(r,e){return r.bindFramebuffer(36008,e)};function Jr(t){return Array.isArray(t)||ArrayBuffer.isView(t)}var rc=(S={},(0,p.default)(S,3042,Lt),(0,p.default)(S,32773,function(r,e){return r.blendColor.apply(r,(0,Ae.default)(e))}),(0,p.default)(S,32777,"blendEquation"),(0,p.default)(S,34877,"blendEquation"),(0,p.default)(S,32969,"blendFunc"),(0,p.default)(S,32968,"blendFunc"),(0,p.default)(S,32971,"blendFunc"),(0,p.default)(S,32970,"blendFunc"),(0,p.default)(S,3106,function(r,e){return r.clearColor.apply(r,(0,Ae.default)(e))}),(0,p.default)(S,3107,function(r,e){return r.colorMask.apply(r,(0,Ae.default)(e))}),(0,p.default)(S,2884,Lt),(0,p.default)(S,2885,function(r,e){return r.cullFace(e)}),(0,p.default)(S,2929,Lt),(0,p.default)(S,2931,function(r,e){return r.clearDepth(e)}),(0,p.default)(S,2932,function(r,e){return r.depthFunc(e)}),(0,p.default)(S,2928,function(r,e){return r.depthRange.apply(r,(0,Ae.default)(e))}),(0,p.default)(S,2930,function(r,e){return r.depthMask(e)}),(0,p.default)(S,3024,Lt),(0,p.default)(S,35723,tc),(0,p.default)(S,36006,CA),(0,p.default)(S,2886,function(r,e){return r.frontFace(e)}),(0,p.default)(S,33170,tc),(0,p.default)(S,2849,function(r,e){return r.lineWidth(e)}),(0,p.default)(S,32823,Lt),(0,p.default)(S,32824,"polygonOffset"),(0,p.default)(S,10752,"polygonOffset"),(0,p.default)(S,35977,Lt),(0,p.default)(S,32938,"sampleCoverage"),(0,p.default)(S,32939,"sampleCoverage"),(0,p.default)(S,3089,Lt),(0,p.default)(S,3088,function(r,e){return r.scissor.apply(r,(0,Ae.default)(e))}),(0,p.default)(S,2960,Lt),(0,p.default)(S,2961,function(r,e){return r.clearStencil(e)}),(0,p.default)(S,2968,function(r,e){return r.stencilMaskSeparate(1028,e)}),(0,p.default)(S,36005,function(r,e){return r.stencilMaskSeparate(1029,e)}),(0,p.default)(S,2962,"stencilFuncFront"),(0,p.default)(S,2967,"stencilFuncFront"),(0,p.default)(S,2963,"stencilFuncFront"),(0,p.default)(S,34816,"stencilFuncBack"),(0,p.default)(S,36003,"stencilFuncBack"),(0,p.default)(S,36004,"stencilFuncBack"),(0,p.default)(S,2964,"stencilOpFront"),(0,p.default)(S,2965,"stencilOpFront"),(0,p.default)(S,2966,"stencilOpFront"),(0,p.default)(S,34817,"stencilOpBack"),(0,p.default)(S,34818,"stencilOpBack"),(0,p.default)(S,34819,"stencilOpBack"),(0,p.default)(S,2978,function(r,e){return r.viewport.apply(r,(0,Ae.default)(e))}),(0,p.default)(S,3333,$e),(0,p.default)(S,3317,$e),(0,p.default)(S,37440,$e),(0,p.default)(S,37441,$e),(0,p.default)(S,37443,$e),(0,p.default)(S,3330,$e),(0,p.default)(S,3332,$e),(0,p.default)(S,3331,$e),(0,p.default)(S,36010,SA),(0,p.default)(S,3314,$e),(0,p.default)(S,32878,$e),(0,p.default)(S,3316,$e),(0,p.default)(S,3315,$e),(0,p.default)(S,32877,$e),(0,p.default)(S,"framebuffer",function(r,e){var n=e&&"handle"in e?e.handle:e;return r.bindFramebuffer(36160,n)}),(0,p.default)(S,"blend",function(r,e){return e?r.enable(3042):r.disable(3042)}),(0,p.default)(S,"blendColor",function(r,e){return r.blendColor.apply(r,(0,Ae.default)(e))}),(0,p.default)(S,"blendEquation",function(r,e){e=Jr(e)?e:[e,e],r.blendEquationSeparate.apply(r,(0,Ae.default)(e))}),(0,p.default)(S,"blendFunc",function(r,e){e=Jr(e)&&e.length===2?[].concat((0,Ae.default)(e),(0,Ae.default)(e)):e,r.blendFuncSeparate.apply(r,(0,Ae.default)(e))}),(0,p.default)(S,"clearColor",function(r,e){return r.clearColor.apply(r,(0,Ae.default)(e))}),(0,p.default)(S,"clearDepth",function(r,e){return r.clearDepth(e)}),(0,p.default)(S,"clearStencil",function(r,e){return r.clearStencil(e)}),(0,p.default)(S,"colorMask",function(r,e){return r.colorMask.apply(r,(0,Ae.default)(e))}),(0,p.default)(S,"cull",function(r,e){return e?r.enable(2884):r.disable(2884)}),(0,p.default)(S,"cullFace",function(r,e){return r.cullFace(e)}),(0,p.default)(S,"depthTest",function(r,e){return e?r.enable(2929):r.disable(2929)}),(0,p.default)(S,"depthFunc",function(r,e){return r.depthFunc(e)}),(0,p.default)(S,"depthMask",function(r,e){return r.depthMask(e)}),(0,p.default)(S,"depthRange",function(r,e){return r.depthRange.apply(r,(0,Ae.default)(e))}),(0,p.default)(S,"dither",function(r,e){return e?r.enable(3024):r.disable(3024)}),(0,p.default)(S,"derivativeHint",function(r,e){r.hint(35723,e)}),(0,p.default)(S,"frontFace",function(r,e){return r.frontFace(e)}),(0,p.default)(S,"mipmapHint",function(r,e){return r.hint(33170,e)}),(0,p.default)(S,"lineWidth",function(r,e){return r.lineWidth(e)}),(0,p.default)(S,"polygonOffsetFill",function(r,e){return e?r.enable(32823):r.disable(32823)}),(0,p.default)(S,"polygonOffset",function(r,e){return r.polygonOffset.apply(r,(0,Ae.default)(e))}),(0,p.default)(S,"sampleCoverage",function(r,e){return r.sampleCoverage.apply(r,(0,Ae.default)(e))}),(0,p.default)(S,"scissorTest",function(r,e){return e?r.enable(3089):r.disable(3089)}),(0,p.default)(S,"scissor",function(r,e){return r.scissor.apply(r,(0,Ae.default)(e))}),(0,p.default)(S,"stencilTest",function(r,e){return e?r.enable(2960):r.disable(2960)}),(0,p.default)(S,"stencilMask",function(r,e){e=Jr(e)?e:[e,e];var n=e,a=(0,$n.default)(n,2),i=a[0],o=a[1];r.stencilMaskSeparate(1028,i),r.stencilMaskSeparate(1029,o)}),(0,p.default)(S,"stencilFunc",function(r,e){e=Jr(e)&&e.length===3?[].concat((0,Ae.default)(e),(0,Ae.default)(e)):e;var n=e,a=(0,$n.default)(n,6),i=a[0],o=a[1],s=a[2],u=a[3],f=a[4],c=a[5];r.stencilFuncSeparate(1028,i,o,s),r.stencilFuncSeparate(1029,u,f,c)}),(0,p.default)(S,"stencilOp",function(r,e){e=Jr(e)&&e.length===3?[].concat((0,Ae.default)(e),(0,Ae.default)(e)):e;var n=e,a=(0,$n.default)(n,6),i=a[0],o=a[1],s=a[2],u=a[3],f=a[4],c=a[5];r.stencilOpSeparate(1028,i,o,s),r.stencilOpSeparate(1029,u,f,c)}),(0,p.default)(S,"viewport",function(r,e){return r.viewport.apply(r,(0,Ae.default)(e))}),S);function be(t,r,e){return r[t]!==void 0?r[t]:e[t]}var nc={blendEquation:function(r,e,n){return r.blendEquationSeparate(be(32777,e,n),be(34877,e,n))},blendFunc:function(r,e,n){return r.blendFuncSeparate(be(32969,e,n),be(32968,e,n),be(32971,e,n),be(32970,e,n))},polygonOffset:function(r,e,n){return r.polygonOffset(be(32824,e,n),be(10752,e,n))},sampleCoverage:function(r,e,n){return r.sampleCoverage(be(32938,e,n),be(32939,e,n))},stencilFuncFront:function(r,e,n){return r.stencilFuncSeparate(1028,be(2962,e,n),be(2967,e,n),be(2963,e,n))},stencilFuncBack:function(r,e,n){return r.stencilFuncSeparate(1029,be(34816,e,n),be(36003,e,n),be(36004,e,n))},stencilOpFront:function(r,e,n){return r.stencilOpSeparate(1028,be(2964,e,n),be(2965,e,n),be(2966,e,n))},stencilOpBack:function(r,e,n){return r.stencilOpSeparate(1029,be(34817,e,n),be(34818,e,n),be(34819,e,n))}},Ri={enable:function(r,e){return r((0,p.default)({},e,!0))},disable:function(r,e){return r((0,p.default)({},e,!1))},pixelStorei:function(r,e,n){return r((0,p.default)({},e,n))},hint:function(r,e,n){return r((0,p.default)({},e,n))},bindFramebuffer:function(r,e,n){var a;switch(e){case 36160:return r((a={},(0,p.default)(a,36006,n),(0,p.default)(a,36010,n),a));case 36009:return r((0,p.default)({},36006,n));case 36008:return r((0,p.default)({},36010,n));default:return null}},blendColor:function(r,e,n,a,i){return r((0,p.default)({},32773,new Float32Array([e,n,a,i])))},blendEquation:function(r,e){var n;return r((n={},(0,p.default)(n,32777,e),(0,p.default)(n,34877,e),n))},blendEquationSeparate:function(r,e,n){var a;return r((a={},(0,p.default)(a,32777,e),(0,p.default)(a,34877,n),a))},blendFunc:function(r,e,n){var a;return r((a={},(0,p.default)(a,32969,e),(0,p.default)(a,32968,n),(0,p.default)(a,32971,e),(0,p.default)(a,32970,n),a))},blendFuncSeparate:function(r,e,n,a,i){var o;return r((o={},(0,p.default)(o,32969,e),(0,p.default)(o,32968,n),(0,p.default)(o,32971,a),(0,p.default)(o,32970,i),o))},clearColor:function(r,e,n,a,i){return r((0,p.default)({},3106,new Float32Array([e,n,a,i])))},clearDepth:function(r,e){return r((0,p.default)({},2931,e))},clearStencil:function(r,e){return r((0,p.default)({},2961,e))},colorMask:function(r,e,n,a,i){return r((0,p.default)({},3107,[e,n,a,i]))},cullFace:function(r,e){return r((0,p.default)({},2885,e))},depthFunc:function(r,e){return r((0,p.default)({},2932,e))},depthRange:function(r,e,n){return r((0,p.default)({},2928,new Float32Array([e,n])))},depthMask:function(r,e){return r((0,p.default)({},2930,e))},frontFace:function(r,e){return r((0,p.default)({},2886,e))},lineWidth:function(r,e){return r((0,p.default)({},2849,e))},polygonOffset:function(r,e,n){var a;return r((a={},(0,p.default)(a,32824,e),(0,p.default)(a,10752,n),a))},sampleCoverage:function(r,e,n){var a;return r((a={},(0,p.default)(a,32938,e),(0,p.default)(a,32939,n),a))},scissor:function(r,e,n,a,i){return r((0,p.default)({},3088,new Int32Array([e,n,a,i])))},stencilMask:function(r,e){var n;return r((n={},(0,p.default)(n,2968,e),(0,p.default)(n,36005,e),n))},stencilMaskSeparate:function(r,e,n){return r((0,p.default)({},e===1028?2968:36005,n))},stencilFunc:function(r,e,n,a){var i;return r((i={},(0,p.default)(i,2962,e),(0,p.default)(i,2967,n),(0,p.default)(i,2963,a),(0,p.default)(i,34816,e),(0,p.default)(i,36003,n),(0,p.default)(i,36004,a),i))},stencilFuncSeparate:function(r,e,n,a,i){var o;return r((o={},(0,p.default)(o,e===1028?2962:34816,n),(0,p.default)(o,e===1028?2967:36003,a),(0,p.default)(o,e===1028?2963:36004,i),o))},stencilOp:function(r,e,n,a){var i;return r((i={},(0,p.default)(i,2964,e),(0,p.default)(i,2965,n),(0,p.default)(i,2966,a),(0,p.default)(i,34817,e),(0,p.default)(i,34818,n),(0,p.default)(i,34819,a),i))},stencilOpSeparate:function(r,e,n,a,i){var o;return r((o={},(0,p.default)(o,e===1028?2964:34817,n),(0,p.default)(o,e===1028?2965:34818,a),(0,p.default)(o,e===1028?2966:34819,i),o))},viewport:function(r,e,n,a,i){return r((0,p.default)({},2978,[e,n,a,i]))}},vt=function(r,e){return r.isEnabled(e)},Ii=(it={},(0,p.default)(it,3042,vt),(0,p.default)(it,2884,vt),(0,p.default)(it,2929,vt),(0,p.default)(it,3024,vt),(0,p.default)(it,32823,vt),(0,p.default)(it,32926,vt),(0,p.default)(it,32928,vt),(0,p.default)(it,3089,vt),(0,p.default)(it,2960,vt),(0,p.default)(it,35977,vt),it);var oc=m(Y()),sc=m(Q());function Oi(t){for(var r in t)return!1;return!0}function ac(t,r){if(t===r)return!0;var e=Array.isArray(t)||ArrayBuffer.isView(t),n=Array.isArray(r)||ArrayBuffer.isView(r);if(e&&n&&t.length===r.length){for(var a=0;a<t.length;++a)if(t[a]!==r[a])return!1;return!0}return!1}function ic(t,r){var e=t[r].bind(t);t[r]=function(){var a=arguments.length<=0?void 0:arguments[0];return a in t.state.cache&&t.state.enable?t.state.cache[a]:e.apply(void 0,arguments)},Object.defineProperty(t[r],"name",{value:"".concat(r,"-from-cache"),configurable:!1})}function MA(t,r,e){var n=t[r].bind(t);t[r]=function(){for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];var u=e.apply(void 0,[t.state._updateCache].concat(o)),f=u.valueChanged,c=u.oldValue;return f&&n.apply(void 0,o),c},Object.defineProperty(t[r],"name",{value:"".concat(r,"-to-cache"),configurable:!1})}function RA(t){var r=t.useProgram.bind(t);t.useProgram=function(n){t.state.program!==n&&(r(n),t.state.program=n)}}var IA=function(){function t(r){(0,oc.default)(this,t);var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.copyState,a=n===void 0?!1:n,i=e.log,o=i===void 0?function(){}:i;this.gl=r,this.program=null,this.stateStack=[],this.enable=!0,this.cache=a?Li(r):Object.assign({},qn),this.log=o,this._updateCache=this._updateCache.bind(this),Object.seal(this)}return(0,sc.default)(t,[{key:"push",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.stateStack.push({})}},{key:"pop",value:function(){Ce(this.stateStack.length>0);var e=this.stateStack[this.stateStack.length-1];ea(this.gl,e),this.stateStack.pop()}},{key:"_updateCache",value:function(e){var n=!1,a,i=this.stateStack.length>0&&this.stateStack[this.stateStack.length-1];for(var o in e){Ce(o!==void 0);var s=e[o],u=this.cache[o];ac(s,u)||(n=!0,a=u,i&&!(o in i)&&(i[o]=u),this.cache[o]=s)}return{valueChanged:n,oldValue:a}}}]),t}();function wi(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},e=r.enable,n=e===void 0?!0:e,a=r.copyState;if(Ce(a!==void 0),!t.state){var i=globalThis.polyfillContext;i&&i(t),t.state=new IA(t,{copyState:a}),RA(t);for(var o in Ri){var s=Ri[o];MA(t,o,s)}ic(t,"getParameter"),ic(t,"isEnabled")}return t.state.enable=n,t}function Fi(t){t.state||wi(t,{copyState:!1}),t.state.push()}function Zn(t){Ce(t.state),t.state.pop()}function OA(t,r){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=wA(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var n=0,a=function(){};return{s:a,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(f){throw f},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,o=!1,s;return{s:function(){e=e.call(t)},n:function(){var f=e.next();return i=f.done,f},e:function(f){o=!0,s=f},f:function(){try{!i&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function wA(t,r){if(t){if(typeof t=="string")return uc(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return uc(t,r)}}function uc(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function ea(t,r){if(Ce(Ar(t),"setParameters requires a WebGL context"),!Oi(r)){var e={};for(var n in r){var a=Number(n),i=rc[n];i&&(typeof i=="string"?e[i]=!0:i(t,r[n],a))}var o=t.state&&t.state.cache;if(o)for(var s in e){var u=nc[s];u(t,r,o)}}}function Li(t,r){if(r=r||qn,typeof r=="number"){var e=r,n=Ii[e];return n?n(t,e):t.getParameter(e)}var a=Array.isArray(r)?r:Object.keys(r),i={},o=OA(a),s;try{for(o.s();!(s=o.n()).done;){var u=s.value,f=Ii[u];i[u]=f?f(t,Number(u)):t.getParameter(Number(u))}}catch(c){o.e(c)}finally{o.f()}return i}function ct(t,r,e){if(Oi(r))return e(t);var n=r.nocatch,a=n===void 0?!0:n;Fi(t),ea(t,r);var i;if(a)i=e(t),Zn(t);else try{i=e(t)}finally{Zn(t)}return i}var OC=Oe();var lc=m(Y()),dc=m(Q());var fc=m(Y()),cc=m(Q());function Xr(){var t;if(typeof window<"u"&&window.performance)t=window.performance.now();else if(typeof process<"u"&&process.hrtime){var r=process.hrtime();t=r[0]*1e3+r[1]/1e6}else t=Date.now();return t}var ta=function(){function t(r,e){(0,fc.default)(this,t),w(this,"name",void 0),w(this,"type",void 0),w(this,"sampleSize",1),w(this,"time",void 0),w(this,"count",void 0),w(this,"samples",void 0),w(this,"lastTiming",void 0),w(this,"lastSampleTime",void 0),w(this,"lastSampleCount",void 0),w(this,"_count",0),w(this,"_time",0),w(this,"_samples",0),w(this,"_startTime",0),w(this,"_timerPending",!1),this.name=r,this.type=e,this.reset()}return(0,cc.default)(t,[{key:"setSampleSize",value:function(e){return this.sampleSize=e,this}},{key:"incrementCount",value:function(){return this.addCount(1),this}},{key:"decrementCount",value:function(){return this.subtractCount(1),this}},{key:"addCount",value:function(e){return this._count+=e,this._samples++,this._checkSampling(),this}},{key:"subtractCount",value:function(e){return this._count-=e,this._samples++,this._checkSampling(),this}},{key:"addTime",value:function(e){return this._time+=e,this.lastTiming=e,this._samples++,this._checkSampling(),this}},{key:"timeStart",value:function(){return this._startTime=Xr(),this._timerPending=!0,this}},{key:"timeEnd",value:function(){return this._timerPending?(this.addTime(Xr()-this._startTime),this._timerPending=!1,this._checkSampling(),this):this}},{key:"getSampleAverageCount",value:function(){return this.sampleSize>0?this.lastSampleCount/this.sampleSize:0}},{key:"getSampleAverageTime",value:function(){return this.sampleSize>0?this.lastSampleTime/this.sampleSize:0}},{key:"getSampleHz",value:function(){return this.lastSampleTime>0?this.sampleSize/(this.lastSampleTime/1e3):0}},{key:"getAverageCount",value:function(){return this.samples>0?this.count/this.samples:0}},{key:"getAverageTime",value:function(){return this.samples>0?this.time/this.samples:0}},{key:"getHz",value:function(){return this.time>0?this.samples/(this.time/1e3):0}},{key:"reset",value:function(){return this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this}},{key:"_checkSampling",value:function(){this._samples===this.sampleSize&&(this.lastSampleTime=this._time,this.lastSampleCount=this._count,this.count+=this._count,this.time+=this._time,this.samples+=this._samples,this._time=0,this._count=0,this._samples=0)}}]),t}();var Di=function(){function t(r){(0,lc.default)(this,t),w(this,"id",void 0),w(this,"stats",{}),this.id=r.id,this.stats={},this._initializeStats(r.stats),Object.seal(this)}return(0,dc.default)(t,[{key:"get",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"count";return this._getOrCreate({name:e,type:n})}},{key:"size",get:function(){return Object.keys(this.stats).length}},{key:"reset",value:function(){for(var e in this.stats)this.stats[e].reset();return this}},{key:"forEach",value:function(e){for(var n in this.stats)e(this.stats[n])}},{key:"getTable",value:function(){var e={};return this.forEach(function(n){e[n.name]={time:n.time||0,count:n.count||0,average:n.getAverageTime()||0,hz:n.getHz()||0}}),e}},{key:"_initializeStats",value:function(){var e=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];n.forEach(function(a){return e._getOrCreate(a)})}},{key:"_getOrCreate",value:function(e){if(!e||!e.name)return null;var n=e.name,a=e.type;return this.stats[n]||(e instanceof ta?this.stats[n]=e:this.stats[n]=new ta(n,a)),this.stats[n]}}]),t}();var zr="8.5.16",FA="set luma.log.level=1 (or higher) to trace rendering",Pi=function(){function t(){(0,hc.default)(this,t),this.stats=new Map}return(0,mc.default)(t,[{key:"get",value:function(e){return this.stats.has(e)||this.stats.set(e,new Di({id:e})),this.stats.get(e)}}]),t}(),br=new Pi;if(globalThis.luma&&globalThis.luma.VERSION!==zr)throw new Error("luma.gl - multiple VERSIONs detected: ".concat(globalThis.luma.VERSION," vs ").concat(zr));globalThis.luma||(Oe()&&I.log(1,"luma.gl ".concat(zr," - ").concat(FA))(),globalThis.luma=globalThis.luma||{VERSION:zr,version:zr,log:I,stats:br,globals:{modules:{},nodeIO:{}}});var uS=globalThis.luma;var xl=m(ae());var Vc=m(Y()),Jc=m(Q()),Xc=m(nt()),zc=m(He()),Kc=m(je()),Hi=m(ke());var Gc=m(Qe()),kc=m(Y()),Uc=m(Q()),Nc=m(He()),Hc=m(je()),Ni=m(ke());var vc=m(Y()),gc=m(Q());function M(t,r){if(!t)throw new Error(r||"luma.gl: assertion failed.")}function ra(t,r){if(typeof r!="string")return r;var e=Number(r);if(!isNaN(e))return e;r=r.replace(/^.*\./,"");var n=t[r];return M(n!==void 0,"Accessing undefined constant GL.".concat(r)),n}function ot(t,r){r=Number(r);for(var e in t)if(t[e]===r)return"GL.".concat(e);return String(r)}var Gi={};function Ve(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"id";Gi[t]=Gi[t]||1;var r=Gi[t]++;return"".concat(t,"-").concat(r)}function ki(t){return M(typeof t=="number","Input must be a number"),t&&(t&t-1)===0}function Er(t){var r=!0;for(var e in t){r=!1;break}return r}function na(t,r,e,n){var a="See luma.gl ".concat(e," Upgrade Guide at https://luma.gl/docs/upgrade-guide"),i=Object.getPrototypeOf(t);n.forEach(function(o){i.methodName||(i[o]=function(){throw I.removed("Calling removed method ".concat(r,".").concat(o,": "),a)(),new Error(o)})})}function LA(t,r){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=DA(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var n=0,a=function(){};return{s:a,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(f){throw f},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,o=!1,s;return{s:function(){e=e.call(t)},n:function(){var f=e.next();return i=f.done,f},e:function(f){o=!0,s=f},f:function(){try{!i&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function DA(t,r){if(t){if(typeof t=="string")return pc(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return pc(t,r)}}function pc(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}var Br="Resource subclass must define virtual methods",Ue=function(t){function r(e){(0,vc.default)(this,r);var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Kt(e);var a=n.id,i=n.userData,o=i===void 0?{}:i;this.gl=e,this.gl2=e,this.id=a||Ve(this[Symbol.toStringTag]),this.userData=o,this._bound=!1,this._handle=n.handle,this._handle===void 0&&(this._handle=this._createHandle()),this.byteLength=0,this._initStats(),this._addStats()}return(0,gc.default)(r,[{key:t,get:function(){return"Resource"}},{key:"toString",value:function(){return"".concat(this[Symbol.toStringTag]||this.constructor.name,"(").concat(this.id,")")}},{key:"handle",get:function(){return this._handle}},{key:"delete",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=n.deleteChildren,i=a===void 0?!1:a,o=this._handle&&this._deleteHandle(this._handle);return this._handle&&this._removeStats(),this._handle=null,o&&i&&o.filter(Boolean).forEach(function(s){return s.delete()}),this}},{key:"bind",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.handle;if(typeof n!="function")return this._bindHandle(n),this;var a;return this._bound?a=n():(this._bindHandle(this.handle),this._bound=!0,a=n(),this._bound=!1,this._bindHandle(null)),a}},{key:"unbind",value:function(){this.bind(null)}},{key:"getParameter",value:function(n){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};n=ra(this.gl,n),M(n);var i=this.constructor.PARAMETERS||{},o=i[n];if(o){var s=j(this.gl),u=(!("webgl2"in o)||s)&&(!("extension"in o)||this.gl.getExtension(o.extension));if(!u){var f=o.webgl1,c="webgl2"in o?o.webgl2:o.webgl1,l=s?c:f;return l}}return this._getParameter(n,a)}},{key:"getParameters",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=n.parameters,i=n.keys,o=this.constructor.PARAMETERS||{},s=j(this.gl),u={},f=a||Object.keys(o),c=LA(f),l;try{for(c.s();!(l=c.n()).done;){var d=l.value,h=o[d],v=h&&(!("webgl2"in h)||s)&&(!("extension"in h)||this.gl.getExtension(h.extension));if(v){var g=i?ot(this.gl,d):d;u[g]=this.getParameter(d,n),i&&h.type==="GLenum"&&(u[g]=ot(this.gl,u[g]))}}}catch(y){c.e(y)}finally{c.f()}return u}},{key:"setParameter",value:function(n,a){n=ra(this.gl,n),M(n);var i=this.constructor.PARAMETERS||{},o=i[n];if(o){var s=j(this.gl),u=(!("webgl2"in o)||s)&&(!("extension"in o)||this.gl.getExtension(o.extension));if(!u)throw new Error("Parameter not available on this platform");o.type==="GLenum"&&(a=ra(a))}return this._setParameter(n,a),this}},{key:"setParameters",value:function(n){for(var a in n)this.setParameter(a,n[a]);return this}},{key:"stubRemovedMethods",value:function(n,a,i){return na(this,n,a,i)}},{key:"initialize",value:function(n){}},{key:"_createHandle",value:function(){throw new Error(Br)}},{key:"_deleteHandle",value:function(){throw new Error(Br)}},{key:"_bindHandle",value:function(n){throw new Error(Br)}},{key:"_getOptsFromHandle",value:function(){throw new Error(Br)}},{key:"_getParameter",value:function(n,a){throw new Error(Br)}},{key:"_setParameter",value:function(n,a){throw new Error(Br)}},{key:"_context",value:function(){return this.gl.luma=this.gl.luma||{},this.gl.luma}},{key:"_initStats",value:function(){this.gl.stats=this.gl.stats||new Pi}},{key:"_addStats",value:function(){var n=this[Symbol.toStringTag],a=br.get("Resource Counts");a.get("Resources Created").incrementCount(),a.get("".concat(n,"s Created")).incrementCount(),a.get("".concat(n,"s Active")).incrementCount()}},{key:"_removeStats",value:function(){var n=this[Symbol.toStringTag],a=br.get("Resource Counts");a.get("".concat(n,"s Active")).decrementCount()}},{key:"_trackAllocatedMemory",value:function(n){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this[Symbol.toStringTag];this._doTrackAllocatedMemory(n,a),this._doTrackAllocatedMemory(n,a,this.gl.stats.get("Memory Usage"))}},{key:"_doTrackAllocatedMemory",value:function(n){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this[Symbol.toStringTag],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:br.get("Memory Usage");i.get("GPU Memory").addCount(n),i.get("".concat(a," Memory")).addCount(n),this.byteLength=n}},{key:"_trackDeallocatedMemory",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this[Symbol.toStringTag];this._doTrackDeallocatedMemory(n),this._doTrackDeallocatedMemory(n,this.gl.stats.get("Memory Usage"))}},{key:"_doTrackDeallocatedMemory",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this[Symbol.toStringTag],a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:br.get("Memory Usage");a.get("GPU Memory").subtractCount(this.byteLength),a.get("".concat(n," Memory")).subtractCount(this.byteLength),this.byteLength=0}}]),r}(Symbol.toStringTag);var Tc=m(Y()),Cc=m(Q()),Sc=m(nt()),Mc=m(He()),Rc=m(je()),Ui=m(ke());var bc=m(yc()),Ec=m(Y()),Bc=m(Q());var kA="Failed to deduce GL constant from typed array";function Kr(t){var r=ArrayBuffer.isView(t)?t.constructor:t;switch(r){case Float32Array:return 5126;case Uint16Array:return 5123;case Uint32Array:return 5125;case Uint8Array:return 5121;case Uint8ClampedArray:return 5121;case Int8Array:return 5120;case Int16Array:return 5122;case Int32Array:return 5124;default:throw new Error(kA)}}function Dt(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},e=r.clamped,n=e===void 0?!0:e;switch(t){case 5126:return Float32Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return n?Uint8ClampedArray:Uint8Array;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Failed to deduce typed array type from GL constant")}}function Ac(t){var r=t.data,e=t.width,n=t.height,a=t.bytesPerPixel,i=a===void 0?4:a,o=t.temp,s=e*i;o=o||new Uint8Array(s);for(var u=0;u<n/2;++u){var f=u*s,c=(n-u-1)*s;o.set(r.subarray(f,f+s)),r.copyWithin(f,c,c+s),r.set(o,c)}}function _c(t){for(var r=t.data,e=t.width,n=t.height,a=Math.round(e/2),i=Math.round(n/2),o=new Uint8Array(a*i*4),s=0;s<i;s++)for(var u=0;u<a;u++)for(var f=0;f<4;f++)o[(s*a+u)*4+f]=r[(s*2*e+u*2)*4+f];return{data:o,width:a,height:i}}function Wr(t,r,e){var n=e.removedProps,a=n===void 0?{}:n,i=e.deprecatedProps,o=i===void 0?{}:i,s=e.replacedProps,u=s===void 0?{}:s;for(var f in a)if(f in r){var c=a[f],l=c?"".concat(t,".").concat(a[f]):"N/A";I.removed("".concat(t,".").concat(f),l)()}for(var d in o)if(d in r){var h=o[d];I.deprecated("".concat(t,".").concat(d),"".concat(t,".").concat(h))()}var v=null;for(var g in u)if(g in r){var y=u[g];I.deprecated("".concat(t,".").concat(g),"".concat(t,".").concat(y))(),v=v||Object.assign({},r),v[y]=r[g],delete v[g]}return v||r}var UA={offset:0,stride:0,type:5126,size:1,divisor:0,normalized:!1,integer:!1},NA={deprecatedProps:{instanced:"divisor",isInstanced:"divisor"}},Je=function(){function t(){var r=this;(0,Ec.default)(this,t);for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];n.forEach(function(i){return r._assign(i)}),Object.freeze(this)}return(0,Bc.default)(t,[{key:"toString",value:function(){return JSON.stringify(this)}},{key:"BYTES_PER_ELEMENT",get:function(){return t.getBytesPerElement(this)}},{key:"BYTES_PER_VERTEX",get:function(){return t.getBytesPerVertex(this)}},{key:"_assign",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return e=Wr("Accessor",e,NA),e.type!==void 0&&(this.type=e.type,(e.type===5124||e.type===5125)&&(this.integer=!0)),e.size!==void 0&&(this.size=e.size),e.offset!==void 0&&(this.offset=e.offset),e.stride!==void 0&&(this.stride=e.stride),e.normalized!==void 0&&(this.normalized=e.normalized),e.integer!==void 0&&(this.integer=e.integer),e.divisor!==void 0&&(this.divisor=e.divisor),e.buffer!==void 0&&(this.buffer=e.buffer),e.index!==void 0&&(typeof e.index=="boolean"?this.index=e.index?1:0:this.index=e.index),e.instanced!==void 0&&(this.divisor=e.instanced?1:0),e.isInstanced!==void 0&&(this.divisor=e.isInstanced?1:0),this}}],[{key:"getBytesPerElement",value:function(e){var n=Dt(e.type||5126);return n.BYTES_PER_ELEMENT}},{key:"getBytesPerVertex",value:function(e){M(e.size);var n=Dt(e.type||5126);return n.BYTES_PER_ELEMENT*e.size}},{key:"resolve",value:function(){for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];return(0,bc.default)(t,[UA].concat(n))}}]),t}();function HA(t){var r=jA();return function(){var n=(0,Ui.default)(t),a;if(r){var i=(0,Ui.default)(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return(0,Rc.default)(this,a)}}function jA(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var xc=10,Ic={offset:"accessor.offset",stride:"accessor.stride",type:"accessor.type",size:"accessor.size",divisor:"accessor.divisor",normalized:"accessor.normalized",integer:"accessor.integer",instanced:"accessor.divisor",isInstanced:"accessor.divisor"},VA={removedProps:{},replacedProps:{bytes:"byteLength"},deprecatedProps:Ic},JA={removedProps:Ic},me=function(t,r){(0,Mc.default)(n,t);var e=HA(n);function n(a){var i;(0,Tc.default)(this,n);var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return i=e.call(this,a,o),i.stubRemovedMethods("Buffer","v6.0",["layout","setLayout","getIndexedParameter"]),i.target=o.target||(i.gl.webgl2?36662:34962),i.initialize(o),Object.seal((0,Sc.default)(i)),i}return(0,Cc.default)(n,[{key:r,get:function(){return"Buffer"}},{key:"getElementCount",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.accessor;return Math.round(this.byteLength/Je.getBytesPerElement(i))}},{key:"getVertexCount",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.accessor;return Math.round(this.byteLength/Je.getBytesPerVertex(i))}},{key:"initialize",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return ArrayBuffer.isView(i)&&(i={data:i}),Number.isFinite(i)&&(i={byteLength:i}),i=Wr("Buffer",i,VA),this.usage=i.usage||35044,this.debugData=null,this.setAccessor(Object.assign({},i,i.accessor)),i.data?this._setData(i.data,i.offset,i.byteLength):this._setByteLength(i.byteLength||0),this}},{key:"setProps",value:function(i){return i=Wr("Buffer",i,JA),"accessor"in i&&this.setAccessor(i.accessor),this}},{key:"setAccessor",value:function(i){return i=Object.assign({},i),delete i.buffer,this.accessor=new Je(i),this}},{key:"reallocate",value:function(i){return i>this.byteLength?(this._setByteLength(i),!0):(this.bytesUsed=i,!1)}},{key:"setData",value:function(i){return this.initialize(i)}},{key:"subData",value:function(i){ArrayBuffer.isView(i)&&(i={data:i});var o=i,s=o.data,u=o.offset,f=u===void 0?0:u,c=o.srcOffset,l=c===void 0?0:c,d=i.byteLength||i.length;M(s);var h=this.gl.webgl2?36663:this.target;return this.gl.bindBuffer(h,this.handle),l!==0||d!==void 0?(_e(this.gl),this.gl.bufferSubData(this.target,f,s,l,d)):this.gl.bufferSubData(h,f,s),this.gl.bindBuffer(h,null),this.debugData=null,this._inferType(s),this}},{key:"copyData",value:function(i){var o=i.sourceBuffer,s=i.readOffset,u=s===void 0?0:s,f=i.writeOffset,c=f===void 0?0:f,l=i.size,d=this.gl;return _e(d),d.bindBuffer(36662,o.handle),d.bindBuffer(36663,this.handle),d.copyBufferSubData(36662,36663,u,c,l),d.bindBuffer(36662,null),d.bindBuffer(36663,null),this.debugData=null,this}},{key:"getData",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=i.dstData,s=o===void 0?null:o,u=i.srcByteOffset,f=u===void 0?0:u,c=i.dstOffset,l=c===void 0?0:c,d=i.length,h=d===void 0?0:d;_e(this.gl);var v=Dt(this.accessor.type||5126,{clamped:!1}),g=this._getAvailableElementCount(f),y=l,A,_;s?(_=s.length,A=_-y):(A=Math.min(g,h||g),_=y+A);var T=Math.min(g,A);return h=h||T,M(h<=T),s=s||new v(_),this.gl.bindBuffer(36662,this.handle),this.gl.getBufferSubData(36662,f,s,l,h),this.gl.bindBuffer(36662,null),s}},{key:"bind",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=i.target,s=o===void 0?this.target:o,u=i.index,f=u===void 0?this.accessor&&this.accessor.index:u,c=i.offset,l=c===void 0?0:c,d=i.size;return s===35345||s===35982?d!==void 0?this.gl.bindBufferRange(s,f,this.handle,l,d):(M(l===0),this.gl.bindBufferBase(s,f,this.handle)):this.gl.bindBuffer(s,this.handle),this}},{key:"unbind",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=i.target,s=o===void 0?this.target:o,u=i.index,f=u===void 0?this.accessor&&this.accessor.index:u,c=s===35345||s===35982;return c?this.gl.bindBufferBase(s,f,null):this.gl.bindBuffer(s,null),this}},{key:"getDebugData",value:function(){return this.debugData?{data:this.debugData,changed:!1}:(this.debugData=this.getData({length:Math.min(xc,this.byteLength)}),{data:this.debugData,changed:!0})}},{key:"invalidateDebugData",value:function(){this.debugData=null}},{key:"_setData",value:function(i){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:i.byteLength+o;M(ArrayBuffer.isView(i)),this._trackDeallocatedMemory();var u=this._getTarget();this.gl.bindBuffer(u,this.handle),this.gl.bufferData(u,s,this.usage),this.gl.bufferSubData(u,o,i),this.gl.bindBuffer(u,null),this.debugData=i.slice(0,xc),this.bytesUsed=s,this._trackAllocatedMemory(s);var f=Kr(i);return M(f),this.setAccessor(new Je(this.accessor,{type:f})),this}},{key:"_setByteLength",value:function(i){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.usage;M(i>=0),this._trackDeallocatedMemory();var s=i;i===0&&(s=new Float32Array(0));var u=this._getTarget();return this.gl.bindBuffer(u,this.handle),this.gl.bufferData(u,s,o),this.gl.bindBuffer(u,null),this.usage=o,this.debugData=null,this.bytesUsed=i,this._trackAllocatedMemory(i),this}},{key:"_getTarget",value:function(){return this.gl.webgl2?36663:this.target}},{key:"_getAvailableElementCount",value:function(i){var o=Dt(this.accessor.type||5126,{clamped:!1}),s=i/o.BYTES_PER_ELEMENT;return this.getElementCount()-s}},{key:"_inferType",value:function(i){this.accessor.type||this.setAccessor(new Je(this.accessor,{type:Kr(i)}))}},{key:"_createHandle",value:function(){return this.gl.createBuffer()}},{key:"_deleteHandle",value:function(){this.gl.deleteBuffer(this.handle),this._trackDeallocatedMemory()}},{key:"_getParameter",value:function(i){this.gl.bindBuffer(this.target,this.handle);var o=this.gl.getBufferParameter(this.target,i);return this.gl.bindBuffer(this.target,null),o}},{key:"type",get:function(){return I.deprecated("Buffer.type","Buffer.accessor.type")(),this.accessor.type}},{key:"bytes",get:function(){return I.deprecated("Buffer.bytes","Buffer.byteLength")(),this.byteLength}},{key:"setByteLength",value:function(i){return I.deprecated("setByteLength","reallocate")(),this.reallocate(i)}},{key:"updateAccessor",value:function(i){return I.deprecated("updateAccessor(...)","setAccessor(new Accessor(buffer.accessor, ...)")(),this.accessor=new Je(this.accessor,i),this}}]),n}(Ue,Symbol.toStringTag);var ne=m(ae());var lt,Xe,gt,oa=(lt={},(0,ne.default)(lt,6407,{dataFormat:6407,types:[5121,33635]}),(0,ne.default)(lt,6408,{dataFormat:6408,types:[5121,32819,32820]}),(0,ne.default)(lt,6406,{dataFormat:6406,types:[5121]}),(0,ne.default)(lt,6409,{dataFormat:6409,types:[5121]}),(0,ne.default)(lt,6410,{dataFormat:6410,types:[5121]}),(0,ne.default)(lt,33326,{dataFormat:6403,types:[5126],gl2:!0}),(0,ne.default)(lt,33328,{dataFormat:33319,types:[5126],gl2:!0}),(0,ne.default)(lt,34837,{dataFormat:6407,types:[5126],gl2:!0}),(0,ne.default)(lt,34836,{dataFormat:6408,types:[5126],gl2:!0}),lt),Oc=(Xe={},(0,ne.default)(Xe,6403,1),(0,ne.default)(Xe,36244,1),(0,ne.default)(Xe,33319,2),(0,ne.default)(Xe,33320,2),(0,ne.default)(Xe,6407,3),(0,ne.default)(Xe,36248,3),(0,ne.default)(Xe,6408,4),(0,ne.default)(Xe,36249,4),(0,ne.default)(Xe,6402,1),(0,ne.default)(Xe,34041,1),(0,ne.default)(Xe,6406,1),(0,ne.default)(Xe,6409,1),(0,ne.default)(Xe,6410,2),Xe),wc=(gt={},(0,ne.default)(gt,5126,4),(0,ne.default)(gt,5125,4),(0,ne.default)(gt,5124,4),(0,ne.default)(gt,5123,2),(0,ne.default)(gt,5122,2),(0,ne.default)(gt,5131,2),(0,ne.default)(gt,5120,1),(0,ne.default)(gt,5121,1),gt);function Fc(t,r){var e=oa[r];if(!e)return!1;if(e.gl1===void 0&&e.gl2===void 0)return!0;var n=j(t)&&e.gl2||e.gl1;return typeof n=="string"?t.getExtension(n):n}function Lc(t,r){var e=oa[r];switch(e&&e.types[0]){case 5126:return t.getExtension("OES_texture_float_linear");case 5131:return t.getExtension("OES_texture_half_float_linear");default:return!0}}function XA(t,r){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=zA(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var n=0,a=function(){};return{s:a,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(f){throw f},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,o=!1,s;return{s:function(){e=e.call(t)},n:function(){var f=e.next();return i=f.done,f},e:function(f){o=!0,s=f},f:function(){try{!i&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function zA(t,r){if(t){if(typeof t=="string")return Dc(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return Dc(t,r)}}function Dc(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function KA(t){var r=WA();return function(){var n=(0,Ni.default)(t),a;if(r){var i=(0,Ni.default)(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return(0,Hc.default)(this,a)}}function WA(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var YA=[9729,9728],Pc=globalThis.WebGLBuffer||function(){},Yt=function(t,r){(0,Nc.default)(n,t);var e=KA(n);function n(a,i){var o;(0,kc.default)(this,n);var s=i.id,u=s===void 0?Ve("texture"):s,f=i.handle,c=i.target;return o=e.call(this,a,{id:u,handle:f}),o.target=c,o.textureUnit=void 0,o.loaded=!1,o.width=void 0,o.height=void 0,o.depth=void 0,o.format=void 0,o.type=void 0,o.dataFormat=void 0,o.border=void 0,o.textureUnit=void 0,o.mipmaps=void 0,o}return(0,Uc.default)(n,[{key:r,get:function(){return"Texture"}},{key:"toString",value:function(){return"Texture(".concat(this.id,",").concat(this.width,"x").concat(this.height,")")}},{key:"initialize",value:function(){var i=this,o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=o.data;if(s instanceof Promise)return s.then(function(U){return i.initialize(Object.assign({},o,{pixels:U,data:U}))}),this;var u=typeof HTMLVideoElement<"u"&&s instanceof HTMLVideoElement;if(u&&s.readyState<HTMLVideoElement.HAVE_METADATA)return this._video=null,s.addEventListener("loadeddata",function(){return i.initialize(o)}),this;var f=o.pixels,c=f===void 0?null:f,l=o.format,d=l===void 0?6408:l,h=o.border,v=h===void 0?0:h,g=o.recreate,y=g===void 0?!1:g,A=o.parameters,_=A===void 0?{}:A,T=o.pixelStore,B=T===void 0?{}:T,x=o.textureUnit,R=x===void 0?void 0:x;s||(s=c);var L=o.width,N=o.height,P=o.dataFormat,G=o.type,H=o.compressed,F=H===void 0?!1:H,V=o.mipmaps,k=V===void 0?!0:V,E=o.depth,b=E===void 0?0:E,C=this._deduceParameters({format:d,type:G,dataFormat:P,compressed:F,data:s,width:L,height:N});return L=C.width,N=C.height,F=C.compressed,P=C.dataFormat,G=C.type,this.width=L,this.height=N,this.depth=b,this.format=d,this.type=G,this.dataFormat=P,this.border=v,this.textureUnit=R,Number.isFinite(this.textureUnit)&&(this.gl.activeTexture(33984+this.textureUnit),this.gl.bindTexture(this.target,this.handle)),k&&this._isNPOT()&&(I.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),k=!1,this._updateForNPOT(_)),this.mipmaps=k,this.setImageData({data:s,width:L,height:N,depth:b,format:d,type:G,dataFormat:P,border:v,mipmaps:k,parameters:B,compressed:F}),k&&this.generateMipmap(),this.setParameters(_),y&&(this.data=s),u&&(this._video={video:s,parameters:_,lastTime:s.readyState>=HTMLVideoElement.HAVE_CURRENT_DATA?s.currentTime:-1}),this}},{key:"update",value:function(){if(this._video){var i=this._video,o=i.video,s=i.parameters,u=i.lastTime;if(u===o.currentTime||o.readyState<HTMLVideoElement.HAVE_CURRENT_DATA)return;this.setSubImageData({data:o,parameters:s}),this.mipmaps&&this.generateMipmap(),this._video.lastTime=o.currentTime}}},{key:"resize",value:function(i){var o=i.height,s=i.width,u=i.mipmaps,f=u===void 0?!1:u;return s!==this.width||o!==this.height?this.initialize({width:s,height:o,format:this.format,type:this.type,dataFormat:this.dataFormat,border:this.border,mipmaps:f}):this}},{key:"generateMipmap",value:function(){var i=this,o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this._isNPOT()?(I.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),this):(this.mipmaps=!0,this.gl.bindTexture(this.target,this.handle),ct(this.gl,o,function(){i.gl.generateMipmap(i.target)}),this.gl.bindTexture(this.target,null),this)}},{key:"setImageData",value:function(i){this._trackDeallocatedMemory("Texture");var o=i.target,s=o===void 0?this.target:o,u=i.pixels,f=u===void 0?null:u,c=i.level,l=c===void 0?0:c,d=i.format,h=d===void 0?this.format:d,v=i.border,g=v===void 0?this.border:v,y=i.offset,A=y===void 0?0:y,_=i.parameters,T=_===void 0?{}:_,B=i.data,x=B===void 0?null:B,R=i.type,L=R===void 0?this.type:R,N=i.width,P=N===void 0?this.width:N,G=i.height,H=G===void 0?this.height:G,F=i.dataFormat,V=F===void 0?this.dataFormat:F,k=i.compressed,E=k===void 0?!1:k;x||(x=f);var b=this._deduceParameters({format:h,type:L,dataFormat:V,compressed:E,data:x,width:P,height:H});L=b.type,V=b.dataFormat,E=b.compressed,P=b.width,H=b.height;var C=this.gl;C.bindTexture(this.target,this.handle);var U=null,O=this._getDataType({data:x,compressed:E});x=O.data,U=O.dataType;var oe,ie=0;if(ct(this.gl,T,function(){switch(U){case"null":C.texImage2D(s,l,h,P,H,g,V,L,x);break;case"typed-array":C.texImage2D(s,l,h,P,H,g,V,L,x,A);break;case"buffer":oe=_e(C),oe.bindBuffer(35052,x.handle||x),oe.texImage2D(s,l,h,P,H,g,V,L,A),oe.bindBuffer(35052,null);break;case"browser-object":j(C)?C.texImage2D(s,l,h,P,H,g,V,L,x):C.texImage2D(s,l,h,V,L,x);break;case"compressed":var xe=XA(x.entries()),rt;try{for(xe.s();!(rt=xe.n()).done;){var Ke=(0,Gc.default)(rt.value,2),fy=Ke[0],kr=Ke[1];C.compressedTexImage2D(s,fy,kr.format,kr.width,kr.height,g,kr.data),ie+=kr.levelSize}}catch(cy){xe.e(cy)}finally{xe.f()}break;default:M(!1,"Unknown image data type")}}),U==="compressed")this._trackAllocatedMemory(ie,"Texture");else if(x&&x.byteLength)this._trackAllocatedMemory(x.byteLength,"Texture");else{var se=Oc[this.dataFormat]||4,Te=wc[this.type]||1;this._trackAllocatedMemory(this.width*this.height*se*Te,"Texture")}return this.loaded=!0,this}},{key:"setSubImageData",value:function(i){var o=this,s=i.target,u=s===void 0?this.target:s,f=i.pixels,c=f===void 0?null:f,l=i.data,d=l===void 0?null:l,h=i.x,v=h===void 0?0:h,g=i.y,y=g===void 0?0:g,A=i.width,_=A===void 0?this.width:A,T=i.height,B=T===void 0?this.height:T,x=i.level,R=x===void 0?0:x,L=i.format,N=L===void 0?this.format:L,P=i.type,G=P===void 0?this.type:P,H=i.dataFormat,F=H===void 0?this.dataFormat:H,V=i.compressed,k=V===void 0?!1:V,E=i.offset,b=E===void 0?0:E,C=i.border,U=C===void 0?this.border:C,O=i.parameters,oe=O===void 0?{}:O,ie=this._deduceParameters({format:N,type:G,dataFormat:F,compressed:k,data:d,width:_,height:B});if(G=ie.type,F=ie.dataFormat,k=ie.compressed,_=ie.width,B=ie.height,M(this.depth===0,"texSubImage not supported for 3D textures"),d||(d=c),d&&d.data){var se=d;d=se.data,_=se.shape[0],B=se.shape[1]}d instanceof me&&(d=d.handle),this.gl.bindTexture(this.target,this.handle),ct(this.gl,oe,function(){if(k)o.gl.compressedTexSubImage2D(u,R,v,y,_,B,N,d);else if(d===null)o.gl.texSubImage2D(u,R,v,y,_,B,F,G,null);else if(ArrayBuffer.isView(d))o.gl.texSubImage2D(u,R,v,y,_,B,F,G,d,b);else if(d instanceof Pc){var Te=_e(o.gl);Te.bindBuffer(35052,d),Te.texSubImage2D(u,R,v,y,_,B,F,G,b),Te.bindBuffer(35052,null)}else if(j(o.gl)){var xe=_e(o.gl);xe.texSubImage2D(u,R,v,y,_,B,F,G,d)}else o.gl.texSubImage2D(u,R,v,y,F,G,d)}),this.gl.bindTexture(this.target,null)}},{key:"copyFramebuffer",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return I.error("Texture.copyFramebuffer({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}},{key:"getActiveUnit",value:function(){return this.gl.getParameter(34016)-33984}},{key:"bind",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.textureUnit,o=this.gl;return i!==void 0&&(this.textureUnit=i,o.activeTexture(33984+i)),o.bindTexture(this.target,this.handle),i}},{key:"unbind",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.textureUnit,o=this.gl;return i!==void 0&&(this.textureUnit=i,o.activeTexture(33984+i)),o.bindTexture(this.target,null),i}},{key:"_getDataType",value:function(i){var o=i.data,s=i.compressed,u=s===void 0?!1:s;return u?{data:o,dataType:"compressed"}:o===null?{data:o,dataType:"null"}:ArrayBuffer.isView(o)?{data:o,dataType:"typed-array"}:o instanceof me?{data:o.handle,dataType:"buffer"}:o instanceof Pc?{data:o,dataType:"buffer"}:{data:o,dataType:"browser-object"}}},{key:"_deduceParameters",value:function(i){var o=i.format,s=i.data,u=i.width,f=i.height,c=i.dataFormat,l=i.type,d=i.compressed,h=oa[o];c=c||h&&h.dataFormat,l=l||h&&h.types[0],d=d||h&&h.compressed;var v=this._deduceImageSize(s,u,f);return u=v.width,f=v.height,{dataFormat:c,type:l,compressed:d,width:u,height:f,format:o,data:s}}},{key:"_deduceImageSize",value:function(i,o,s){var u;return typeof ImageData<"u"&&i instanceof ImageData?u={width:i.width,height:i.height}:typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement?u={width:i.naturalWidth,height:i.naturalHeight}:typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement?u={width:i.width,height:i.height}:typeof ImageBitmap<"u"&&i instanceof ImageBitmap?u={width:i.width,height:i.height}:typeof HTMLVideoElement<"u"&&i instanceof HTMLVideoElement?u={width:i.videoWidth,height:i.videoHeight}:i?u={width:o,height:s}:u={width:o>=0?o:1,height:s>=0?s:1},M(u,"Could not deduced texture size"),M(o===void 0||u.width===o,"Deduced texture width does not match supplied width"),M(s===void 0||u.height===s,"Deduced texture height does not match supplied height"),u}},{key:"_createHandle",value:function(){return this.gl.createTexture()}},{key:"_deleteHandle",value:function(){this.gl.deleteTexture(this.handle),this._trackDeallocatedMemory("Texture")}},{key:"_getParameter",value:function(i){switch(i){case 4096:return this.width;case 4097:return this.height;default:this.gl.bindTexture(this.target,this.handle);var o=this.gl.getTexParameter(this.target,i);return this.gl.bindTexture(this.target,null),o}}},{key:"_setParameter",value:function(i,o){switch(this.gl.bindTexture(this.target,this.handle),o=this._getNPOTParam(i,o),i){case 33082:case 33083:this.gl.texParameterf(this.handle,i,o);break;case 4096:case 4097:M(!1);break;default:this.gl.texParameteri(this.target,i,o);break}return this.gl.bindTexture(this.target,null),this}},{key:"_isNPOT",value:function(){return j(this.gl)||!this.width||!this.height?!1:!ki(this.width)||!ki(this.height)}},{key:"_updateForNPOT",value:function(i){i[this.gl.TEXTURE_MIN_FILTER]===void 0&&(i[this.gl.TEXTURE_MIN_FILTER]=this.gl.LINEAR),i[this.gl.TEXTURE_WRAP_S]===void 0&&(i[this.gl.TEXTURE_WRAP_S]=this.gl.CLAMP_TO_EDGE),i[this.gl.TEXTURE_WRAP_T]===void 0&&(i[this.gl.TEXTURE_WRAP_T]=this.gl.CLAMP_TO_EDGE)}},{key:"_getNPOTParam",value:function(i,o){if(this._isNPOT())switch(i){case 10241:YA.indexOf(o)===-1&&(o=9729);break;case 10242:case 10243:o!==33071&&(o=33071);break;default:break}return o}}],[{key:"isSupported",value:function(i){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=o.format,u=o.linearFiltering,f=!0;return s&&(f=f&&Fc(i,s),f=f&&(!u||Lc(i,s))),f}}]),n}(Ue,Symbol.toStringTag);var QA="";function jc(t,r){return M(typeof t=="string"),t=QA+t,new Promise(function(e,n){try{var a=new Image;a.onload=function(){return e(a)},a.onerror=function(){return n(new Error("Could not load image ".concat(t,".")))},a.crossOrigin=r&&r.crossOrigin||"anonymous",a.src=t}catch(i){n(i)}})}function $A(t){var r=qA();return function(){var n=(0,Hi.default)(t),a;if(r){var i=(0,Hi.default)(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return(0,Kc.default)(this,a)}}function qA(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Qt=function(t,r){(0,zc.default)(n,t);var e=$A(n);function n(a){var i;(0,Vc.default)(this,n);var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Kt(a),(o instanceof Promise||typeof o=="string")&&(o={data:o}),typeof o.data=="string"&&(o=Object.assign({},o,{data:jc(o.data)})),i=e.call(this,a,Object.assign({},o,{target:3553})),i.initialize(o),Object.seal((0,Xc.default)(i)),i}return(0,Jc.default)(n,[{key:r,get:function(){return"Texture2D"}}],[{key:"isSupported",value:function(i,o){return Yt.isSupported(i,o)}}]),n}(Yt,Symbol.toStringTag);var Qr=m(ae()),gl=m(Qe()),yl=m(Y()),Al=m(Q()),_l=m(nt()),bl=m(wt()),El=m(He()),Bl=m(je()),ua=m(ke());var Zc=m(Y()),el=m(Q()),tl=m(nt()),rl=m(He()),nl=m(je()),Ji=m(ke());var K=m(ae()),X,$t="EXT_color_buffer_float",Vi=(X={},(0,K.default)(X,33189,{bpp:2}),(0,K.default)(X,33190,{gl2:!0,bpp:3}),(0,K.default)(X,36012,{gl2:!0,bpp:4}),(0,K.default)(X,36168,{bpp:1}),(0,K.default)(X,34041,{bpp:4}),(0,K.default)(X,35056,{gl2:!0,bpp:4}),(0,K.default)(X,36013,{gl2:!0,bpp:5}),(0,K.default)(X,32854,{bpp:2}),(0,K.default)(X,36194,{bpp:2}),(0,K.default)(X,32855,{bpp:2}),(0,K.default)(X,33321,{gl2:!0,bpp:1}),(0,K.default)(X,33330,{gl2:!0,bpp:1}),(0,K.default)(X,33329,{gl2:!0,bpp:1}),(0,K.default)(X,33332,{gl2:!0,bpp:2}),(0,K.default)(X,33331,{gl2:!0,bpp:2}),(0,K.default)(X,33334,{gl2:!0,bpp:4}),(0,K.default)(X,33333,{gl2:!0,bpp:4}),(0,K.default)(X,33323,{gl2:!0,bpp:2}),(0,K.default)(X,33336,{gl2:!0,bpp:2}),(0,K.default)(X,33335,{gl2:!0,bpp:2}),(0,K.default)(X,33338,{gl2:!0,bpp:4}),(0,K.default)(X,33337,{gl2:!0,bpp:4}),(0,K.default)(X,33340,{gl2:!0,bpp:8}),(0,K.default)(X,33339,{gl2:!0,bpp:8}),(0,K.default)(X,32849,{gl2:!0,bpp:3}),(0,K.default)(X,32856,{gl2:!0,bpp:4}),(0,K.default)(X,32857,{gl2:!0,bpp:4}),(0,K.default)(X,36220,{gl2:!0,bpp:4}),(0,K.default)(X,36238,{gl2:!0,bpp:4}),(0,K.default)(X,36975,{gl2:!0,bpp:4}),(0,K.default)(X,36214,{gl2:!0,bpp:8}),(0,K.default)(X,36232,{gl2:!0,bpp:8}),(0,K.default)(X,36226,{gl2:!0,bpp:16}),(0,K.default)(X,36208,{gl2:!0,bpp:16}),(0,K.default)(X,33325,{gl2:$t,bpp:2}),(0,K.default)(X,33327,{gl2:$t,bpp:4}),(0,K.default)(X,34842,{gl2:$t,bpp:8}),(0,K.default)(X,33326,{gl2:$t,bpp:4}),(0,K.default)(X,33328,{gl2:$t,bpp:8}),(0,K.default)(X,34836,{gl2:$t,bpp:16}),(0,K.default)(X,35898,{gl2:$t,bpp:4}),X);function e0(t){var r=t0();return function(){var n=(0,Ji.default)(t),a;if(r){var i=(0,Ji.default)(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return(0,nl.default)(this,a)}}function t0(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function r0(t,r,e){var n=e[r];if(!n)return!1;var a=j(t)&&n.gl2||n.gl1;return typeof a=="string"?t.getExtension(a):a}var qt=function(t,r){(0,rl.default)(n,t);var e=e0(n);function n(a){var i;(0,Zc.default)(this,n);var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return i=e.call(this,a,o),i.initialize(o),Object.seal((0,tl.default)(i)),i}return(0,el.default)(n,[{key:r,get:function(){return"Renderbuffer"}},{key:"initialize",value:function(i){var o=i.format,s=i.width,u=s===void 0?1:s,f=i.height,c=f===void 0?1:f,l=i.samples,d=l===void 0?0:l;return M(o,"Needs format"),this._trackDeallocatedMemory(),this.gl.bindRenderbuffer(36161,this.handle),d!==0&&j(this.gl)?this.gl.renderbufferStorageMultisample(36161,d,o,u,c):this.gl.renderbufferStorage(36161,o,u,c),this.format=o,this.width=u,this.height=c,this.samples=d,this._trackAllocatedMemory(this.width*this.height*(this.samples||1)*Vi[this.format].bpp),this}},{key:"resize",value:function(i){var o=i.width,s=i.height;return o!==this.width||s!==this.height?this.initialize({width:o,height:s,format:this.format,samples:this.samples}):this}},{key:"_createHandle",value:function(){return this.gl.createRenderbuffer()}},{key:"_deleteHandle",value:function(){this.gl.deleteRenderbuffer(this.handle),this._trackDeallocatedMemory()}},{key:"_bindHandle",value:function(i){this.gl.bindRenderbuffer(36161,i)}},{key:"_syncHandle",value:function(i){this.format=this.getParameter(36164),this.width=this.getParameter(36162),this.height=this.getParameter(36163),this.samples=this.getParameter(36011)}},{key:"_getParameter",value:function(i){this.gl.bindRenderbuffer(36161,this.handle);var o=this.gl.getRenderbufferParameter(36161,i);return o}}],[{key:"isSupported",value:function(i){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{format:null},s=o.format;return!s||r0(i,s,Vi)}},{key:"getSamplesForFormat",value:function(i,o){var s=o.format;return i.getInternalformatParameter(36161,s,32937)}}]),n}(Ue,Symbol.toStringTag);var ul=m(Qe());var n0=256,a0=1024,i0=16384,al=6144,il=6145,ol=6146,sl=34041,fl="clear: bad arguments";function Yr(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},e=r.framebuffer,n=e===void 0?null:e,a=r.color,i=a===void 0?null:a,o=r.depth,s=o===void 0?null:o,u=r.stencil,f=u===void 0?null:u,c={};n&&(c.framebuffer=n);var l=0;i&&(l|=i0,i!==!0&&(c.clearColor=i)),s&&(l|=n0,s!==!0&&(c.clearDepth=s)),f&&(l|=a0,s!==!0&&(c.clearStencil=s)),M(l!==0,fl),ct(t,c,function(){t.clear(l)})}function Xi(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},e=r.framebuffer,n=e===void 0?null:e,a=r.buffer,i=a===void 0?al:a,o=r.drawBuffer,s=o===void 0?0:o,u=r.value,f=u===void 0?[0,0,0,0]:u;_e(t),ct(t,{framebuffer:n},function(){switch(i){case al:switch(f.constructor){case Int32Array:t.clearBufferiv(i,s,f);break;case Uint32Array:t.clearBufferuiv(i,s,f);break;case Float32Array:default:t.clearBufferfv(i,s,f)}break;case il:t.clearBufferfv(il,0,[f]);break;case ol:t.clearBufferiv(ol,0,[f]);break;case sl:var c=(0,ul.default)(f,2),l=c[0],d=c[1];t.clearBufferfi(sl,0,l,d);break;default:M(!1,fl)}})}function cl(t){switch(t){case 6406:case 33326:case 6403:return 1;case 33328:case 33319:return 2;case 6407:case 34837:return 3;case 6408:case 34836:return 4;default:return M(!1),0}}function o0(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},e=r.sourceX,n=e===void 0?0:e,a=r.sourceY,i=a===void 0?0:a,o=r.sourceFormat,s=o===void 0?6408:o,u=r.sourceAttachment,f=u===void 0?36064:u,c=r.target,l=c===void 0?null:c,d=r.sourceWidth,h=r.sourceHeight,v=r.sourceType,g=s0(t),y=g.framebuffer,A=g.deleteFramebuffer;M(y);var _=y.gl,T=y.handle,B=y.attachments;d=d||y.width,h=h||y.height,f===36064&&T===null&&(f=1028),M(B[f]),v=v||B[f].type,l=u0(l,v,s,d,h),v=v||Kr(l);var x=_.bindFramebuffer(36160,T);return _.readPixels(n,i,d,h,s,v,l),_.bindFramebuffer(36160,x||null),A&&y.delete(),l}function zi(t){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},e=r.sourceAttachment,n=e===void 0?36064:e,a=r.targetMaxHeight,i=a===void 0?Number.MAX_SAFE_INTEGER:a,o=o0(t,{sourceAttachment:n}),s=t.width,u=t.height;u>i;){var f=_c({data:o,width:s,height:u});o=f.data,s=f.width,u=f.height}Ac({data:o,width:s,height:u});var c=document.createElement("canvas");c.width=s,c.height=u;var l=c.getContext("2d"),d=l.createImageData(s,u);return d.data.set(o),l.putImageData(d,0,0),c.toDataURL()}function s0(t){return t instanceof st?{framebuffer:t,deleteFramebuffer:!1}:{framebuffer:ll(t),deleteFramebuffer:!0}}function u0(t,r,e,n,a){if(t)return t;r=r||5121;var i=Dt(r,{clamped:!1}),o=cl(e);return new i(n*a*o)}var ge=m(ae());var ve,ue={WEBGL2:"WEBGL2",VERTEX_ARRAY_OBJECT:"VERTEX_ARRAY_OBJECT",TIMER_QUERY:"TIMER_QUERY",INSTANCED_RENDERING:"INSTANCED_RENDERING",MULTIPLE_RENDER_TARGETS:"MULTIPLE_RENDER_TARGETS",ELEMENT_INDEX_UINT32:"ELEMENT_INDEX_UINT32",BLEND_EQUATION_MINMAX:"BLEND_EQUATION_MINMAX",FLOAT_BLEND:"FLOAT_BLEND",COLOR_ENCODING_SRGB:"COLOR_ENCODING_SRGB",TEXTURE_DEPTH:"TEXTURE_DEPTH",TEXTURE_FLOAT:"TEXTURE_FLOAT",TEXTURE_HALF_FLOAT:"TEXTURE_HALF_FLOAT",TEXTURE_FILTER_LINEAR_FLOAT:"TEXTURE_FILTER_LINEAR_FLOAT",TEXTURE_FILTER_LINEAR_HALF_FLOAT:"TEXTURE_FILTER_LINEAR_HALF_FLOAT",TEXTURE_FILTER_ANISOTROPIC:"TEXTURE_FILTER_ANISOTROPIC",COLOR_ATTACHMENT_RGBA32F:"COLOR_ATTACHMENT_RGBA32F",COLOR_ATTACHMENT_FLOAT:"COLOR_ATTACHMENT_FLOAT",COLOR_ATTACHMENT_HALF_FLOAT:"COLOR_ATTACHMENT_HALF_FLOAT",GLSL_FRAG_DATA:"GLSL_FRAG_DATA",GLSL_FRAG_DEPTH:"GLSL_FRAG_DEPTH",GLSL_DERIVATIVES:"GLSL_DERIVATIVES",GLSL_TEXTURE_LOD:"GLSL_TEXTURE_LOD"};function f0(t){var r=new Qt(t,{format:6408,type:5126,dataFormat:6408}),e=new st(t,{id:"test-framebuffer",check:!1,attachments:(0,ge.default)({},36064,r)}),n=e.getStatus();return r.delete(),e.delete(),n===36053}var Ki=(ve={},(0,ge.default)(ve,ue.WEBGL2,[!1,!0]),(0,ge.default)(ve,ue.VERTEX_ARRAY_OBJECT,["OES_vertex_array_object",!0]),(0,ge.default)(ve,ue.TIMER_QUERY,["EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2"]),(0,ge.default)(ve,ue.INSTANCED_RENDERING,["ANGLE_instanced_arrays",!0]),(0,ge.default)(ve,ue.MULTIPLE_RENDER_TARGETS,["WEBGL_draw_buffers",!0]),(0,ge.default)(ve,ue.ELEMENT_INDEX_UINT32,["OES_element_index_uint",!0]),(0,ge.default)(ve,ue.BLEND_EQUATION_MINMAX,["EXT_blend_minmax",!0]),(0,ge.default)(ve,ue.FLOAT_BLEND,["EXT_float_blend"]),(0,ge.default)(ve,ue.COLOR_ENCODING_SRGB,["EXT_sRGB",!0]),(0,ge.default)(ve,ue.TEXTURE_DEPTH,["WEBGL_depth_texture",!0]),(0,ge.default)(ve,ue.TEXTURE_FLOAT,["OES_texture_float",!0]),(0,ge.default)(ve,ue.TEXTURE_HALF_FLOAT,["OES_texture_half_float",!0]),(0,ge.default)(ve,ue.TEXTURE_FILTER_LINEAR_FLOAT,["OES_texture_float_linear"]),(0,ge.default)(ve,ue.TEXTURE_FILTER_LINEAR_HALF_FLOAT,["OES_texture_half_float_linear"]),(0,ge.default)(ve,ue.TEXTURE_FILTER_ANISOTROPIC,["EXT_texture_filter_anisotropic"]),(0,ge.default)(ve,ue.COLOR_ATTACHMENT_RGBA32F,[f0,"EXT_color_buffer_float"]),(0,ge.default)(ve,ue.COLOR_ATTACHMENT_FLOAT,[!1,"EXT_color_buffer_float"]),(0,ge.default)(ve,ue.COLOR_ATTACHMENT_HALF_FLOAT,["EXT_color_buffer_half_float"]),(0,ge.default)(ve,ue.GLSL_FRAG_DATA,["WEBGL_draw_buffers",!0]),(0,ge.default)(ve,ue.GLSL_FRAG_DEPTH,["EXT_frag_depth",!0]),(0,ge.default)(ve,ue.GLSL_DERIVATIVES,["OES_standard_derivatives",!0]),(0,ge.default)(ve,ue.GLSL_TEXTURE_LOD,["EXT_shader_texture_lod",!0]),ve);function c0(t,r){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=l0(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var n=0,a=function(){};return{s:a,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(f){throw f},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,o=!1,s;return{s:function(){e=e.call(t)},n:function(){var f=e.next();return i=f.done,f},e:function(f){o=!0,s=f},f:function(){try{!i&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function l0(t,r){if(t){if(typeof t=="string")return dl(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return dl(t,r)}}function dl(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}var d0=2;function xr(t,r){return Wi(t,r)}function Wi(t,r){return r=Array.isArray(r)?r:[r],r.every(function(e){return hl(t,e)})}function sa(t){t.luma=t.luma||{},t.luma.caps=t.luma.caps||{};for(var r in Ki)t.luma.caps[r]===void 0&&(t.luma.caps[r]=hl(t,r));return t.luma.caps}function hl(t,r){return t.luma=t.luma||{},t.luma.caps=t.luma.caps||{},t.luma.caps[r]===void 0&&(t.luma.caps[r]=h0(t,r)),t.luma.caps[r]||I.log(d0,"Feature: ".concat(r," not supported"))(),t.luma.caps[r]}function h0(t,r){var e=Ki[r];M(e,r);var n,a=j(t)&&e[1]||e[0];if(typeof a=="function")n=a(t);else if(Array.isArray(a)){n=!0;var i=c0(a),o;try{for(i.s();!(o=i.n()).done;){var s=o.value;n=n&&Boolean(t.getExtension(s))}}catch(u){i.e(u)}finally{i.f()}}else typeof a=="string"?n=Boolean(t.getExtension(a)):typeof a=="boolean"?n=a:M(!1);return n}function ml(t,r){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=m0(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var n=0,a=function(){};return{s:a,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(f){throw f},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,o=!1,s;return{s:function(){e=e.call(t)},n:function(){var f=e.next();return i=f.done,f},e:function(f){o=!0,s=f},f:function(){try{!i&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function m0(t,r){if(t){if(typeof t=="string")return pl(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return pl(t,r)}}function pl(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function p0(t){var r=v0();return function(){var n=(0,ua.default)(t),a;if(r){var i=(0,ua.default)(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return(0,Bl.default)(this,a)}}function v0(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var vl="Multiple render targets not supported",st=function(t,r){(0,El.default)(n,t);var e=p0(n);function n(a){var i;(0,yl.default)(this,n);var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return i=e.call(this,a,o),i.width=null,i.height=null,i.attachments={},i.readBuffer=36064,i.drawBuffers=[36064],i.ownResources=[],i.initialize(o),Object.seal((0,_l.default)(i)),i}return(0,Al.default)(n,[{key:r,get:function(){return"Framebuffer"}},{key:"MAX_COLOR_ATTACHMENTS",get:function(){var i=_e(this.gl);return i.getParameter(i.MAX_COLOR_ATTACHMENTS)}},{key:"MAX_DRAW_BUFFERS",get:function(){var i=_e(this.gl);return i.getParameter(i.MAX_DRAW_BUFFERS)}},{key:"color",get:function(){return this.attachments[36064]||null}},{key:"texture",get:function(){return this.attachments[36064]||null}},{key:"depth",get:function(){return this.attachments[36096]||this.attachments[33306]||null}},{key:"stencil",get:function(){return this.attachments[36128]||this.attachments[33306]||null}},{key:"initialize",value:function(i){var o=i.width,s=o===void 0?1:o,u=i.height,f=u===void 0?1:u,c=i.attachments,l=c===void 0?null:c,d=i.color,h=d===void 0?!0:d,v=i.depth,g=v===void 0?!0:v,y=i.stencil,A=y===void 0?!1:y,_=i.check,T=_===void 0?!0:_,B=i.readBuffer,x=B===void 0?void 0:B,R=i.drawBuffers,L=R===void 0?void 0:R;if(M(s>=0&&f>=0,"Width and height need to be integers"),this.width=s,this.height=f,l)for(var N in l){var P=l[N],G=Array.isArray(P)?P[0]:P;G.resize({width:s,height:f})}else l=this._createDefaultAttachments(h,g,A,s,f);this.update({clearAttachments:!0,attachments:l,readBuffer:x,drawBuffers:L}),l&&T&&this.checkStatus()}},{key:"delete",value:function(){var i=ml(this.ownResources),o;try{for(i.s();!(o=i.n()).done;){var s=o.value;s.delete()}}catch(u){i.e(u)}finally{i.f()}return(0,bl.default)((0,ua.default)(n.prototype),"delete",this).call(this),this}},{key:"update",value:function(i){var o=i.attachments,s=o===void 0?{}:o,u=i.readBuffer,f=i.drawBuffers,c=i.clearAttachments,l=c===void 0?!1:c,d=i.resizeAttachments,h=d===void 0?!0:d;this.attach(s,{clearAttachments:l,resizeAttachments:h});var v=this.gl,g=v.bindFramebuffer(36160,this.handle);return u&&this._setReadBuffer(u),f&&this._setDrawBuffers(f),v.bindFramebuffer(36160,g||null),this}},{key:"resize",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=i.width,s=i.height;if(this.handle===null)return M(o===void 0&&s===void 0),this.width=this.gl.drawingBufferWidth,this.height=this.gl.drawingBufferHeight,this;o===void 0&&(o=this.gl.drawingBufferWidth),s===void 0&&(s=this.gl.drawingBufferHeight),o!==this.width&&s!==this.height&&I.log(2,"Resizing framebuffer ".concat(this.id," to ").concat(o,"x").concat(s))();for(var u in this.attachments)this.attachments[u].resize({width:o,height:s});return this.width=o,this.height=s,this}},{key:"attach",value:function(i){var o=this,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},u=s.clearAttachments,f=u===void 0?!1:u,c=s.resizeAttachments,l=c===void 0?!0:c,d={};f&&Object.keys(this.attachments).forEach(function(N){d[N]=null}),Object.assign(d,i);var h=this.gl.bindFramebuffer(36160,this.handle);for(var v in d){M(v!==void 0,"Misspelled framebuffer binding point?");var g=Number(v),y=d[g],A=y;if(!A)this._unattach(g);else if(A instanceof qt)this._attachRenderbuffer({attachment:g,renderbuffer:A});else if(Array.isArray(y)){var _=(0,gl.default)(y,3),T=_[0],B=_[1],x=B===void 0?0:B,R=_[2],L=R===void 0?0:R;A=T,this._attachTexture({attachment:g,texture:T,layer:x,level:L})}else this._attachTexture({attachment:g,texture:A,layer:0,level:0});l&&A&&A.resize({width:this.width,height:this.height})}this.gl.bindFramebuffer(36160,h||null),Object.assign(this.attachments,i),Object.keys(this.attachments).filter(function(N){return!o.attachments[N]}).forEach(function(N){delete o.attachments[N]})}},{key:"checkStatus",value:function(){var i=this.gl,o=this.getStatus();if(o!==36053)throw new Error(y0(o));return this}},{key:"getStatus",value:function(){var i=this.gl,o=i.bindFramebuffer(36160,this.handle),s=i.checkFramebufferStatus(36160);return i.bindFramebuffer(36160,o||null),s}},{key:"clear",value:function(){var i=this,o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=o.color,u=o.depth,f=o.stencil,c=o.drawBuffers,l=c===void 0?[]:c,d=this.gl.bindFramebuffer(36160,this.handle);return(s||u||f)&&Yr(this.gl,{color:s,depth:u,stencil:f}),l.forEach(function(h,v){Xi(i.gl,{drawBuffer:v,value:h})}),this.gl.bindFramebuffer(36160,d||null),this}},{key:"readPixels",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return I.error("Framebuffer.readPixels() is no logner supported, use readPixelsToArray(framebuffer)")(),null}},{key:"readPixelsToBuffer",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return I.error("Framebuffer.readPixelsToBuffer()is no logner supported, use readPixelsToBuffer(framebuffer)")(),null}},{key:"copyToDataUrl",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return I.error("Framebuffer.copyToDataUrl() is no logner supported, use copyToDataUrl(framebuffer)")(),null}},{key:"copyToImage",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return I.error("Framebuffer.copyToImage() is no logner supported, use copyToImage(framebuffer)")(),null}},{key:"copyToTexture",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return I.error("Framebuffer.copyToTexture({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}},{key:"blit",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return I.error("Framebuffer.blit({...}) is no logner supported, use blit(source, target, opts)")(),null}},{key:"invalidate",value:function(i){var o=i.attachments,s=o===void 0?[]:o,u=i.x,f=u===void 0?0:u,c=i.y,l=c===void 0?0:c,d=i.width,h=i.height,v=_e(this.gl),g=v.bindFramebuffer(36008,this.handle),y=f===0&&l===0&&d===void 0&&h===void 0;return y?v.invalidateFramebuffer(36008,s):v.invalidateFramebuffer(36008,s,f,l,d,h),v.bindFramebuffer(36008,g),this}},{key:"getAttachmentParameter",value:function(i,o,s){var u=this._getAttachmentParameterFallback(o);return u===null&&(this.gl.bindFramebuffer(36160,this.handle),u=this.gl.getFramebufferAttachmentParameter(36160,i,o),this.gl.bindFramebuffer(36160,null)),s&&u>1e3&&(u=ot(this.gl,u)),u}},{key:"getAttachmentParameters",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:36064,o=arguments.length>1?arguments[1]:void 0,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.constructor.ATTACHMENT_PARAMETERS||[],u={},f=ml(s),c;try{for(f.s();!(c=f.n()).done;){var l=c.value,d=o?ot(this.gl,l):l;u[d]=this.getAttachmentParameter(i,l,o)}}catch(h){f.e(h)}finally{f.f()}return u}},{key:"getParameters",value:function(){for(var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,o=Object.keys(this.attachments),s={},u=0,f=o;u<f.length;u++){var c=f[u],l=Number(c),d=i?ot(this.gl,l):l;s[d]=this.getAttachmentParameters(l,i)}return s}},{key:"show",value:function(){return typeof window<"u"&&window.open(zi(this),"luma-debug-texture"),this}},{key:"log",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if(i>I.level||typeof window>"u")return this;o=o||"Framebuffer ".concat(this.id);var s=zi(this,{targetMaxHeight:100});return I.image({logLevel:i,message:o,image:s},o)(),this}},{key:"bind",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=i.target,s=o===void 0?36160:o;return this.gl.bindFramebuffer(s,this.handle),this}},{key:"unbind",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=i.target,s=o===void 0?36160:o;return this.gl.bindFramebuffer(s,null),this}},{key:"_createDefaultAttachments",value:function(i,o,s,u,f){var c=null;if(i){var l;c=c||{},c[36064]=new Qt(this.gl,{id:"".concat(this.id,"-color0"),pixels:null,format:6408,type:5121,width:u,height:f,mipmaps:!1,parameters:(l={},(0,Qr.default)(l,10241,9729),(0,Qr.default)(l,10240,9729),(0,Qr.default)(l,10242,33071),(0,Qr.default)(l,10243,33071),l)}),this.ownResources.push(c[36064])}return o&&s?(c=c||{},c[33306]=new qt(this.gl,{id:"".concat(this.id,"-depth-stencil"),format:35056,width:u,height:111}),this.ownResources.push(c[33306])):o?(c=c||{},c[36096]=new qt(this.gl,{id:"".concat(this.id,"-depth"),format:33189,width:u,height:f}),this.ownResources.push(c[36096])):s&&M(!1),c}},{key:"_unattach",value:function(i){var o=this.attachments[i];o&&(o instanceof qt?this.gl.framebufferRenderbuffer(36160,i,36161,null):this.gl.framebufferTexture2D(36160,i,3553,null,0),delete this.attachments[i])}},{key:"_attachRenderbuffer",value:function(i){var o=i.attachment,s=o===void 0?36064:o,u=i.renderbuffer,f=this.gl;f.framebufferRenderbuffer(36160,s,36161,u.handle),this.attachments[s]=u}},{key:"_attachTexture",value:function(i){var o=i.attachment,s=o===void 0?36064:o,u=i.texture,f=i.layer,c=i.level,l=this.gl;switch(l.bindTexture(u.target,u.handle),u.target){case 35866:case 32879:var d=_e(l);d.framebufferTextureLayer(36160,s,u.target,c,f);break;case 34067:var h=g0(f);l.framebufferTexture2D(36160,s,h,u.handle,c);break;case 3553:l.framebufferTexture2D(36160,s,3553,u.handle,c);break;default:M(!1,"Illegal texture type")}l.bindTexture(u.target,null),this.attachments[s]=u}},{key:"_setReadBuffer",value:function(i){var o=Si(this.gl);o?o.readBuffer(i):M(i===36064||i===1029,vl),this.readBuffer=i}},{key:"_setDrawBuffers",value:function(i){var o=this.gl,s=_e(o);if(s)s.drawBuffers(i);else{var u=o.getExtension("WEBGL_draw_buffers");u?u.drawBuffersWEBGL(i):M(i.length===1&&(i[0]===36064||i[0]===1029),vl)}this.drawBuffers=i}},{key:"_getAttachmentParameterFallback",value:function(i){var o=sa(this.gl);switch(i){case 36052:return o.WEBGL2?null:0;case 33298:case 33299:case 33300:case 33301:case 33302:case 33303:return o.WEBGL2?null:8;case 33297:return o.WEBGL2?null:5125;case 33296:return!o.WEBGL2&&!o.EXT_sRGB?9729:null;default:return null}}},{key:"_createHandle",value:function(){return this.gl.createFramebuffer()}},{key:"_deleteHandle",value:function(){this.gl.deleteFramebuffer(this.handle)}},{key:"_bindHandle",value:function(i){return this.gl.bindFramebuffer(36160,i)}}],[{key:"isSupported",value:function(i){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=o.colorBufferFloat,u=o.colorBufferHalfFloat,f=!0;return s&&(f=Boolean(i.getExtension("EXT_color_buffer_float")||i.getExtension("WEBGL_color_buffer_float")||i.getExtension("OES_texture_float"))),u&&(f=f&&Boolean(i.getExtension("EXT_color_buffer_float")||i.getExtension("EXT_color_buffer_half_float"))),f}},{key:"getDefaultFramebuffer",value:function(i){return i.luma=i.luma||{},i.luma.defaultFramebuffer=i.luma.defaultFramebuffer||new n(i,{id:"default-framebuffer",handle:null,attachments:{}}),i.luma.defaultFramebuffer}}]),n}(Ue,Symbol.toStringTag);function g0(t){return t<34069?t+34069:t}function y0(t){var r=st.STATUS||{};return r[t]||"Framebuffer error ".concat(t)}var A0=[36049,36048,33296,33298,33299,33300,33301,33302,33303];st.ATTACHMENT_PARAMETERS=A0;function ll(t,r){var e=t.gl,n=t.width,a=t.height,i=t.id,o=new st(e,Object.assign({},r,{id:"framebuffer-for-".concat(i),width:n,height:a,attachments:(0,xl.default)({},36064,t)}));return o}var fa=m(Y()),ca=m(Q()),la=m(He()),Sl=m(je()),$i=m(ke());function Pt(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"unnamed",e=/#define[\s*]SHADER_NAME[\s*]([A-Za-z0-9_-]+)[\s*]/,n=t.match(e);return n?n[1]:r}var _0=35632,b0=35633;function Yi(t){switch(t){case _0:return"fragment";case b0:return"vertex";default:return"unknown type"}}function Qi(t,r,e,n){for(var a=t.split(/\r?\n/),i={},o={},s=n||Pt(r)||"(unnamed)",u="".concat(Yi(e)," shader ").concat(s),f=0;f<a.length;f++){var c=a[f];if(!(c.length<=1)){var l=c.split(":"),d=l[0],h=parseInt(l[2],10);if(isNaN(h))throw new Error("GLSL compilation error in ".concat(u,": ").concat(t));d!=="WARNING"?i[h]=c:o[h]=c}}var v=E0(r);return{shaderName:u,errors:Tl(i,v),warnings:Tl(o,v)}}function Tl(t,r){for(var e="",n=0;n<r.length;n++){var a=r[n];if(!(!t[n+3]&&!t[n+2]&&!t[n+1])&&(e+="".concat(a,`
`),t[n+1])){var i=t[n+1],o=i.split(":",3),s=o[0],u=parseInt(o[1],10)||0,f=i.substring(o.join(":").length+1).trim();e+=Cl("^^^ ".concat(s,": ").concat(f,`

`),u)}}return e}function E0(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:": ",n=t.split(/\r?\n/),a=String(n.length+r-1).length;return n.map(function(i,o){var s=String(o+r),u=s.length,f=Cl(s,a-u);return f+e+i})}function Cl(t,r){for(var e="",n=0;n<r;++n)e+=" ";return"".concat(e).concat(t)}function qi(t){var r=B0();return function(){var n=(0,$i.default)(t),a;if(r){var i=(0,$i.default)(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return(0,Sl.default)(this,a)}}function B0(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var x0="Shader: GLSL source code must be a JavaScript string",Ml=function(t,r){(0,la.default)(n,t);var e=qi(n);function n(a,i){var o;(0,fa.default)(this,n),Kt(a),M(typeof i.source=="string",x0);var s=Pt(i.source,null)||i.id||Ve("unnamed ".concat(n.getTypeName(i.shaderType)));return o=e.call(this,a,{id:s}),o.shaderType=i.shaderType,o.source=i.source,o.initialize(i),o}return(0,ca.default)(n,[{key:r,get:function(){return"Shader"}},{key:"initialize",value:function(i){var o=i.source,s=Pt(o,null);s&&(this.id=Ve(s)),this._compile(o)}},{key:"getParameter",value:function(i){return this.gl.getShaderParameter(this.handle,i)}},{key:"toString",value:function(){return"".concat(n.getTypeName(this.shaderType),":").concat(this.id)}},{key:"getName",value:function(){return Pt(this.source)||"unnamed-shader"}},{key:"getSource",value:function(){return this.gl.getShaderSource(this.handle)}},{key:"getTranslatedSource",value:function(){var i=this.gl.getExtension("WEBGL_debug_shaders");return i?i.getTranslatedShaderSource(this.handle):"No translated source available. WEBGL_debug_shaders not implemented"}},{key:"_compile",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.source;i.startsWith("#version ")||(i=`#version 100
`.concat(i)),this.source=i,this.gl.shaderSource(this.handle,this.source),this.gl.compileShader(this.handle);var o=this.getParameter(35713);if(!o){var s=this.gl.getShaderInfoLog(this.handle),u=Qi(s,this.source,this.shaderType,this.id),f=u.shaderName,c=u.errors,l=u.warnings;throw I.error("GLSL compilation errors in ".concat(f,`
`).concat(c))(),I.warn("GLSL compilation warnings in ".concat(f,`
`).concat(l))(),new Error("GLSL compilation errors in ".concat(f))}}},{key:"_deleteHandle",value:function(){this.gl.deleteShader(this.handle)}},{key:"_getOptsFromHandle",value:function(){return{type:this.getParameter(35663),source:this.getSource()}}}],[{key:"getTypeName",value:function(i){switch(i){case 35633:return"vertex-shader";case 35632:return"fragment-shader";default:return M(!1),"unknown"}}}]),n}(Ue,Symbol.toStringTag),da=function(t,r){(0,la.default)(n,t);var e=qi(n);function n(a,i){return(0,fa.default)(this,n),typeof i=="string"&&(i={source:i}),e.call(this,a,Object.assign({},i,{shaderType:35633}))}return(0,ca.default)(n,[{key:r,get:function(){return"VertexShader"}},{key:"_createHandle",value:function(){return this.gl.createShader(35633)}}]),n}(Ml,Symbol.toStringTag),ha=function(t,r){(0,la.default)(n,t);var e=qi(n);function n(a,i){return(0,fa.default)(this,n),typeof i=="string"&&(i={source:i}),e.call(this,a,Object.assign({},i,{shaderType:35632}))}return(0,ca.default)(n,[{key:r,get:function(){return"FragmentShader"}},{key:"_createHandle",value:function(){return this.gl.createShader(35632)}}]),n}(Ml,Symbol.toStringTag);var Nl=m(Y()),Hl=m(Q()),jl=m(nt()),Vl=m(wt()),Jl=m(He()),Xl=m(je()),ya=m(ke());var z=m(ae());var J,T0=(J={},(0,z.default)(J,5126,pe.bind(null,"uniform1fv",qe,1,Ne)),(0,z.default)(J,35664,pe.bind(null,"uniform2fv",qe,2,Ne)),(0,z.default)(J,35665,pe.bind(null,"uniform3fv",qe,3,Ne)),(0,z.default)(J,35666,pe.bind(null,"uniform4fv",qe,4,Ne)),(0,z.default)(J,5124,pe.bind(null,"uniform1iv",Gt,1,Ne)),(0,z.default)(J,35667,pe.bind(null,"uniform2iv",Gt,2,Ne)),(0,z.default)(J,35668,pe.bind(null,"uniform3iv",Gt,3,Ne)),(0,z.default)(J,35669,pe.bind(null,"uniform4iv",Gt,4,Ne)),(0,z.default)(J,35670,pe.bind(null,"uniform1iv",Gt,1,Ne)),(0,z.default)(J,35671,pe.bind(null,"uniform2iv",Gt,2,Ne)),(0,z.default)(J,35672,pe.bind(null,"uniform3iv",Gt,3,Ne)),(0,z.default)(J,35673,pe.bind(null,"uniform4iv",Gt,4,Ne)),(0,z.default)(J,35674,pe.bind(null,"uniformMatrix2fv",qe,4,Ct)),(0,z.default)(J,35675,pe.bind(null,"uniformMatrix3fv",qe,9,Ct)),(0,z.default)(J,35676,pe.bind(null,"uniformMatrix4fv",qe,16,Ct)),(0,z.default)(J,35678,we),(0,z.default)(J,35680,we),(0,z.default)(J,5125,pe.bind(null,"uniform1uiv",ma,1,Ne)),(0,z.default)(J,36294,pe.bind(null,"uniform2uiv",ma,2,Ne)),(0,z.default)(J,36295,pe.bind(null,"uniform3uiv",ma,3,Ne)),(0,z.default)(J,36296,pe.bind(null,"uniform4uiv",ma,4,Ne)),(0,z.default)(J,35685,pe.bind(null,"uniformMatrix2x3fv",qe,6,Ct)),(0,z.default)(J,35686,pe.bind(null,"uniformMatrix2x4fv",qe,8,Ct)),(0,z.default)(J,35687,pe.bind(null,"uniformMatrix3x2fv",qe,6,Ct)),(0,z.default)(J,35688,pe.bind(null,"uniformMatrix3x4fv",qe,12,Ct)),(0,z.default)(J,35689,pe.bind(null,"uniformMatrix4x2fv",qe,8,Ct)),(0,z.default)(J,35690,pe.bind(null,"uniformMatrix4x3fv",qe,12,Ct)),(0,z.default)(J,35678,we),(0,z.default)(J,35680,we),(0,z.default)(J,35679,we),(0,z.default)(J,35682,we),(0,z.default)(J,36289,we),(0,z.default)(J,36292,we),(0,z.default)(J,36293,we),(0,z.default)(J,36298,we),(0,z.default)(J,36299,we),(0,z.default)(J,36300,we),(0,z.default)(J,36303,we),(0,z.default)(J,36306,we),(0,z.default)(J,36307,we),(0,z.default)(J,36308,we),(0,z.default)(J,36311,we),J),C0={},S0={},M0={},Rl=[0];function Zi(t,r,e,n){r===1&&typeof t=="boolean"&&(t=t?1:0),Number.isFinite(t)&&(Rl[0]=t,t=Rl);var a=t.length;if(a%r&&I.warn("Uniform size should be multiples of ".concat(r),t)(),t instanceof e)return t;var i=n[a];i||(i=new e(a),n[a]=i);for(var o=0;o<a;o++)i[o]=t[o];return i}function qe(t,r){return Zi(t,r,Float32Array,C0)}function Gt(t,r){return Zi(t,r,Int32Array,S0)}function ma(t,r){return Zi(t,r,Uint32Array,M0)}function eo(t,r,e){var n=T0[e.type];if(!n)throw new Error("Unknown GLSL uniform type ".concat(e.type));return n().bind(null,t,r)}function Il(t){if(t[t.length-1]!=="]")return{name:t,length:1,isArray:!1};var r=/([^[]*)(\[[0-9]+\])?/,e=t.match(r);if(!e||e.length<2)throw new Error("Failed to parse GLSL uniform name ".concat(t));return{name:e[1],length:e[2]||1,isArray:Boolean(e[2])}}function Ol(t,r,e){for(var n in t){var a=t[n],i=!e||Boolean(e[n]);if(i&&!R0(a))throw r=r?"".concat(r," "):"",console.error("".concat(r," Bad uniform ").concat(n),a),new Error("".concat(r," Bad uniform ").concat(n))}return!0}function R0(t){return Array.isArray(t)||ArrayBuffer.isView(t)?I0(t):isFinite(t)||t===!0||t===!1||t instanceof Yt||t instanceof qt?!0:t instanceof st?Boolean(t.texture):!1}function wl(t,r,e){if(Array.isArray(e)||ArrayBuffer.isView(e))if(t[r])for(var n=t[r],a=0,i=e.length;a<i;++a)n[a]=e[a];else t[r]=e.slice();else t[r]=e}function I0(t){if(t.length===0)return!1;for(var r=Math.min(t.length,16),e=0;e<r;++e)if(!Number.isFinite(t[e]))return!1;return!0}function we(){var t=null;return function(r,e,n){var a=t!==n;return a&&(r.uniform1i(e,n),t=n),a}}function pe(t,r,e,n){var a=null,i=null;return function(o,s,u){var f=r(u,e),c=f.length,l=!1;if(a===null)a=new Float32Array(c),i=c,l=!0;else{M(i===c,"Uniform length cannot change.");for(var d=0;d<c;++d)if(f[d]!==a[d]){l=!0;break}}return l&&(n(o,t,s,f),a.set(f)),l}}function Ne(t,r,e,n){t[r](e,n)}function Ct(t,r,e,n){t[r](e,!1,n)}var Dl=m(Y()),Pl=m(Q());var ro=m(Qe()),he=m(ae());var fe,O0=5120,w0=5121,F0=5122,L0=5123,Fl=0,pa=1,D0=2,P0=3,va=4,G0=5,k0=6,Me=5126,U0=35664,N0=35665,H0=35666,$r=5124,j0=35667,V0=35668,J0=35669,qr=5125,X0=36294,z0=36295,K0=36296,W0=35670,Y0=35671,Q0=35672,$0=35673,q0=35674,Z0=35675,e_=35676,t_=35685,r_=35686,n_=35687,a_=35688,i_=35689,o_=35690,to=(fe={},(0,he.default)(fe,Me,[Me,1,"float"]),(0,he.default)(fe,U0,[Me,2,"vec2"]),(0,he.default)(fe,N0,[Me,3,"vec3"]),(0,he.default)(fe,H0,[Me,4,"vec4"]),(0,he.default)(fe,$r,[$r,1,"int"]),(0,he.default)(fe,j0,[$r,2,"ivec2"]),(0,he.default)(fe,V0,[$r,3,"ivec3"]),(0,he.default)(fe,J0,[$r,4,"ivec4"]),(0,he.default)(fe,qr,[qr,1,"uint"]),(0,he.default)(fe,X0,[qr,2,"uvec2"]),(0,he.default)(fe,z0,[qr,3,"uvec3"]),(0,he.default)(fe,K0,[qr,4,"uvec4"]),(0,he.default)(fe,W0,[Me,1,"bool"]),(0,he.default)(fe,Y0,[Me,2,"bvec2"]),(0,he.default)(fe,Q0,[Me,3,"bvec3"]),(0,he.default)(fe,$0,[Me,4,"bvec4"]),(0,he.default)(fe,q0,[Me,8,"mat2"]),(0,he.default)(fe,t_,[Me,8,"mat2x3"]),(0,he.default)(fe,r_,[Me,8,"mat2x4"]),(0,he.default)(fe,Z0,[Me,12,"mat3"]),(0,he.default)(fe,n_,[Me,12,"mat3x2"]),(0,he.default)(fe,a_,[Me,12,"mat3x4"]),(0,he.default)(fe,e_,[Me,16,"mat4"]),(0,he.default)(fe,i_,[Me,16,"mat4x2"]),(0,he.default)(fe,o_,[Me,16,"mat4x3"]),fe);function Ll(t){switch(t){case Fl:return Fl;case pa:return pa;case P0:return pa;case D0:return pa;case va:return va;case G0:return va;case k0:return va;default:return M(!1),0}}function no(t){var r=to[t];if(!r)return null;var e=(0,ro.default)(r,2),n=e[0],a=e[1];return{type:n,components:a}}function ga(t,r){switch(t){case O0:case w0:case F0:case L0:t=Me;break;default:}for(var e in to){var n=(0,ro.default)(to[e],3),a=n[0],i=n[1],o=n[2];if(a===t&&i===r)return{glType:e,name:o}}return null}var Gl=function(){function t(r){(0,Dl.default)(this,t),this.id=r.id,this.attributeInfos=[],this.attributeInfosByName={},this.attributeInfosByLocation=[],this.varyingInfos=[],this.varyingInfosByName={},Object.seal(this),this._readAttributesFromProgram(r),this._readVaryingsFromProgram(r)}return(0,Pl.default)(t,[{key:"getAttributeInfo",value:function(e){var n=Number(e);return Number.isFinite(n)?this.attributeInfosByLocation[n]:this.attributeInfosByName[e]||null}},{key:"getAttributeLocation",value:function(e){var n=this.getAttributeInfo(e);return n?n.location:-1}},{key:"getAttributeAccessor",value:function(e){var n=this.getAttributeInfo(e);return n?n.accessor:null}},{key:"getVaryingInfo",value:function(e){var n=Number(e);return Number.isFinite(n)?this.varyingInfos[n]:this.varyingInfosByName[e]||null}},{key:"getVaryingIndex",value:function(e){var n=this.getVaryingInfo();return n?n.location:-1}},{key:"getVaryingAccessor",value:function(e){var n=this.getVaryingInfo();return n?n.accessor:null}},{key:"_readAttributesFromProgram",value:function(e){for(var n=e.gl,a=n.getProgramParameter(e.handle,35721),i=0;i<a;i++){var o=n.getActiveAttrib(e.handle,i),s=o.name,u=o.type,f=o.size,c=n.getAttribLocation(e.handle,s);c>=0&&this._addAttribute(c,s,u,f)}this.attributeInfos.sort(function(l,d){return l.location-d.location})}},{key:"_readVaryingsFromProgram",value:function(e){var n=e.gl;if(j(n)){for(var a=n.getProgramParameter(e.handle,35971),i=0;i<a;i++){var o=n.getTransformFeedbackVarying(e.handle,i),s=o.name,u=o.type,f=o.size;this._addVarying(i,s,u,f)}this.varyingInfos.sort(function(c,l){return c.location-l.location})}}},{key:"_addAttribute",value:function(e,n,a,i){var o=no(a),s=o.type,u=o.components,f={type:s,size:i*u};this._inferProperties(e,n,f);var c={location:e,name:n,accessor:new Je(f)};this.attributeInfos.push(c),this.attributeInfosByLocation[e]=c,this.attributeInfosByName[c.name]=c}},{key:"_inferProperties",value:function(e,n,a){/instance/i.test(n)&&(a.divisor=1)}},{key:"_addVarying",value:function(e,n,a,i){var o=no(a),s=o.type,u=o.components,f=new Je({type:s,size:i*u}),c={location:e,name:n,accessor:f};this.varyingInfos.push(c),this.varyingInfosByName[c.name]=c}}]),t}();function s_(t,r){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=u_(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var n=0,a=function(){};return{s:a,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(f){throw f},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,o=!1,s;return{s:function(){e=e.call(t)},n:function(){var f=e.next();return i=f.done,f},e:function(f){o=!0,s=f},f:function(){try{!i&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function u_(t,r){if(t){if(typeof t=="string")return kl(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return kl(t,r)}}function kl(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function f_(t){var r=c_();return function(){var n=(0,ya.default)(t),a;if(r){var i=(0,ya.default)(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return(0,Xl.default)(this,a)}}function c_(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Ul=4,l_=35981,d_=["setVertexArray","setAttributes","setBuffers","unsetBuffers","use","getUniformCount","getUniformInfo","getUniformLocation","getUniformValue","getVarying","getFragDataLocation","getAttachedShaders","getAttributeCount","getAttributeLocation","getAttributeInfo"],Zr=function(t,r){(0,Jl.default)(n,t);var e=f_(n);function n(a){var i;(0,Nl.default)(this,n);var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return i=e.call(this,a,o),i.stubRemovedMethods("Program","v6.0",d_),i._isCached=!1,i.initialize(o),Object.seal((0,jl.default)(i)),i._setId(o.id),i}return(0,Hl.default)(n,[{key:r,get:function(){return"Program"}},{key:"initialize",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=i.hash,s=i.vs,u=i.fs,f=i.varyings,c=i.bufferMode,l=c===void 0?l_:c;return this.hash=o||"",this.vs=typeof s=="string"?new da(this.gl,{id:"".concat(i.id,"-vs"),source:s}):s,this.fs=typeof u=="string"?new ha(this.gl,{id:"".concat(i.id,"-fs"),source:u}):u,M(this.vs instanceof da),M(this.fs instanceof ha),this.uniforms={},this._textureUniforms={},f&&f.length>0&&(_e(this.gl),this.varyings=f,this.gl2.transformFeedbackVaryings(this.handle,f,l)),this._compileAndLink(),this._readUniformLocationsFromLinkedProgram(),this.configuration=new Gl(this),this.setProps(i)}},{key:"delete",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this._isCached?this:(0,Vl.default)((0,ya.default)(n.prototype),"delete",this).call(this,i)}},{key:"setProps",value:function(i){return"uniforms"in i&&this.setUniforms(i.uniforms),this}},{key:"draw",value:function(i){var o=this,s=i.logPriority,u=i.drawMode,f=u===void 0?4:u,c=i.vertexCount,l=i.offset,d=l===void 0?0:l,h=i.start,v=i.end,g=i.isIndexed,y=g===void 0?!1:g,A=i.indexType,_=A===void 0?5123:A,T=i.instanceCount,B=T===void 0?0:T,x=i.isInstanced,R=x===void 0?B>0:x,L=i.vertexArray,N=L===void 0?null:L,P=i.transformFeedback,G=i.framebuffer,H=i.parameters,F=H===void 0?{}:H,V=i.uniforms,k=i.samplers;if((V||k)&&(I.deprecated("Program.draw({uniforms})","Program.setUniforms(uniforms)")(),this.setUniforms(V||{})),I.priority>=s){var E=G?G.id:"default",b="mode=".concat(ot(this.gl,f)," verts=").concat(c," ")+"instances=".concat(B," indexType=").concat(ot(this.gl,_)," ")+"isInstanced=".concat(R," isIndexed=").concat(y," ")+"Framebuffer=".concat(E);I.log(s,b)()}return M(N),this.gl.useProgram(this.handle),!this._areTexturesRenderable()||c===0||R&&B===0?!1:(N.bindForDraw(c,B,function(){if(G!==void 0&&(F=Object.assign({},F,{framebuffer:G})),P){var C=Ll(f);P.begin(C)}o._bindTextures(),ct(o.gl,F,function(){y&&R?o.gl2.drawElementsInstanced(f,c,_,d,B):y&&j(o.gl)&&!isNaN(h)&&!isNaN(v)?o.gl2.drawRangeElements(f,h,v,c,_,d):y?o.gl.drawElements(f,c,_,d):R?o.gl2.drawArraysInstanced(f,d,c,B):o.gl.drawArrays(f,d,c)}),P&&P.end()}),!0)}},{key:"setUniforms",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};I.priority>=2&&Ol(i,this.id,this._uniformSetters),this.gl.useProgram(this.handle);for(var o in i){var s=i[o],u=this._uniformSetters[o];if(u){var f=s,c=!1;if(f instanceof st&&(f=f.texture),f instanceof Yt)if(c=this.uniforms[o]!==s,c){u.textureIndex===void 0&&(u.textureIndex=this._textureIndexCounter++);var l=f,d=u.textureIndex;l.bind(d),f=d,this._textureUniforms[o]=l}else f=u.textureIndex;else this._textureUniforms[o]&&delete this._textureUniforms[o];(u(f)||c)&&wl(this.uniforms,o,s)}}return this}},{key:"_areTexturesRenderable",value:function(){var i=!0;for(var o in this._textureUniforms){var s=this._textureUniforms[o];s.update(),i=i&&s.loaded}return i}},{key:"_bindTextures",value:function(){for(var i in this._textureUniforms){var o=this._uniformSetters[i].textureIndex;this._textureUniforms[i].bind(o)}}},{key:"_createHandle",value:function(){return this.gl.createProgram()}},{key:"_deleteHandle",value:function(){this.gl.deleteProgram(this.handle)}},{key:"_getOptionsFromHandle",value:function(i){var o=this.gl.getAttachedShaders(i),s={},u=s_(o),f;try{for(u.s();!(f=u.n()).done;){var c=f.value,l=this.gl.getShaderParameter(this.handle,35663);switch(l){case 35633:s.vs=new da({handle:c});break;case 35632:s.fs=new ha({handle:c});break;default:}}}catch(d){u.e(d)}finally{u.f()}return s}},{key:"_getParameter",value:function(i){return this.gl.getProgramParameter(this.handle,i)}},{key:"_setId",value:function(i){if(!i){var o=this._getName();this.id=Ve(o)}}},{key:"_getName",value:function(){var i=this.vs.getName()||this.fs.getName();return i=i.replace(/shader/i,""),i=i?"".concat(i,"-program"):"program",i}},{key:"_compileAndLink",value:function(){var i=this.gl;if(i.attachShader(this.handle,this.vs.handle),i.attachShader(this.handle,this.fs.handle),I.time(Ul,"linkProgram for ".concat(this._getName()))(),i.linkProgram(this.handle),I.timeEnd(Ul,"linkProgram for ".concat(this._getName()))(),i.debug||I.level>0){var o=i.getProgramParameter(this.handle,35714);if(!o)throw new Error("Error linking: ".concat(i.getProgramInfoLog(this.handle)));i.validateProgram(this.handle);var s=i.getProgramParameter(this.handle,35715);if(!s)throw new Error("Error validating: ".concat(i.getProgramInfoLog(this.handle)))}}},{key:"_readUniformLocationsFromLinkedProgram",value:function(){var i=this.gl;this._uniformSetters={},this._uniformCount=this._getParameter(35718);for(var o=0;o<this._uniformCount;o++){var s=this.gl.getActiveUniform(this.handle,o),u=Il(s.name),f=u.name,c=i.getUniformLocation(this.handle,f);if(this._uniformSetters[f]=eo(i,c,s),s.size>1)for(var l=0;l<s.size;l++)c=i.getUniformLocation(this.handle,"".concat(f,"[").concat(l,"]")),this._uniformSetters["".concat(f,"[").concat(l,"]")]=eo(i,c,s)}this._textureIndexCounter=0}},{key:"getActiveUniforms",value:function(i,o){return this.gl2.getActiveUniforms(this.handle,i,o)}},{key:"getUniformBlockIndex",value:function(i){return this.gl2.getUniformBlockIndex(this.handle,i)}},{key:"getActiveUniformBlockParameter",value:function(i,o){return this.gl2.getActiveUniformBlockParameter(this.handle,i,o)}},{key:"uniformBlockBinding",value:function(i,o){this.gl2.uniformBlockBinding(this.handle,i,o)}}]),n}(Ue,Symbol.toStringTag);var zl=m(Y()),Kl=m(Q()),Wl=m(nt()),Yl=m(He()),Ql=m(je()),ao=m(ke());function h_(t){var r=m_();return function(){var n=(0,ao.default)(t),a;if(r){var i=(0,ao.default)(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return(0,Ql.default)(this,a)}}function m_(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var io=function(t,r){(0,Yl.default)(n,t);var e=h_(n);function n(a){var i;(0,zl.default)(this,n);var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return _e(a),i=e.call(this,a,o),i.initialize(o),i.stubRemovedMethods("TransformFeedback","v6.0",["pause","resume"]),Object.seal((0,Wl.default)(i)),i}return(0,Kl.default)(n,[{key:r,get:function(){return"TransformFeedback"}},{key:"initialize",value:function(){var i=this,o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.buffers={},this.unused={},this.configuration=null,this.bindOnUse=!0,Er(this.buffers)||this.bind(function(){return i._unbindBuffers()}),this.setProps(o),this}},{key:"setProps",value:function(i){"program"in i&&(this.configuration=i.program&&i.program.configuration),"configuration"in i&&(this.configuration=i.configuration),"bindOnUse"in i&&(i=i.bindOnUse),"buffers"in i&&this.setBuffers(i.buffers)}},{key:"setBuffers",value:function(){var i=this,o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.bind(function(){for(var s in o)i.setBuffer(s,o[s])}),this}},{key:"setBuffer",value:function(i,o){var s=this._getVaryingIndex(i),u=this._getBufferParams(o),f=u.buffer,c=u.byteSize,l=u.byteOffset;return s<0?(this.unused[i]=f,I.warn("".concat(this.id," unused varying buffer ").concat(i))(),this):(this.buffers[s]=o,this.bindOnUse||this._bindBuffer(s,f,l,c),this)}},{key:"begin",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return this.gl.bindTransformFeedback(36386,this.handle),this._bindBuffers(),this.gl.beginTransformFeedback(i),this}},{key:"end",value:function(){return this.gl.endTransformFeedback(),this._unbindBuffers(),this.gl.bindTransformFeedback(36386,null),this}},{key:"_getBufferParams",value:function(i){var o,s,u;return i instanceof me?u=i:(u=i.buffer,s=i.byteSize,o=i.byteOffset),(o!==void 0||s!==void 0)&&(o=o||0,s=s||u.byteLength-o),{buffer:u,byteOffset:o,byteSize:s}}},{key:"_getVaryingInfo",value:function(i){return this.configuration&&this.configuration.getVaryingInfo(i)}},{key:"_getVaryingIndex",value:function(i){if(this.configuration)return this.configuration.getVaryingInfo(i).location;var o=Number(i);return Number.isFinite(o)?o:-1}},{key:"_bindBuffers",value:function(){if(this.bindOnUse)for(var i in this.buffers){var o=this._getBufferParams(this.buffers[i]),s=o.buffer,u=o.byteSize,f=o.byteOffset;this._bindBuffer(i,s,f,u)}}},{key:"_unbindBuffers",value:function(){if(this.bindOnUse)for(var i in this.buffers)this._bindBuffer(i,null)}},{key:"_bindBuffer",value:function(i,o){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,u=arguments.length>3?arguments[3]:void 0,f=o&&o.handle;return!f||u===void 0?this.gl.bindBufferBase(35982,i,f):this.gl.bindBufferRange(35982,i,f,s,u),this}},{key:"_createHandle",value:function(){return this.gl.createTransformFeedback()}},{key:"_deleteHandle",value:function(){this.gl.deleteTransformFeedback(this.handle)}},{key:"_bindHandle",value:function(i){this.gl.bindTransformFeedback(36386,this.handle)}}],[{key:"isSupported",value:function(i){return j(i)}}]),n}(Ue,Symbol.toStringTag);var Zl=m(Y()),ed=m(Q()),td=m(nt()),rd=m(wt()),nd=m(He()),ad=m(je()),_a=m(ke());var Aa=null;function p_(t){return(!Aa||Aa.byteLength<t)&&(Aa=new ArrayBuffer(t)),Aa}function $l(t,r){var e=p_(t.BYTES_PER_ELEMENT*r);return new t(e,0,r)}function ql(t){for(var r=t.target,e=t.source,n=t.start,a=n===void 0?0:n,i=t.count,o=i===void 0?1:i,s=e.length,u=o*s,f=0,c=a;f<s;f++)r[c++]=e[f];for(;f<u;)f<u-f?(r.copyWithin(a+f,a,a+f),f*=2):(r.copyWithin(a+f,a,a+u-f),f=u);return r}function v_(t){var r=g_();return function(){var n=(0,_a.default)(t),a;if(r){var i=(0,_a.default)(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return(0,ad.default)(this,a)}}function g_(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var y_="elements must be GL.ELEMENT_ARRAY_BUFFER",ba=function(t,r){(0,nd.default)(n,t);var e=v_(n);function n(a){var i;(0,Zl.default)(this,n);var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=o.id||o.program&&o.program.id;return i=e.call(this,a,Object.assign({},o,{id:s})),i.buffer=null,i.bufferValue=null,i.isDefaultArray=o.isDefaultArray||!1,i.gl2=a,i.initialize(o),Object.seal((0,td.default)(i)),i}return(0,ed.default)(n,[{key:r,get:function(){return"VertexArrayObject"}},{key:"delete",value:function(){return(0,rd.default)((0,_a.default)(n.prototype),"delete",this).call(this),this.buffer&&this.buffer.delete(),this}},{key:"MAX_ATTRIBUTES",get:function(){return n.getMaxAttributes(this.gl)}},{key:"initialize",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.setProps(i)}},{key:"setProps",value:function(i){return this}},{key:"setElementBuffer",value:function(){var i=this,o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return M(!o||o.target===34963,y_),this.bind(function(){i.gl.bindBuffer(34963,o?o.handle:null)}),this}},{key:"setBuffer",value:function(i,o,s){if(o.target===34963)return this.setElementBuffer(o,s);var u=s.size,f=s.type,c=s.stride,l=s.offset,d=s.normalized,h=s.integer,v=s.divisor,g=this.gl,y=this.gl2;return i=Number(i),this.bind(function(){g.bindBuffer(34962,o.handle),h?(M(j(g)),y.vertexAttribIPointer(i,u,f,c,l)):g.vertexAttribPointer(i,u,f,d,c,l),g.enableVertexAttribArray(i),y.vertexAttribDivisor(i,v||0)}),this}},{key:"enable",value:function(i){var o=this,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,u=!s&&i===0&&!n.isSupported(this.gl,{constantAttributeZero:!0});return u||(i=Number(i),this.bind(function(){return s?o.gl.enableVertexAttribArray(i):o.gl.disableVertexAttribArray(i)})),this}},{key:"getConstantBuffer",value:function(i,o){var s=this._normalizeConstantArrayValue(o),u=s.byteLength*i,f=s.length*i,c=!this.buffer;if(this.buffer=this.buffer||new me(this.gl,u),c=c||this.buffer.reallocate(u),c=c||!this._compareConstantArrayValues(s,this.bufferValue),c){var l=$l(o.constructor,f);ql({target:l,source:s,start:0,count:f}),this.buffer.subData(l),this.bufferValue=o}return this.buffer}},{key:"_normalizeConstantArrayValue",value:function(i){return Array.isArray(i)?new Float32Array(i):i}},{key:"_compareConstantArrayValues",value:function(i,o){if(!i||!o||i.length!==o.length||i.constructor!==o.constructor)return!1;for(var s=0;s<i.length;++s)if(i[s]!==o[s])return!1;return!0}},{key:"_createHandle",value:function(){var i=this.gl;return i.createVertexArray()}},{key:"_deleteHandle",value:function(i){return this.gl2.deleteVertexArray(i),[this.elements]}},{key:"_bindHandle",value:function(i){this.gl2.bindVertexArray(i)}},{key:"_getParameter",value:function(i,o){var s=this,u=o.location;return M(Number.isFinite(u)),this.bind(function(){switch(i){case 34373:return s.gl.getVertexAttribOffset(u,i);default:return s.gl.getVertexAttrib(u,i)}})}}],[{key:"isSupported",value:function(i){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return o.constantAttributeZero?j(i)||zn()==="Chrome":!0}},{key:"getDefaultArray",value:function(i){return i.luma=i.luma||{},i.luma.defaultVertexArray||(i.luma.defaultVertexArray=new n(i,{handle:null,isDefaultArray:!0})),i.luma.defaultVertexArray}},{key:"getMaxAttributes",value:function(i){return n.MAX_ATTRIBUTES=n.MAX_ATTRIBUTES||i.getParameter(34921),n.MAX_ATTRIBUTES}},{key:"setConstant",value:function(i,o,s){switch(s.constructor){case Float32Array:n._setConstantFloatArray(i,o,s);break;case Int32Array:n._setConstantIntArray(i,o,s);break;case Uint32Array:n._setConstantUintArray(i,o,s);break;default:M(!1)}}},{key:"_setConstantFloatArray",value:function(i,o,s){switch(s.length){case 1:i.vertexAttrib1fv(o,s);break;case 2:i.vertexAttrib2fv(o,s);break;case 3:i.vertexAttrib3fv(o,s);break;case 4:i.vertexAttrib4fv(o,s);break;default:M(!1)}}},{key:"_setConstantIntArray",value:function(i,o,s){switch(M(j(i)),s.length){case 1:i.vertexAttribI1iv(o,s);break;case 2:i.vertexAttribI2iv(o,s);break;case 3:i.vertexAttribI3iv(o,s);break;case 4:i.vertexAttribI4iv(o,s);break;default:M(!1)}}},{key:"_setConstantUintArray",value:function(i,o,s){switch(M(j(i)),s.length){case 1:i.vertexAttribI1uiv(o,s);break;case 2:i.vertexAttribI2uiv(o,s);break;case 3:i.vertexAttribI3uiv(o,s);break;case 4:i.vertexAttribI4uiv(o,s);break;default:M(!1)}}}]),n}(Ue,Symbol.toStringTag);var id=m(Y()),od=m(Q());var A_="VertexArray: attributes must be Buffers or constants (i.e. typed array)",__=/^(.+)__LOCATION_([0-9]+)$/,b_=["setBuffers","setGeneric","clearBindings","setLocations","setGenericValues","setDivisor","enable","disable"],oo=function(){function t(r){(0,id.default)(this,t);var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.id||e.program&&e.program.id;this.id=n,this.gl=r,this.configuration=null,this.elements=null,this.elementsAccessor=null,this.values=null,this.accessors=null,this.unused=null,this.drawParams=null,this.buffer=null,this.attributes={},this.vertexArrayObject=new ba(r),na(this,"VertexArray","v6.0",b_),this.initialize(e),Object.seal(this)}return(0,od.default)(t,[{key:"delete",value:function(){this.buffer&&this.buffer.delete(),this.vertexArrayObject.delete()}},{key:"initialize",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.reset(),this.configuration=null,this.bindOnUse=!1,this.setProps(e)}},{key:"reset",value:function(){this.elements=null,this.elementsAccessor=null;var e=this.vertexArrayObject.MAX_ATTRIBUTES;return this.values=new Array(e).fill(null),this.accessors=new Array(e).fill(null),this.unused={},this.drawParams=null,this}},{key:"setProps",value:function(e){return"program"in e&&(this.configuration=e.program&&e.program.configuration),"configuration"in e&&(this.configuration=e.configuration),"attributes"in e&&this.setAttributes(e.attributes),"elements"in e&&this.setElementBuffer(e.elements),"bindOnUse"in e&&(e=e.bindOnUse),this}},{key:"clearDrawParams",value:function(){this.drawParams=null}},{key:"getDrawParams",value:function(){return this.drawParams=this.drawParams||this._updateDrawParams(),this.drawParams}},{key:"setAttributes",value:function(e){var n=this;return Object.assign(this.attributes,e),this.vertexArrayObject.bind(function(){for(var a in e){var i=e[a];n._setAttribute(a,i)}n.gl.bindBuffer(34962,null)}),this}},{key:"setElementBuffer",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.elements=e,this.elementsAccessor=n,this.clearDrawParams(),this.vertexArrayObject.setElementBuffer(e,n),this}},{key:"setBuffer",value:function(e,n){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(n.target===34963)return this.setElementBuffer(n,a);var i=this._resolveLocationAndAccessor(e,n,n.accessor,a),o=i.location,s=i.accessor;return o>=0&&(this.values[o]=n,this.accessors[o]=s,this.clearDrawParams(),this.vertexArrayObject.setBuffer(o,n,s)),this}},{key:"setConstant",value:function(e,n){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=this._resolveLocationAndAccessor(e,n,Object.assign({size:n.length},a)),o=i.location,s=i.accessor;return o>=0&&(n=this.vertexArrayObject._normalizeConstantArrayValue(n),this.values[o]=n,this.accessors[o]=s,this.clearDrawParams(),this.vertexArrayObject.enable(o,!1)),this}},{key:"unbindBuffers",value:function(){var e=this;return this.vertexArrayObject.bind(function(){e.elements&&e.vertexArrayObject.setElementBuffer(null),e.buffer=e.buffer||new me(e.gl,{accessor:{size:4}});for(var n=0;n<e.vertexArrayObject.MAX_ATTRIBUTES;n++)e.values[n]instanceof me&&(e.gl.disableVertexAttribArray(n),e.gl.bindBuffer(34962,e.buffer.handle),e.gl.vertexAttribPointer(n,1,5126,!1,0,0))}),this}},{key:"bindBuffers",value:function(){var e=this;return this.vertexArrayObject.bind(function(){e.elements&&e.setElementBuffer(e.elements);for(var n=0;n<e.vertexArrayObject.MAX_ATTRIBUTES;n++){var a=e.values[n];a instanceof me&&e.setBuffer(n,a)}}),this}},{key:"bindForDraw",value:function(e,n,a){var i=this,o;return this.vertexArrayObject.bind(function(){i._setConstantAttributes(e,n),o=a()}),o}},{key:"_resolveLocationAndAccessor",value:function(e,n,a,i){var o=this,s={location:-1,accessor:null},u=this._getAttributeIndex(e),f=u.location,c=u.name;if(!Number.isFinite(f)||f<0)return this.unused[e]=n,I.once(3,function(){return"unused value ".concat(e," in ").concat(o.id)})(),s;var l=this._getAttributeInfo(c||f);if(!l)return s;var d=this.accessors[f]||{},h=Je.resolve(l.accessor,d,a,i),v=h.size,g=h.type;return M(Number.isFinite(v)&&Number.isFinite(g)),{location:f,accessor:h}}},{key:"_getAttributeInfo",value:function(e){return this.configuration&&this.configuration.getAttributeInfo(e)}},{key:"_getAttributeIndex",value:function(e){var n=Number(e);if(Number.isFinite(n))return{location:n};var a=__.exec(e),i=a?a[1]:e,o=a?Number(a[2]):0;return this.configuration?{location:this.configuration.getAttributeLocation(i)+o,name:i}:{location:-1}}},{key:"_setAttribute",value:function(e,n){if(n instanceof me)this.setBuffer(e,n);else if(Array.isArray(n)&&n.length&&n[0]instanceof me){var a=n[0],i=n[1];this.setBuffer(e,a,i)}else if(ArrayBuffer.isView(n)||Array.isArray(n)){var o=n;this.setConstant(e,o)}else if(n.buffer instanceof me){var s=n;this.setBuffer(e,s.buffer,s)}else throw new Error(A_)}},{key:"_setConstantAttributes",value:function(e,n){var a=Math.max(e|0,n|0),i=this.values[0];ArrayBuffer.isView(i)&&this._setConstantAttributeZero(i,a);for(var o=1;o<this.vertexArrayObject.MAX_ATTRIBUTES;o++)i=this.values[o],ArrayBuffer.isView(i)&&this._setConstantAttribute(o,i)}},{key:"_setConstantAttributeZero",value:function(e,n){if(ba.isSupported(this.gl,{constantAttributeZero:!0})){this._setConstantAttribute(0,e);return}var a=this.vertexArrayObject.getConstantBuffer(n,e);this.vertexArrayObject.setBuffer(0,a,this.accessors[0])}},{key:"_setConstantAttribute",value:function(e,n){ba.setConstant(this.gl,e,n)}},{key:"_updateDrawParams",value:function(){for(var e={isIndexed:!1,isInstanced:!1,indexCount:1/0,vertexCount:1/0,instanceCount:1/0},n=0;n<this.vertexArrayObject.MAX_ATTRIBUTES;n++)this._updateDrawParamsForLocation(e,n);return this.elements&&(e.elementCount=this.elements.getElementCount(this.elements.accessor),e.isIndexed=!0,e.indexType=this.elementsAccessor.type||this.elements.accessor.type,e.indexOffset=this.elementsAccessor.offset||0),e.indexCount===1/0&&(e.indexCount=0),e.vertexCount===1/0&&(e.vertexCount=0),e.instanceCount===1/0&&(e.instanceCount=0),e}},{key:"_updateDrawParamsForLocation",value:function(e,n){var a=this.values[n],i=this.accessors[n];if(a){var o=i.divisor,s=o>0;if(e.isInstanced=e.isInstanced||s,a instanceof me){var u=a;if(s){var f=u.getVertexCount(i);e.instanceCount=Math.min(e.instanceCount,f)}else{var c=u.getVertexCount(i);e.vertexCount=Math.min(e.vertexCount,c)}}}}},{key:"setElements",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return I.deprecated("setElements","setElementBuffer")(),this.setElementBuffer(e,n)}}]),t}();var Ea=m(ae());function E_(t,r){for(var e=r.maxElts,n=e===void 0?16:e,a=r.size,i=a===void 0?1:a,o="[",s=0;s<t.length&&s<n;++s)s>0&&(o+=",".concat(s%i===0?" ":"")),o+=Zt(t[s],r);var u=t.length>n?"...":"]";return"".concat(o).concat(u)}function Zt(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},e=1e-16,n=r.isInteger,a=n===void 0?!1:n;if(Array.isArray(t)||ArrayBuffer.isView(t))return E_(t,r);if(!Number.isFinite(t))return String(t);if(Math.abs(t)<e)return a?"0":"0.";if(a||Math.abs(t)>100&&Math.abs(t)<1e4)return t.toFixed(0);var i=t.toPrecision(2),o=i.indexOf(".0");return o===i.length-2?i.slice(0,-1):i}function so(t,r){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=B_(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var n=0,a=function(){};return{s:a,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(f){throw f},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,o=!1,s;return{s:function(){e=e.call(t)},n:function(){var f=e.next();return i=f.done,f},e:function(f){o=!0,s=f},f:function(){try{!i&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function B_(t,r){if(t){if(typeof t=="string")return sd(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return sd(t,r)}}function sd(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function Ba(t){var r=t.header,e=r===void 0?"Uniforms":r,n=t.program,a=t.uniforms,i=t.undefinedOnly,o=i===void 0?!1:i;M(n);var s=".*_.*",u=".*Matrix",f=n._uniformSetters,c={},l=Object.keys(f).sort(),d=0,h=so(l),v;try{for(h.s();!(v=h.n()).done;){var g=v.value;!g.match(s)&&!g.match(u)&&uo({table:c,header:e,uniforms:a,uniformName:g,undefinedOnly:o})&&d++}}catch(G){h.e(G)}finally{h.f()}var y=so(l),A;try{for(y.s();!(A=y.n()).done;){var _=A.value;_.match(u)&&uo({table:c,header:e,uniforms:a,uniformName:_,undefinedOnly:o})&&d++}}catch(G){y.e(G)}finally{y.f()}var T=so(l),B;try{for(T.s();!(B=T.n()).done;){var x=B.value;c[x]||uo({table:c,header:e,uniforms:a,uniformName:x,undefinedOnly:o})&&d++}}catch(G){T.e(G)}finally{T.f()}var R=0,L={};if(!o)for(var N in a){var P=a[N];c[N]||(R++,L[N]=(0,Ea.default)({Type:"NOT USED: ".concat(P)},e,Zt(P)))}return{table:c,count:d,unusedTable:L,unusedCount:R}}function uo(t){var r=t.table,e=t.header,n=t.uniforms,a=t.uniformName,i=t.undefinedOnly,o=n[a],s=x_(o);if(!i||!s){var u;return r[a]=(u={},(0,Ea.default)(u,e,s?Zt(o):"N/A"),(0,Ea.default)(u,"Uniform Type",s?o:"NOT PROVIDED"),u),!0}return!1}function x_(t){return t!=null}var er=m(ae());function fo(t){var r=t.vertexArray,e=t.header,n=e===void 0?"Attributes":e;if(!r.configuration)return{};var a={};r.elements&&(a.ELEMENT_ARRAY_BUFFER=ud(r,r.elements,null,n));var i=r.values;for(var o in i){var s=r._getAttributeInfo(o);if(s){var u="".concat(o,": ").concat(s.name),f=r.accessors[s.location];f&&(u="".concat(o,": ").concat(T_(s.name,f))),a[u]=ud(r,i[o],f,n)}}return a}function ud(t,r,e,n){var a,i=t.gl;if(!r){var o;return o={},(0,er.default)(o,n,"null"),(0,er.default)(o,"Format ","N/A"),o}var s="NOT PROVIDED",u=1,f=0,c=0,l,d,h;if(e&&(s=e.type,u=e.size,s=String(s).replace("Array",""),l=s.indexOf("nt")!==-1),r instanceof me){var v,g=r,y=g.getDebugData(),A=y.data,_=y.changed;d=_?"*":"",h=A,c=g.byteLength,f=c/A.BYTES_PER_ELEMENT/u;var T;if(e){var B=e.divisor>0;T="".concat(B?"I ":"P "," ").concat(f," (x").concat(u,"=").concat(c," bytes ").concat(ot(i,s),")")}else l=!0,T="".concat(c," bytes");return v={},(0,er.default)(v,n,"".concat(d).concat(Zt(h,{size:u,isInteger:l}))),(0,er.default)(v,"Format ",T),v}return h=r,u=r.length,s=String(r.constructor.name).replace("Array",""),l=s.indexOf("nt")!==-1,a={},(0,er.default)(a,n,"".concat(Zt(h,{size:u,isInteger:l})," (constant)")),(0,er.default)(a,"Format ","".concat(u,"x").concat(s," (constant)")),a}function T_(t,r){var e=r.type,n=r.size,a=ga(e,n);return a?"".concat(t," (").concat(a.name,")"):t}var co=m(ae());function fd(t,r){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=C_(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var n=0,a=function(){};return{s:a,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(f){throw f},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,o=!1,s;return{s:function(){e=e.call(t)},n:function(){var f=e.next();return i=f.done,f},e:function(f){o=!0,s=f},f:function(){try{!i&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function C_(t,r){if(t){if(typeof t=="string")return cd(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return cd(t,r)}}function cd(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function lo(t){var r={},e="Accessors for ".concat(t.id),n=fd(t.attributeInfos),a;try{for(n.s();!(a=n.n()).done;){var i=a.value;if(i){var o=ld(i);r["in ".concat(o)]=(0,co.default)({},e,JSON.stringify(i.accessor))}}}catch(l){n.e(l)}finally{n.f()}var s=fd(t.varyingInfos),u;try{for(s.s();!(u=s.n()).done;){var f=u.value;if(f){var c=ld(f);r["out ".concat(c)]=(0,co.default)({},e,JSON.stringify(f.accessor))}}}catch(l){s.e(l)}finally{s.f()}return r}function ld(t){var r=t.accessor,e=r.type,n=r.size,a=ga(e,n);return a?"".concat(a.name," ").concat(t.name):t.name}var Tr=m(mr());function S_(t,r){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=M_(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var n=0,a=function(){};return{s:a,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(f){throw f},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,o=!1,s;return{s:function(){e=e.call(t)},n:function(){var f=e.next();return i=f.done,f},e:function(f){o=!0,s=f},f:function(){try{!i&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function M_(t,r){if(t){if(typeof t=="string")return dd(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return dd(t,r)}}function dd(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}var ho=Math.PI/180,xa=new Float32Array(16),hd=new Float32Array(12);function md(t,r,e){var n=r[0]*ho,a=r[1]*ho,i=r[2]*ho,o=Math.sin(i),s=Math.sin(n),u=Math.sin(a),f=Math.cos(i),c=Math.cos(n),l=Math.cos(a),d=e[0],h=e[1],v=e[2];t[0]=d*l*c,t[1]=d*u*c,t[2]=d*-s,t[3]=h*(-u*f+l*s*o),t[4]=h*(l*f+u*s*o),t[5]=h*c*o,t[6]=v*(u*o+l*s*f),t[7]=v*(-l*o+u*s*f),t[8]=v*c*f}function pd(t){return t[0]=t[0],t[1]=t[1],t[2]=t[2],t[3]=t[4],t[4]=t[5],t[5]=t[6],t[6]=t[8],t[7]=t[9],t[8]=t[10],t[9]=t[12],t[10]=t[13],t[11]=t[14],t.subarray(0,12)}var Ta={size:12,accessor:["getOrientation","getScale","getTranslation","getTransformMatrix"],shaderAttributes:{instanceModelMatrix__LOCATION_0:{size:3,elementOffset:0},instanceModelMatrix__LOCATION_1:{size:3,elementOffset:3},instanceModelMatrix__LOCATION_2:{size:3,elementOffset:6},instanceTranslation:{size:3,elementOffset:9}},update:function(r,e){var n=e.startRow,a=e.endRow,i=this.props,o=i.data,s=i.getOrientation,u=i.getScale,f=i.getTranslation,c=i.getTransformMatrix,l=Array.isArray(c),d=l&&c.length===16,h=Array.isArray(u),v=Array.isArray(s),g=Array.isArray(f),y=d||!l&&Boolean(c(o[0]));y?r.constant=d:r.constant=v&&h&&g;var A=r.value;if(r.constant){var _;if(y)xa.set(c),_=pd(xa);else{_=hd;var T=s,B=u;md(_,T,B),_.set(f,9)}r.value=new Float32Array(_)}else{var x=n*r.size,R=(0,Tr.createIterable)(o,n,a),L=R.iterable,N=R.objectInfo,P=S_(L),G;try{for(P.s();!(G=P.n()).done;){var H=G.value;N.index++;var F=void 0;if(y)xa.set(d?c:c(H,N)),F=pd(xa);else{F=hd;var V=v?s:s(H,N),k=h?u:u(H,N);md(F,V,k),F.set(g?f:f(H,N),9)}A[x++]=F[0],A[x++]=F[1],A[x++]=F[2],A[x++]=F[3],A[x++]=F[4],A[x++]=F[5],A[x++]=F[6],A[x++]=F[7],A[x++]=F[8],A[x++]=F[9],A[x++]=F[10],A[x++]=F[11]}}catch(E){P.e(E)}finally{P.f()}}}};function Ca(t,r){return r===Tr.COORDINATE_SYSTEM.CARTESIAN||r===Tr.COORDINATE_SYSTEM.METER_OFFSETS||r===Tr.COORDINATE_SYSTEM.DEFAULT&&!t.isGeospatial}var vd=`#version 300 es
#define SHADER_NAME simple-mesh-layer-vs
uniform float sizeScale;
uniform bool composeModelMatrix;
in vec3 positions;
in vec3 normals;
in vec3 colors;
in vec2 texCoords;
in vec3 instancePositions;
in vec3 instancePositions64Low;
in vec4 instanceColors;
in vec3 instancePickingColors;
in mat3 instanceModelMatrix;
in vec3 instanceTranslation;
out vec2 vTexCoord;
out vec3 cameraPosition;
out vec3 normals_commonspace;
out vec4 position_commonspace;
out vec4 vColor;

void main(void) {
  geometry.worldPosition = instancePositions;
  geometry.uv = texCoords;
  geometry.pickingColor = instancePickingColors;

  vTexCoord = texCoords;
  cameraPosition = project_uCameraPosition;
  vColor = vec4(colors * instanceColors.rgb, instanceColors.a);

  vec3 pos = (instanceModelMatrix * positions) * sizeScale + instanceTranslation;

  if (composeModelMatrix) {
    DECKGL_FILTER_SIZE(pos, geometry);
    normals_commonspace = project_normal(instanceModelMatrix * normals);
    geometry.worldPosition += pos;
    gl_Position = project_position_to_clipspace(pos + instancePositions, instancePositions64Low, vec3(0.0), position_commonspace);
    geometry.position = position_commonspace;
  }
  else {
    pos = project_size(pos);
    DECKGL_FILTER_SIZE(pos, geometry);
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, pos, position_commonspace);
    geometry.position = position_commonspace;
    normals_commonspace = project_normal(instanceModelMatrix * normals);
  }

  geometry.normal = normals_commonspace;
  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);

  DECKGL_FILTER_COLOR(vColor, geometry);
}
`;var gd=`#version 300 es
#define SHADER_NAME simple-mesh-layer-fs

precision highp float;

uniform bool hasTexture;
uniform sampler2D sampler;
uniform bool flatShading;
uniform float opacity;

in vec2 vTexCoord;
in vec3 cameraPosition;
in vec3 normals_commonspace;
in vec4 position_commonspace;
in vec4 vColor;

out vec4 fragColor;

void main(void) {
  geometry.uv = vTexCoord;

  vec3 normal;
  if (flatShading) {
#ifdef DERIVATIVES_AVAILABLE
    normal = normalize(cross(dFdx(position_commonspace.xyz), dFdy(position_commonspace.xyz)));
#else
    normal = vec3(0.0, 0.0, 1.0);
#endif
  } else {
    normal = normals_commonspace;
  }

  vec4 color = hasTexture ? texture(sampler, vTexCoord) : vColor;
  DECKGL_FILTER_COLOR(color, geometry);

  vec3 lightColor = lighting_getLightColor(color.rgb, cameraPosition, position_commonspace.xyz, normal);
  fragColor = vec4(lightColor, color.a * opacity);
}
`;function en(t){for(var r=1/0,e=1/0,n=1/0,a=-1/0,i=-1/0,o=-1/0,s=t.POSITION?t.POSITION.value:[],u=s&&s.length,f=0;f<u;f+=3){var c=s[f],l=s[f+1],d=s[f+2];r=c<r?c:r,e=l<e?l:e,n=d<n?d:n,a=c>a?c:a,i=l>i?l:i,o=d>o?d:o}return[[r,e,n],[a,i,o]]}var mo=m(Jt()),bd=m(Y()),Ed=m(Q());function yd(t,r){if(!t)throw new Error(r||"loader assertion failed.")}function po(t,r){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=R_(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var n=0,a=function(){};return{s:a,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(f){throw f},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,o=!1,s;return{s:function(){e=e.call(t)},n:function(){var f=e.next();return i=f.done,f},e:function(f){o=!0,s=f},f:function(){try{!i&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function R_(t,r){if(t){if(typeof t=="string")return Ad(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return Ad(t,r)}}function Ad(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}var tn=function(){function t(r,e){(0,bd.default)(this,t),w(this,"fields",void 0),w(this,"metadata",void 0),yd(Array.isArray(r)),I_(r),this.fields=r,this.metadata=e||new Map}return(0,Ed.default)(t,[{key:"compareTo",value:function(e){if(this.metadata!==e.metadata||this.fields.length!==e.fields.length)return!1;for(var n=0;n<this.fields.length;++n)if(!this.fields[n].compareTo(e.fields[n]))return!1;return!0}},{key:"select",value:function(){for(var e=Object.create(null),n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];for(var o=0,s=a;o<s.length;o++){var u=s[o];e[u]=!0}var f=this.fields.filter(function(c){return e[c.name]});return new t(f,this.metadata)}},{key:"selectAt",value:function(){for(var e=this,n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];var o=a.map(function(s){return e.fields[s]}).filter(Boolean);return new t(o,this.metadata)}},{key:"assign",value:function(e){var n,a=this.metadata;if(e instanceof t){var i=e;n=i.fields,a=_d(_d(new Map,this.metadata),i.metadata)}else n=e;var o=Object.create(null),s=po(this.fields),u;try{for(s.s();!(u=s.n()).done;){var f=u.value;o[f.name]=f}}catch(v){s.e(v)}finally{s.f()}var c=po(n),l;try{for(c.s();!(l=c.n()).done;){var d=l.value;o[d.name]=d}}catch(v){c.e(v)}finally{c.f()}var h=Object.values(o);return new t(h,a)}}]),t}();function I_(t){var r={},e=po(t),n;try{for(e.s();!(n=e.n()).done;){var a=n.value;r[a.name]&&console.warn("Schema: duplicated field name",a.name,a),r[a.name]=!0}}catch(i){e.e(i)}finally{e.f()}}function _d(t,r){return new Map([].concat((0,mo.default)(t||new Map),(0,mo.default)(r||new Map)))}var Bd=m(Y()),xd=m(Q());var rn=function(){function t(r,e){(0,Bd.default)(this,t);var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:new Map;w(this,"name",void 0),w(this,"type",void 0),w(this,"nullable",void 0),w(this,"metadata",void 0),this.name=r,this.type=e,this.nullable=n,this.metadata=a}return(0,xd.default)(t,[{key:"typeId",get:function(){return this.type&&this.type.typeId}},{key:"clone",value:function(){return new t(this.name,this.type,this.nullable,this.metadata)}},{key:"compareTo",value:function(e){return this.name===e.name&&this.type===e.type&&this.nullable===e.nullable&&this.metadata===e.metadata}},{key:"toString",value:function(){return"".concat(this.type).concat(this.nullable?", nullable":"").concat(this.metadata?", metadata: ".concat(this.metadata):"")}}]),t}();var Ze=m(nt()),ee=m(He()),Td=m(je()),vo=m(ke()),q=m(Y()),We=m(Q());var Z;(function(t){t[t.NONE=0]="NONE",t[t.Null=1]="Null",t[t.Int=2]="Int",t[t.Float=3]="Float",t[t.Binary=4]="Binary",t[t.Utf8=5]="Utf8",t[t.Bool=6]="Bool",t[t.Decimal=7]="Decimal",t[t.Date=8]="Date",t[t.Time=9]="Time",t[t.Timestamp=10]="Timestamp",t[t.Interval=11]="Interval",t[t.List=12]="List",t[t.Struct=13]="Struct",t[t.Union=14]="Union",t[t.FixedSizeBinary=15]="FixedSizeBinary",t[t.FixedSizeList=16]="FixedSizeList",t[t.Map=17]="Map",t[t.Dictionary=-1]="Dictionary",t[t.Int8=-2]="Int8",t[t.Int16=-3]="Int16",t[t.Int32=-4]="Int32",t[t.Int64=-5]="Int64",t[t.Uint8=-6]="Uint8",t[t.Uint16=-7]="Uint16",t[t.Uint32=-8]="Uint32",t[t.Uint64=-9]="Uint64",t[t.Float16=-10]="Float16",t[t.Float32=-11]="Float32",t[t.Float64=-12]="Float64",t[t.DateDay=-13]="DateDay",t[t.DateMillisecond=-14]="DateMillisecond",t[t.TimestampSecond=-15]="TimestampSecond",t[t.TimestampMillisecond=-16]="TimestampMillisecond",t[t.TimestampMicrosecond=-17]="TimestampMicrosecond",t[t.TimestampNanosecond=-18]="TimestampNanosecond",t[t.TimeSecond=-19]="TimeSecond",t[t.TimeMillisecond=-20]="TimeMillisecond",t[t.TimeMicrosecond=-21]="TimeMicrosecond",t[t.TimeNanosecond=-22]="TimeNanosecond",t[t.DenseUnion=-23]="DenseUnion",t[t.SparseUnion=-24]="SparseUnion",t[t.IntervalDayTime=-25]="IntervalDayTime",t[t.IntervalYearMonth=-26]="IntervalYearMonth"})(Z||(Z={}));function te(t){var r=O_();return function(){var n=(0,vo.default)(t),a;if(r){var i=(0,vo.default)(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return(0,Td.default)(this,a)}}function O_(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Cd,Sd,Md,Rd,Id,Od,wd,Fd,Ye=function(){function t(){(0,q.default)(this,t)}return(0,We.default)(t,[{key:"typeId",get:function(){return Z.NONE}},{key:"compareTo",value:function(e){return this===e}}],[{key:"isNull",value:function(e){return e&&e.typeId===Z.Null}},{key:"isInt",value:function(e){return e&&e.typeId===Z.Int}},{key:"isFloat",value:function(e){return e&&e.typeId===Z.Float}},{key:"isBinary",value:function(e){return e&&e.typeId===Z.Binary}},{key:"isUtf8",value:function(e){return e&&e.typeId===Z.Utf8}},{key:"isBool",value:function(e){return e&&e.typeId===Z.Bool}},{key:"isDecimal",value:function(e){return e&&e.typeId===Z.Decimal}},{key:"isDate",value:function(e){return e&&e.typeId===Z.Date}},{key:"isTime",value:function(e){return e&&e.typeId===Z.Time}},{key:"isTimestamp",value:function(e){return e&&e.typeId===Z.Timestamp}},{key:"isInterval",value:function(e){return e&&e.typeId===Z.Interval}},{key:"isList",value:function(e){return e&&e.typeId===Z.List}},{key:"isStruct",value:function(e){return e&&e.typeId===Z.Struct}},{key:"isUnion",value:function(e){return e&&e.typeId===Z.Union}},{key:"isFixedSizeBinary",value:function(e){return e&&e.typeId===Z.FixedSizeBinary}},{key:"isFixedSizeList",value:function(e){return e&&e.typeId===Z.FixedSizeList}},{key:"isMap",value:function(e){return e&&e.typeId===Z.Map}},{key:"isDictionary",value:function(e){return e&&e.typeId===Z.Dictionary}}]),t}(),Ld=function(t,r){(0,ee.default)(n,t);var e=te(n);function n(){return(0,q.default)(this,n),e.apply(this,arguments)}return(0,We.default)(n,[{key:"typeId",get:function(){return Z.Null}},{key:r,get:function(){return"Null"}},{key:"toString",value:function(){return"Null"}}]),n}(Ye,Symbol.toStringTag),Dd=function(t,r){(0,ee.default)(n,t);var e=te(n);function n(){return(0,q.default)(this,n),e.apply(this,arguments)}return(0,We.default)(n,[{key:"typeId",get:function(){return Z.Bool}},{key:r,get:function(){return"Bool"}},{key:"toString",value:function(){return"Bool"}}]),n}(Ye,Symbol.toStringTag);Cd=Symbol.toStringTag;var yt=function(t,r){(0,ee.default)(n,t);var e=te(n);function n(a,i){var o;return(0,q.default)(this,n),o=e.call(this),w((0,Ze.default)(o),"isSigned",void 0),w((0,Ze.default)(o),"bitWidth",void 0),o.isSigned=a,o.bitWidth=i,o}return(0,We.default)(n,[{key:"typeId",get:function(){return Z.Int}},{key:r,get:function(){return"Int"}},{key:"toString",value:function(){return"".concat(this.isSigned?"I":"Ui","nt").concat(this.bitWidth)}}]),n}(Ye,Cd),Sa=function(t){(0,ee.default)(e,t);var r=te(e);function e(){return(0,q.default)(this,e),r.call(this,!0,8)}return e}(yt),Ma=function(t){(0,ee.default)(e,t);var r=te(e);function e(){return(0,q.default)(this,e),r.call(this,!0,16)}return e}(yt),Ra=function(t){(0,ee.default)(e,t);var r=te(e);function e(){return(0,q.default)(this,e),r.call(this,!0,32)}return e}(yt),Pd=function(t){(0,ee.default)(e,t);var r=te(e);function e(){return(0,q.default)(this,e),r.call(this,!0,64)}return e}(yt),Ia=function(t){(0,ee.default)(e,t);var r=te(e);function e(){return(0,q.default)(this,e),r.call(this,!1,8)}return e}(yt),Oa=function(t){(0,ee.default)(e,t);var r=te(e);function e(){return(0,q.default)(this,e),r.call(this,!1,16)}return e}(yt),wa=function(t){(0,ee.default)(e,t);var r=te(e);function e(){return(0,q.default)(this,e),r.call(this,!1,32)}return e}(yt),Gd=function(t){(0,ee.default)(e,t);var r=te(e);function e(){return(0,q.default)(this,e),r.call(this,!1,64)}return e}(yt),go={HALF:16,SINGLE:32,DOUBLE:64};Sd=Symbol.toStringTag;var nn=function(t,r){(0,ee.default)(n,t);var e=te(n);function n(a){var i;return(0,q.default)(this,n),i=e.call(this),w((0,Ze.default)(i),"precision",void 0),i.precision=a,i}return(0,We.default)(n,[{key:"typeId",get:function(){return Z.Float}},{key:r,get:function(){return"Float"}},{key:"toString",value:function(){return"Float".concat(this.precision)}}]),n}(Ye,Sd),kd=function(t){(0,ee.default)(e,t);var r=te(e);function e(){return(0,q.default)(this,e),r.call(this,go.HALF)}return e}(nn),Fa=function(t){(0,ee.default)(e,t);var r=te(e);function e(){return(0,q.default)(this,e),r.call(this,go.SINGLE)}return e}(nn),La=function(t){(0,ee.default)(e,t);var r=te(e);function e(){return(0,q.default)(this,e),r.call(this,go.DOUBLE)}return e}(nn),Ud=function(t,r){(0,ee.default)(n,t);var e=te(n);function n(){return(0,q.default)(this,n),e.call(this)}return(0,We.default)(n,[{key:"typeId",get:function(){return Z.Binary}},{key:"toString",value:function(){return"Binary"}},{key:r,get:function(){return"Binary"}}]),n}(Ye,Symbol.toStringTag),Nd=function(t,r){(0,ee.default)(n,t);var e=te(n);function n(){return(0,q.default)(this,n),e.apply(this,arguments)}return(0,We.default)(n,[{key:"typeId",get:function(){return Z.Utf8}},{key:r,get:function(){return"Utf8"}},{key:"toString",value:function(){return"Utf8"}}]),n}(Ye,Symbol.toStringTag),yo={DAY:0,MILLISECOND:1};Md=Symbol.toStringTag;var Da=function(t,r){(0,ee.default)(n,t);var e=te(n);function n(a){var i;return(0,q.default)(this,n),i=e.call(this),w((0,Ze.default)(i),"unit",void 0),i.unit=a,i}return(0,We.default)(n,[{key:"typeId",get:function(){return Z.Date}},{key:r,get:function(){return"Date"}},{key:"toString",value:function(){return"Date".concat((this.unit+1)*32,"<").concat(yo[this.unit],">")}}]),n}(Ye,Md),Hd=function(t){(0,ee.default)(e,t);var r=te(e);function e(){return(0,q.default)(this,e),r.call(this,yo.DAY)}return e}(Da),jd=function(t){(0,ee.default)(e,t);var r=te(e);function e(){return(0,q.default)(this,e),r.call(this,yo.MILLISECOND)}return e}(Da),kt={SECOND:1,MILLISECOND:1e3,MICROSECOND:1e6,NANOSECOND:1e9};Rd=Symbol.toStringTag;var Pa=function(t,r){(0,ee.default)(n,t);var e=te(n);function n(a,i){var o;return(0,q.default)(this,n),o=e.call(this),w((0,Ze.default)(o),"unit",void 0),w((0,Ze.default)(o),"bitWidth",void 0),o.unit=a,o.bitWidth=i,o}return(0,We.default)(n,[{key:"typeId",get:function(){return Z.Time}},{key:"toString",value:function(){return"Time".concat(this.bitWidth,"<").concat(kt[this.unit],">")}},{key:r,get:function(){return"Time"}}]),n}(Ye,Rd),Vd=function(t){(0,ee.default)(e,t);var r=te(e);function e(){return(0,q.default)(this,e),r.call(this,kt.SECOND,32)}return e}(Pa),Jd=function(t){(0,ee.default)(e,t);var r=te(e);function e(){return(0,q.default)(this,e),r.call(this,kt.MILLISECOND,32)}return e}(Pa);Id=Symbol.toStringTag;var Cr=function(t,r){(0,ee.default)(n,t);var e=te(n);function n(a){var i;(0,q.default)(this,n);var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return i=e.call(this),w((0,Ze.default)(i),"unit",void 0),w((0,Ze.default)(i),"timezone",void 0),i.unit=a,i.timezone=o,i}return(0,We.default)(n,[{key:"typeId",get:function(){return Z.Timestamp}},{key:r,get:function(){return"Timestamp"}},{key:"toString",value:function(){return"Timestamp<".concat(kt[this.unit]).concat(this.timezone?", ".concat(this.timezone):"",">")}}]),n}(Ye,Id),Xd=function(t){(0,ee.default)(e,t);var r=te(e);function e(){(0,q.default)(this,e);var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return r.call(this,kt.SECOND,n)}return e}(Cr),zd=function(t){(0,ee.default)(e,t);var r=te(e);function e(){(0,q.default)(this,e);var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return r.call(this,kt.MILLISECOND,n)}return e}(Cr),Kd=function(t){(0,ee.default)(e,t);var r=te(e);function e(){(0,q.default)(this,e);var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return r.call(this,kt.MICROSECOND,n)}return e}(Cr),Wd=function(t){(0,ee.default)(e,t);var r=te(e);function e(){(0,q.default)(this,e);var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return r.call(this,kt.NANOSECOND,n)}return e}(Cr),Ao={DAY_TIME:0,YEAR_MONTH:1};Od=Symbol.toStringTag;var Ga=function(t,r){(0,ee.default)(n,t);var e=te(n);function n(a){var i;return(0,q.default)(this,n),i=e.call(this),w((0,Ze.default)(i),"unit",void 0),i.unit=a,i}return(0,We.default)(n,[{key:"typeId",get:function(){return Z.Interval}},{key:r,get:function(){return"Interval"}},{key:"toString",value:function(){return"Interval<".concat(Ao[this.unit],">")}}]),n}(Ye,Od),Yd=function(t){(0,ee.default)(e,t);var r=te(e);function e(){return(0,q.default)(this,e),r.call(this,Ao.DAY_TIME)}return e}(Ga),Qd=function(t){(0,ee.default)(e,t);var r=te(e);function e(){return(0,q.default)(this,e),r.call(this,Ao.YEAR_MONTH)}return e}(Ga);wd=Symbol.toStringTag;var ka=function(t,r){(0,ee.default)(n,t);var e=te(n);function n(a,i){var o;return(0,q.default)(this,n),o=e.call(this),w((0,Ze.default)(o),"listSize",void 0),w((0,Ze.default)(o),"children",void 0),o.listSize=a,o.children=[i],o}return(0,We.default)(n,[{key:"typeId",get:function(){return Z.FixedSizeList}},{key:"valueType",get:function(){return this.children[0].type}},{key:"valueField",get:function(){return this.children[0]}},{key:r,get:function(){return"FixedSizeList"}},{key:"toString",value:function(){return"FixedSizeList[".concat(this.listSize,"]<").concat(this.valueType,">")}}]),n}(Ye,wd);Fd=Symbol.toStringTag;var $d=function(t,r){(0,ee.default)(n,t);var e=te(n);function n(a){var i;return(0,q.default)(this,n),i=e.call(this),w((0,Ze.default)(i),"children",void 0),i.children=a,i}return(0,We.default)(n,[{key:"typeId",get:function(){return Z.Struct}},{key:"toString",value:function(){return"Struct<{".concat(this.children.map(function(i){return"".concat(i.name,":").concat(i.type)}).join(", "),"}>")}},{key:r,get:function(){return"Struct"}}]),n}(Ye,Fd);function qd(t){switch(t.constructor){case Int8Array:return new Sa;case Uint8Array:return new Ia;case Int16Array:return new Ma;case Uint16Array:return new Oa;case Int32Array:return new Ra;case Uint32Array:return new wa;case Float32Array:return new Fa;case Float64Array:return new La;default:throw new Error("array type not supported")}}function _o(t,r,e){var n=qd(r.value),a=e||Zd(r),i=new rn(t,new ka(r.size,new rn("value",n)),!1,a);return i}function Zd(t){var r=new Map;return"byteOffset"in t&&r.set("byteOffset",t.byteOffset.toString(10)),"byteStride"in t&&r.set("byteStride",t.byteStride.toString(10)),"normalized"in t&&r.set("normalized",t.normalized.toString()),r}function eh(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),e.push.apply(e,n)}return e}function th(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?eh(Object(e),!0).forEach(function(n){(0,on.default)(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):eh(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}function w_(t){var r=F_();return function(){var n=(0,tr.default)(t),a;if(r){var i=(0,tr.default)(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return(0,uh.default)(this,a)}}function F_(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function rh(t,r){var e=t.COLOR_0||t.colors,n=e&&r;n||(t.colors={constant:!0,value:new Float32Array([1,1,1])}),_t.log.assert(t.positions||t.POSITION,'no "postions" or "POSITION" attribute in mesh')}function nh(t,r){if(t.attributes)return rh(t.attributes,r),t instanceof At.Geometry?t:new At.Geometry(t);if(t.positions||t.POSITION)return rh(t,r),new At.Geometry({attributes:t});throw Error("Invalid mesh")}var L_=[0,0,0,255],D_={mesh:{type:"object",value:null,async:!0},texture:{type:"image",value:null,async:!0},sizeScale:{type:"number",value:1,min:0},_useMeshColors:{type:"boolean",value:!1},_instanced:!0,wireframe:!1,material:!0,getPosition:{type:"accessor",value:function(r){return r.position}},getColor:{type:"accessor",value:L_},getOrientation:{type:"accessor",value:[0,0,0]},getScale:{type:"accessor",value:[1,1,1]},getTranslation:{type:"accessor",value:[0,0,0]},getTransformMatrix:{type:"accessor",value:[]},textureParameters:{type:"object",ignore:!0}},Ua=function(t){(0,sh.default)(e,t);var r=w_(e);function e(){var n;(0,ah.default)(this,e);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return n=r.call.apply(r,[this].concat(i)),(0,on.default)((0,oh.default)(n),"state",void 0),n}return(0,ih.default)(e,[{key:"getShaders",value:function(){var a=!(0,At.isWebGL2)(this.context.gl),i={};return xr(this.context.gl,ue.GLSL_DERIVATIVES)&&(i.DERIVATIVES_AVAILABLE=1),(0,an.default)((0,tr.default)(e.prototype),"getShaders",this).call(this,{vs:vd,fs:gd,modules:[_t.project32,_t.phongLighting,_t.picking],transpileToGLSL100:a,defines:i})}},{key:"getBounds",value:function(){var a;if(this.props._instanced)return(0,an.default)((0,tr.default)(e.prototype),"getBounds",this).call(this);var i=this.state.positionBounds;if(i)return i;var o=this.props.mesh;if(!o)return null;if(i=(a=o.header)===null||a===void 0?void 0:a.boundingBox,!i){var s=nh(o,this.props._useMeshColors),u=s.attributes;u.POSITION=u.POSITION||u.positions,i=en(u)}return this.state.positionBounds=i,i}},{key:"initializeState",value:function(){var a=this.getAttributeManager();a.addInstanced({instancePositions:{transition:!0,type:5130,fp64:this.use64bitPositions(),size:3,accessor:"getPosition"},instanceColors:{type:5121,transition:!0,size:this.props.colorFormat.length,normalized:!0,accessor:"getColor",defaultValue:[0,0,0,255]},instanceModelMatrix:Ta}),this.setState({emptyTexture:new At.Texture2D(this.context.gl,{data:new Uint8Array(4),width:1,height:1})})}},{key:"updateState",value:function(a){(0,an.default)((0,tr.default)(e.prototype),"updateState",this).call(this,a);var i=a.props,o=a.oldProps,s=a.changeFlags;if(i.mesh!==o.mesh||s.extensionsChanged){var u;if(this.state.positionBounds=null,(u=this.state.model)===null||u===void 0||u.delete(),i.mesh){this.state.model=this.getModel(i.mesh);var f=i.mesh.attributes||i.mesh;this.setState({hasNormals:Boolean(f.NORMAL||f.normals)})}this.getAttributeManager().invalidateAll()}i.texture!==o.texture&&this.setTexture(i.texture),this.state.model&&this.state.model.setDrawMode(this.props.wireframe?3:4)}},{key:"finalizeState",value:function(a){(0,an.default)((0,tr.default)(e.prototype),"finalizeState",this).call(this,a),this.state.emptyTexture.delete()}},{key:"draw",value:function(a){var i=a.uniforms;if(this.state.model){var o=this.context.viewport,s=this.props,u=s.sizeScale,f=s.coordinateSystem,c=s._instanced;this.state.model.setUniforms(i).setUniforms({sizeScale:u,composeModelMatrix:!c||Ca(o,f),flatShading:!this.state.hasNormals}).draw()}}},{key:"getModel",value:function(a){var i=new At.Model(this.context.gl,th(th({},this.getShaders()),{},{id:this.props.id,geometry:nh(a,this.props._useMeshColors),isInstanced:!0})),o=this.props.texture,s=this.state.emptyTexture;return i.setUniforms({sampler:o||s,hasTexture:Boolean(o)}),i}},{key:"setTexture",value:function(a){var i=this.state,o=i.emptyTexture,s=i.model;s&&s.setUniforms({sampler:a||o,hasTexture:Boolean(a)})}}]),e}(_t.Layer);(0,on.default)(Ua,"defaultProps",D_);(0,on.default)(Ua,"layerName","SimpleMeshLayer");var ty=m(Y()),ry=m(Q()),ny=m(nt()),ef=m(wt()),ay=m(He()),iy=m(je()),Dn=m(ke()),Pn=m(ae()),oy=m(Ie()),ht=m(mr()),sy=m(Ti());var wh=m(Qe()),wo=m(ae());var rr="vs",sn="fs";var dh=m(Y()),hh=m(Q());function ze(t,r){if(!t)throw new Error(r||"shadertools: assertion failed.")}var ch=m(Ie()),bo={number:{validate:function(r,e){return Number.isFinite(r)&&(!("max"in e)||r<=e.max)&&(!("min"in e)||r>=e.min)}},array:{validate:function(r,e){return Array.isArray(r)||ArrayBuffer.isView(r)}}};function lh(t){var r={};for(var e in t){var n=t[e],a=P_(n);r[e]=a}return r}function P_(t){var r=fh(t);return r==="object"?t?"type"in t?Object.assign({},t,bo[t.type]):"value"in t?(r=fh(t.value),Object.assign({type:r},t,bo[r])):{type:"object",value:t}:{type:"object",value:null}:Object.assign({type:r,value:t},bo[r])}function fh(t){return Array.isArray(t)||ArrayBuffer.isView(t)?"array":(0,ch.default)(t)}var G_="vs",k_="fs",Eo=function(){function t(r){(0,dh.default)(this,t);var e=r.name,n=r.vs,a=r.fs,i=r.dependencies,o=i===void 0?[]:i,s=r.uniforms,u=r.getUniforms,f=r.deprecations,c=f===void 0?[]:f,l=r.defines,d=l===void 0?{}:l,h=r.inject,v=h===void 0?{}:h,g=r.vertexShader,y=r.fragmentShader;ze(typeof e=="string"),this.name=e,this.vs=n||g,this.fs=a||y,this.getModuleUniforms=u,this.dependencies=o,this.deprecations=this._parseDeprecationDefinitions(c),this.defines=d,this.injections=U_(v),s&&(this.uniforms=lh(s))}return(0,hh.default)(t,[{key:"getModuleSource",value:function(e){var n;switch(e){case G_:n=this.vs||"";break;case k_:n=this.fs||"";break;default:ze(!1)}return"#define MODULE_".concat(this.name.toUpperCase().replace(/[^0-9a-z]/gi,"_"),`
`).concat(n,"// END MODULE_").concat(this.name,`

`)}},{key:"getUniforms",value:function(e,n){return this.getModuleUniforms?this.getModuleUniforms(e,n):this.uniforms?this._defaultGetUniforms(e):{}}},{key:"getDefines",value:function(){return this.defines}},{key:"checkDeprecations",value:function(e,n){this.deprecations.forEach(function(a){a.regex.test(e)&&(a.deprecated?n.deprecated(a.old,a.new)():n.removed(a.old,a.new)())})}},{key:"_parseDeprecationDefinitions",value:function(e){return e.forEach(function(n){switch(n.type){case"function":n.regex=new RegExp("\\b".concat(n.old,"\\("));break;default:n.regex=new RegExp("".concat(n.type," ").concat(n.old,";"))}}),e}},{key:"_defaultGetUniforms",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n={},a=this.uniforms;for(var i in a){var o=a[i];i in e&&!o.private?(o.validate&&ze(o.validate(e[i],o),"".concat(this.name,": invalid ").concat(i)),n[i]=e[i]):n[i]=o.value}return n}}]),t}();function U_(t){var r={vs:{},fs:{}};for(var e in t){var n=t[e],a=e.slice(0,2);typeof n=="string"&&(n={order:0,injection:n}),r[a][e]=n}return r}function mh(t,r){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=N_(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var n=0,a=function(){};return{s:a,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(f){throw f},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,o=!1,s;return{s:function(){e=e.call(t)},n:function(){var f=e.next();return i=f.done,f},e:function(f){o=!0,s=f},f:function(){try{!i&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function N_(t,r){if(t){if(typeof t=="string")return ph(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return ph(t,r)}}function ph(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function vh(t){return H_(yh(t))}function H_(t){var r={},e={};return gh({modules:t,level:0,moduleMap:r,moduleDepth:e}),Object.keys(e).sort(function(n,a){return e[a]-e[n]}).map(function(n){return r[n]})}function gh(t){var r=t.modules,e=t.level,n=t.moduleMap,a=t.moduleDepth;if(e>=5)throw new Error("Possible loop in shader dependency graph");var i=mh(r),o;try{for(i.s();!(o=i.n()).done;){var s=o.value;n[s.name]=s,(a[s.name]===void 0||a[s.name]<e)&&(a[s.name]=e)}}catch(l){i.e(l)}finally{i.f()}var u=mh(r),f;try{for(u.s();!(f=u.n()).done;){var c=f.value;c.dependencies&&gh({modules:c.dependencies,level:e+1,moduleMap:n,moduleDepth:a})}}catch(l){u.e(l)}finally{u.f()}}function yh(t,r){return t.map(function(e){return e instanceof Eo||(ze(typeof e!="string","Shader module use by name is deprecated. Import shader module '".concat(e,"' and use it directly.")),ze(e.name,"shader module has no name"),e=new Eo(e),e.dependencies=yh(e.dependencies)),e})}function Bo(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=typeof window<"u"?window.navigator||{}:{},e=t.userAgent||r.userAgent||"",n=e.indexOf("MSIE ")!==-1,a=e.indexOf("Trident/")!==-1;return n||a}var j_=7936,V_=7937,J_=7938,X_=35724,To={GLSL_FRAG_DATA:["WEBGL_draw_buffers",!0],GLSL_FRAG_DEPTH:["EXT_frag_depth",!0],GLSL_DERIVATIVES:["OES_standard_derivatives",!0],GLSL_TEXTURE_LOD:["EXT_shader_texture_lod",!0]},Ut={};Object.keys(To).forEach(function(t){Ut[t]=t});function z_(t){return typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext?!0:Boolean(t&&t._version===2)}function Ah(t){var r=t.getExtension("WEBGL_debug_renderer_info"),e=t.getParameter(r&&r.UNMASKED_VENDOR_WEBGL||j_),n=t.getParameter(r&&r.UNMASKED_RENDERER_WEBGL||V_),a=K_(e,n),i={gpuVendor:a,vendor:e,renderer:n,version:t.getParameter(J_),shadingLanguageVersion:t.getParameter(X_)};return i}function K_(t,r){return t.match(/NVIDIA/i)||r.match(/NVIDIA/i)?"NVIDIA":t.match(/INTEL/i)||r.match(/INTEL/i)?"INTEL":t.match(/AMD/i)||r.match(/AMD/i)||t.match(/ATI/i)||r.match(/ATI/i)?"AMD":"UNKNOWN GPU"}var xo={};function Co(t,r){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=To[r];if(ze(n,r),!Bo(e))return!0;if(r in xo)return xo[r];var a=n[0],i=e.behavior||"enable",o="#extension GL_".concat(a," : ").concat(i,`
void main(void) {}`),s=t.createShader(35633);t.shaderSource(s,o),t.compileShader(s);var u=t.getShaderParameter(s,35713);return t.deleteShader(s),xo[r]=u,u}function W_(t,r){var e=To[r];ze(e,r);var n=z_(t)&&e[1]||e[0],a=typeof n=="string"?Boolean(t.getExtension(n)):n;return ze(a===!1||a===!0),a}function un(t,r){return r=Array.isArray(r)?r:[r],r.every(function(e){return W_(t,e)})}function _h(t){var r=Ah(t);switch(r.gpuVendor.toLowerCase()){case"nvidia":return`#define NVIDIA_GPU
// Nvidia optimizes away the calculation necessary for emulated fp64
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
`;case"intel":return`#define INTEL_GPU
// Intel optimizes away the calculation necessary for emulated fp64
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
// Intel's built-in 'tan' function doesn't have acceptable precision
#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1
// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow
#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1
`;case"amd":return`#define AMD_GPU
`;default:return`#define DEFAULT_GPU
// Prevent driver from optimizing away the calculation necessary for emulated fp64
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
// Intel's built-in 'tan' function doesn't have acceptable precision
#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1
// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow
#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1
`}}function bh(t,r,e){var n=`#if (__VERSION__ > 120)

# define FEATURE_GLSL_DERIVATIVES
# define FEATURE_GLSL_DRAW_BUFFERS
# define FEATURE_GLSL_FRAG_DEPTH
# define FEATURE_GLSL_TEXTURE_LOD

// DEPRECATED FLAGS, remove in v9
# define FRAG_DEPTH
# define DERIVATIVES
# define DRAW_BUFFERS
# define TEXTURE_LOD

#endif // __VERSION
`;return un(t,Ut.GLSL_FRAG_DEPTH)&&(n+=`
// FRAG_DEPTH => gl_FragDepth is available
#ifdef GL_EXT_frag_depth
#extension GL_EXT_frag_depth : enable
# define FEATURE_GLSL_FRAG_DEPTH
# define FRAG_DEPTH
# define gl_FragDepth gl_FragDepthEXT
#endif
`),un(t,Ut.GLSL_DERIVATIVES)&&Co(t,Ut.GLSL_DERIVATIVES)&&(n+=`
// DERIVATIVES => dxdF, dxdY and fwidth are available
#ifdef GL_OES_standard_derivatives
#extension GL_OES_standard_derivatives : enable
# define FEATURE_GLSL_DERIVATIVES
# define DERIVATIVES
#endif
`),un(t,Ut.GLSL_FRAG_DATA)&&Co(t,Ut.GLSL_FRAG_DATA,{behavior:"require"})&&(n+=`
// DRAW_BUFFERS => gl_FragData[] is available
#ifdef GL_EXT_draw_buffers
#extension GL_EXT_draw_buffers : require
#define FEATURE_GLSL_DRAW_BUFFERS
#define DRAW_BUFFERS
#endif
`),un(t,Ut.GLSL_TEXTURE_LOD)&&(n+=`// TEXTURE_LOD => texture2DLod etc are available
#ifdef GL_EXT_shader_texture_lod
#extension GL_EXT_shader_texture_lod : enable

# define FEATURE_GLSL_TEXTURE_LOD
# define TEXTURE_LOD

#endif
`),n}var Mo=m(ae());var Eh=`#ifdef MODULE_LOGDEPTH
  logdepth_adjustPosition(gl_Position);
#endif
`,Bh=`#ifdef MODULE_MATERIAL
  gl_FragColor = material_filterColor(gl_FragColor);
#endif

#ifdef MODULE_LIGHTING
  gl_FragColor = lighting_filterColor(gl_FragColor);
#endif

#ifdef MODULE_FOG
  gl_FragColor = fog_filterColor(gl_FragColor);
#endif

#ifdef MODULE_PICKING
  gl_FragColor = picking_filterHighlightColor(gl_FragColor);
  gl_FragColor = picking_filterPickingColor(gl_FragColor);
#endif

#ifdef MODULE_LOGDEPTH
  logdepth_setFragDepth();
#endif
`;var Na,Y_=(Na={},(0,Mo.default)(Na,rr,Eh),(0,Mo.default)(Na,sn,Bh),Na),fn="__LUMA_INJECT_DECLARATIONS__",xh=/void\s+main\s*\([^)]*\)\s*\{\n?/,Th=/}\n?[^{}]*$/,So=[];function Ha(t,r,e){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,a=r===rr,i=function(u){var f=e[u];f.sort(function(h,v){return h.order-v.order}),So.length=f.length;for(var c=0,l=f.length;c<l;++c)So[c]=f[c].injection;var d="".concat(So.join(`
`),`
`);switch(u){case"vs:#decl":a&&(t=t.replace(fn,d));break;case"vs:#main-start":a&&(t=t.replace(xh,function(h){return h+d}));break;case"vs:#main-end":a&&(t=t.replace(Th,function(h){return d+h}));break;case"fs:#decl":a||(t=t.replace(fn,d));break;case"fs:#main-start":a||(t=t.replace(xh,function(h){return h+d}));break;case"fs:#main-end":a||(t=t.replace(Th,function(h){return d+h}));break;default:t=t.replace(u,function(h){return h+d})}};for(var o in e)i(o);return t=t.replace(fn,""),n&&(t=t.replace(/\}\s*$/,function(s){return s+Y_[r]})),t}var Sh=m(Qe());function Q_(t,r){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=$_(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var n=0,a=function(){};return{s:a,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(f){throw f},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,o=!1,s;return{s:function(){e=e.call(t)},n:function(){var f=e.next();return i=f.done,f},e:function(f){o=!0,s=f},f:function(){try{!i&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function $_(t,r){if(t){if(typeof t=="string")return Ch(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return Ch(t,r)}}function Ch(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function Sr(t){return new RegExp("\\b".concat(t,"[ \\t]+(\\w+[ \\t]+\\w+(\\[\\w+\\])?;)"),"g")}var Mh=[[/^(#version[ \t]+(100|300[ \t]+es))?[ \t]*\n/,`#version 300 es
`],[/\btexture(2D|2DProj|Cube)Lod(EXT)?\(/g,"textureLod("],[/\btexture(2D|2DProj|Cube)(EXT)?\(/g,"texture("]],q_=[].concat(Mh,[[Sr("attribute"),"in $1"],[Sr("varying"),"out $1"]]),Z_=[].concat(Mh,[[Sr("varying"),"in $1"]]),Rh=[[/^#version[ \t]+300[ \t]+es/,"#version 100"],[/\btexture(2D|2DProj|Cube)Lod\(/g,"texture$1LodEXT("],[/\btexture\(/g,"texture2D("],[/\btextureLod\(/g,"texture2DLodEXT("]],eb=[].concat(Rh,[[Sr("in"),"attribute $1"],[Sr("out"),"varying $1"]]),tb=[].concat(Rh,[[Sr("in"),"varying $1"]]),Ro="gl_FragColor",Io=/\bout[ \t]+vec4[ \t]+(\w+)[ \t]*;\n?/,rb=/void\s+main\s*\([^)]*\)\s*\{\n?/;function Oo(t,r,e){switch(r){case 300:return e?ja(t,q_):nb(t);case 100:return e?ja(t,eb):ab(t);default:throw new Error("unknown GLSL version ".concat(r))}}function ja(t,r){var e=Q_(r),n;try{for(e.s();!(n=e.n()).done;){var a=(0,Sh.default)(n.value,2),i=a[0],o=a[1];t=t.replace(i,o)}}catch(s){e.e(s)}finally{e.f()}return t}function nb(t){t=ja(t,Z_);var r=t.match(Io);if(r){var e=r[1];t=t.replace(new RegExp("\\b".concat(Ro,"\\b"),"g"),e)}else{var n="fragmentColor";t=t.replace(rb,function(a){return"out vec4 ".concat(n,`;
`).concat(a)}).replace(new RegExp("\\b".concat(Ro,"\\b"),"g"),n)}return t}function ab(t){t=ja(t,tb);var r=t.match(Io);if(r){var e=r[1];t=t.replace(Io,"").replace(new RegExp("\\b".concat(e,"\\b"),"g"),Ro)}return t}var Va;function Fo(t,r){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=ib(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var n=0,a=function(){};return{s:a,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(f){throw f},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,o=!1,s;return{s:function(){e=e.call(t)},n:function(){var f=e.next();return i=f.done,f},e:function(f){o=!0,s=f},f:function(){try{!i&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function ib(t,r){if(t){if(typeof t=="string")return Ih(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return Ih(t,r)}}function Ih(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}var ob=`

`.concat(fn,`

`),Fh=(Va={},(0,wo.default)(Va,rr,"vertex"),(0,wo.default)(Va,sn,"fragment"),Va),sb=`precision highp float;

`;function Lo(t,r){var e=r.vs,n=r.fs,a=vh(r.modules||[]);return{gl:t,vs:Oh(t,Object.assign({},r,{source:e,type:rr,modules:a})),fs:Oh(t,Object.assign({},r,{source:n,type:sn,modules:a})),getUniforms:ub(a)}}function Oh(t,r){var e=r.id,n=r.source,a=r.type,i=r.modules,o=r.defines,s=o===void 0?{}:o,u=r.hookFunctions,f=u===void 0?[]:u,c=r.inject,l=c===void 0?{}:c,d=r.transpileToGLSL100,h=d===void 0?!1:d,v=r.prologue,g=v===void 0?!0:v,y=r.log;ze(typeof n=="string","shader source must be a string");var A=a===rr,_=n.split(`
`),T=100,B="",x=n;_[0].indexOf("#version ")===0?(T=300,B=_[0],x=_.slice(1).join(`
`)):B="#version ".concat(T);var R={};i.forEach(function(Ke){Object.assign(R,Ke.getDefines())}),Object.assign(R,s);var L=g?"".concat(B,`
`).concat(cb({id:e,source:n,type:a}),`
`).concat(fb({type:a}),`
`).concat(_h(t),`
`).concat(bh(t,T,!A),`
`).concat(lb(R),`
`).concat(A?"":sb,`
`):"".concat(B,`
`),N=hb(f),P={},G={},H={};for(var F in l){var V=typeof l[F]=="string"?{injection:l[F],order:0}:l[F],k=F.match(/^(v|f)s:(#)?([\w-]+)$/);if(k){var E=k[2],b=k[3];E?b==="decl"?G[F]=[V]:H[F]=[V]:P[F]=[V]}else H[F]=[V]}var C=Fo(i),U;try{for(C.s();!(U=C.n()).done;){var O=U.value;y&&O.checkDeprecations(x,y);var oe=O.getModuleSource(a,T);L+=oe;var ie=O.injections[a];for(var se in ie){var Te=se.match(/^(v|f)s:#([\w-]+)$/);if(Te){var xe=Te[2],rt=xe==="decl"?G:H;rt[se]=rt[se]||[],rt[se].push(ie[se])}else P[se]=P[se]||[],P[se].push(ie[se])}}}catch(Ke){C.e(Ke)}finally{C.f()}return L+=ob,L=Ha(L,a,G),L+=db(N[a],P),L+=x,L=Ha(L,a,H),L=Oo(L,h?100:T,A),L}function ub(t){return function(e){var n={},a=Fo(t),i;try{for(a.s();!(i=a.n()).done;){var o=i.value,s=o.getUniforms(e,n);Object.assign(n,s)}}catch(u){a.e(u)}finally{a.f()}return n}}function fb(t){var r=t.type;return`
#define SHADER_TYPE_`.concat(Fh[r].toUpperCase(),`
`)}function cb(t){var r=t.id,e=t.source,n=t.type,a=r&&typeof r=="string"&&e.indexOf("SHADER_NAME")===-1;return a?`
#define SHADER_NAME `.concat(r,"_").concat(Fh[n],`

`):""}function lb(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=0,e="";for(var n in t){r===0&&(e+=`
// APPLICATION DEFINES
`),r++;var a=t[n];(a||Number.isFinite(a))&&(e+="#define ".concat(n.toUpperCase()," ").concat(t[n],`
`))}return r===0&&(e+=`
`),e}function db(t,r){var e="";for(var n in t){var a=t[n];if(e+="void ".concat(a.signature,` {
`),a.header&&(e+="  ".concat(a.header)),r[n]){var i=r[n];i.sort(function(f,c){return f.order-c.order});var o=Fo(i),s;try{for(o.s();!(s=o.n()).done;){var u=s.value;e+="  ".concat(u.injection,`
`)}}catch(f){o.e(f)}finally{o.f()}}a.footer&&(e+="  ".concat(a.footer)),e+=`}
`}return e}function hb(t){var r={vs:{},fs:{}};return t.forEach(function(e){var n;typeof e!="string"?(n=e,e=n.hook):n={},e=e.trim();var a=e.split(":"),i=(0,wh.default)(a,2),o=i[0],s=i[1],u=e.replace(/\(.+/,"");r[o][u]=Object.assign(n,{signature:s})}),r}function Fe(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function Lh(t,r){for(var e=0;e<r.length;e++){var n=r[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Le(t,r,e){return r&&Lh(t.prototype,r),e&&Lh(t,e),t}function cn(t,r){return cn=Object.setPrototypeOf||function(n,a){return n.__proto__=a,n},cn(t,r)}function De(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),r&&cn(t,r)}function nr(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?nr=function(e){return typeof e}:nr=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nr(t)}function Do(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Pe(t,r){if(r&&(nr(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Do(t)}function ce(t){return ce=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},ce(t)}function Ja(t,r){if(!t)throw new Error("math.gl assertion ".concat(r))}var z3=1/Math.PI*180,K3=1/180*Math.PI,Se={EPSILON:1e-12,debug:!1,precision:4,printTypes:!1,printDegrees:!1,printRowMajor:!0};function Dh(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},e=r.precision,n=e===void 0?Se.precision:e;return t=mb(t),"".concat(parseFloat(t.toPrecision(n)))}function Nt(t){return Array.isArray(t)||ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Po(t,r,e){var n=Se.EPSILON;e&&(Se.EPSILON=e);try{if(t===r)return!0;if(Nt(t)&&Nt(r)){if(t.length!==r.length)return!1;for(var a=0;a<t.length;++a)if(!Po(t[a],r[a]))return!1;return!0}return t&&t.equals?t.equals(r):r&&r.equals?r.equals(t):typeof t=="number"&&typeof r=="number"?Math.abs(t-r)<=Se.EPSILON*Math.max(1,Math.abs(t),Math.abs(r)):!1}finally{Se.EPSILON=n}}function mb(t){return Math.round(t/Se.EPSILON)*Se.EPSILON}function pb(t){var r=vb();return function(){var n=ce(t),a;if(r){var i=ce(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return Pe(this,a)}}function vb(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function gb(t){function r(){var e=Reflect.construct(t,Array.from(arguments));return Object.setPrototypeOf(e,Object.getPrototypeOf(this)),e}return r.prototype=Object.create(t.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(r,t):r.__proto__=t,r}var Mr=function(t){De(e,t);var r=pb(e);function e(){return Fe(this,e),r.apply(this,arguments)}return Le(e,[{key:"clone",value:function(){return new this.constructor().copy(this)}},{key:"fromArray",value:function(a){for(var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=0;o<this.ELEMENTS;++o)this[o]=a[o+i];return this.check()}},{key:"toArray",value:function(){for(var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=0;o<this.ELEMENTS;++o)a[i+o]=this[o];return a}},{key:"from",value:function(a){return Array.isArray(a)?this.copy(a):this.fromObject(a)}},{key:"to",value:function(a){return a===this?this:Nt(a)?this.toArray(a):this.toObject(a)}},{key:"toTarget",value:function(a){return a?this.to(a):this}},{key:"toFloat32Array",value:function(){return new Float32Array(this)}},{key:"toString",value:function(){return this.formatString(Se)}},{key:"formatString",value:function(a){for(var i="",o=0;o<this.ELEMENTS;++o)i+=(o>0?", ":"")+Dh(this[o],a);return"".concat(a.printTypes?this.constructor.name:"","[").concat(i,"]")}},{key:"equals",value:function(a){if(!a||this.length!==a.length)return!1;for(var i=0;i<this.ELEMENTS;++i)if(!Po(this[i],a[i]))return!1;return!0}},{key:"exactEquals",value:function(a){if(!a||this.length!==a.length)return!1;for(var i=0;i<this.ELEMENTS;++i)if(this[i]!==a[i])return!1;return!0}},{key:"negate",value:function(){for(var a=0;a<this.ELEMENTS;++a)this[a]=-this[a];return this.check()}},{key:"lerp",value:function(a,i,o){if(o===void 0)return this.lerp(this,a,i);for(var s=0;s<this.ELEMENTS;++s){var u=a[s];this[s]=u+o*(i[s]-u)}return this.check()}},{key:"min",value:function(a){for(var i=0;i<this.ELEMENTS;++i)this[i]=Math.min(a[i],this[i]);return this.check()}},{key:"max",value:function(a){for(var i=0;i<this.ELEMENTS;++i)this[i]=Math.max(a[i],this[i]);return this.check()}},{key:"clamp",value:function(a,i){for(var o=0;o<this.ELEMENTS;++o)this[o]=Math.min(Math.max(this[o],a[o]),i[o]);return this.check()}},{key:"add",value:function(){for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];for(var s=0,u=i;s<u.length;s++)for(var f=u[s],c=0;c<this.ELEMENTS;++c)this[c]+=f[c];return this.check()}},{key:"subtract",value:function(){for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];for(var s=0,u=i;s<u.length;s++)for(var f=u[s],c=0;c<this.ELEMENTS;++c)this[c]-=f[c];return this.check()}},{key:"scale",value:function(a){if(typeof a=="number")for(var i=0;i<this.ELEMENTS;++i)this[i]*=a;else for(var o=0;o<this.ELEMENTS&&o<a.length;++o)this[o]*=a[o];return this.check()}},{key:"multiplyByScalar",value:function(a){for(var i=0;i<this.ELEMENTS;++i)this[i]*=a;return this.check()}},{key:"check",value:function(){if(Se.debug&&!this.validate())throw new Error("math.gl: ".concat(this.constructor.name," some fields set to invalid numbers'"));return this}},{key:"validate",value:function(){for(var a=this.length===this.ELEMENTS,i=0;i<this.ELEMENTS;++i)a=a&&Number.isFinite(this[i]);return a}},{key:"sub",value:function(a){return this.subtract(a)}},{key:"setScalar",value:function(a){for(var i=0;i<this.ELEMENTS;++i)this[i]=a;return this.check()}},{key:"addScalar",value:function(a){for(var i=0;i<this.ELEMENTS;++i)this[i]+=a;return this.check()}},{key:"subScalar",value:function(a){return this.addScalar(-a)}},{key:"multiplyScalar",value:function(a){for(var i=0;i<this.ELEMENTS;++i)this[i]*=a;return this.check()}},{key:"divideScalar",value:function(a){return this.multiplyByScalar(1/a)}},{key:"clampScalar",value:function(a,i){for(var o=0;o<this.ELEMENTS;++o)this[o]=Math.min(Math.max(this[o],a),i);return this.check()}},{key:"elements",get:function(){return this}}]),e}(gb(Array));function yb(t,r){if(t.length!==r)return!1;for(var e=0;e<t.length;++e)if(!Number.isFinite(t[e]))return!1;return!0}function re(t){if(!Number.isFinite(t))throw new Error("Invalid number ".concat(t));return t}function Ht(t,r){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";if(Se.debug&&!yb(t,r))throw new Error("math.gl: ".concat(e," some fields set to invalid numbers'"));return t}function Ab(t){var r=_b();return function(){var n=ce(t),a;if(r){var i=ce(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return Pe(this,a)}}function _b(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Xa=function(t){De(e,t);var r=Ab(e);function e(){return Fe(this,e),r.apply(this,arguments)}return Le(e,[{key:"x",get:function(){return this[0]},set:function(a){this[0]=re(a)}},{key:"y",get:function(){return this[1]},set:function(a){this[1]=re(a)}},{key:"len",value:function(){return Math.sqrt(this.lengthSquared())}},{key:"magnitude",value:function(){return this.len()}},{key:"lengthSquared",value:function(){for(var a=0,i=0;i<this.ELEMENTS;++i)a+=this[i]*this[i];return a}},{key:"magnitudeSquared",value:function(){return this.lengthSquared()}},{key:"distance",value:function(a){return Math.sqrt(this.distanceSquared(a))}},{key:"distanceSquared",value:function(a){for(var i=0,o=0;o<this.ELEMENTS;++o){var s=this[o]-a[o];i+=s*s}return re(i)}},{key:"dot",value:function(a){for(var i=0,o=0;o<this.ELEMENTS;++o)i+=this[o]*a[o];return re(i)}},{key:"normalize",value:function(){var a=this.magnitude();if(a!==0)for(var i=0;i<this.ELEMENTS;++i)this[i]/=a;return this.check()}},{key:"multiply",value:function(){for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];for(var s=0,u=i;s<u.length;s++)for(var f=u[s],c=0;c<this.ELEMENTS;++c)this[c]*=f[c];return this.check()}},{key:"divide",value:function(){for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];for(var s=0,u=i;s<u.length;s++)for(var f=u[s],c=0;c<this.ELEMENTS;++c)this[c]/=f[c];return this.check()}},{key:"lengthSq",value:function(){return this.lengthSquared()}},{key:"distanceTo",value:function(a){return this.distance(a)}},{key:"distanceToSquared",value:function(a){return this.distanceSquared(a)}},{key:"getComponent",value:function(a){return Ja(a>=0&&a<this.ELEMENTS,"index is out of range"),re(this[a])}},{key:"setComponent",value:function(a,i){return Ja(a>=0&&a<this.ELEMENTS,"index is out of range"),this[a]=i,this.check()}},{key:"addVectors",value:function(a,i){return this.copy(a).add(i)}},{key:"subVectors",value:function(a,i){return this.copy(a).subtract(i)}},{key:"multiplyVectors",value:function(a,i){return this.copy(a).multiply(i)}},{key:"addScaledVector",value:function(a,i){return this.add(new this.constructor(a).multiplyScalar(i))}}]),e}(Mr);var dt=1e-6,Ge=typeof Float32Array<"u"?Float32Array:Array;var hI=Math.PI/180;Math.hypot||(Math.hypot=function(){for(var t=0,r=arguments.length;r--;)t+=arguments[r]*arguments[r];return Math.sqrt(t)});function bb(){var t=new Ge(2);return Ge!=Float32Array&&(t[0]=0,t[1]=0),t}function Ph(t,r,e){var n=r[0],a=r[1];return t[0]=e[0]*n+e[3]*a+e[6],t[1]=e[1]*n+e[4]*a+e[7],t}function Gh(t,r,e){var n=r[0],a=r[1];return t[0]=e[0]*n+e[4]*a+e[12],t[1]=e[1]*n+e[5]*a+e[13],t}var mI=function(){var t=bb();return function(r,e,n,a,i,o){var s,u;for(e||(e=2),n||(n=0),a?u=Math.min(a*e+n,r.length):u=r.length,s=n;s<u;s+=e)t[0]=r[s],t[1]=r[s+1],i(t,t,o),r[s]=t[0],r[s+1]=t[1];return r}}();function Uh(t,r,e){var n=r[0],a=r[1],i=e[3]*n+e[7]*a||1;return t[0]=(e[0]*n+e[4]*a)/i,t[1]=(e[1]*n+e[5]*a)/i,t}function za(t,r,e){var n=r[0],a=r[1],i=r[2],o=e[3]*n+e[7]*a+e[11]*i||1;return t[0]=(e[0]*n+e[4]*a+e[8]*i)/o,t[1]=(e[1]*n+e[5]*a+e[9]*i)/o,t[2]=(e[2]*n+e[6]*a+e[10]*i)/o,t}function Nh(t,r,e){var n=r[0],a=r[1];return t[0]=e[0]*n+e[2]*a,t[1]=e[1]*n+e[3]*a,t[2]=r[2],t}function Hh(t,r,e){var n=r[0],a=r[1];return t[0]=e[0]*n+e[2]*a,t[1]=e[1]*n+e[3]*a,t[2]=r[2],t[3]=r[3],t}function Ka(t,r,e){var n=r[0],a=r[1],i=r[2];return t[0]=e[0]*n+e[3]*a+e[6]*i,t[1]=e[1]*n+e[4]*a+e[7]*i,t[2]=e[2]*n+e[5]*a+e[8]*i,t[3]=r[3],t}function ko(){var t=new Ge(3);return Ge!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function Eb(t){var r=t[0],e=t[1],n=t[2];return Math.hypot(r,e,n)}function Uo(t,r,e){var n=new Ge(3);return n[0]=t,n[1]=r,n[2]=e,n}function jh(t,r){var e=r[0],n=r[1],a=r[2],i=e*e+n*n+a*a;return i>0&&(i=1/Math.sqrt(i)),t[0]=r[0]*i,t[1]=r[1]*i,t[2]=r[2]*i,t}function No(t,r){return t[0]*r[0]+t[1]*r[1]+t[2]*r[2]}function Ir(t,r,e){var n=r[0],a=r[1],i=r[2],o=e[0],s=e[1],u=e[2];return t[0]=a*u-i*s,t[1]=i*o-n*u,t[2]=n*s-a*o,t}function Or(t,r,e){var n=r[0],a=r[1],i=r[2],o=e[3]*n+e[7]*a+e[11]*i+e[15];return o=o||1,t[0]=(e[0]*n+e[4]*a+e[8]*i+e[12])/o,t[1]=(e[1]*n+e[5]*a+e[9]*i+e[13])/o,t[2]=(e[2]*n+e[6]*a+e[10]*i+e[14])/o,t}function Wa(t,r,e){var n=r[0],a=r[1],i=r[2];return t[0]=n*e[0]+a*e[3]+i*e[6],t[1]=n*e[1]+a*e[4]+i*e[7],t[2]=n*e[2]+a*e[5]+i*e[8],t}function Ya(t,r,e){var n=e[0],a=e[1],i=e[2],o=e[3],s=r[0],u=r[1],f=r[2],c=a*f-i*u,l=i*s-n*f,d=n*u-a*s,h=a*d-i*l,v=i*c-n*d,g=n*l-a*c,y=o*2;return c*=y,l*=y,d*=y,h*=2,v*=2,g*=2,t[0]=s+c+h,t[1]=u+l+v,t[2]=f+d+g,t}function Vh(t,r,e,n){var a=[],i=[];return a[0]=r[0]-e[0],a[1]=r[1]-e[1],a[2]=r[2]-e[2],i[0]=a[0],i[1]=a[1]*Math.cos(n)-a[2]*Math.sin(n),i[2]=a[1]*Math.sin(n)+a[2]*Math.cos(n),t[0]=i[0]+e[0],t[1]=i[1]+e[1],t[2]=i[2]+e[2],t}function Jh(t,r,e,n){var a=[],i=[];return a[0]=r[0]-e[0],a[1]=r[1]-e[1],a[2]=r[2]-e[2],i[0]=a[2]*Math.sin(n)+a[0]*Math.cos(n),i[1]=a[1],i[2]=a[2]*Math.cos(n)-a[0]*Math.sin(n),t[0]=i[0]+e[0],t[1]=i[1]+e[1],t[2]=i[2]+e[2],t}function Xh(t,r,e,n){var a=[],i=[];return a[0]=r[0]-e[0],a[1]=r[1]-e[1],a[2]=r[2]-e[2],i[0]=a[0]*Math.cos(n)-a[1]*Math.sin(n),i[1]=a[0]*Math.sin(n)+a[1]*Math.cos(n),i[2]=a[2],t[0]=i[0]+e[0],t[1]=i[1]+e[1],t[2]=i[2]+e[2],t}function zh(t,r){var e=t[0],n=t[1],a=t[2],i=r[0],o=r[1],s=r[2],u=Math.sqrt(e*e+n*n+a*a),f=Math.sqrt(i*i+o*o+s*s),c=u*f,l=c&&No(t,r)/c;return Math.acos(Math.min(Math.max(l,-1),1))}var Kh=Eb;var vI=function(){var t=ko();return function(r,e,n,a,i,o){var s,u;for(e||(e=3),n||(n=0),a?u=Math.min(a*e+n,r.length):u=r.length,s=n;s<u;s+=e)t[0]=r[s],t[1]=r[s+1],t[2]=r[s+2],i(t,t,o),r[s]=t[0],r[s+1]=t[1],r[s+2]=t[2];return r}}();function Bb(t){var r=xb();return function(){var n=ce(t),a;if(r){var i=ce(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return Pe(this,a)}}function xb(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Ho=[0,0,0],Qa,ar=function(t){De(e,t);var r=Bb(e);function e(){var n,a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return Fe(this,e),n=r.call(this,-0,-0,-0),arguments.length===1&&Nt(a)?n.copy(a):(Se.debug&&(re(a),re(i),re(o)),n[0]=a,n[1]=i,n[2]=o),n}return Le(e,[{key:"set",value:function(a,i,o){return this[0]=a,this[1]=i,this[2]=o,this.check()}},{key:"copy",value:function(a){return this[0]=a[0],this[1]=a[1],this[2]=a[2],this.check()}},{key:"fromObject",value:function(a){return Se.debug&&(re(a.x),re(a.y),re(a.z)),this[0]=a.x,this[1]=a.y,this[2]=a.z,this.check()}},{key:"toObject",value:function(a){return a.x=this[0],a.y=this[1],a.z=this[2],a}},{key:"ELEMENTS",get:function(){return 3}},{key:"z",get:function(){return this[2]},set:function(a){this[2]=re(a)}},{key:"angle",value:function(a){return zh(this,a)}},{key:"cross",value:function(a){return Ir(this,this,a),this.check()}},{key:"rotateX",value:function(a){var i=a.radians,o=a.origin,s=o===void 0?Ho:o;return Vh(this,this,s,i),this.check()}},{key:"rotateY",value:function(a){var i=a.radians,o=a.origin,s=o===void 0?Ho:o;return Jh(this,this,s,i),this.check()}},{key:"rotateZ",value:function(a){var i=a.radians,o=a.origin,s=o===void 0?Ho:o;return Xh(this,this,s,i),this.check()}},{key:"transform",value:function(a){return this.transformAsPoint(a)}},{key:"transformAsPoint",value:function(a){return Or(this,this,a),this.check()}},{key:"transformAsVector",value:function(a){return za(this,this,a),this.check()}},{key:"transformByMatrix3",value:function(a){return Wa(this,this,a),this.check()}},{key:"transformByMatrix2",value:function(a){return Nh(this,this,a),this.check()}},{key:"transformByQuaternion",value:function(a){return Ya(this,this,a),this.check()}}],[{key:"ZERO",get:function(){return Qa||(Qa=new e(0,0,0),Object.freeze(Qa)),Qa}}]),e}(Xa);function Tb(t){var r=Cb();return function(){var n=ce(t),a;if(r){var i=ce(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return Pe(this,a)}}function Cb(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var $a,Wh=function(t){De(e,t);var r=Tb(e);function e(){var n,a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;return Fe(this,e),n=r.call(this,-0,-0,-0,-0),Nt(a)&&arguments.length===1?n.copy(a):(Se.debug&&(re(a),re(i),re(o),re(s)),n[0]=a,n[1]=i,n[2]=o,n[3]=s),n}return Le(e,[{key:"set",value:function(a,i,o,s){return this[0]=a,this[1]=i,this[2]=o,this[3]=s,this.check()}},{key:"copy",value:function(a){return this[0]=a[0],this[1]=a[1],this[2]=a[2],this[3]=a[3],this.check()}},{key:"fromObject",value:function(a){return Se.debug&&(re(a.x),re(a.y),re(a.z),re(a.w)),this[0]=a.x,this[1]=a.y,this[2]=a.z,this[3]=a.w,this}},{key:"toObject",value:function(a){return a.x=this[0],a.y=this[1],a.z=this[2],a.w=this[3],a}},{key:"ELEMENTS",get:function(){return 4}},{key:"z",get:function(){return this[2]},set:function(a){this[2]=re(a)}},{key:"w",get:function(){return this[3]},set:function(a){this[3]=re(a)}},{key:"transform",value:function(a){return Or(this,this,a),this.check()}},{key:"transformByMatrix3",value:function(a){return Ka(this,this,a),this.check()}},{key:"transformByMatrix2",value:function(a){return Hh(this,this,a),this.check()}},{key:"transformByQuaternion",value:function(a){return Ya(this,this,a),this.check()}},{key:"applyMatrix4",value:function(a){return a.transform(this,this),this}}],[{key:"ZERO",get:function(){return $a||($a=new e(0,0,0,0),Object.freeze($a)),$a}}]),e}(Xa);function Sb(t){var r=Mb();return function(){var n=ce(t),a;if(r){var i=ce(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return Pe(this,a)}}function Mb(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var qa=function(t){De(e,t);var r=Sb(e);function e(){return Fe(this,e),r.apply(this,arguments)}return Le(e,[{key:"toString",value:function(){var a="[";if(Se.printRowMajor){a+="row-major:";for(var i=0;i<this.RANK;++i)for(var o=0;o<this.RANK;++o)a+=" ".concat(this[o*this.RANK+i])}else{a+="column-major:";for(var s=0;s<this.ELEMENTS;++s)a+=" ".concat(this[s])}return a+="]",a}},{key:"getElementIndex",value:function(a,i){return i*this.RANK+a}},{key:"getElement",value:function(a,i){return this[i*this.RANK+a]}},{key:"setElement",value:function(a,i,o){return this[i*this.RANK+a]=re(o),this}},{key:"getColumn",value:function(a){for(var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:new Array(this.RANK).fill(-0),o=a*this.RANK,s=0;s<this.RANK;++s)i[s]=this[o+s];return i}},{key:"setColumn",value:function(a,i){for(var o=a*this.RANK,s=0;s<this.RANK;++s)this[o+s]=i[s];return this}}]),e}(Mr);function Yh(){var t=new Ge(9);return Ge!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function Qh(t,r){if(t===r){var e=r[1],n=r[2],a=r[5];t[1]=r[3],t[2]=r[6],t[3]=e,t[5]=r[7],t[6]=n,t[7]=a}else t[0]=r[0],t[1]=r[3],t[2]=r[6],t[3]=r[1],t[4]=r[4],t[5]=r[7],t[6]=r[2],t[7]=r[5],t[8]=r[8];return t}function $h(t,r){var e=r[0],n=r[1],a=r[2],i=r[3],o=r[4],s=r[5],u=r[6],f=r[7],c=r[8],l=c*o-s*f,d=-c*i+s*u,h=f*i-o*u,v=e*l+n*d+a*h;return v?(v=1/v,t[0]=l*v,t[1]=(-c*n+a*f)*v,t[2]=(s*n-a*o)*v,t[3]=d*v,t[4]=(c*e-a*u)*v,t[5]=(-s*e+a*i)*v,t[6]=h*v,t[7]=(-f*e+n*u)*v,t[8]=(o*e-n*i)*v,t):null}function qh(t){var r=t[0],e=t[1],n=t[2],a=t[3],i=t[4],o=t[5],s=t[6],u=t[7],f=t[8];return r*(f*i-o*u)+e*(-f*a+o*s)+n*(u*a-i*s)}function jo(t,r,e){var n=r[0],a=r[1],i=r[2],o=r[3],s=r[4],u=r[5],f=r[6],c=r[7],l=r[8],d=e[0],h=e[1],v=e[2],g=e[3],y=e[4],A=e[5],_=e[6],T=e[7],B=e[8];return t[0]=d*n+h*o+v*f,t[1]=d*a+h*s+v*c,t[2]=d*i+h*u+v*l,t[3]=g*n+y*o+A*f,t[4]=g*a+y*s+A*c,t[5]=g*i+y*u+A*l,t[6]=_*n+T*o+B*f,t[7]=_*a+T*s+B*c,t[8]=_*i+T*u+B*l,t}function Zh(t,r,e){var n=r[0],a=r[1],i=r[2],o=r[3],s=r[4],u=r[5],f=r[6],c=r[7],l=r[8],d=e[0],h=e[1];return t[0]=n,t[1]=a,t[2]=i,t[3]=o,t[4]=s,t[5]=u,t[6]=d*n+h*o+f,t[7]=d*a+h*s+c,t[8]=d*i+h*u+l,t}function em(t,r,e){var n=r[0],a=r[1],i=r[2],o=r[3],s=r[4],u=r[5],f=r[6],c=r[7],l=r[8],d=Math.sin(e),h=Math.cos(e);return t[0]=h*n+d*o,t[1]=h*a+d*s,t[2]=h*i+d*u,t[3]=h*o-d*n,t[4]=h*s-d*a,t[5]=h*u-d*i,t[6]=f,t[7]=c,t[8]=l,t}function Vo(t,r,e){var n=e[0],a=e[1];return t[0]=n*r[0],t[1]=n*r[1],t[2]=n*r[2],t[3]=a*r[3],t[4]=a*r[4],t[5]=a*r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t}function tm(t,r){var e=r[0],n=r[1],a=r[2],i=r[3],o=e+e,s=n+n,u=a+a,f=e*o,c=n*o,l=n*s,d=a*o,h=a*s,v=a*u,g=i*o,y=i*s,A=i*u;return t[0]=1-l-v,t[3]=c-A,t[6]=d+y,t[1]=c+A,t[4]=1-f-v,t[7]=h-g,t[2]=d-y,t[5]=h+g,t[8]=1-f-l,t}function Rb(t){var r=Ib();return function(){var n=ce(t),a;if(r){var i=ce(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return Pe(this,a)}}function Ib(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Jo;(function(t){t[t.COL0ROW0=0]="COL0ROW0",t[t.COL0ROW1=1]="COL0ROW1",t[t.COL0ROW2=2]="COL0ROW2",t[t.COL1ROW0=3]="COL1ROW0",t[t.COL1ROW1=4]="COL1ROW1",t[t.COL1ROW2=5]="COL1ROW2",t[t.COL2ROW0=6]="COL2ROW0",t[t.COL2ROW1=7]="COL2ROW1",t[t.COL2ROW2=8]="COL2ROW2"})(Jo||(Jo={}));var Ob=Object.freeze([1,0,0,0,1,0,0,0,1]),ir=function(t){De(e,t);var r=Rb(e);function e(n){for(var a,i=arguments.length,o=new Array(i>1?i-1:0),s=1;s<i;s++)o[s-1]=arguments[s];return Fe(this,e),a=r.call(this,-0,-0,-0,-0,-0,-0,-0,-0,-0),arguments.length===1&&Array.isArray(n)?a.copy(n):o.length>0?a.copy([n].concat(o)):a.identity(),a}return Le(e,[{key:"ELEMENTS",get:function(){return 9}},{key:"RANK",get:function(){return 3}},{key:"INDICES",get:function(){return Jo}},{key:"copy",value:function(a){return this[0]=a[0],this[1]=a[1],this[2]=a[2],this[3]=a[3],this[4]=a[4],this[5]=a[5],this[6]=a[6],this[7]=a[7],this[8]=a[8],this.check()}},{key:"identity",value:function(){return this.copy(Ob)}},{key:"fromObject",value:function(a){return this.check()}},{key:"fromQuaternion",value:function(a){return tm(this,a),this.check()}},{key:"set",value:function(a,i,o,s,u,f,c,l,d){return this[0]=a,this[1]=i,this[2]=o,this[3]=s,this[4]=u,this[5]=f,this[6]=c,this[7]=l,this[8]=d,this.check()}},{key:"setRowMajor",value:function(a,i,o,s,u,f,c,l,d){return this[0]=a,this[1]=s,this[2]=c,this[3]=i,this[4]=u,this[5]=l,this[6]=o,this[7]=f,this[8]=d,this.check()}},{key:"determinant",value:function(){return qh(this)}},{key:"transpose",value:function(){return Qh(this,this),this.check()}},{key:"invert",value:function(){return $h(this,this),this.check()}},{key:"multiplyLeft",value:function(a){return jo(this,a,this),this.check()}},{key:"multiplyRight",value:function(a){return jo(this,this,a),this.check()}},{key:"rotate",value:function(a){return em(this,this,a),this.check()}},{key:"scale",value:function(a){return Array.isArray(a)?Vo(this,this,a):Vo(this,this,[a,a]),this.check()}},{key:"translate",value:function(a){return Zh(this,this,a),this.check()}},{key:"transform",value:function(a,i){var o;switch(a.length){case 2:o=Ph(i||[-0,-0],a,this);break;case 3:o=Wa(i||[-0,-0,-0],a,this);break;case 4:o=Ka(i||[-0,-0,-0,-0],a,this);break;default:throw new Error("Illegal vector")}return Ht(o,a.length),o}},{key:"transformVector",value:function(a,i){return this.transform(a,i)}},{key:"transformVector2",value:function(a,i){return this.transform(a,i)}},{key:"transformVector3",value:function(a,i){return this.transform(a,i)}}],[{key:"IDENTITY",get:function(){return Fb()}},{key:"ZERO",get:function(){return wb()}}]),e}(qa);var Za,ei;function wb(){return Za||(Za=new ir([0,0,0,0,0,0,0,0,0]),Object.freeze(Za)),Za}function Fb(){return ei||(ei=new ir,Object.freeze(ei)),ei}function Lb(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function nm(t,r){if(t===r){var e=r[1],n=r[2],a=r[3],i=r[6],o=r[7],s=r[11];t[1]=r[4],t[2]=r[8],t[3]=r[12],t[4]=e,t[6]=r[9],t[7]=r[13],t[8]=n,t[9]=i,t[11]=r[14],t[12]=a,t[13]=o,t[14]=s}else t[0]=r[0],t[1]=r[4],t[2]=r[8],t[3]=r[12],t[4]=r[1],t[5]=r[5],t[6]=r[9],t[7]=r[13],t[8]=r[2],t[9]=r[6],t[10]=r[10],t[11]=r[14],t[12]=r[3],t[13]=r[7],t[14]=r[11],t[15]=r[15];return t}function am(t,r){var e=r[0],n=r[1],a=r[2],i=r[3],o=r[4],s=r[5],u=r[6],f=r[7],c=r[8],l=r[9],d=r[10],h=r[11],v=r[12],g=r[13],y=r[14],A=r[15],_=e*s-n*o,T=e*u-a*o,B=e*f-i*o,x=n*u-a*s,R=n*f-i*s,L=a*f-i*u,N=c*g-l*v,P=c*y-d*v,G=c*A-h*v,H=l*y-d*g,F=l*A-h*g,V=d*A-h*y,k=_*V-T*F+B*H+x*G-R*P+L*N;return k?(k=1/k,t[0]=(s*V-u*F+f*H)*k,t[1]=(a*F-n*V-i*H)*k,t[2]=(g*L-y*R+A*x)*k,t[3]=(d*R-l*L-h*x)*k,t[4]=(u*G-o*V-f*P)*k,t[5]=(e*V-a*G+i*P)*k,t[6]=(y*B-v*L-A*T)*k,t[7]=(c*L-d*B+h*T)*k,t[8]=(o*F-s*G+f*N)*k,t[9]=(n*G-e*F-i*N)*k,t[10]=(v*R-g*B+A*_)*k,t[11]=(l*B-c*R-h*_)*k,t[12]=(s*P-o*H-u*N)*k,t[13]=(e*H-n*P+a*N)*k,t[14]=(g*T-v*x-y*_)*k,t[15]=(c*x-l*T+d*_)*k,t):null}function im(t){var r=t[0],e=t[1],n=t[2],a=t[3],i=t[4],o=t[5],s=t[6],u=t[7],f=t[8],c=t[9],l=t[10],d=t[11],h=t[12],v=t[13],g=t[14],y=t[15],A=r*o-e*i,_=r*s-n*i,T=r*u-a*i,B=e*s-n*o,x=e*u-a*o,R=n*u-a*s,L=f*v-c*h,N=f*g-l*h,P=f*y-d*h,G=c*g-l*v,H=c*y-d*v,F=l*y-d*g;return A*F-_*H+T*G+B*P-x*N+R*L}function Xo(t,r,e){var n=r[0],a=r[1],i=r[2],o=r[3],s=r[4],u=r[5],f=r[6],c=r[7],l=r[8],d=r[9],h=r[10],v=r[11],g=r[12],y=r[13],A=r[14],_=r[15],T=e[0],B=e[1],x=e[2],R=e[3];return t[0]=T*n+B*s+x*l+R*g,t[1]=T*a+B*u+x*d+R*y,t[2]=T*i+B*f+x*h+R*A,t[3]=T*o+B*c+x*v+R*_,T=e[4],B=e[5],x=e[6],R=e[7],t[4]=T*n+B*s+x*l+R*g,t[5]=T*a+B*u+x*d+R*y,t[6]=T*i+B*f+x*h+R*A,t[7]=T*o+B*c+x*v+R*_,T=e[8],B=e[9],x=e[10],R=e[11],t[8]=T*n+B*s+x*l+R*g,t[9]=T*a+B*u+x*d+R*y,t[10]=T*i+B*f+x*h+R*A,t[11]=T*o+B*c+x*v+R*_,T=e[12],B=e[13],x=e[14],R=e[15],t[12]=T*n+B*s+x*l+R*g,t[13]=T*a+B*u+x*d+R*y,t[14]=T*i+B*f+x*h+R*A,t[15]=T*o+B*c+x*v+R*_,t}function om(t,r,e){var n=e[0],a=e[1],i=e[2],o,s,u,f,c,l,d,h,v,g,y,A;return r===t?(t[12]=r[0]*n+r[4]*a+r[8]*i+r[12],t[13]=r[1]*n+r[5]*a+r[9]*i+r[13],t[14]=r[2]*n+r[6]*a+r[10]*i+r[14],t[15]=r[3]*n+r[7]*a+r[11]*i+r[15]):(o=r[0],s=r[1],u=r[2],f=r[3],c=r[4],l=r[5],d=r[6],h=r[7],v=r[8],g=r[9],y=r[10],A=r[11],t[0]=o,t[1]=s,t[2]=u,t[3]=f,t[4]=c,t[5]=l,t[6]=d,t[7]=h,t[8]=v,t[9]=g,t[10]=y,t[11]=A,t[12]=o*n+c*a+v*i+r[12],t[13]=s*n+l*a+g*i+r[13],t[14]=u*n+d*a+y*i+r[14],t[15]=f*n+h*a+A*i+r[15]),t}function sm(t,r,e){var n=e[0],a=e[1],i=e[2];return t[0]=r[0]*n,t[1]=r[1]*n,t[2]=r[2]*n,t[3]=r[3]*n,t[4]=r[4]*a,t[5]=r[5]*a,t[6]=r[6]*a,t[7]=r[7]*a,t[8]=r[8]*i,t[9]=r[9]*i,t[10]=r[10]*i,t[11]=r[11]*i,t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],t}function um(t,r,e,n){var a=n[0],i=n[1],o=n[2],s=Math.hypot(a,i,o),u,f,c,l,d,h,v,g,y,A,_,T,B,x,R,L,N,P,G,H,F,V,k,E;return s<dt?null:(s=1/s,a*=s,i*=s,o*=s,u=Math.sin(e),f=Math.cos(e),c=1-f,l=r[0],d=r[1],h=r[2],v=r[3],g=r[4],y=r[5],A=r[6],_=r[7],T=r[8],B=r[9],x=r[10],R=r[11],L=a*a*c+f,N=i*a*c+o*u,P=o*a*c-i*u,G=a*i*c-o*u,H=i*i*c+f,F=o*i*c+a*u,V=a*o*c+i*u,k=i*o*c-a*u,E=o*o*c+f,t[0]=l*L+g*N+T*P,t[1]=d*L+y*N+B*P,t[2]=h*L+A*N+x*P,t[3]=v*L+_*N+R*P,t[4]=l*G+g*H+T*F,t[5]=d*G+y*H+B*F,t[6]=h*G+A*H+x*F,t[7]=v*G+_*H+R*F,t[8]=l*V+g*k+T*E,t[9]=d*V+y*k+B*E,t[10]=h*V+A*k+x*E,t[11]=v*V+_*k+R*E,r!==t&&(t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15]),t)}function fm(t,r,e){var n=Math.sin(e),a=Math.cos(e),i=r[4],o=r[5],s=r[6],u=r[7],f=r[8],c=r[9],l=r[10],d=r[11];return r!==t&&(t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15]),t[4]=i*a+f*n,t[5]=o*a+c*n,t[6]=s*a+l*n,t[7]=u*a+d*n,t[8]=f*a-i*n,t[9]=c*a-o*n,t[10]=l*a-s*n,t[11]=d*a-u*n,t}function cm(t,r,e){var n=Math.sin(e),a=Math.cos(e),i=r[0],o=r[1],s=r[2],u=r[3],f=r[8],c=r[9],l=r[10],d=r[11];return r!==t&&(t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15]),t[0]=i*a-f*n,t[1]=o*a-c*n,t[2]=s*a-l*n,t[3]=u*a-d*n,t[8]=i*n+f*a,t[9]=o*n+c*a,t[10]=s*n+l*a,t[11]=u*n+d*a,t}function lm(t,r,e){var n=Math.sin(e),a=Math.cos(e),i=r[0],o=r[1],s=r[2],u=r[3],f=r[4],c=r[5],l=r[6],d=r[7];return r!==t&&(t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15]),t[0]=i*a+f*n,t[1]=o*a+c*n,t[2]=s*a+l*n,t[3]=u*a+d*n,t[4]=f*a-i*n,t[5]=c*a-o*n,t[6]=l*a-s*n,t[7]=d*a-u*n,t}function dm(t,r){var e=r[0],n=r[1],a=r[2],i=r[3],o=e+e,s=n+n,u=a+a,f=e*o,c=n*o,l=n*s,d=a*o,h=a*s,v=a*u,g=i*o,y=i*s,A=i*u;return t[0]=1-l-v,t[1]=c+A,t[2]=d-y,t[3]=0,t[4]=c-A,t[5]=1-f-v,t[6]=h+g,t[7]=0,t[8]=d+y,t[9]=h-g,t[10]=1-f-l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function hm(t,r,e,n,a,i,o){var s=1/(e-r),u=1/(a-n),f=1/(i-o);return t[0]=i*2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=i*2*u,t[6]=0,t[7]=0,t[8]=(e+r)*s,t[9]=(a+n)*u,t[10]=(o+i)*f,t[11]=-1,t[12]=0,t[13]=0,t[14]=o*i*2*f,t[15]=0,t}function Db(t,r,e,n,a){var i=1/Math.tan(r/2),o;return t[0]=i/e,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=i,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,a!=null&&a!==1/0?(o=1/(n-a),t[10]=(a+n)*o,t[14]=2*a*n*o):(t[10]=-1,t[14]=-2*n),t}var mm=Db;function Pb(t,r,e,n,a,i,o){var s=1/(r-e),u=1/(n-a),f=1/(i-o);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*f,t[11]=0,t[12]=(r+e)*s,t[13]=(a+n)*u,t[14]=(o+i)*f,t[15]=1,t}var pm=Pb;function vm(t,r,e,n){var a,i,o,s,u,f,c,l,d,h,v=r[0],g=r[1],y=r[2],A=n[0],_=n[1],T=n[2],B=e[0],x=e[1],R=e[2];return Math.abs(v-B)<dt&&Math.abs(g-x)<dt&&Math.abs(y-R)<dt?Lb(t):(c=v-B,l=g-x,d=y-R,h=1/Math.hypot(c,l,d),c*=h,l*=h,d*=h,a=_*d-T*l,i=T*c-A*d,o=A*l-_*c,h=Math.hypot(a,i,o),h?(h=1/h,a*=h,i*=h,o*=h):(a=0,i=0,o=0),s=l*o-d*i,u=d*a-c*o,f=c*i-l*a,h=Math.hypot(s,u,f),h?(h=1/h,s*=h,u*=h,f*=h):(s=0,u=0,f=0),t[0]=a,t[1]=s,t[2]=c,t[3]=0,t[4]=i,t[5]=u,t[6]=l,t[7]=0,t[8]=o,t[9]=f,t[10]=d,t[11]=0,t[12]=-(a*v+i*g+o*y),t[13]=-(s*v+u*g+f*y),t[14]=-(c*v+l*g+d*y),t[15]=1,t)}function kb(){var t=new Ge(4);return Ge!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function gm(t,r,e){return t[0]=r[0]+e[0],t[1]=r[1]+e[1],t[2]=r[2]+e[2],t[3]=r[3]+e[3],t}function ym(t,r,e){return t[0]=r[0]*e,t[1]=r[1]*e,t[2]=r[2]*e,t[3]=r[3]*e,t}function Am(t){var r=t[0],e=t[1],n=t[2],a=t[3];return Math.hypot(r,e,n,a)}function _m(t){var r=t[0],e=t[1],n=t[2],a=t[3];return r*r+e*e+n*n+a*a}function bm(t,r){var e=r[0],n=r[1],a=r[2],i=r[3],o=e*e+n*n+a*a+i*i;return o>0&&(o=1/Math.sqrt(o)),t[0]=e*o,t[1]=n*o,t[2]=a*o,t[3]=i*o,t}function Em(t,r){return t[0]*r[0]+t[1]*r[1]+t[2]*r[2]+t[3]*r[3]}function Bm(t,r,e,n){var a=r[0],i=r[1],o=r[2],s=r[3];return t[0]=a+n*(e[0]-a),t[1]=i+n*(e[1]-i),t[2]=o+n*(e[2]-o),t[3]=s+n*(e[3]-s),t}function xm(t,r,e){var n=r[0],a=r[1],i=r[2],o=r[3];return t[0]=e[0]*n+e[4]*a+e[8]*i+e[12]*o,t[1]=e[1]*n+e[5]*a+e[9]*i+e[13]*o,t[2]=e[2]*n+e[6]*a+e[10]*i+e[14]*o,t[3]=e[3]*n+e[7]*a+e[11]*i+e[15]*o,t}function Tm(t,r,e){var n=r[0],a=r[1],i=r[2],o=e[0],s=e[1],u=e[2],f=e[3],c=f*n+s*i-u*a,l=f*a+u*n-o*i,d=f*i+o*a-s*n,h=-o*n-s*a-u*i;return t[0]=c*f+h*-o+l*-u-d*-s,t[1]=l*f+h*-s+d*-o-c*-u,t[2]=d*f+h*-u+c*-s-l*-o,t[3]=r[3],t}var tO=function(){var t=kb();return function(r,e,n,a,i,o){var s,u;for(e||(e=4),n||(n=0),a?u=Math.min(a*e+n,r.length):u=r.length,s=n;s<u;s+=e)t[0]=r[s],t[1]=r[s+1],t[2]=r[s+2],t[3]=r[s+3],i(t,t,o),r[s]=t[0],r[s+1]=t[1],r[s+2]=t[2],r[s+3]=t[3];return r}}();function Ub(t){var r=Nb();return function(){var n=ce(t),a;if(r){var i=ce(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return Pe(this,a)}}function Nb(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Yo;(function(t){t[t.COL0ROW0=0]="COL0ROW0",t[t.COL0ROW1=1]="COL0ROW1",t[t.COL0ROW2=2]="COL0ROW2",t[t.COL0ROW3=3]="COL0ROW3",t[t.COL1ROW0=4]="COL1ROW0",t[t.COL1ROW1=5]="COL1ROW1",t[t.COL1ROW2=6]="COL1ROW2",t[t.COL1ROW3=7]="COL1ROW3",t[t.COL2ROW0=8]="COL2ROW0",t[t.COL2ROW1=9]="COL2ROW1",t[t.COL2ROW2=10]="COL2ROW2",t[t.COL2ROW3=11]="COL2ROW3",t[t.COL3ROW0=12]="COL3ROW0",t[t.COL3ROW1=13]="COL3ROW1",t[t.COL3ROW2=14]="COL3ROW2",t[t.COL3ROW3=15]="COL3ROW3"})(Yo||(Yo={}));var Hb=45*Math.PI/180,jb=1,Ko=.1,Wo=500,Vb=Object.freeze([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),et=function(t){De(e,t);var r=Ub(e);function e(n){var a;return Fe(this,e),a=r.call(this,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0),arguments.length===1&&Array.isArray(n)?a.copy(n):a.identity(),a}return Le(e,[{key:"ELEMENTS",get:function(){return 16}},{key:"RANK",get:function(){return 4}},{key:"INDICES",get:function(){return Yo}},{key:"copy",value:function(a){return this[0]=a[0],this[1]=a[1],this[2]=a[2],this[3]=a[3],this[4]=a[4],this[5]=a[5],this[6]=a[6],this[7]=a[7],this[8]=a[8],this[9]=a[9],this[10]=a[10],this[11]=a[11],this[12]=a[12],this[13]=a[13],this[14]=a[14],this[15]=a[15],this.check()}},{key:"set",value:function(a,i,o,s,u,f,c,l,d,h,v,g,y,A,_,T){return this[0]=a,this[1]=i,this[2]=o,this[3]=s,this[4]=u,this[5]=f,this[6]=c,this[7]=l,this[8]=d,this[9]=h,this[10]=v,this[11]=g,this[12]=y,this[13]=A,this[14]=_,this[15]=T,this.check()}},{key:"setRowMajor",value:function(a,i,o,s,u,f,c,l,d,h,v,g,y,A,_,T){return this[0]=a,this[1]=u,this[2]=d,this[3]=y,this[4]=i,this[5]=f,this[6]=h,this[7]=A,this[8]=o,this[9]=c,this[10]=v,this[11]=_,this[12]=s,this[13]=l,this[14]=g,this[15]=T,this.check()}},{key:"toRowMajor",value:function(a){return a[0]=this[0],a[1]=this[4],a[2]=this[8],a[3]=this[12],a[4]=this[1],a[5]=this[5],a[6]=this[9],a[7]=this[13],a[8]=this[2],a[9]=this[6],a[10]=this[10],a[11]=this[14],a[12]=this[3],a[13]=this[7],a[14]=this[11],a[15]=this[15],a}},{key:"identity",value:function(){return this.copy(Vb)}},{key:"fromObject",value:function(a){return this.check()}},{key:"fromQuaternion",value:function(a){return dm(this,a),this.check()}},{key:"frustum",value:function(a){var i=a.left,o=a.right,s=a.bottom,u=a.top,f=a.near,c=f===void 0?Ko:f,l=a.far,d=l===void 0?Wo:l;return d===1/0?zb(this,i,o,s,u,c):hm(this,i,o,s,u,c,d),this.check()}},{key:"lookAt",value:function(a){var i=a.eye,o=a.center,s=o===void 0?[0,0,0]:o,u=a.up,f=u===void 0?[0,1,0]:u;return vm(this,i,s,f),this.check()}},{key:"ortho",value:function(a){var i=a.left,o=a.right,s=a.bottom,u=a.top,f=a.near,c=f===void 0?Ko:f,l=a.far,d=l===void 0?Wo:l;return pm(this,i,o,s,u,c,d),this.check()}},{key:"orthographic",value:function(a){var i=a.fovy,o=i===void 0?Hb:i,s=a.aspect,u=s===void 0?jb:s,f=a.focalDistance,c=f===void 0?1:f,l=a.near,d=l===void 0?Ko:l,h=a.far,v=h===void 0?Wo:h;Cm(o);var g=o/2,y=c*Math.tan(g),A=y*u;return this.ortho({left:-A,right:A,bottom:-y,top:y,near:d,far:v})}},{key:"perspective",value:function(a){var i=a.fovy,o=i===void 0?45*Math.PI/180:i,s=a.aspect,u=s===void 0?1:s,f=a.near,c=f===void 0?.1:f,l=a.far,d=l===void 0?500:l;return Cm(o),mm(this,o,u,c,d),this.check()}},{key:"determinant",value:function(){return im(this)}},{key:"getScale",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[-0,-0,-0];return a[0]=Math.sqrt(this[0]*this[0]+this[1]*this[1]+this[2]*this[2]),a[1]=Math.sqrt(this[4]*this[4]+this[5]*this[5]+this[6]*this[6]),a[2]=Math.sqrt(this[8]*this[8]+this[9]*this[9]+this[10]*this[10]),a}},{key:"getTranslation",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[-0,-0,-0];return a[0]=this[12],a[1]=this[13],a[2]=this[14],a}},{key:"getRotation",value:function(a,i){a=a||[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],i=i||[-0,-0,-0];var o=this.getScale(i),s=1/o[0],u=1/o[1],f=1/o[2];return a[0]=this[0]*s,a[1]=this[1]*u,a[2]=this[2]*f,a[3]=0,a[4]=this[4]*s,a[5]=this[5]*u,a[6]=this[6]*f,a[7]=0,a[8]=this[8]*s,a[9]=this[9]*u,a[10]=this[10]*f,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}},{key:"getRotationMatrix3",value:function(a,i){a=a||[-0,-0,-0,-0,-0,-0,-0,-0,-0],i=i||[-0,-0,-0];var o=this.getScale(i),s=1/o[0],u=1/o[1],f=1/o[2];return a[0]=this[0]*s,a[1]=this[1]*u,a[2]=this[2]*f,a[3]=this[4]*s,a[4]=this[5]*u,a[5]=this[6]*f,a[6]=this[8]*s,a[7]=this[9]*u,a[8]=this[10]*f,a}},{key:"transpose",value:function(){return nm(this,this),this.check()}},{key:"invert",value:function(){return am(this,this),this.check()}},{key:"multiplyLeft",value:function(a){return Xo(this,a,this),this.check()}},{key:"multiplyRight",value:function(a){return Xo(this,this,a),this.check()}},{key:"rotateX",value:function(a){return fm(this,this,a),this.check()}},{key:"rotateY",value:function(a){return cm(this,this,a),this.check()}},{key:"rotateZ",value:function(a){return lm(this,this,a),this.check()}},{key:"rotateXYZ",value:function(a){return this.rotateX(a[0]).rotateY(a[1]).rotateZ(a[2])}},{key:"rotateAxis",value:function(a,i){return um(this,this,a,i),this.check()}},{key:"scale",value:function(a){return sm(this,this,Array.isArray(a)?a:[a,a,a]),this.check()}},{key:"translate",value:function(a){return om(this,this,a),this.check()}},{key:"transform",value:function(a,i){return a.length===4?(i=xm(i||[-0,-0,-0,-0],a,this),Ht(i,4),i):this.transformAsPoint(a,i)}},{key:"transformAsPoint",value:function(a,i){var o=a.length,s;switch(o){case 2:s=Gh(i||[-0,-0],a,this);break;case 3:s=Or(i||[-0,-0,-0],a,this);break;default:throw new Error("Illegal vector")}return Ht(s,a.length),s}},{key:"transformAsVector",value:function(a,i){var o;switch(a.length){case 2:o=Uh(i||[-0,-0],a,this);break;case 3:o=za(i||[-0,-0,-0],a,this);break;default:throw new Error("Illegal vector")}return Ht(o,a.length),o}},{key:"transformPoint",value:function(a,i){return this.transformAsPoint(a,i)}},{key:"transformVector",value:function(a,i){return this.transformAsPoint(a,i)}},{key:"transformDirection",value:function(a,i){return this.transformAsVector(a,i)}},{key:"makeRotationX",value:function(a){return this.identity().rotateX(a)}},{key:"makeTranslation",value:function(a,i,o){return this.identity().translate([a,i,o])}}],[{key:"IDENTITY",get:function(){return Xb()}},{key:"ZERO",get:function(){return Jb()}}]),e}(qa);var ti,ri;function Jb(){return ti||(ti=new et([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Object.freeze(ti)),ti}function Xb(){return ri||(ri=new et,Object.freeze(ri)),ri}function Cm(t){if(t>Math.PI*2)throw Error("expected radians")}function zb(t,r,e,n,a,i){var o=2*i/(e-r),s=2*i/(a-n),u=(e+r)/(e-r),f=(a+n)/(a-n),c=-1,l=-1,d=-2*i;return t[0]=o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=u,t[9]=f,t[10]=c,t[11]=l,t[12]=0,t[13]=0,t[14]=d,t[15]=0,t}function Sm(){var t=new Ge(4);return Ge!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function Mm(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function Qo(t,r,e){e=e*.5;var n=Math.sin(e);return t[0]=n*r[0],t[1]=n*r[1],t[2]=n*r[2],t[3]=Math.cos(e),t}function $o(t,r,e){var n=r[0],a=r[1],i=r[2],o=r[3],s=e[0],u=e[1],f=e[2],c=e[3];return t[0]=n*c+o*s+a*f-i*u,t[1]=a*c+o*u+i*s-n*f,t[2]=i*c+o*f+n*u-a*s,t[3]=o*c-n*s-a*u-i*f,t}function Rm(t,r,e){e*=.5;var n=r[0],a=r[1],i=r[2],o=r[3],s=Math.sin(e),u=Math.cos(e);return t[0]=n*u+o*s,t[1]=a*u+i*s,t[2]=i*u-a*s,t[3]=o*u-n*s,t}function Im(t,r,e){e*=.5;var n=r[0],a=r[1],i=r[2],o=r[3],s=Math.sin(e),u=Math.cos(e);return t[0]=n*u-i*s,t[1]=a*u+o*s,t[2]=i*u+n*s,t[3]=o*u-a*s,t}function Om(t,r,e){e*=.5;var n=r[0],a=r[1],i=r[2],o=r[3],s=Math.sin(e),u=Math.cos(e);return t[0]=n*u+a*s,t[1]=a*u-n*s,t[2]=i*u+o*s,t[3]=o*u-i*s,t}function wm(t,r){var e=r[0],n=r[1],a=r[2];return t[0]=e,t[1]=n,t[2]=a,t[3]=Math.sqrt(Math.abs(1-e*e-n*n-a*a)),t}function dn(t,r,e,n){var a=r[0],i=r[1],o=r[2],s=r[3],u=e[0],f=e[1],c=e[2],l=e[3],d,h,v,g,y;return h=a*u+i*f+o*c+s*l,h<0&&(h=-h,u=-u,f=-f,c=-c,l=-l),1-h>dt?(d=Math.acos(h),v=Math.sin(d),g=Math.sin((1-n)*d)/v,y=Math.sin(n*d)/v):(g=1-n,y=n),t[0]=g*a+y*u,t[1]=g*i+y*f,t[2]=g*o+y*c,t[3]=g*s+y*l,t}function Fm(t,r){var e=r[0],n=r[1],a=r[2],i=r[3],o=e*e+n*n+a*a+i*i,s=o?1/o:0;return t[0]=-e*s,t[1]=-n*s,t[2]=-a*s,t[3]=i*s,t}function Lm(t,r){return t[0]=-r[0],t[1]=-r[1],t[2]=-r[2],t[3]=r[3],t}function qo(t,r){var e=r[0]+r[4]+r[8],n;if(e>0)n=Math.sqrt(e+1),t[3]=.5*n,n=.5/n,t[0]=(r[5]-r[7])*n,t[1]=(r[6]-r[2])*n,t[2]=(r[1]-r[3])*n;else{var a=0;r[4]>r[0]&&(a=1),r[8]>r[a*3+a]&&(a=2);var i=(a+1)%3,o=(a+2)%3;n=Math.sqrt(r[a*3+a]-r[i*3+i]-r[o*3+o]+1),t[a]=.5*n,n=.5/n,t[3]=(r[i*3+o]-r[o*3+i])*n,t[i]=(r[i*3+a]+r[a*3+i])*n,t[o]=(r[o*3+a]+r[a*3+o])*n}return t}var Dm=gm;var Pm=ym,Gm=Em,km=Bm,Um=Am;var Nm=_m;var Hm=bm;var jm=function(){var t=ko(),r=Uo(1,0,0),e=Uo(0,1,0);return function(n,a,i){var o=No(a,i);return o<-.999999?(Ir(t,r,a),Kh(t)<1e-6&&Ir(t,e,a),jh(t,t),Qo(n,t,Math.PI),n):o>.999999?(n[0]=0,n[1]=0,n[2]=0,n[3]=1,n):(Ir(t,a,i),n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=1+o,Hm(n,n))}}(),gO=function(){var t=Sm(),r=Sm();return function(e,n,a,i,o,s){return dn(t,n,o,s),dn(r,a,i,s),dn(e,t,r,2*s*(1-s)),e}}(),yO=function(){var t=Yh();return function(r,e,n,a){return t[0]=n[0],t[3]=n[1],t[6]=n[2],t[1]=a[0],t[4]=a[1],t[7]=a[2],t[2]=-e[0],t[5]=-e[1],t[8]=-e[2],Hm(r,qo(r,t))}}();function Wb(t){var r=Yb();return function(){var n=ce(t),a;if(r){var i=ce(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return Pe(this,a)}}function Yb(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Qb=[0,0,0,1],Zo=function(t){De(e,t);var r=Wb(e);function e(){var n,a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1;return Fe(this,e),n=r.call(this,-0,-0,-0,-0),Array.isArray(a)&&arguments.length===1?n.copy(a):n.set(a,i,o,s),n}return Le(e,[{key:"copy",value:function(a){return this[0]=a[0],this[1]=a[1],this[2]=a[2],this[3]=a[3],this.check()}},{key:"set",value:function(a,i,o,s){return this[0]=a,this[1]=i,this[2]=o,this[3]=s,this.check()}},{key:"fromObject",value:function(a){return this[0]=a.x,this[1]=a.y,this[2]=a.z,this[3]=a.w,this.check()}},{key:"fromMatrix3",value:function(a){return qo(this,a),this.check()}},{key:"fromAxisRotation",value:function(a,i){return Qo(this,a,i),this.check()}},{key:"identity",value:function(){return Mm(this),this.check()}},{key:"setAxisAngle",value:function(a,i){return this.fromAxisRotation(a,i)}},{key:"ELEMENTS",get:function(){return 4}},{key:"x",get:function(){return this[0]},set:function(a){this[0]=re(a)}},{key:"y",get:function(){return this[1]},set:function(a){this[1]=re(a)}},{key:"z",get:function(){return this[2]},set:function(a){this[2]=re(a)}},{key:"w",get:function(){return this[3]},set:function(a){this[3]=re(a)}},{key:"len",value:function(){return Um(this)}},{key:"lengthSquared",value:function(){return Nm(this)}},{key:"dot",value:function(a){return Gm(this,a)}},{key:"rotationTo",value:function(a,i){return jm(this,a,i),this.check()}},{key:"add",value:function(a){return Dm(this,this,a),this.check()}},{key:"calculateW",value:function(){return wm(this,this),this.check()}},{key:"conjugate",value:function(){return Lm(this,this),this.check()}},{key:"invert",value:function(){return Fm(this,this),this.check()}},{key:"lerp",value:function(a,i,o){return o===void 0?this.lerp(this,a,i):(km(this,a,i,o),this.check())}},{key:"multiplyRight",value:function(a){return $o(this,this,a),this.check()}},{key:"multiplyLeft",value:function(a){return $o(this,a,this),this.check()}},{key:"normalize",value:function(){var a=this.len(),i=a>0?1/a:0;return this[0]=this[0]*i,this[1]=this[1]*i,this[2]=this[2]*i,this[3]=this[3]*i,a===0&&(this[3]=1),this.check()}},{key:"rotateX",value:function(a){return Rm(this,this,a),this.check()}},{key:"rotateY",value:function(a){return Im(this,this,a),this.check()}},{key:"rotateZ",value:function(a){return Om(this,this,a),this.check()}},{key:"scale",value:function(a){return Pm(this,this,a),this.check()}},{key:"slerp",value:function(a,i,o){var s,u,f;switch(arguments.length){case 1:var c=a.start;s=c===void 0?Qb:c,u=a.target,f=a.ratio;break;case 2:s=this,u=a,f=i;break;default:s=a,u=i,f=o}return dn(this,s,u,f),this.check()}},{key:"transformVector4",value:function(a){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:new Wh;return Tm(i,a,this),Ht(i,4)}},{key:"lengthSq",value:function(){return this.lengthSquared()}},{key:"setFromAxisAngle",value:function(a,i){return this.setAxisAngle(a,i)}},{key:"premultiply",value:function(a){return this.multiplyLeft(a)}},{key:"multiply",value:function(a){return this.multiplyRight(a)}}]),e}(Mr);var es=`#if (defined(SHADER_TYPE_FRAGMENT) && defined(LIGHTING_FRAGMENT)) || (defined(SHADER_TYPE_VERTEX) && defined(LIGHTING_VERTEX))

struct AmbientLight {
 vec3 color;
};

struct PointLight {
 vec3 color;
 vec3 position;
 vec3 attenuation;
};

struct DirectionalLight {
  vec3 color;
  vec3 direction;
};

uniform AmbientLight lighting_uAmbientLight;
uniform PointLight lighting_uPointLight[MAX_LIGHTS];
uniform DirectionalLight lighting_uDirectionalLight[MAX_LIGHTS];
uniform int lighting_uPointLightCount;
uniform int lighting_uDirectionalLightCount;

uniform bool lighting_uEnabled;

float getPointLightAttenuation(PointLight pointLight, float distance) {
  return pointLight.attenuation.x
       + pointLight.attenuation.y * distance
       + pointLight.attenuation.z * distance * distance;
}

#endif
`;function $b(t,r){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=qb(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var n=0,a=function(){};return{s:a,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(f){throw f},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,o=!1,s;return{s:function(){e=e.call(t)},n:function(){var f=e.next();return i=f.done,f},e:function(f){o=!0,s=f},f:function(){try{!i&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function qb(t,r){if(t){if(typeof t=="string")return Vm(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return Vm(t,r)}}function Vm(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}var Zb={lightSources:{}};function ts(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.color,e=r===void 0?[0,0,0]:r,n=t.intensity,a=n===void 0?1:n;return e.map(function(i){return i*a/255})}function e1(t){var r=t.ambientLight,e=t.pointLights,n=e===void 0?[]:e,a=t.directionalLights,i=a===void 0?[]:a,o={};return r?o["lighting_uAmbientLight.color"]=ts(r):o["lighting_uAmbientLight.color"]=[0,0,0],n.forEach(function(s,u){o["lighting_uPointLight[".concat(u,"].color")]=ts(s),o["lighting_uPointLight[".concat(u,"].position")]=s.position,o["lighting_uPointLight[".concat(u,"].attenuation")]=s.attenuation||[1,0,0]}),o.lighting_uPointLightCount=n.length,i.forEach(function(s,u){o["lighting_uDirectionalLight[".concat(u,"].color")]=ts(s),o["lighting_uDirectionalLight[".concat(u,"].direction")]=s.direction}),o.lighting_uDirectionalLightCount=i.length,o}function Jm(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Zb;if("lightSources"in t){var r=t.lightSources||{},e=r.ambientLight,n=r.pointLights,a=r.directionalLights,i=e||n&&n.length>0||a&&a.length>0;return i?Object.assign({},e1({ambientLight:e,pointLights:n,directionalLights:a}),{lighting_uEnabled:!0}):{lighting_uEnabled:!1}}if("lights"in t){var o={pointLights:[],directionalLights:[]},s=$b(t.lights||[]),u;try{for(s.s();!(u=s.n()).done;){var f=u.value;switch(f.type){case"ambient":o.ambientLight=f;break;case"directional":o.directionalLights.push(f);break;case"point":o.pointLights.push(f);break;default:}}}catch(c){s.e(c)}finally{s.f()}return Jm({lightSources:o})}return{}}var Xm={name:"lights",vs:es,fs:es,getUniforms:Jm,defines:{MAX_LIGHTS:3}};var zm=`uniform mat4 u_MVPMatrix;
uniform mat4 u_ModelMatrix;
uniform mat4 u_NormalMatrix;

varying vec3 pbr_vPosition;
varying vec2 pbr_vUV;

#ifdef HAS_NORMALS
# ifdef HAS_TANGENTS
varying mat3 pbr_vTBN;
# else
varying vec3 pbr_vNormal;
# endif
#endif

void pbr_setPositionNormalTangentUV(vec4 position, vec4 normal, vec4 tangent, vec2 uv)
{
  vec4 pos = u_ModelMatrix * position;
  pbr_vPosition = vec3(pos.xyz) / pos.w;

#ifdef HAS_NORMALS
#ifdef HAS_TANGENTS
  vec3 normalW = normalize(vec3(u_NormalMatrix * vec4(normal.xyz, 0.0)));
  vec3 tangentW = normalize(vec3(u_ModelMatrix * vec4(tangent.xyz, 0.0)));
  vec3 bitangentW = cross(normalW, tangentW) * tangent.w;
  pbr_vTBN = mat3(tangentW, bitangentW, normalW);
#else
  pbr_vNormal = normalize(vec3(u_ModelMatrix * vec4(normal.xyz, 0.0)));
#endif
#endif

#ifdef HAS_UV
  pbr_vUV = uv;
#else
  pbr_vUV = vec2(0.,0.);
#endif
}
`;var Km=`#if defined(USE_TEX_LOD) && !defined(FEATURE_GLSL_TEXTURE_LOD)
# error PBR fragment shader: Texture LOD is not available
#endif

#if !defined(HAS_TANGENTS) && !defined(FEATURE_GLSL_DERIVATIVES)
# error PBR fragment shader: Derivatives are not available
#endif


#if (__VERSION__ < 300)
  #define SMART_FOR(INIT, WEBGL1COND, WEBGL2COND, INCR) for (INIT; WEBGL1COND; INCR)
#else
  #define SMART_FOR(INIT, WEBGL1COND, WEBGL2COND, INCR) for (INIT; WEBGL2COND; INCR)
#endif

precision highp float;

uniform bool pbr_uUnlit;

#ifdef USE_IBL
uniform samplerCube u_DiffuseEnvSampler;
uniform samplerCube u_SpecularEnvSampler;
uniform sampler2D u_brdfLUT;
uniform vec2 u_ScaleIBLAmbient;
#endif

#ifdef HAS_BASECOLORMAP
uniform sampler2D u_BaseColorSampler;
#endif
#ifdef HAS_NORMALMAP
uniform sampler2D u_NormalSampler;
uniform float u_NormalScale;
#endif
#ifdef HAS_EMISSIVEMAP
uniform sampler2D u_EmissiveSampler;
uniform vec3 u_EmissiveFactor;
#endif
#ifdef HAS_METALROUGHNESSMAP
uniform sampler2D u_MetallicRoughnessSampler;
#endif
#ifdef HAS_OCCLUSIONMAP
uniform sampler2D u_OcclusionSampler;
uniform float u_OcclusionStrength;
#endif

#ifdef ALPHA_CUTOFF
uniform float u_AlphaCutoff;
#endif

uniform vec2 u_MetallicRoughnessValues;
uniform vec4 u_BaseColorFactor;

uniform vec3 u_Camera;
#ifdef PBR_DEBUG
uniform vec4 u_ScaleDiffBaseMR;
uniform vec4 u_ScaleFGDSpec;
#endif

varying vec3 pbr_vPosition;

varying vec2 pbr_vUV;

#ifdef HAS_NORMALS
#ifdef HAS_TANGENTS
varying mat3 pbr_vTBN;
#else
varying vec3 pbr_vNormal;
#endif
#endif


struct PBRInfo
{
  float NdotL;
  float NdotV;
  float NdotH;
  float LdotH;
  float VdotH;
  float perceptualRoughness;
  float metalness;
  vec3 reflectance0;
  vec3 reflectance90;
  float alphaRoughness;
  vec3 diffuseColor;
  vec3 specularColor;
  vec3 n;
  vec3 v;
};

const float M_PI = 3.141592653589793;
const float c_MinRoughness = 0.04;

vec4 SRGBtoLINEAR(vec4 srgbIn)
{
#ifdef MANUAL_SRGB
#ifdef SRGB_FAST_APPROXIMATION
  vec3 linOut = pow(srgbIn.xyz,vec3(2.2));
#else
  vec3 bLess = step(vec3(0.04045),srgbIn.xyz);
  vec3 linOut = mix( srgbIn.xyz/vec3(12.92), pow((srgbIn.xyz+vec3(0.055))/vec3(1.055),vec3(2.4)), bLess );
#endif
  return vec4(linOut,srgbIn.w);;
#else
  return srgbIn;
#endif
}

vec3 getNormal()
{
#ifndef HAS_TANGENTS
  vec3 pos_dx = dFdx(pbr_vPosition);
  vec3 pos_dy = dFdy(pbr_vPosition);
  vec3 tex_dx = dFdx(vec3(pbr_vUV, 0.0));
  vec3 tex_dy = dFdy(vec3(pbr_vUV, 0.0));
  vec3 t = (tex_dy.t * pos_dx - tex_dx.t * pos_dy) / (tex_dx.s * tex_dy.t - tex_dy.s * tex_dx.t);

#ifdef HAS_NORMALS
  vec3 ng = normalize(pbr_vNormal);
#else
  vec3 ng = cross(pos_dx, pos_dy);
#endif

  t = normalize(t - ng * dot(ng, t));
  vec3 b = normalize(cross(ng, t));
  mat3 tbn = mat3(t, b, ng);
#else
  mat3 tbn = pbr_vTBN;
#endif

#ifdef HAS_NORMALMAP
  vec3 n = texture2D(u_NormalSampler, pbr_vUV).rgb;
  n = normalize(tbn * ((2.0 * n - 1.0) * vec3(u_NormalScale, u_NormalScale, 1.0)));
#else
  vec3 n = normalize(tbn[2].xyz);
#endif

  return n;
}


#ifdef USE_IBL
vec3 getIBLContribution(PBRInfo pbrInputs, vec3 n, vec3 reflection)
{
  float mipCount = 9.0;
  float lod = (pbrInputs.perceptualRoughness * mipCount);
  vec3 brdf = SRGBtoLINEAR(texture2D(u_brdfLUT,
    vec2(pbrInputs.NdotV, 1.0 - pbrInputs.perceptualRoughness))).rgb;
  vec3 diffuseLight = SRGBtoLINEAR(textureCube(u_DiffuseEnvSampler, n)).rgb;

#ifdef USE_TEX_LOD
  vec3 specularLight = SRGBtoLINEAR(textureCubeLod(u_SpecularEnvSampler, reflection, lod)).rgb;
#else
  vec3 specularLight = SRGBtoLINEAR(textureCube(u_SpecularEnvSampler, reflection)).rgb;
#endif

  vec3 diffuse = diffuseLight * pbrInputs.diffuseColor;
  vec3 specular = specularLight * (pbrInputs.specularColor * brdf.x + brdf.y);
  diffuse *= u_ScaleIBLAmbient.x;
  specular *= u_ScaleIBLAmbient.y;

  return diffuse + specular;
}
#endif


vec3 diffuse(PBRInfo pbrInputs)
{
  return pbrInputs.diffuseColor / M_PI;
}

vec3 specularReflection(PBRInfo pbrInputs)
{
  return pbrInputs.reflectance0 +
    (pbrInputs.reflectance90 - pbrInputs.reflectance0) *
    pow(clamp(1.0 - pbrInputs.VdotH, 0.0, 1.0), 5.0);
}



float geometricOcclusion(PBRInfo pbrInputs)
{
  float NdotL = pbrInputs.NdotL;
  float NdotV = pbrInputs.NdotV;
  float r = pbrInputs.alphaRoughness;

  float attenuationL = 2.0 * NdotL / (NdotL + sqrt(r * r + (1.0 - r * r) * (NdotL * NdotL)));
  float attenuationV = 2.0 * NdotV / (NdotV + sqrt(r * r + (1.0 - r * r) * (NdotV * NdotV)));
  return attenuationL * attenuationV;
}





float microfacetDistribution(PBRInfo pbrInputs)
{
  float roughnessSq = pbrInputs.alphaRoughness * pbrInputs.alphaRoughness;
  float f = (pbrInputs.NdotH * roughnessSq - pbrInputs.NdotH) * pbrInputs.NdotH + 1.0;
  return roughnessSq / (M_PI * f * f);
}

void PBRInfo_setAmbientLight(inout PBRInfo pbrInputs) {
  pbrInputs.NdotL = 1.0;
  pbrInputs.NdotH = 0.0;
  pbrInputs.LdotH = 0.0;
  pbrInputs.VdotH = 1.0;
}

void PBRInfo_setDirectionalLight(inout PBRInfo pbrInputs, vec3 lightDirection) {
  vec3 n = pbrInputs.n;
  vec3 v = pbrInputs.v;
  vec3 l = normalize(lightDirection);
  vec3 h = normalize(l+v);

  pbrInputs.NdotL = clamp(dot(n, l), 0.001, 1.0);
  pbrInputs.NdotH = clamp(dot(n, h), 0.0, 1.0);
  pbrInputs.LdotH = clamp(dot(l, h), 0.0, 1.0);
  pbrInputs.VdotH = clamp(dot(v, h), 0.0, 1.0);
}

void PBRInfo_setPointLight(inout PBRInfo pbrInputs, PointLight pointLight) {
  vec3 light_direction = normalize(pointLight.position - pbr_vPosition);
  PBRInfo_setDirectionalLight(pbrInputs, light_direction);
}

vec3 calculateFinalColor(PBRInfo pbrInputs, vec3 lightColor) {
  vec3 F = specularReflection(pbrInputs);
  float G = geometricOcclusion(pbrInputs);
  float D = microfacetDistribution(pbrInputs);
  vec3 diffuseContrib = (1.0 - F) * diffuse(pbrInputs);
  vec3 specContrib = F * G * D / (4.0 * pbrInputs.NdotL * pbrInputs.NdotV);
  return pbrInputs.NdotL * lightColor * (diffuseContrib + specContrib);
}

vec4 pbr_filterColor(vec4 colorUnused)
{
#ifdef HAS_BASECOLORMAP
  vec4 baseColor = SRGBtoLINEAR(texture2D(u_BaseColorSampler, pbr_vUV)) * u_BaseColorFactor;
#else
  vec4 baseColor = u_BaseColorFactor;
#endif

#ifdef ALPHA_CUTOFF
  if (baseColor.a < u_AlphaCutoff) {
    discard;
  }
#endif

  vec3 color = vec3(0, 0, 0);

  if(pbr_uUnlit){
    color.rgb = baseColor.rgb;
  }
  else{


    float perceptualRoughness = u_MetallicRoughnessValues.y;
    float metallic = u_MetallicRoughnessValues.x;
#ifdef HAS_METALROUGHNESSMAP

    vec4 mrSample = texture2D(u_MetallicRoughnessSampler, pbr_vUV);
    perceptualRoughness = mrSample.g * perceptualRoughness;
    metallic = mrSample.b * metallic;
#endif
    perceptualRoughness = clamp(perceptualRoughness, c_MinRoughness, 1.0);
    metallic = clamp(metallic, 0.0, 1.0);

    float alphaRoughness = perceptualRoughness * perceptualRoughness;

    vec3 f0 = vec3(0.04);
    vec3 diffuseColor = baseColor.rgb * (vec3(1.0) - f0);
    diffuseColor *= 1.0 - metallic;
    vec3 specularColor = mix(f0, baseColor.rgb, metallic);
    float reflectance = max(max(specularColor.r, specularColor.g), specularColor.b);



    float reflectance90 = clamp(reflectance * 25.0, 0.0, 1.0);
    vec3 specularEnvironmentR0 = specularColor.rgb;
    vec3 specularEnvironmentR90 = vec3(1.0, 1.0, 1.0) * reflectance90;

    vec3 n = getNormal();
    vec3 v = normalize(u_Camera - pbr_vPosition);

    float NdotV = clamp(abs(dot(n, v)), 0.001, 1.0);
    vec3 reflection = -normalize(reflect(v, n));

    PBRInfo pbrInputs = PBRInfo(
      0.0,
      NdotV,
      0.0,
      0.0,
      0.0,
      perceptualRoughness,
      metallic,
      specularEnvironmentR0,
      specularEnvironmentR90,
      alphaRoughness,
      diffuseColor,
      specularColor,
      n,
      v
    );

#ifdef USE_LIGHTS
    PBRInfo_setAmbientLight(pbrInputs);
    color += calculateFinalColor(pbrInputs, lighting_uAmbientLight.color);
    SMART_FOR(int i = 0, i < MAX_LIGHTS, i < lighting_uDirectionalLightCount, i++) {
      if (i < lighting_uDirectionalLightCount) {
        PBRInfo_setDirectionalLight(pbrInputs, lighting_uDirectionalLight[i].direction);
        color += calculateFinalColor(pbrInputs, lighting_uDirectionalLight[i].color);
      }
    }
    SMART_FOR(int i = 0, i < MAX_LIGHTS, i < lighting_uPointLightCount, i++) {
      if (i < lighting_uPointLightCount) {
        PBRInfo_setPointLight(pbrInputs, lighting_uPointLight[i]);
        float attenuation = getPointLightAttenuation(lighting_uPointLight[i], distance(lighting_uPointLight[i].position, pbr_vPosition));
        color += calculateFinalColor(pbrInputs, lighting_uPointLight[i].color / attenuation);
      }
    }
#endif
#ifdef USE_IBL
    color += getIBLContribution(pbrInputs, n, reflection);
#endif
#ifdef HAS_OCCLUSIONMAP
    float ao = texture2D(u_OcclusionSampler, pbr_vUV).r;
    color = mix(color, color * ao, u_OcclusionStrength);
#endif

#ifdef HAS_EMISSIVEMAP
    vec3 emissive = SRGBtoLINEAR(texture2D(u_EmissiveSampler, pbr_vUV)).rgb * u_EmissiveFactor;
    color += emissive;
#endif

#ifdef PBR_DEBUG





    color = mix(color, baseColor.rgb, u_ScaleDiffBaseMR.y);
    color = mix(color, vec3(metallic), u_ScaleDiffBaseMR.z);
    color = mix(color, vec3(perceptualRoughness), u_ScaleDiffBaseMR.w);
#endif

  }

  return vec4(pow(color,vec3(1.0/2.2)), baseColor.a);
}
`;var hn={name:"pbr",vs:zm,fs:Km,defines:{LIGHTING_FRAGMENT:1},dependencies:[Xm]};var Wm="3.3.3";var dp=m(Ee()),Es=m(Be());function ut(t,r){if(!t)throw new Error(r||"loader assertion failed.")}var Qm=m(Ie()),bt={self:typeof self<"u"&&self,window:typeof window<"u"&&window,global:typeof global<"u"&&global,document:typeof document<"u"&&document},t1=bt.self||bt.window||bt.global||{},r1=bt.window||bt.self||bt.global||{},n1=bt.global||bt.self||bt.window||{},a1=bt.document||{};var or=Boolean((typeof process>"u"?"undefined":(0,Qm.default)(process))!=="object"||String(process)!=="[object process]"||process.browser);var Ym=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version),i1=Ym&&parseFloat(Ym[1])||0;function $m(t,r){if(!t)throw new Error(r||"loaders.gl assertion failed.")}var Zm=m(Ie()),Et={self:typeof self<"u"&&self,window:typeof window<"u"&&window,global:typeof global<"u"&&global,document:typeof document<"u"&&document},$O=Et.self||Et.window||Et.global||{},qO=Et.window||Et.self||Et.global||{},ep=Et.global||Et.self||Et.window||{},ZO=Et.document||{};var St=(typeof process>"u"?"undefined":(0,Zm.default)(process))!=="object"||String(process)!=="[object process]"||process.browser,mn=typeof importScripts=="function",ew=typeof window<"u"&&typeof window.orientation<"u",qm=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version),tw=qm&&parseFloat(qm[1])||0;var is=m(Ee()),pn=m(Be());var sr=m(tp());var o1="3.3.3",rs={};function Bt(t){return ns.apply(this,arguments)}function ns(){return ns=(0,is.default)(pn.default.mark(function t(r){var e,n,a=arguments;return pn.default.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return e=a.length>1&&a[1]!==void 0?a[1]:null,n=a.length>2&&a[2]!==void 0?a[2]:{},e&&(r=rp(r,e,n)),rs[r]=rs[r]||s1(r),o.next=6,rs[r];case 6:return o.abrupt("return",o.sent);case 7:case"end":return o.stop()}},t)})),ns.apply(this,arguments)}function rp(t,r,e){if(t.startsWith("http"))return t;var n=e.modules||{};return n[t]?n[t]:St?e.CDN?($m(e.CDN.startsWith("http")),"".concat(e.CDN,"/").concat(r,"@").concat(o1,"/dist/libs/").concat(t)):mn?"../src/libs/".concat(t):"modules/".concat(r,"/src/libs/").concat(t):"modules/".concat(r,"/dist/libs/").concat(t)}function s1(t){return as.apply(this,arguments)}function as(){return as=(0,is.default)(pn.default.mark(function t(r){var e,n,a;return pn.default.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(!r.endsWith("wasm")){o.next=7;break}return o.next=3,fetch(r);case 3:return e=o.sent,o.next=6,e.arrayBuffer();case 6:return o.abrupt("return",o.sent);case 7:if(St){o.next=20;break}if(o.prev=8,o.t0=sr&&sr.requireFromFile,!o.t0){o.next=14;break}return o.next=13,sr.requireFromFile(r);case 13:o.t0=o.sent;case 14:return o.abrupt("return",o.t0);case 17:return o.prev=17,o.t1=o.catch(8),o.abrupt("return",null);case 20:if(!mn){o.next=22;break}return o.abrupt("return",importScripts(r));case 22:return o.next=24,fetch(r);case 24:return n=o.sent,o.next=27,n.text();case 27:return a=o.sent,o.abrupt("return",u1(a,r));case 29:case"end":return o.stop()}},t,null,[[8,17]])})),as.apply(this,arguments)}function u1(t,r){if(!St)return sr.requireFromString&&sr.requireFromString(t,r);if(mn)return eval.call(ep,t),null;var e=document.createElement("script");e.id=r;try{e.appendChild(document.createTextNode(t))}catch{e.text=t}return document.body.appendChild(e),null}function ap(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:5;if(typeof t=="string")return t.slice(0,r);if(ArrayBuffer.isView(t))return np(t.buffer,t.byteOffset,r);if(t instanceof ArrayBuffer){var e=0;return np(t,e,r)}return""}function np(t,r,e){if(t.byteLength<=r+e)return"";for(var n=new DataView(t),a="",i=0;i<e;i++)a+=String.fromCharCode(n.getUint8(r+i));return a}function os(t){try{return JSON.parse(t)}catch{throw new Error('Failed to parse JSON from data starting with "'.concat(ap(t),'"'))}}function vn(t,r,e){var n=e!==void 0?new Uint8Array(t).subarray(r,r+e):new Uint8Array(t).subarray(r),a=new Uint8Array(n);return a.buffer}function jt(t,r){return ut(t>=0),ut(r>0),t+(r-1)&~(r-1)}function ss(t,r,e){var n;if(t instanceof ArrayBuffer)n=new Uint8Array(t);else{var a=t.byteOffset,i=t.byteLength;n=new Uint8Array(t.buffer||t.arrayBuffer,a,i)}return r.set(n,e),e+jt(n.byteLength,4)}var f1=globalThis._parseImageNode,us=typeof Image<"u",fs=typeof ImageBitmap<"u",c1=Boolean(f1),cs=or?!0:c1;function ip(t){switch(t){case"auto":return fs||us||cs;case"imagebitmap":return fs;case"image":return us;case"data":return cs;default:throw new Error("@loaders.gl/images: image ".concat(t," not supported in this environment"))}}function op(){if(fs)return"imagebitmap";if(us)return"image";if(cs)return"data";throw new Error("Install '@loaders.gl/polyfills' to parse images under Node.js")}var sp=m(Ie());function l1(t){var r=d1(t);if(!r)throw new Error("Not an image");return r}function up(t){switch(l1(t)){case"data":return t;case"image":case"imagebitmap":var r=document.createElement("canvas"),e=r.getContext("2d");if(!e)throw new Error("getImageData");return r.width=t.width,r.height=t.height,e.drawImage(t,0,0),e.getImageData(0,0,t.width,t.height);default:throw new Error("getImageData")}}function d1(t){return typeof ImageBitmap<"u"&&t instanceof ImageBitmap?"imagebitmap":typeof Image<"u"&&t instanceof Image?"image":t&&(0,sp.default)(t)==="object"&&t.data&&t.width&&t.height?"data":null}var ms=m(Ee()),gn=m(Be());var h1=/^data:image\/svg\+xml/,m1=/\.svg((\?|#).*)?$/;function ni(t){return t&&(h1.test(t)||m1.test(t))}function fp(t,r){if(ni(r)){var e=new TextDecoder,n=e.decode(t);try{typeof unescape=="function"&&typeof encodeURIComponent=="function"&&(n=unescape(encodeURIComponent(n)))}catch(i){throw new Error(i.message)}var a="data:image/svg+xml;base64,".concat(btoa(n));return a}return ls(t,r)}function ls(t,r){if(ni(r))throw new Error("SVG cannot be parsed directly to imagebitmap");return new Blob([new Uint8Array(t)])}function yn(t,r,e){return ds.apply(this,arguments)}function ds(){return ds=(0,ms.default)(gn.default.mark(function t(r,e,n){var a,i,o;return gn.default.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return a=fp(r,n),i=self.URL||self.webkitURL,o=typeof a!="string"&&i.createObjectURL(a),u.prev=3,u.next=6,p1(o||a,e);case 6:return u.abrupt("return",u.sent);case 7:return u.prev=7,o&&i.revokeObjectURL(o),u.finish(7);case 10:case"end":return u.stop()}},t,null,[[3,,7,10]])})),ds.apply(this,arguments)}function p1(t,r){return hs.apply(this,arguments)}function hs(){return hs=(0,ms.default)(gn.default.mark(function t(r,e){var n;return gn.default.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(n=new Image,n.src=r,!(e.image&&e.image.decode&&n.decode)){i.next=6;break}return i.next=5,n.decode();case 5:return i.abrupt("return",n);case 6:return i.next=8,new Promise(function(o,s){try{n.onload=function(){return o(n)},n.onerror=function(u){return s(new Error("Could not load image ".concat(r,": ").concat(u)))}}catch(u){s(u)}});case 8:return i.abrupt("return",i.sent);case 9:case"end":return i.stop()}},t)})),hs.apply(this,arguments)}var gs=m(Ee()),An=m(Be());var v1={},cp=!0;function ys(t,r,e){return ps.apply(this,arguments)}function ps(){return ps=(0,gs.default)(An.default.mark(function t(r,e,n){var a,i,o;return An.default.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(!ni(n)){u.next=7;break}return u.next=3,yn(r,e,n);case 3:i=u.sent,a=i,u.next=8;break;case 7:a=ls(r,n);case 8:return o=e&&e.imagebitmap,u.next=11,g1(a,o);case 11:return u.abrupt("return",u.sent);case 12:case"end":return u.stop()}},t)})),ps.apply(this,arguments)}function g1(t){return vs.apply(this,arguments)}function vs(){return vs=(0,gs.default)(An.default.mark(function t(r){var e,n=arguments;return An.default.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(e=n.length>1&&n[1]!==void 0?n[1]:null,(y1(e)||!cp)&&(e=null),!e){i.next=13;break}return i.prev=3,i.next=6,createImageBitmap(r,e);case 6:return i.abrupt("return",i.sent);case 9:i.prev=9,i.t0=i.catch(3),console.warn(i.t0),cp=!1;case 13:return i.next=15,createImageBitmap(r);case 15:return i.abrupt("return",i.sent);case 16:case"end":return i.stop()}},t,null,[[3,9]])})),vs.apply(this,arguments)}function y1(t){for(var r in t||v1)return!1;return!0}var lp=m(Ee()),As=m(Be());var xt=!1,_n=!0;function ur(t){var r=bn(t);return A1(r)||E1(r)||_1(r)||b1(r)}function A1(t){var r=bn(t),e=r.byteLength>=24&&r.getUint32(0,xt)===2303741511;return e?{mimeType:"image/png",width:r.getUint32(16,xt),height:r.getUint32(20,xt)}:null}function _1(t){var r=bn(t),e=r.byteLength>=10&&r.getUint32(0,xt)===1195984440;return e?{mimeType:"image/gif",width:r.getUint16(6,_n),height:r.getUint16(8,_n)}:null}function b1(t){var r=bn(t),e=r.byteLength>=14&&r.getUint16(0,xt)===16973&&r.getUint32(2,_n)===r.byteLength;return e?{mimeType:"image/bmp",width:r.getUint32(18,_n),height:r.getUint32(22,_n)}:null}function E1(t){var r=bn(t),e=r.byteLength>=3&&r.getUint16(0,xt)===65496&&r.getUint8(2)===255;if(!e)return null;for(var n=B1(),a=n.tableMarkers,i=n.sofMarkers,o=2;o+9<r.byteLength;){var s=r.getUint16(o,xt);if(i.has(s))return{mimeType:"image/jpeg",height:r.getUint16(o+5,xt),width:r.getUint16(o+7,xt)};if(!a.has(s))return null;o+=2,o+=r.getUint16(o,xt)}return null}function B1(){for(var t=new Set([65499,65476,65484,65501,65534]),r=65504;r<65520;++r)t.add(r);var e=new Set([65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487,65502]);return{tableMarkers:t,sofMarkers:e}}function bn(t){if(t instanceof DataView)return t;if(ArrayBuffer.isView(t))return new DataView(t.buffer);if(t instanceof ArrayBuffer)return new DataView(t);throw new Error("toDataView")}function bs(t,r){return _s.apply(this,arguments)}function _s(){return _s=(0,lp.default)(As.default.mark(function t(r,e){var n,a,i;return As.default.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return n=ur(r)||{},a=n.mimeType,i=globalThis._parseImageNode,ut(i),s.next=5,i(r,a);case 5:return s.abrupt("return",s.sent);case 6:case"end":return s.stop()}},t)})),_s.apply(this,arguments)}function xs(t,r,e){return Bs.apply(this,arguments)}function Bs(){return Bs=(0,dp.default)(Es.default.mark(function t(r,e,n){var a,i,o,s,u,f;return Es.default.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:e=e||{},a=e.image||{},i=a.type||"auto",o=n||{},s=o.url,u=x1(i),l.t0=u,l.next=l.t0==="imagebitmap"?8:l.t0==="image"?12:l.t0==="data"?16:20;break;case 8:return l.next=10,ys(r,e,s);case 10:return f=l.sent,l.abrupt("break",21);case 12:return l.next=14,yn(r,e,s);case 14:return f=l.sent,l.abrupt("break",21);case 16:return l.next=18,bs(r,e);case 18:return f=l.sent,l.abrupt("break",21);case 20:ut(!1);case 21:return i==="data"&&(f=up(f)),l.abrupt("return",f);case 23:case"end":return l.stop()}},t)})),Bs.apply(this,arguments)}function x1(t){switch(t){case"auto":case"data":return op();default:return ip(t),t}}var T1=["png","jpg","jpeg","gif","webp","bmp","ico","svg"],C1=["image/png","image/jpeg","image/gif","image/webp","image/bmp","image/vnd.microsoft.icon","image/svg+xml"],S1={image:{type:"auto",decode:!0}},Ts={id:"image",module:"images",name:"Images",version:Wm,mimeTypes:C1,extensions:T1,parse:xs,tests:[function(t){return Boolean(ur(new DataView(t)))}],options:S1};var M1=["image/png","image/jpeg","image/gif"],Cs={};function Ss(t){return Cs[t]===void 0&&(Cs[t]=R1(t)),Cs[t]}function R1(t){switch(t){case"image/webp":return I1();case"image/svg":return or;default:if(!or){var r=globalThis._parseImageNode;return Boolean(r)&&M1.includes(t)}return!0}}function I1(){if(!or)return!1;try{var t=document.createElement("canvas");return t.toDataURL("image/webp").indexOf("data:image/webp")===0}catch{return!1}}var Kp=m(Y()),Wp=m(Q());var vp=m(Jt()),gp=m(Y()),yp=m(Q()),Ap=m(wt()),_p=m(He()),bp=m(je()),ai=m(ke());var hp=m(Y()),mp=m(Q());var Tt=function(){function t(){(0,hp.default)(this,t);var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=r.id;this.id=e||Ve(this.constructor.name),this.display=!0,this.position=new ar,this.rotation=new ar,this.scale=new ar(1,1,1),this.matrix=new et,this.userData={},this.props={},this._setScenegraphNodeProps(r)}return(0,mp.default)(t,[{key:"delete",value:function(){}},{key:"setProps",value:function(e){return this._setScenegraphNodeProps(e),this}},{key:"toString",value:function(){return"{type: ScenegraphNode, id: ".concat(this.id,")}")}},{key:"setPosition",value:function(e){return M(e.length===3,"setPosition requires vector argument"),this.position=e,this}},{key:"setRotation",value:function(e){return M(e.length===3,"setRotation requires vector argument"),this.rotation=e,this}},{key:"setScale",value:function(e){return M(e.length===3,"setScale requires vector argument"),this.scale=e,this}},{key:"setMatrix",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;n?this.matrix.copy(e):this.matrix=e}},{key:"setMatrixComponents",value:function(e){var n=e.position,a=e.rotation,i=e.scale,o=e.update,s=o===void 0?!0:o;return n&&this.setPosition(n),a&&this.setRotation(a),i&&this.setScale(i),s&&this.updateMatrix(),this}},{key:"updateMatrix",value:function(){var e=this.position,n=this.rotation,a=this.scale;return this.matrix.identity(),this.matrix.translate(e),this.matrix.rotateXYZ(n),this.matrix.scale(a),this}},{key:"update",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.position,a=e.rotation,i=e.scale;return n&&this.setPosition(n),a&&this.setRotation(a),i&&this.setScale(i),this.updateMatrix(),this}},{key:"getCoordinateUniforms",value:function(e,n){M(e),n=n||this.matrix;var a=new et(e).multiplyRight(n),i=a.invert(),o=i.transpose();return{viewMatrix:e,modelMatrix:n,objectMatrix:n,worldMatrix:a,worldInverseMatrix:i,worldInverseTransposeMatrix:o}}},{key:"_setScenegraphNodeProps",value:function(e){"display"in e&&(this.display=e.display),"position"in e&&this.setPosition(e.position),"rotation"in e&&this.setRotation(e.rotation),"scale"in e&&this.setScale(e.scale),"matrix"in e&&this.setMatrix(e.matrix),Object.assign(this.props,e)}}]),t}();function O1(t,r){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=w1(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var n=0,a=function(){};return{s:a,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(f){throw f},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,o=!1,s;return{s:function(){e=e.call(t)},n:function(){var f=e.next();return i=f.done,f},e:function(f){o=!0,s=f},f:function(){try{!i&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function w1(t,r){if(t){if(typeof t=="string")return pp(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return pp(t,r)}}function pp(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function F1(t){var r=L1();return function(){var n=(0,ai.default)(t),a;if(r){var i=(0,ai.default)(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return(0,bp.default)(this,a)}}function L1(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var ii=function(t){(0,_p.default)(e,t);var r=F1(e);function e(){var n;(0,gp.default)(this,e);var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};a=Array.isArray(a)?{children:a}:a;var i=a,o=i.children,s=o===void 0?[]:o;return I.assert(s.every(function(u){return u instanceof Tt}),"every child must an instance of ScenegraphNode"),n=r.call(this,a),n.children=s,n}return(0,yp.default)(e,[{key:"add",value:function(){for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];for(var s=0,u=i;s<u.length;s++){var f=u[s];Array.isArray(f)?this.add.apply(this,(0,vp.default)(f)):this.children.push(f)}return this}},{key:"remove",value:function(a){var i=this.children,o=i.indexOf(a);return o>-1&&i.splice(o,1),this}},{key:"removeAll",value:function(){return this.children=[],this}},{key:"delete",value:function(){this.children.forEach(function(a){return a.delete()}),this.removeAll(),(0,Ap.default)((0,ai.default)(e.prototype),"delete",this).call(this)}},{key:"traverse",value:function(a){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=i.worldMatrix,s=o===void 0?new et:o,u=new et(s).multiplyRight(this.matrix),f=O1(this.children),c;try{for(f.s();!(c=f.n()).done;){var l=c.value;l instanceof e?l.traverse(a,{worldMatrix:u}):a(l,{worldMatrix:u})}}catch(d){f.e(d)}finally{f.f()}}}]),e}(Tt);var Rs=m(Y()),Is=m(Q());var D1={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},P1={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array};function Ep(t){if(!t._animation){var r=P1[t.componentType],e=D1[t.type],n=e*t.count,a=t.bufferView.data,i=a.buffer,o=a.byteOffset,s=new r(i,o+(t.byteOffset||0),n);if(e===1)t._animation=Array.from(s);else{for(var u=[],f=0;f<s.length;f+=e)u.push(Array.from(s.slice(f,f+e)));t._animation=u}}return t._animation}var G1=new et;function k1(t,r){if(r.matrix.identity(),t.translation&&r.matrix.translate(t.translation),t.rotation){var e=G1.fromQuaternion(t.rotation);r.matrix.multiplyRight(e)}t.scale&&r.matrix.scale(t.scale)}var Ms=new Zo;function U1(t,r,e,n,a){if(r==="rotation"){Ms.slerp({start:e,target:n,ratio:a});for(var i=0;i<Ms.length;i++)t[r][i]=Ms[i]}else for(var o=0;o<e.length;o++)t[r][o]=a*n[o]+(1-a)*e[o]}function N1(t,r,e){for(var n=e.p0,a=e.outTangent0,i=e.inTangent1,o=e.p1,s=e.tDiff,u=e.ratio,f=0;f<t[r].length;f++){var c=a[f]*s,l=i[f]*s;t[r][f]=(2*Math.pow(u,3)-3*Math.pow(u,2)+1)*n[f]+(Math.pow(u,3)-2*Math.pow(u,2)+u)*c+(-2*Math.pow(u,3)+3*Math.pow(u,2))*o[f]+(Math.pow(u,3)-Math.pow(u,2))*l}}function H1(t,r,e){for(var n=0;n<e.length;n++)t[r][n]=e[n]}function j1(t,r,e,n){var a=r.input,i=r.interpolation,o=r.output,s=a[a.length-1],u=t%s,f=a.findIndex(function(B){return B>=u}),c=Math.max(0,f-1);if(!Array.isArray(e[n]))switch(n){case"translation":e[n]=[0,0,0];break;case"rotation":e[n]=[0,0,0,1];break;case"scale":e[n]=[1,1,1];break;default:I.warn("Bad animation path ".concat(n))()}M(e[n].length===o[c].length);var l=a[c],d=a[f];switch(i){case"STEP":H1(e,n,o[c]);break;case"LINEAR":if(d>l){var h=(u-l)/(d-l);U1(e,n,o[c],o[f],h)}break;case"CUBICSPLINE":if(d>l){var v=(u-l)/(d-l),g=d-l,y=o[3*c+1],A=o[3*c+2],_=o[3*f+0],T=o[3*f+1];N1(e,n,{p0:y,outTangent0:A,inTangent1:_,p1:T,tDiff:g,ratio:v})}break;default:I.warn("Interpolation ".concat(i," not supported"))();break}}var V1=function(){function t(r){(0,Rs.default)(this,t),this.startTime=0,this.playing=!0,this.speed=1,this.channels=[],Object.assign(this,r)}return(0,Is.default)(t,[{key:"animate",value:function(e){if(this.playing){var n=e/1e3,a=(n-this.startTime)*this.speed;this.channels.forEach(function(i){var o=i.sampler,s=i.target,u=i.path;j1(a,o,s,u),k1(s,s._node)})}}}]),t}(),Bp=function(){function t(r){(0,Rs.default)(this,t),this.animations=r.animations.map(function(e,n){var a=e.name||"Animation-".concat(n),i=e.samplers.map(function(s){var u=s.input,f=s.interpolation,c=f===void 0?"LINEAR":f,l=s.output;return{input:Ep(r.accessors[u]),interpolation:c,output:Ep(r.accessors[l])}}),o=e.channels.map(function(s){var u=s.sampler,f=s.target;return{sampler:i[u],target:r.nodes[f.node],path:f.path}});return new V1({name:a,channels:o})})}return(0,Is.default)(t,[{key:"animate",value:function(e){this.setTime(e)}},{key:"setTime",value:function(e){this.animations.forEach(function(n){return n.animate(e)})}},{key:"getAnimations",value:function(){return this.animations}}]),t}();var ws=m(Jt());var Pp=m(Y()),Gp=m(Q()),kp=m(wt()),Up=m(He()),Np=m(je()),si=m(ke());var Fp=m(ae()),Lp=m(Y()),Dp=m(Q());var Cp=m(Y()),Sp=m(Q());function xp(t,r){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=J1(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var n=0,a=function(){};return{s:a,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(f){throw f},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,o=!1,s;return{s:function(){e=e.call(t)},n:function(){var f=e.next();return i=f.done,f},e:function(f){o=!0,s=f},f:function(){try{!i&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function J1(t,r){if(t){if(typeof t=="string")return Tp(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return Tp(t,r)}}function Tp(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}var Mp=function(){function t(r){(0,Cp.default)(this,t),this.gl=r,this._programCache={},this._getUniforms={},this._registeredModules={},this._hookFunctions=[],this._defaultModules=[],this._hashes={},this._hashCounter=0,this.stateHash=0,this._useCounts={}}return(0,Sp.default)(t,[{key:"addDefaultModule",value:function(e){this._defaultModules.find(function(n){return n.name===e.name})||this._defaultModules.push(e),this.stateHash++}},{key:"removeDefaultModule",value:function(e){var n=typeof e=="string"?e:e.name;this._defaultModules=this._defaultModules.filter(function(a){return a.name!==n}),this.stateHash++}},{key:"addShaderHook",value:function(e,n){n&&(e=Object.assign(n,{hook:e})),this._hookFunctions.push(e),this.stateHash++}},{key:"get",value:function(){var e=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=n.vs,i=a===void 0?"":a,o=n.fs,s=o===void 0?"":o,u=n.defines,f=u===void 0?{}:u,c=n.inject,l=c===void 0?{}:c,d=n.varyings,h=d===void 0?[]:d,v=n.bufferMode,g=v===void 0?35981:v,y=n.transpileToGLSL100,A=y===void 0?!1:y,_=this._getModuleList(n.modules),T=this._getHash(i),B=this._getHash(s),x=_.map(function(O){return e._getHash(O.name)}).sort(),R=h.map(function(O){return e._getHash(O)}),L=Object.keys(f).sort(),N=Object.keys(l).sort(),P=[],G=[],H=xp(L),F;try{for(H.s();!(F=H.n()).done;){var V=F.value;P.push(this._getHash(V)),P.push(this._getHash(f[V]))}}catch(O){H.e(O)}finally{H.f()}var k=xp(N),E;try{for(k.s();!(E=k.n()).done;){var b=E.value;G.push(this._getHash(b)),G.push(this._getHash(l[b]))}}catch(O){k.e(O)}finally{k.f()}var C="".concat(T,"/").concat(B,"D").concat(P.join("/"),"M").concat(x.join("/"),"I").concat(G.join("/"),"V").concat(R.join("/"),"H").concat(this.stateHash,"B").concat(g).concat(A?"T":"");if(!this._programCache[C]){var U=Lo(this.gl,{vs:i,fs:s,modules:_,inject:l,defines:f,hookFunctions:this._hookFunctions,transpileToGLSL100:A});this._programCache[C]=new Zr(this.gl,{hash:C,vs:U.vs,fs:U.fs,varyings:h,bufferMode:g}),this._getUniforms[C]=U.getUniforms||function(O){},this._useCounts[C]=0}return this._useCounts[C]++,this._programCache[C]}},{key:"getUniforms",value:function(e){return this._getUniforms[e.hash]||null}},{key:"release",value:function(e){var n=e.hash;this._useCounts[n]--,this._useCounts[n]===0&&(this._programCache[n].delete(),delete this._programCache[n],delete this._getUniforms[n],delete this._useCounts[n])}},{key:"_getHash",value:function(e){return this._hashes[e]===void 0&&(this._hashes[e]=this._hashCounter++),this._hashes[e]}},{key:"_getModuleList",value:function(){for(var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=new Array(this._defaultModules.length+e.length),a={},i=0,o=0,s=this._defaultModules.length;o<s;++o){var u=this._defaultModules[o],f=u.name;n[i++]=u,a[f]=!0}for(var c=0,l=e.length;c<l;++c){var d=e[c],h=d.name;a[h]||(n[i++]=d,a[h]=!0)}return n.length=i,n}}],[{key:"getDefaultProgramManager",value:function(e){return e.luma=e.luma||{},e.luma.defaultProgramManager=e.luma.defaultProgramManager||new t(e),e.luma.defaultProgramManager}}]),t}();var Ip=m(ae());function Rp(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),e.push.apply(e,n)}return e}function X1(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?Rp(Object(e),!0).forEach(function(n){(0,Ip.default)(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):Rp(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}var z1={POSITION:"positions",NORMAL:"normals",COLOR_0:"colors",TEXCOORD_0:"texCoords",TEXCOORD_1:"texCoords1",TEXCOORD_2:"texCoords2"};function Op(t,r,e){var n={},a=r.indices;for(var i in r.attributes){var o=r.attributes[i],s=K1(i,e);if(i==="indices")a=o;else if(o.constant)n[s]=o.value;else{var u=o.value,f=X1({},o);delete f.value,n[s]=[new me(t,u),f],W1(i,f)}}if(a){var c=a.value||a;M(c instanceof Uint16Array||c instanceof Uint32Array,'attribute array for "indices" must be of integer type');var l={size:1,isIndexed:a.isIndexed===void 0?!0:a.isIndexed};n.indices=[new me(t,{data:c,target:34963}),l]}return n}function K1(t,r){var e=r||{},n=e.attributeMap,a=n===void 0?z1:n;return a&&a[t]||t}function W1(t,r){var e;switch(t){case"texCoords":case"texCoord1":case"texCoord2":case"texCoord3":e="uvs";break;case"vertices":case"positions":case"normals":case"pickingColors":e="vectors";break;default:}switch(e){case"vectors":r.size=r.size||3;break;case"uvs":r.size=r.size||2;break;default:}M(Number.isFinite(r.size),"attribute ".concat(t," needs size"))}var wr=2,Y1=1e4,Q1="Model needs drawMode and vertexCount",wp=function(){},$1={},oi=function(){function t(r){(0,Lp.default)(this,t);var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.id,a=n===void 0?Ve("model"):n;M(Ar(r)),this.id=a,this.gl=r,this.id=e.id||Ve("Model"),this.lastLogTime=0,this.animated=!1,this.initialize(e)}return(0,Dp.default)(t,[{key:"initialize",value:function(e){this.props={},this.programManager=e.programManager||Mp.getDefaultProgramManager(this.gl),this._programManagerState=-1,this._managedProgram=!1;var n=e.program,a=n===void 0?null:n,i=e.vs,o=e.fs,s=e.modules,u=e.defines,f=e.inject,c=e.varyings,l=e.bufferMode,d=e.transpileToGLSL100;this.programProps={program:a,vs:i,fs:o,modules:s,defines:u,inject:f,varyings:c,bufferMode:l,transpileToGLSL100:d},this.program=null,this.vertexArray=null,this._programDirty=!0,this.userData={},this.needsRedraw=!0,this._attributes={},this.attributes={},this.uniforms={},this.pickable=!0,this._checkProgram(),this.setUniforms(Object.assign({},this.getModuleUniforms(e.moduleSettings))),this.drawMode=e.drawMode!==void 0?e.drawMode:4,this.vertexCount=e.vertexCount||0,this.geometryBuffers={},this.isInstanced=e.isInstanced||e.instanced||e.instanceCount>0,this._setModelProps(e),this.geometry={},M(this.drawMode!==void 0&&Number.isFinite(this.vertexCount),Q1)}},{key:"setProps",value:function(e){this._setModelProps(e)}},{key:"delete",value:function(){for(var e in this._attributes)this._attributes[e]!==this.attributes[e]&&this._attributes[e].delete();this._managedProgram&&(this.programManager.release(this.program),this._managedProgram=!1),this.vertexArray.delete(),this._deleteGeometryBuffers()}},{key:"getDrawMode",value:function(){return this.drawMode}},{key:"getVertexCount",value:function(){return this.vertexCount}},{key:"getInstanceCount",value:function(){return this.instanceCount}},{key:"getAttributes",value:function(){return this.attributes}},{key:"getProgram",value:function(){return this.program}},{key:"setProgram",value:function(e){var n=e.program,a=e.vs,i=e.fs,o=e.modules,s=e.defines,u=e.inject,f=e.varyings,c=e.bufferMode,l=e.transpileToGLSL100;this.programProps={program:n,vs:a,fs:i,modules:o,defines:s,inject:u,varyings:f,bufferMode:c,transpileToGLSL100:l},this._programDirty=!0}},{key:"getUniforms",value:function(){return this.uniforms}},{key:"setDrawMode",value:function(e){return this.drawMode=e,this}},{key:"setVertexCount",value:function(e){return M(Number.isFinite(e)),this.vertexCount=e,this}},{key:"setInstanceCount",value:function(e){return M(Number.isFinite(e)),this.instanceCount=e,this}},{key:"setGeometry",value:function(e){return this.drawMode=e.drawMode,this.vertexCount=e.getVertexCount(),this._deleteGeometryBuffers(),this.geometryBuffers=Op(this.gl,e),this.vertexArray.setAttributes(this.geometryBuffers),this}},{key:"setAttributes",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(Er(e))return this;var n={};for(var a in e){var i=e[a];n[a]=i.getValue?i.getValue():i}return this.vertexArray.setAttributes(n),this}},{key:"setUniforms",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object.assign(this.uniforms,e),this}},{key:"getModuleUniforms",value:function(e){this._checkProgram();var n=this.programManager.getUniforms(this.program);return n?n(e):{}}},{key:"updateModuleSettings",value:function(e){var n=this.getModuleUniforms(e||{});return this.setUniforms(n)}},{key:"clear",value:function(e){return Yr(this.program.gl,e),this}},{key:"draw",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._checkProgram();var n=e.moduleSettings,a=n===void 0?null:n,i=e.framebuffer,o=e.uniforms,s=o===void 0?{}:o,u=e.attributes,f=u===void 0?{}:u,c=e.transformFeedback,l=c===void 0?this.transformFeedback:c,d=e.parameters,h=d===void 0?{}:d,v=e.vertexArray,g=v===void 0?this.vertexArray:v;this.setAttributes(f),this.updateModuleSettings(a),this.setUniforms(s);var y;I.priority>=wr&&(y=this._logDrawCallStart(wr));var A=this.vertexArray.getDrawParams(),_=this.props,T=_.isIndexed,B=T===void 0?A.isIndexed:T,x=_.indexType,R=x===void 0?A.indexType:x,L=_.indexOffset,N=L===void 0?A.indexOffset:L,P=_.vertexArrayInstanced,G=P===void 0?A.isInstanced:P;G&&!this.isInstanced&&I.warn("Found instanced attributes on non-instanced model",this.id)();var H=this.isInstanced,F=this.instanceCount,V=this.props,k=V.onBeforeRender,E=k===void 0?wp:k,b=V.onAfterRender,C=b===void 0?wp:b;E(),this.program.setUniforms(this.uniforms);var U=this.program.draw(Object.assign($1,e,{logPriority:y,uniforms:null,framebuffer:i,parameters:h,drawMode:this.getDrawMode(),vertexCount:this.getVertexCount(),vertexArray:g,transformFeedback:l,isIndexed:B,indexType:R,isInstanced:H,instanceCount:F,offset:B?N:0}));return C(),I.priority>=wr&&this._logDrawCallEnd(y,g,i),U}},{key:"transform",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.discard,a=n===void 0?!0:n,i=e.feedbackBuffers,o=e.unbindModels,s=o===void 0?[]:o,u=e.parameters;i&&this._setFeedbackBuffers(i),a&&(u=Object.assign({},u,(0,Fp.default)({},35977,a))),s.forEach(function(f){return f.vertexArray.unbindBuffers()});try{this.draw(Object.assign({},e,{parameters:u}))}finally{s.forEach(function(f){return f.vertexArray.bindBuffers()})}return this}},{key:"render",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return I.warn("Model.render() is deprecated. Use Model.setUniforms() and Model.draw()")(),this.setUniforms(e).draw()}},{key:"_setModelProps",value:function(e){Object.assign(this.props,e),"uniforms"in e&&this.setUniforms(e.uniforms),"pickable"in e&&(this.pickable=e.pickable),"instanceCount"in e&&(this.instanceCount=e.instanceCount),"geometry"in e&&this.setGeometry(e.geometry),"attributes"in e&&this.setAttributes(e.attributes),"_feedbackBuffers"in e&&this._setFeedbackBuffers(e._feedbackBuffers)}},{key:"_checkProgram",value:function(){var e=this._programDirty||this.programManager.stateHash!==this._programManagerState;if(e){var n=this.programProps.program;if(n)this._managedProgram=!1;else{var a=this.programProps,i=a.vs,o=a.fs,s=a.modules,u=a.inject,f=a.defines,c=a.varyings,l=a.bufferMode,d=a.transpileToGLSL100;n=this.programManager.get({vs:i,fs:o,modules:s,inject:u,defines:f,varyings:c,bufferMode:l,transpileToGLSL100:d}),this.program&&this._managedProgram&&this.programManager.release(this.program),this._programManagerState=this.programManager.stateHash,this._managedProgram=!0}M(n instanceof Zr,"Model needs a program"),this._programDirty=!1,n!==this.program&&(this.program=n,this.vertexArray?this.vertexArray.setProps({program:this.program,attributes:this.vertexArray.attributes}):this.vertexArray=new oo(this.gl,{program:this.program}),this.setUniforms(Object.assign({},this.getModuleUniforms())))}}},{key:"_deleteGeometryBuffers",value:function(){for(var e in this.geometryBuffers){var n=this.geometryBuffers[e][0]||this.geometryBuffers[e];n instanceof me&&n.delete()}}},{key:"_setAnimationProps",value:function(e){this.animated&&M(e,"Model.draw(): animated uniforms but no animationProps")}},{key:"_setFeedbackBuffers",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(Er(e))return this;var n=this.program.gl;return this.transformFeedback=this.transformFeedback||new io(n,{program:this.program}),this.transformFeedback.setBuffers(e),this}},{key:"_logDrawCallStart",value:function(e){var n=e>3?0:Y1;if(!(Date.now()-this.lastLogTime<n))return this.lastLogTime=Date.now(),I.group(wr,">>> DRAWING MODEL ".concat(this.id),{collapsed:I.level<=2})(),e}},{key:"_logDrawCallEnd",value:function(e,n,a,i){if(e!==void 0){var o=fo({vertexArray:n,header:"".concat(this.id," attributes"),attributes:this._attributes}),s=Ba({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,a)}),u=s.table,f=s.unusedTable,c=s.unusedCount,l=Ba({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,a),undefinedOnly:!0}),d=l.table,h=l.count;h>0&&I.log("MISSING UNIFORMS",Object.keys(d))(),c>0&&I.log("UNUSED UNIFORMS",Object.keys(f))();var v=lo(this.vertexArray.configuration);I.table(e,o)(),I.table(e,u)(),I.table(e+1,v)(),i&&i.log({logLevel:wr,message:"Rendered to ".concat(i.id)}),I.groupEnd(wr)()}}}]),t}();function q1(t){var r=Z1();return function(){var n=(0,si.default)(t),a;if(r){var i=(0,si.default)(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return(0,Np.default)(this,a)}}function Z1(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Hp=function(t){(0,Up.default)(e,t);var r=q1(e);function e(n){var a;(0,Pp.default)(this,e);var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return a=r.call(this,i),a.onBeforeRender=null,a.AfterRender=null,n instanceof oi?(a.model=n,a._setModelNodeProps(i)):a.model=new oi(n,i),a.managedResources=i.managedResources||[],a}return(0,Gp.default)(e,[{key:"setProps",value:function(a){return(0,kp.default)((0,si.default)(e.prototype),"setProps",this).call(this,a),this._setModelNodeProps(a),this}},{key:"delete",value:function(){this.model&&(this.model.delete(),this.model=null),this.managedResources.forEach(function(a){return a.delete()}),this.managedResources=[]}},{key:"draw",value:function(){var a;return(a=this.model).draw.apply(a,arguments)}},{key:"setUniforms",value:function(){var a;return(a=this.model).setUniforms.apply(a,arguments),this}},{key:"setAttributes",value:function(){var a;return(a=this.model).setAttributes.apply(a,arguments),this}},{key:"updateModuleSettings",value:function(){var a;return(a=this.model).updateModuleSettings.apply(a,arguments),this}},{key:"_setModelNodeProps",value:function(a){this.model.setProps(a)}}]),e}(Tt);var ui=m(ae()),Vp=m(Y()),Jp=m(Q());function jp(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),e.push.apply(e,n)}return e}function Os(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?jp(Object(e),!0).forEach(function(n){(0,ui.default)(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):jp(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}var Xp=function(){function t(r,e){(0,Vp.default)(this,t);var n=e.attributes,a=e.material,i=e.pbrDebug,o=e.imageBasedLightingEnvironment,s=e.lights,u=e.useTangents;this.gl=r,this.defines={MANUAL_SRGB:1,SRGB_FAST_APPROXIMATION:1},xr(r,ue.GLSL_TEXTURE_LOD)&&(this.defines.USE_TEX_LOD=1),this.uniforms={u_Camera:[0,0,0],u_MetallicRoughnessValues:[1,1]},this.parameters={},this.generatedTextures=[],o&&(this.uniforms.u_DiffuseEnvSampler=o.getDiffuseEnvSampler(),this.uniforms.u_SpecularEnvSampler=o.getSpecularEnvSampler(),this.uniforms.u_brdfLUT=o.getBrdfTexture(),this.uniforms.u_ScaleIBLAmbient=[1,1]),i&&(this.uniforms.u_ScaleDiffBaseMR=[0,0,0,0],this.uniforms.u_ScaleFGDSpec=[0,0,0,0]),this.defineIfPresent(n.NORMAL,"HAS_NORMALS"),this.defineIfPresent(n.TANGENT&&u,"HAS_TANGENTS"),this.defineIfPresent(n.TEXCOORD_0,"HAS_UV"),this.defineIfPresent(o,"USE_IBL"),this.defineIfPresent(s,"USE_LIGHTS"),this.defineIfPresent(i,"PBR_DEBUG"),a&&this.parseMaterial(a)}return(0,Jp.default)(t,[{key:"defineIfPresent",value:function(e,n){e&&(this.defines[n]=1)}},{key:"parseTexture",value:function(e,n){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,i=e.texture&&e.texture.sampler&&e.texture.sampler.parameters||{},o=e.texture.source.image,s,u={};o.compressed?(s=o,u=(0,ui.default)({},this.gl.TEXTURE_MIN_FILTER,o.data.length>1?this.gl.LINEAR_MIPMAP_NEAREST:this.gl.LINEAR)):s={data:o};var f=new Qt(this.gl,Os({id:e.name||e.id,parameters:Os(Os({},i),u),pixelStore:(0,ui.default)({},this.gl.UNPACK_FLIP_Y_WEBGL,!1)},s));this.uniforms[n]=f,this.defineIfPresent(a,a),this.generatedTextures.push(f)}},{key:"parsePbrMetallicRoughness",value:function(e){e.baseColorTexture&&this.parseTexture(e.baseColorTexture,"u_BaseColorSampler","HAS_BASECOLORMAP"),this.uniforms.u_BaseColorFactor=e.baseColorFactor||[1,1,1,1],e.metallicRoughnessTexture&&this.parseTexture(e.metallicRoughnessTexture,"u_MetallicRoughnessSampler","HAS_METALROUGHNESSMAP");var n=e.metallicFactor,a=n===void 0?1:n,i=e.roughnessFactor,o=i===void 0?1:i;this.uniforms.u_MetallicRoughnessValues=[a,o]}},{key:"parseMaterial",value:function(e){if(this.uniforms.pbr_uUnlit=Boolean(e.unlit),e.pbrMetallicRoughness&&this.parsePbrMetallicRoughness(e.pbrMetallicRoughness),e.normalTexture){this.parseTexture(e.normalTexture,"u_NormalSampler","HAS_NORMALMAP");var n=e.normalTexture.scale,a=n===void 0?1:n;this.uniforms.u_NormalScale=a}if(e.occlusionTexture){this.parseTexture(e.occlusionTexture,"u_OcclusionSampler","HAS_OCCLUSIONMAP");var i=e.occlusionTexture.strength,o=i===void 0?1:i;this.uniforms.u_OcclusionStrength=o}if(e.emissiveTexture&&(this.parseTexture(e.emissiveTexture,"u_EmissiveSampler","HAS_EMISSIVEMAP"),this.uniforms.u_EmissiveFactor=e.emissiveFactor||[0,0,0]),e.alphaMode==="MASK"){var s=e.alphaCutoff,u=s===void 0?.5:s;this.defines.ALPHA_CUTOFF=1,this.uniforms.u_AlphaCutoff=u}else e.alphaMode==="BLEND"&&(I.warn("BLEND alphaMode might not work well because it requires mesh sorting")(),Object.assign(this.parameters,{blend:!0,blendEquation:this.gl.FUNC_ADD,blendFunc:[this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA,this.gl.ONE,this.gl.ONE_MINUS_SRC_ALPHA]}))}},{key:"delete",value:function(){this.generatedTextures.forEach(function(e){return e.delete()})}}]),t}();var eE=`
#if (__VERSION__ < 300)
  #define _attr attribute
#else
  #define _attr in
#endif

  _attr vec4 POSITION;

  #ifdef HAS_NORMALS
    _attr vec4 NORMAL;
  #endif

  #ifdef HAS_TANGENTS
    _attr vec4 TANGENT;
  #endif

  #ifdef HAS_UV
    _attr vec2 TEXCOORD_0;
  #endif

  void main(void) {
    vec4 _NORMAL = vec4(0.);
    vec4 _TANGENT = vec4(0.);
    vec2 _TEXCOORD_0 = vec2(0.);

    #ifdef HAS_NORMALS
      _NORMAL = NORMAL;
    #endif

    #ifdef HAS_TANGENTS
      _TANGENT = TANGENT;
    #endif

    #ifdef HAS_UV
      _TEXCOORD_0 = TEXCOORD_0;
    #endif

    pbr_setPositionNormalTangentUV(POSITION, _NORMAL, _TANGENT, _TEXCOORD_0);
    gl_Position = u_MVPMatrix * POSITION;
  }
`,tE=`
#if (__VERSION__ < 300)
  #define fragmentColor gl_FragColor
#else
  out vec4 fragmentColor;
#endif

  void main(void) {
    fragmentColor = pbr_filterColor(vec4(0));
  }
`;function zp(t,r){return j(t)?`#version 300 es
`.concat(r):r}function Fs(t,r){var e=r.id,n=r.drawMode,a=r.vertexCount,i=r.attributes,o=r.modelOptions,s=new Xp(t,r);I.info(4,"createGLTFModel defines: ",s.defines)();var u=[];u.push.apply(u,(0,ws.default)(s.generatedTextures)),u.push.apply(u,(0,ws.default)(Object.values(i).map(function(c){return c.buffer})));var f=new Hp(t,Object.assign({id:e,drawMode:n,vertexCount:a,modules:[hn],defines:s.defines,parameters:s.parameters,vs:zp(t,eE),fs:zp(t,tE),managedResources:u},o));return f.setProps({attributes:i}),f.setUniforms(s.uniforms),f}var rE={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},nE={modelOptions:{},pbrDebug:!1,imageBasedLightingEnvironment:null,lights:!0,useTangents:!1},Yp=function(){function t(r){(0,Kp.default)(this,t);var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.gl=r,this.options=Object.assign({},nE,e)}return(0,Wp.default)(t,[{key:"instantiate",value:function(e){var n=this;this.gltf=e;var a=(e.scenes||[]).map(function(i){return n.createScene(i)});return a}},{key:"createAnimator",value:function(){return Array.isArray(this.gltf.animations)?new Bp(this.gltf):null}},{key:"createScene",value:function(e){var n=this,a=e.nodes||[],i=a.map(function(s){return n.createNode(s)}),o=new ii({id:e.name||e.id,children:i});return o}},{key:"createNode",value:function(e){var n=this;if(!e._node){var a=e.children||[],i=a.map(function(u){return n.createNode(u)});e.mesh&&i.push(this.createMesh(e.mesh));var o=new ii({id:e.name||e.id,children:i});if(e.matrix)o.setMatrix(e.matrix);else{if(o.matrix.identity(),e.translation&&o.matrix.translate(e.translation),e.rotation){var s=new et().fromQuaternion(e.rotation);o.matrix.multiplyRight(s)}e.scale&&o.matrix.scale(e.scale)}e._node=o}return e._node}},{key:"createMesh",value:function(e){var n=this;if(!e._mesh){var a=e.primitives||[],i=a.map(function(s,u){return n.createPrimitive(s,u,e)}),o=new ii({id:e.name||e.id,children:i});e._mesh=o}return e._mesh}},{key:"getVertexCount",value:function(e){I.warn("getVertexCount() not found")()}},{key:"createPrimitive",value:function(e,n,a){return Fs(this.gl,Object.assign({id:e.name||"".concat(a.name||a.id,"-primitive-").concat(n),drawMode:e.mode||4,vertexCount:e.indices?e.indices.count:this.getVertexCount(e.attributes),attributes:this.createAttributes(e.attributes,e.indices),material:e.material},this.options))}},{key:"createAttributes",value:function(e,n){var a=this,i={};return Object.keys(e).forEach(function(o){i[o]=a.createAccessor(e[o],a.createBuffer(e[o],a.gl.ARRAY_BUFFER))}),n&&(i.indices=this.createAccessor(n,this.createBuffer(n,this.gl.ELEMENT_ARRAY_BUFFER))),I.info(4,"glTF Attributes",{attributes:e,indices:n,generated:i})(),i}},{key:"createBuffer",value:function(e,n){e.bufferView||(e.bufferView={});var a=e.bufferView;return a.lumaBuffers||(a.lumaBuffers={}),a.lumaBuffers[n]||(a.lumaBuffers[n]=new me(this.gl,{id:"from-".concat(a.id),data:a.data||e.value,target:n})),a.lumaBuffers[n]}},{key:"createAccessor",value:function(e,n){return new Je({buffer:n,offset:e.byteOffset||0,stride:e.bufferView.byteStride||0,type:e.componentType,size:rE[e.type]})}},{key:"createSampler",value:function(e){return e}},{key:"needsPOT",value:function(){return!1}}]),t}();function fi(t,r,e){var n=new Yp(t,e),a=n.instantiate(r),i=n.createAnimator();return{scenes:a,animator:i}}var Wg=m(ae()),Yg=m(Ee()),Yu=m(Be());var Qp="3.3.3";var wn=m(Ee()),It=m(Be());var $p="3.3.3";var gv=m(ae());var dv=m(Ie()),hv=m(Ee()),Js=m(Be());var Ns=m(Qe()),En=m(Ee()),Mt=m(Be());var qp="3.3.3",aE="https://unpkg.com/@loaders.gl/textures@".concat(qp,"/dist/libs/basis_encoder.wasm"),iE="https://unpkg.com/@loaders.gl/textures@".concat(qp,"/dist/libs/basis_encoder.js"),Ls;function Hs(t){return Ps.apply(this,arguments)}function Ps(){return Ps=(0,En.default)(Mt.default.mark(function t(r){var e;return Mt.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(e=r.modules||{},!e.basis){a.next=3;break}return a.abrupt("return",e.basis);case 3:return Ls=Ls||oE(r),a.next=6,Ls;case 6:return a.abrupt("return",a.sent);case 7:case"end":return a.stop()}},t)})),Ps.apply(this,arguments)}function oE(t){return Gs.apply(this,arguments)}function Gs(){return Gs=(0,En.default)(Mt.default.mark(function t(r){var e,n,a,i;return Mt.default.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return e=null,n=null,s.t0=Promise,s.next=5,Bt("basis_transcoder.js","textures",r);case 5:return s.t1=s.sent,s.next=8,Bt("basis_transcoder.wasm","textures",r);case 8:return s.t2=s.sent,s.t3=[s.t1,s.t2],s.next=12,s.t0.all.call(s.t0,s.t3);case 12:return a=s.sent,i=(0,Ns.default)(a,2),e=i[0],n=i[1],e=e||globalThis.BASIS,s.next=19,sE(e,n);case 19:return s.abrupt("return",s.sent);case 20:case"end":return s.stop()}},t)})),Gs.apply(this,arguments)}function sE(t,r){var e={};return r&&(e.wasmBinary=r),new Promise(function(n){t(e).then(function(a){var i=a.BasisFile,o=a.initializeBasis;o(),n({BasisFile:i})})})}var Ds;function js(t){return ks.apply(this,arguments)}function ks(){return ks=(0,En.default)(Mt.default.mark(function t(r){var e;return Mt.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(e=r.modules||{},!e.basisEncoder){a.next=3;break}return a.abrupt("return",e.basisEncoder);case 3:return Ds=Ds||uE(r),a.next=6,Ds;case 6:return a.abrupt("return",a.sent);case 7:case"end":return a.stop()}},t)})),ks.apply(this,arguments)}function uE(t){return Us.apply(this,arguments)}function Us(){return Us=(0,En.default)(Mt.default.mark(function t(r){var e,n,a,i;return Mt.default.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return e=null,n=null,s.t0=Promise,s.next=5,Bt(iE,"textures",r);case 5:return s.t1=s.sent,s.next=8,Bt(aE,"textures",r);case 8:return s.t2=s.sent,s.t3=[s.t1,s.t2],s.next=12,s.t0.all.call(s.t0,s.t3);case 12:return a=s.sent,i=(0,Ns.default)(a,2),e=i[0],n=i[1],e=e||globalThis.BASIS,s.next=19,fE(e,n);case 19:return s.abrupt("return",s.sent);case 20:case"end":return s.stop()}},t)})),Us.apply(this,arguments)}function fE(t,r){var e={};return r&&(e.wasmBinary=r),new Promise(function(n){t(e).then(function(a){var i=a.BasisFile,o=a.KTX2File,s=a.initializeBasis,u=a.BasisEncoder;s(),n({BasisFile:i,KTX2File:o,BasisEncoder:u})})})}var fr={COMPRESSED_RGB_S3TC_DXT1_EXT:33776,COMPRESSED_RGBA_S3TC_DXT1_EXT:33777,COMPRESSED_RGBA_S3TC_DXT3_EXT:33778,COMPRESSED_RGBA_S3TC_DXT5_EXT:33779,COMPRESSED_R11_EAC:37488,COMPRESSED_SIGNED_R11_EAC:37489,COMPRESSED_RG11_EAC:37490,COMPRESSED_SIGNED_RG11_EAC:37491,COMPRESSED_RGB8_ETC2:37492,COMPRESSED_RGBA8_ETC2_EAC:37493,COMPRESSED_SRGB8_ETC2:37494,COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:37495,COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:37496,COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:37497,COMPRESSED_RGB_PVRTC_4BPPV1_IMG:35840,COMPRESSED_RGBA_PVRTC_4BPPV1_IMG:35842,COMPRESSED_RGB_PVRTC_2BPPV1_IMG:35841,COMPRESSED_RGBA_PVRTC_2BPPV1_IMG:35843,COMPRESSED_RGB_ETC1_WEBGL:36196,COMPRESSED_RGB_ATC_WEBGL:35986,COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL:35987,COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL:34798,COMPRESSED_RGBA_ASTC_4X4_KHR:37808,COMPRESSED_RGBA_ASTC_5X4_KHR:37809,COMPRESSED_RGBA_ASTC_5X5_KHR:37810,COMPRESSED_RGBA_ASTC_6X5_KHR:37811,COMPRESSED_RGBA_ASTC_6X6_KHR:37812,COMPRESSED_RGBA_ASTC_8X5_KHR:37813,COMPRESSED_RGBA_ASTC_8X6_KHR:37814,COMPRESSED_RGBA_ASTC_8X8_KHR:37815,COMPRESSED_RGBA_ASTC_10X5_KHR:37816,COMPRESSED_RGBA_ASTC_10X6_KHR:37817,COMPRESSED_RGBA_ASTC_10X8_KHR:37818,COMPRESSED_RGBA_ASTC_10X10_KHR:37819,COMPRESSED_RGBA_ASTC_12X10_KHR:37820,COMPRESSED_RGBA_ASTC_12X12_KHR:37821,COMPRESSED_SRGB8_ALPHA8_ASTC_4X4_KHR:37840,COMPRESSED_SRGB8_ALPHA8_ASTC_5X4_KHR:37841,COMPRESSED_SRGB8_ALPHA8_ASTC_5X5_KHR:37842,COMPRESSED_SRGB8_ALPHA8_ASTC_6X5_KHR:37843,COMPRESSED_SRGB8_ALPHA8_ASTC_6X6_KHR:37844,COMPRESSED_SRGB8_ALPHA8_ASTC_8X5_KHR:37845,COMPRESSED_SRGB8_ALPHA8_ASTC_8X6_KHR:37846,COMPRESSED_SRGB8_ALPHA8_ASTC_8X8_KHR:37847,COMPRESSED_SRGB8_ALPHA8_ASTC_10X5_KHR:37848,COMPRESSED_SRGB8_ALPHA8_ASTC_10X6_KHR:37849,COMPRESSED_SRGB8_ALPHA8_ASTC_10X8_KHR:37850,COMPRESSED_SRGB8_ALPHA8_ASTC_10X10_KHR:37851,COMPRESSED_SRGB8_ALPHA8_ASTC_12X10_KHR:37852,COMPRESSED_SRGB8_ALPHA8_ASTC_12X12_KHR:37853,COMPRESSED_RED_RGTC1_EXT:36283,COMPRESSED_SIGNED_RED_RGTC1_EXT:36284,COMPRESSED_RED_GREEN_RGTC2_EXT:36285,COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT:36286,COMPRESSED_SRGB_S3TC_DXT1_EXT:35916,COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT:35917,COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT:35918,COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT:35919};function cE(t,r){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=lE(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var n=0,a=function(){};return{s:a,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(f){throw f},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,o=!1,s;return{s:function(){e=e.call(t)},n:function(){var f=e.next();return i=f.done,f},e:function(f){o=!0,s=f},f:function(){try{!i&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function lE(t,r){if(t){if(typeof t=="string")return Zp(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return Zp(t,r)}}function Zp(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}var dE=["","WEBKIT_","MOZ_"],ev={WEBGL_compressed_texture_s3tc:"dxt",WEBGL_compressed_texture_s3tc_srgb:"dxt-srgb",WEBGL_compressed_texture_etc1:"etc1",WEBGL_compressed_texture_etc:"etc2",WEBGL_compressed_texture_pvrtc:"pvrtc",WEBGL_compressed_texture_atc:"atc",WEBGL_compressed_texture_astc:"astc",EXT_texture_compression_rgtc:"rgtc"},ci=null;function tv(t){if(!ci){t=t||hE()||void 0,ci=new Set;var r=cE(dE),e;try{for(r.s();!(e=r.n()).done;){var n=e.value;for(var a in ev)if(t&&t.getExtension("".concat(n).concat(a))){var i=ev[a];ci.add(i)}}}catch(o){r.e(o)}finally{r.f()}}return ci}function hE(){try{var t=document.createElement("canvas");return t.getContext("webgl")}catch{return null}}var tL=new Uint8Array([0]);var rv,nv,av,iv,ov,sv,uv,fv;(function(t){t[t.NONE=0]="NONE",t[t.BASISLZ=1]="BASISLZ",t[t.ZSTD=2]="ZSTD",t[t.ZLIB=3]="ZLIB"})(rv||(rv={})),function(t){t[t.BASICFORMAT=0]="BASICFORMAT"}(nv||(nv={})),function(t){t[t.UNSPECIFIED=0]="UNSPECIFIED",t[t.ETC1S=163]="ETC1S",t[t.UASTC=166]="UASTC"}(av||(av={})),function(t){t[t.UNSPECIFIED=0]="UNSPECIFIED",t[t.SRGB=1]="SRGB"}(iv||(iv={})),function(t){t[t.UNSPECIFIED=0]="UNSPECIFIED",t[t.LINEAR=1]="LINEAR",t[t.SRGB=2]="SRGB",t[t.ITU=3]="ITU",t[t.NTSC=4]="NTSC",t[t.SLOG=5]="SLOG",t[t.SLOG2=6]="SLOG2"}(ov||(ov={})),function(t){t[t.ALPHA_STRAIGHT=0]="ALPHA_STRAIGHT",t[t.ALPHA_PREMULTIPLIED=1]="ALPHA_PREMULTIPLIED"}(sv||(sv={})),function(t){t[t.RGB=0]="RGB",t[t.RRR=3]="RRR",t[t.GGG=4]="GGG",t[t.AAA=15]="AAA"}(uv||(uv={})),function(t){t[t.RGB=0]="RGB",t[t.RGBA=3]="RGBA",t[t.RRR=4]="RRR",t[t.RRRG=5]="RRRG"}(fv||(fv={}));var tt=[171,75,84,88,32,50,48,187,13,10,26,10];function cv(t){var r=new Uint8Array(t),e=r.byteLength<tt.length||r[0]!==tt[0]||r[1]!==tt[1]||r[2]!==tt[2]||r[3]!==tt[3]||r[4]!==tt[4]||r[5]!==tt[5]||r[6]!==tt[6]||r[7]!==tt[7]||r[8]!==tt[8]||r[9]!==tt[9]||r[10]!==tt[10]||r[11]!==tt[11];return!e}var mE={etc1:{basisFormat:0,compressed:!0,format:fr.COMPRESSED_RGB_ETC1_WEBGL},etc2:{basisFormat:1,compressed:!0},bc1:{basisFormat:2,compressed:!0,format:fr.COMPRESSED_RGB_S3TC_DXT1_EXT},bc3:{basisFormat:3,compressed:!0,format:fr.COMPRESSED_RGBA_S3TC_DXT5_EXT},bc4:{basisFormat:4,compressed:!0},bc5:{basisFormat:5,compressed:!0},"bc7-m6-opaque-only":{basisFormat:6,compressed:!0},"bc7-m5":{basisFormat:7,compressed:!0},"pvrtc1-4-rgb":{basisFormat:8,compressed:!0,format:fr.COMPRESSED_RGB_PVRTC_4BPPV1_IMG},"pvrtc1-4-rgba":{basisFormat:9,compressed:!0,format:fr.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG},"astc-4x4":{basisFormat:10,compressed:!0,format:fr.COMPRESSED_RGBA_ASTC_4X4_KHR},"atc-rgb":{basisFormat:11,compressed:!0},"atc-rgba-interpolated-alpha":{basisFormat:12,compressed:!0},rgba32:{basisFormat:13,compressed:!1},rgb565:{basisFormat:14,compressed:!1},bgr565:{basisFormat:15,compressed:!1},rgba4444:{basisFormat:16,compressed:!1}};function zs(t,r){return Xs.apply(this,arguments)}function Xs(){return Xs=(0,hv.default)(Js.default.mark(function t(r,e){var n,a,i,o,s,u;return Js.default.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(e.basis.containerFormat!=="auto"){c.next=11;break}if(!cv(r)){c.next=6;break}return c.next=4,js(e);case 4:return n=c.sent,c.abrupt("return",lv(n.KTX2File,r,e));case 6:return c.next=8,Hs(e);case 8:return a=c.sent,i=a.BasisFile,c.abrupt("return",Vs(i,r,e));case 11:c.t0=e.basis.module,c.next=c.t0==="encoder"?14:(c.t0==="transcoder",22);break;case 14:return c.next=16,js(e);case 16:o=c.sent,c.t1=e.basis.containerFormat,c.next=c.t1==="ktx2"?20:(c.t1==="basis",21);break;case 20:return c.abrupt("return",lv(o.KTX2File,r,e));case 21:return c.abrupt("return",Vs(o.BasisFile,r,e));case 22:return c.next=24,Hs(e);case 24:return s=c.sent,u=s.BasisFile,c.abrupt("return",Vs(u,r,e));case 27:case"end":return c.stop()}},t)})),Xs.apply(this,arguments)}function Vs(t,r,e){var n=new t(new Uint8Array(r));try{if(!n.startTranscoding())throw new Error("Failed to start basis transcoding");for(var a=n.getNumImages(),i=[],o=0;o<a;o++){for(var s=n.getNumLevels(o),u=[],f=0;f<s;f++)u.push(pE(n,o,f,e));i.push(u)}return i}finally{n.close(),n.delete()}}function pE(t,r,e,n){var a=t.getImageWidth(r,e),i=t.getImageHeight(r,e),o=t.getHasAlpha(),s=mv(n,o),u=s.compressed,f=s.format,c=s.basisFormat,l=t.getImageTranscodedSizeInBytes(r,e,c),d=new Uint8Array(l);if(!t.transcodeImage(d,r,e,c,0,0))throw new Error("failed to start Basis transcoding");return{width:a,height:i,data:d,compressed:u,format:f,hasAlpha:o}}function lv(t,r,e){var n=new t(new Uint8Array(r));try{if(!n.startTranscoding())throw new Error("failed to start KTX2 transcoding");for(var a=n.getLevels(),i=[],o=0;o<a;o++){i.push(vE(n,o,e));break}return[i]}finally{n.close(),n.delete()}}function vE(t,r,e){var n=t.getImageLevelInfo(r,0,0),a=n.alphaFlag,i=n.height,o=n.width,s=mv(e,a),u=s.compressed,f=s.format,c=s.basisFormat,l=t.getImageTranscodedSizeInBytes(r,0,0,c),d=new Uint8Array(l);if(!t.transcodeImage(d,r,0,0,c,0,-1,-1))throw new Error("Failed to transcode KTX2 image");return{width:o,height:i,data:d,compressed:u,levelSize:l,hasAlpha:a,format:f}}function mv(t,r){var e=t&&t.basis&&t.basis.format;return e==="auto"&&(e=li()),(0,dv.default)(e)==="object"&&(e=r?e.alpha:e.noAlpha),e=e.toLowerCase(),mE[e]}function li(){var t=tv();return t.has("astc")?"astc-4x4":t.has("dxt")?{alpha:"bc3",noAlpha:"bc1"}:t.has("pvrtc")?{alpha:"pvrtc1-4-rgba",noAlpha:"pvrtc1-4-rgb"}:t.has("etc1")?"etc1":t.has("etc2")?"etc2":"rgb565"}function pv(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),e.push.apply(e,n)}return e}function vv(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?pv(Object(e),!0).forEach(function(n){(0,gv.default)(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):pv(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}var yv={name:"Basis",id:St?"basis":"basis-nodejs",module:"textures",version:$p,worker:!0,extensions:["basis","ktx2"],mimeTypes:["application/octet-stream","image/ktx2"],tests:["sB"],binary:!0,options:{basis:{format:"auto",libraryPath:"libs/",containerFormat:"auto",module:"transcoder"}}},Ks=vv(vv({},yv),{},{parse:zs});function Re(t,r){if(!t)throw new Error(r||"assert failed: gltf")}function Ws(t,r){var e=t.startsWith("data:")||t.startsWith("http:")||t.startsWith("https:");if(e)return t;var n=r.baseUri||r.uri;if(!n)throw new Error("'baseUri' must be provided to resolve relative url ".concat(t));return n.substr(0,n.lastIndexOf("/")+1)+t}function Av(t,r,e){var n=t.bufferViews[e];Re(n);var a=n.buffer,i=r[a];Re(i);var o=(n.byteOffset||0)+i.byteOffset;return new Uint8Array(i.arrayBuffer,o,n.byteLength)}var xg=m(Ee()),ku=m(Be());var nu={};mt(nu,{decode:()=>kE,name:()=>GE});var tu=m(Ee()),Bn=m(Be());var xv=m(Ie()),Tv=m(ae()),Cv=m(Y()),Sv=m(Q());var _v=["SCALAR","VEC2","VEC3","VEC4"],gE=[[Int8Array,5120],[Uint8Array,5121],[Int16Array,5122],[Uint16Array,5123],[Uint32Array,5125],[Float32Array,5126],[Float64Array,5130]],yE=new Map(gE),AE={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},_E={5120:1,5121:1,5122:2,5123:2,5125:4,5126:4},bE={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array};function di(t){var r=_v[t-1];return r||_v[0]}function hi(t){var r=yE.get(t.constructor);if(!r)throw new Error("Illegal typed array");return r}function Fr(t,r){var e=bE[t.componentType],n=AE[t.type],a=_E[t.componentType],i=t.count*n,o=t.count*n*a;return Re(o>=0&&o<=r.byteLength),{ArrayType:e,length:i,byteLength:o}}function bv(t,r){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=EE(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var n=0,a=function(){};return{s:a,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(f){throw f},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,o=!1,s;return{s:function(){e=e.call(t)},n:function(){var f=e.next();return i=f.done,f},e:function(f){o=!0,s=f},f:function(){try{!i&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function EE(t,r){if(t){if(typeof t=="string")return Ev(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return Ev(t,r)}}function Ev(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function Bv(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),e.push.apply(e,n)}return e}function BE(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?Bv(Object(e),!0).forEach(function(n){(0,Tv.default)(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):Bv(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}var xE={asset:{version:"2.0",generator:"loaders.gl"},buffers:[]},ye=function(){function t(r){(0,Cv.default)(this,t),w(this,"gltf",void 0),w(this,"sourceBuffers",void 0),w(this,"byteLength",void 0),this.gltf=r||{json:BE({},xE),buffers:[]},this.sourceBuffers=[],this.byteLength=0,this.gltf.buffers&&this.gltf.buffers[0]&&(this.byteLength=this.gltf.buffers[0].byteLength,this.sourceBuffers=[this.gltf.buffers[0]])}return(0,Sv.default)(t,[{key:"json",get:function(){return this.gltf.json}},{key:"getApplicationData",value:function(e){var n=this.json[e];return n}},{key:"getExtraData",value:function(e){var n=this.json.extras||{};return n[e]}},{key:"getExtension",value:function(e){var n=this.getUsedExtensions().find(function(i){return i===e}),a=this.json.extensions||{};return n?a[e]||!0:null}},{key:"getRequiredExtension",value:function(e){var n=this.getRequiredExtensions().find(function(a){return a===e});return n?this.getExtension(e):null}},{key:"getRequiredExtensions",value:function(){return this.json.extensionsRequired||[]}},{key:"getUsedExtensions",value:function(){return this.json.extensionsUsed||[]}},{key:"getRemovedExtensions",value:function(){return this.json.extensionsRemoved||[]}},{key:"getObjectExtension",value:function(e,n){var a=e.extensions||{};return a[n]}},{key:"getScene",value:function(e){return this.getObject("scenes",e)}},{key:"getNode",value:function(e){return this.getObject("nodes",e)}},{key:"getSkin",value:function(e){return this.getObject("skins",e)}},{key:"getMesh",value:function(e){return this.getObject("meshes",e)}},{key:"getMaterial",value:function(e){return this.getObject("materials",e)}},{key:"getAccessor",value:function(e){return this.getObject("accessors",e)}},{key:"getTexture",value:function(e){return this.getObject("textures",e)}},{key:"getSampler",value:function(e){return this.getObject("samplers",e)}},{key:"getImage",value:function(e){return this.getObject("images",e)}},{key:"getBufferView",value:function(e){return this.getObject("bufferViews",e)}},{key:"getBuffer",value:function(e){return this.getObject("buffers",e)}},{key:"getObject",value:function(e,n){if((0,xv.default)(n)==="object")return n;var a=this.json[e]&&this.json[e][n];if(!a)throw new Error("glTF file error: Could not find ".concat(e,"[").concat(n,"]"));return a}},{key:"getTypedArrayForBufferView",value:function(e){e=this.getBufferView(e);var n=e.buffer,a=this.gltf.buffers[n];Re(a);var i=(e.byteOffset||0)+a.byteOffset;return new Uint8Array(a.arrayBuffer,i,e.byteLength)}},{key:"getTypedArrayForAccessor",value:function(e){e=this.getAccessor(e);var n=this.getBufferView(e.bufferView),a=this.getBuffer(n.buffer),i=a.data,o=Fr(e,n),s=o.ArrayType,u=o.length,f=n.byteOffset+e.byteOffset;return new s(i,f,u)}},{key:"getTypedArrayForImageData",value:function(e){e=this.getAccessor(e);var n=this.getBufferView(e.bufferView),a=this.getBuffer(n.buffer),i=a.data,o=n.byteOffset||0;return new Uint8Array(i,o,n.byteLength)}},{key:"addApplicationData",value:function(e,n){return this.json[e]=n,this}},{key:"addExtraData",value:function(e,n){return this.json.extras=this.json.extras||{},this.json.extras[e]=n,this}},{key:"addObjectExtension",value:function(e,n,a){return e.extensions=e.extensions||{},e.extensions[n]=a,this.registerUsedExtension(n),this}},{key:"setObjectExtension",value:function(e,n,a){var i=e.extensions||{};i[n]=a}},{key:"removeObjectExtension",value:function(e,n){var a=e.extensions||{},i=a[n];return delete a[n],i}},{key:"addExtension",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Re(n),this.json.extensions=this.json.extensions||{},this.json.extensions[e]=n,this.registerUsedExtension(e),n}},{key:"addRequiredExtension",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Re(n),this.addExtension(e,n),this.registerRequiredExtension(e),n}},{key:"registerUsedExtension",value:function(e){this.json.extensionsUsed=this.json.extensionsUsed||[],this.json.extensionsUsed.find(function(n){return n===e})||this.json.extensionsUsed.push(e)}},{key:"registerRequiredExtension",value:function(e){this.registerUsedExtension(e),this.json.extensionsRequired=this.json.extensionsRequired||[],this.json.extensionsRequired.find(function(n){return n===e})||this.json.extensionsRequired.push(e)}},{key:"removeExtension",value:function(e){if(this.getExtension(e)){this.json.extensionsRequired&&this._removeStringFromArray(this.json.extensionsRequired,e),this.json.extensionsUsed&&this._removeStringFromArray(this.json.extensionsUsed,e),this.json.extensions&&delete this.json.extensions[e],Array.isArray(this.json.extensionsRemoved)||(this.json.extensionsRemoved=[]);var n=this.json.extensionsRemoved;n.includes(e)||n.push(e)}}},{key:"setDefaultScene",value:function(e){this.json.scene=e}},{key:"addScene",value:function(e){var n=e.nodeIndices;return this.json.scenes=this.json.scenes||[],this.json.scenes.push({nodes:n}),this.json.scenes.length-1}},{key:"addNode",value:function(e){var n=e.meshIndex,a=e.matrix;this.json.nodes=this.json.nodes||[];var i={mesh:n};return a&&(i.matrix=a),this.json.nodes.push(i),this.json.nodes.length-1}},{key:"addMesh",value:function(e){var n=e.attributes,a=e.indices,i=e.material,o=e.mode,s=o===void 0?4:o,u=this._addAttributes(n),f={primitives:[{attributes:u,mode:s}]};if(a){var c=this._addIndices(a);f.primitives[0].indices=c}return Number.isFinite(i)&&(f.primitives[0].material=i),this.json.meshes=this.json.meshes||[],this.json.meshes.push(f),this.json.meshes.length-1}},{key:"addPointCloud",value:function(e){var n=this._addAttributes(e),a={primitives:[{attributes:n,mode:0}]};return this.json.meshes=this.json.meshes||[],this.json.meshes.push(a),this.json.meshes.length-1}},{key:"addImage",value:function(e,n){var a=ur(e),i=n||a?.mimeType,o=this.addBufferView(e),s={bufferView:o,mimeType:i};return this.json.images=this.json.images||[],this.json.images.push(s),this.json.images.length-1}},{key:"addBufferView",value:function(e){var n=e.byteLength;Re(Number.isFinite(n)),this.sourceBuffers=this.sourceBuffers||[],this.sourceBuffers.push(e);var a={buffer:0,byteOffset:this.byteLength,byteLength:n};return this.byteLength+=jt(n,4),this.json.bufferViews=this.json.bufferViews||[],this.json.bufferViews.push(a),this.json.bufferViews.length-1}},{key:"addAccessor",value:function(e,n){var a={bufferView:e,type:di(n.size),componentType:n.componentType,count:n.count,max:n.max,min:n.min};return this.json.accessors=this.json.accessors||[],this.json.accessors.push(a),this.json.accessors.length-1}},{key:"addBinaryBuffer",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{size:3},a=this.addBufferView(e),i={min:n.min,max:n.max};(!i.min||!i.max)&&(i=this._getAccessorMinMax(e,n.size));var o={size:n.size,componentType:hi(e),count:Math.round(e.length/n.size),min:i.min,max:i.max};return this.addAccessor(a,Object.assign(o,n))}},{key:"addTexture",value:function(e){var n=e.imageIndex,a={source:n};return this.json.textures=this.json.textures||[],this.json.textures.push(a),this.json.textures.length-1}},{key:"addMaterial",value:function(e){return this.json.materials=this.json.materials||[],this.json.materials.push(e),this.json.materials.length-1}},{key:"createBinaryChunk",value:function(){var e,n;this.gltf.buffers=[];var a=this.byteLength,i=new ArrayBuffer(a),o=new Uint8Array(i),s=0,u=bv(this.sourceBuffers||[]),f;try{for(u.s();!(f=u.n()).done;){var c=f.value;s=ss(c,o,s)}}catch(l){u.e(l)}finally{u.f()}(e=this.json)!==null&&e!==void 0&&(n=e.buffers)!==null&&n!==void 0&&n[0]?this.json.buffers[0].byteLength=a:this.json.buffers=[{byteLength:a}],this.gltf.binary=i,this.sourceBuffers=[i]}},{key:"_removeStringFromArray",value:function(e,n){for(var a=!0;a;){var i=e.indexOf(n);i>-1?e.splice(i,1):a=!1}}},{key:"_addAttributes",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n={};for(var a in e){var i=e[a],o=this._getGltfAttributeName(a),s=this.addBinaryBuffer(i.value,i);n[o]=s}return n}},{key:"_addIndices",value:function(e){return this.addBinaryBuffer(e,{size:1})}},{key:"_getGltfAttributeName",value:function(e){switch(e.toLowerCase()){case"position":case"positions":case"vertices":return"POSITION";case"normal":case"normals":return"NORMAL";case"color":case"colors":return"COLOR_0";case"texcoord":case"texcoords":return"TEXCOORD_0";default:return e}}},{key:"_getAccessorMinMax",value:function(e,n){var a={min:null,max:null};if(e.length<n)return a;a.min=[],a.max=[];var i=e.subarray(0,n),o=bv(i),s;try{for(o.s();!(s=o.n()).done;){var u=s.value;a.min.push(u),a.max.push(u)}}catch(l){o.e(l)}finally{o.f()}for(var f=n;f<e.length;f+=n)for(var c=0;c<n;c++)a.min[0+c]=Math.min(a.min[0+c],e[f+c]),a.max[0+c]=Math.max(a.max[0+c],e[f+c]);return a}}]),t}();var mi=m(Ee()),Mv=m(Ie()),cr=m(Be()),IL=(typeof WebAssembly>"u"?"undefined":(0,Mv.default)(WebAssembly))!=="object",TE="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",CE="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",SE=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),ME=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]),RE={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},IE={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};function Rv(t,r,e,n,a){return Qs.apply(this,arguments)}function Qs(){return Qs=(0,mi.default)(cr.default.mark(function t(r,e,n,a,i){var o,s,u=arguments;return cr.default.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return o=u.length>5&&u[5]!==void 0?u[5]:"NONE",c.next=3,OE();case 3:s=c.sent,LE(s,s.exports[IE[i]],r,e,n,a,s.exports[RE[o||"NONE"]]);case 5:case"end":return c.stop()}},t)})),Qs.apply(this,arguments)}var Ys;function OE(){return $s.apply(this,arguments)}function $s(){return $s=(0,mi.default)(cr.default.mark(function t(){return cr.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return Ys||(Ys=wE()),e.abrupt("return",Ys);case 2:case"end":return e.stop()}},t)})),$s.apply(this,arguments)}function wE(){return qs.apply(this,arguments)}function qs(){return qs=(0,mi.default)(cr.default.mark(function t(){var r,e;return cr.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return r=TE,WebAssembly.validate(SE)&&(r=CE,console.log("Warning: meshopt_decoder is using experimental SIMD support")),a.next=4,WebAssembly.instantiate(FE(r),{});case 4:return e=a.sent,a.next=7,e.instance.exports.__wasm_call_ctors();case 7:return a.abrupt("return",e.instance);case 8:case"end":return a.stop()}},t)})),qs.apply(this,arguments)}function FE(t){for(var r=new Uint8Array(t.length),e=0;e<t.length;++e){var n=t.charCodeAt(e);r[e]=n>96?n-71:n>64?n-65:n>47?n+4:n>46?63:62}for(var a=0,i=0;i<t.length;++i)r[a++]=r[i]<60?ME[r[i]]:(r[i]-60)*64+r[++i];return r.buffer.slice(0,a)}function LE(t,r,e,n,a,i,o){var s=t.exports.sbrk,u=n+3&-4,f=s(u*a),c=s(i.length),l=new Uint8Array(t.exports.memory.buffer);l.set(i,c);var d=r(f,n,a,c,i.length);if(d===0&&o&&o(f,u,a),e.set(l.subarray(f,f+n*a)),s(f-s(0)),d!==0)throw new Error("Malformed buffer data: ".concat(d))}function DE(t,r){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=PE(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var n=0,a=function(){};return{s:a,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(f){throw f},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,o=!1,s;return{s:function(){e=e.call(t)},n:function(){var f=e.next();return i=f.done,f},e:function(f){o=!0,s=f},f:function(){try{!i&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function PE(t,r){if(t){if(typeof t=="string")return Iv(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return Iv(t,r)}}function Iv(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}var ru="EXT_meshopt_compression",GE=ru;function kE(t,r){return Zs.apply(this,arguments)}function Zs(){return Zs=(0,tu.default)(Bn.default.mark(function t(r,e){var n,a,i,o,s,u;return Bn.default.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(a=new ye(r),e!=null&&(n=e.gltf)!==null&&n!==void 0&&n.decompressMeshes){c.next=3;break}return c.abrupt("return");case 3:i=[],o=DE(r.json.bufferViews||[]);try{for(o.s();!(s=o.n()).done;)u=s.value,i.push(UE(a,u))}catch(l){o.e(l)}finally{o.f()}return c.next=8,Promise.all(i);case 8:a.removeExtension(ru);case 9:case"end":return c.stop()}},t)})),Zs.apply(this,arguments)}function UE(t,r){return eu.apply(this,arguments)}function eu(){return eu=(0,tu.default)(Bn.default.mark(function t(r,e){var n,a,i,o,s,u,f,c,l,d,h,v,g,y;return Bn.default.wrap(function(_){for(;;)switch(_.prev=_.next){case 0:if(n=r.getObjectExtension(e,ru),!n){_.next=9;break}return a=n.byteOffset,i=a===void 0?0:a,o=n.byteLength,s=o===void 0?0:o,u=n.byteStride,f=n.count,c=n.mode,l=n.filter,d=l===void 0?"NONE":l,h=n.buffer,v=r.gltf.buffers[h],g=new Uint8Array(v.arrayBuffer,v.byteOffset+i,s),y=new Uint8Array(r.gltf.buffers[e.buffer].arrayBuffer,e.byteOffset,e.byteLength),_.next=8,Rv(y,f,u,g,c,d);case 8:return _.abrupt("return",y);case 9:return _.abrupt("return",null);case 10:case"end":return _.stop()}},t)})),eu.apply(this,arguments)}var au={};mt(au,{name:()=>jE,preprocess:()=>VE});function NE(t,r){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=HE(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var n=0,a=function(){};return{s:a,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(f){throw f},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,o=!1,s;return{s:function(){e=e.call(t)},n:function(){var f=e.next();return i=f.done,f},e:function(f){o=!0,s=f},f:function(){try{!i&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function HE(t,r){if(t){if(typeof t=="string")return Ov(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return Ov(t,r)}}function Ov(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}var Lr="EXT_texture_webp",jE=Lr;function VE(t,r){var e=new ye(t);if(!Ss("image/webp")){if(e.getRequiredExtensions().includes(Lr))throw new Error("gltf: Required extension ".concat(Lr," not supported by browser"));return}var n=e.json,a=NE(n.textures||[]),i;try{for(a.s();!(i=a.n()).done;){var o=i.value,s=e.getObjectExtension(o,Lr);s&&(o.source=s.source),e.removeObjectExtension(o,Lr)}}catch(u){a.e(u)}finally{a.f()}e.removeExtension(Lr)}var iu={};mt(iu,{name:()=>zE,preprocess:()=>KE});function JE(t,r){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=XE(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var n=0,a=function(){};return{s:a,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(f){throw f},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,o=!1,s;return{s:function(){e=e.call(t)},n:function(){var f=e.next();return i=f.done,f},e:function(f){o=!0,s=f},f:function(){try{!i&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function XE(t,r){if(t){if(typeof t=="string")return wv(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return wv(t,r)}}function wv(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}var pi="KHR_texture_basisu",zE=pi;function KE(t,r){var e=new ye(t),n=e.json,a=JE(n.textures||[]),i;try{for(a.s();!(i=a.n()).done;){var o=i.value,s=e.getObjectExtension(o,pi);s&&(o.source=s.source),e.removeObjectExtension(o,pi)}}catch(u){a.e(u)}finally{a.f()}e.removeExtension(pi)}var Au={};mt(Au,{decode:()=>yB,encode:()=>AB,name:()=>vB,preprocess:()=>gB});var sg=m(Qe()),vu=m(ae()),gu=m(Ee()),lr=m(Be());var tg=m(Ee()),rg=m(ae()),lu=m(Be());var Lv=m(Ie());var Fv="3.3.3";var WE={draco:{decoderType:(typeof WebAssembly>"u"?"undefined":(0,Lv.default)(WebAssembly))==="object"?"wasm":"js",libraryPath:"libs/",extraAttributes:{},attributeNameEntry:void 0}},Dv={name:"Draco",id:St?"draco":"draco-nodejs",module:"draco",shapes:["mesh"],version:Fv,worker:!0,extensions:["drc"],mimeTypes:["application/octet-stream"],binary:!0,tests:["DRACO"],options:WE};var ou=m(Jt()),Vv=m(Qe()),Jv=m(ae()),Xv=m(Y()),zv=m(Q());function Gv(t,r,e){var n=kv(r.metadata),a=[],i=YE(r.attributes);for(var o in t){var s=t[o],u=Pv(o,s,i[o]);a.push(u)}if(e){var f=Pv("indices",e);a.push(f)}return new tn(a,n)}function YE(t){var r={};for(var e in t){var n=t[e];r[n.name||"undefined"]=n}return r}function Pv(t,r,e){var n=e?kv(e.metadata):void 0,a=_o(t,r,n);return a}function kv(t){var r=new Map;for(var e in t)r.set("".concat(e,".string"),JSON.stringify(t[e]));return r}function QE(t,r){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=$E(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var n=0,a=function(){};return{s:a,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(f){throw f},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,o=!1,s;return{s:function(){e=e.call(t)},n:function(){var f=e.next();return i=f.done,f},e:function(f){o=!0,s=f},f:function(){try{!i&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function $E(t,r){if(t){if(typeof t=="string")return Uv(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return Uv(t,r)}}function Uv(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function Nv(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),e.push.apply(e,n)}return e}function Hv(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?Nv(Object(e),!0).forEach(function(n){(0,Jv.default)(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):Nv(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}var jv={POSITION:"POSITION",NORMAL:"NORMAL",COLOR:"COLOR_0",TEX_COORD:"TEXCOORD_0"},qE={1:Int8Array,2:Uint8Array,3:Int16Array,4:Uint16Array,5:Int32Array,6:Uint32Array,9:Float32Array},ZE=4,Kv=function(){function t(r){(0,Xv.default)(this,t),w(this,"draco",void 0),w(this,"decoder",void 0),w(this,"metadataQuerier",void 0),this.draco=r,this.decoder=new this.draco.Decoder,this.metadataQuerier=new this.draco.MetadataQuerier}return(0,zv.default)(t,[{key:"destroy",value:function(){this.draco.destroy(this.decoder),this.draco.destroy(this.metadataQuerier)}},{key:"parseSync",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=new this.draco.DecoderBuffer;a.Init(new Int8Array(e),e.byteLength),this._disableAttributeTransforms(n);var i=this.decoder.GetEncodedGeometryType(a),o=i===this.draco.TRIANGULAR_MESH?new this.draco.Mesh:new this.draco.PointCloud;try{var s;switch(i){case this.draco.TRIANGULAR_MESH:s=this.decoder.DecodeBufferToMesh(a,o);break;case this.draco.POINT_CLOUD:s=this.decoder.DecodeBufferToPointCloud(a,o);break;default:throw new Error("DRACO: Unknown geometry type.")}if(!s.ok()||!o.ptr){var u="DRACO decompression failed: ".concat(s.error_msg());throw new Error(u)}var f=this._getDracoLoaderData(o,i,n),c=this._getMeshData(o,f,n),l=en(c.attributes),d=Gv(c.attributes,f,c.indices),h=Hv(Hv({loader:"draco",loaderData:f,header:{vertexCount:o.num_points(),boundingBox:l}},c),{},{schema:d});return h}finally{this.draco.destroy(a),o&&this.draco.destroy(o)}}},{key:"_getDracoLoaderData",value:function(e,n,a){var i=this._getTopLevelMetadata(e),o=this._getDracoAttributes(e,a);return{geometry_type:n,num_attributes:e.num_attributes(),num_points:e.num_points(),num_faces:e instanceof this.draco.Mesh?e.num_faces():0,metadata:i,attributes:o}}},{key:"_getDracoAttributes",value:function(e,n){for(var a={},i=0;i<e.num_attributes();i++){var o=this.decoder.GetAttribute(e,i),s=this._getAttributeMetadata(e,i);a[o.unique_id()]={unique_id:o.unique_id(),attribute_type:o.attribute_type(),data_type:o.data_type(),num_components:o.num_components(),byte_offset:o.byte_offset(),byte_stride:o.byte_stride(),normalized:o.normalized(),attribute_index:i,metadata:s};var u=this._getQuantizationTransform(o,n);u&&(a[o.unique_id()].quantization_transform=u);var f=this._getOctahedronTransform(o,n);f&&(a[o.unique_id()].octahedron_transform=f)}return a}},{key:"_getMeshData",value:function(e,n,a){var i=this._getMeshAttributes(n,e,a),o=i.POSITION;if(!o)throw new Error("DRACO: No position attribute found.");if(e instanceof this.draco.Mesh)switch(a.topology){case"triangle-strip":return{topology:"triangle-strip",mode:4,attributes:i,indices:{value:this._getTriangleStripIndices(e),size:1}};case"triangle-list":default:return{topology:"triangle-list",mode:5,attributes:i,indices:{value:this._getTriangleListIndices(e),size:1}}}return{topology:"point-list",mode:0,attributes:i}}},{key:"_getMeshAttributes",value:function(e,n,a){for(var i={},o=0,s=Object.values(e.attributes);o<s.length;o++){var u=s[o],f=this._deduceAttributeName(u,a);u.name=f;var c=this._getAttributeValues(n,u),l=c.value,d=c.size;i[f]={value:l,size:d,byteOffset:u.byte_offset,byteStride:u.byte_stride,normalized:u.normalized}}return i}},{key:"_getTriangleListIndices",value:function(e){var n=e.num_faces(),a=n*3,i=a*ZE,o=this.draco._malloc(i);try{return this.decoder.GetTrianglesUInt32Array(e,i,o),new Uint32Array(this.draco.HEAPF32.buffer,o,a).slice()}finally{this.draco._free(o)}}},{key:"_getTriangleStripIndices",value:function(e){var n=new this.draco.DracoInt32Array;try{return this.decoder.GetTriangleStripsFromMesh(e,n),rB(n)}finally{this.draco.destroy(n)}}},{key:"_getAttributeValues",value:function(e,n){var a=qE[n.data_type],i=n.num_components,o=e.num_points(),s=o*i,u=s*a.BYTES_PER_ELEMENT,f=eB(this.draco,a),c,l=this.draco._malloc(u);try{var d=this.decoder.GetAttribute(e,n.attribute_index);this.decoder.GetAttributeDataArrayForAllPoints(e,d,f,u,l),c=new a(this.draco.HEAPF32.buffer,l,s).slice()}finally{this.draco._free(l)}return{value:c,size:i}}},{key:"_deduceAttributeName",value:function(e,n){for(var a=e.unique_id,i=0,o=Object.entries(n.extraAttributes||{});i<o.length;i++){var s=(0,Vv.default)(o[i],2),u=s[0],f=s[1];if(f===a)return u}var c=e.attribute_type;for(var l in jv){var d=this.draco[l];if(d===c)return jv[l]}var h=n.attributeNameEntry||"name";return e.metadata[h]?e.metadata[h].string:"CUSTOM_ATTRIBUTE_".concat(a)}},{key:"_getTopLevelMetadata",value:function(e){var n=this.decoder.GetMetadata(e);return this._getDracoMetadata(n)}},{key:"_getAttributeMetadata",value:function(e,n){var a=this.decoder.GetAttributeMetadata(e,n);return this._getDracoMetadata(a)}},{key:"_getDracoMetadata",value:function(e){if(!e||!e.ptr)return{};for(var n={},a=this.metadataQuerier.NumEntries(e),i=0;i<a;i++){var o=this.metadataQuerier.GetEntryName(e,i);n[o]=this._getDracoMetadataField(e,o)}return n}},{key:"_getDracoMetadataField",value:function(e,n){var a=new this.draco.DracoInt32Array;try{this.metadataQuerier.GetIntEntryArray(e,n,a);var i=tB(a);return{int:this.metadataQuerier.GetIntEntry(e,n),string:this.metadataQuerier.GetStringEntry(e,n),double:this.metadataQuerier.GetDoubleEntry(e,n),intArray:i}}finally{this.draco.destroy(a)}}},{key:"_disableAttributeTransforms",value:function(e){var n=e.quantizedAttributes,a=n===void 0?[]:n,i=e.octahedronAttributes,o=i===void 0?[]:i,s=[].concat((0,ou.default)(a),(0,ou.default)(o)),u=QE(s),f;try{for(u.s();!(f=u.n()).done;){var c=f.value;this.decoder.SkipAttributeTransform(this.draco[c])}}catch(l){u.e(l)}finally{u.f()}}},{key:"_getQuantizationTransform",value:function(e,n){var a=this,i=n.quantizedAttributes,o=i===void 0?[]:i,s=e.attribute_type(),u=o.map(function(c){return a.decoder[c]}).includes(s);if(u){var f=new this.draco.AttributeQuantizationTransform;try{if(f.InitFromAttribute(e))return{quantization_bits:f.quantization_bits(),range:f.range(),min_values:new Float32Array([1,2,3]).map(function(c){return f.min_value(c)})}}finally{this.draco.destroy(f)}}return null}},{key:"_getOctahedronTransform",value:function(e,n){var a=this,i=n.octahedronAttributes,o=i===void 0?[]:i,s=e.attribute_type(),u=o.map(function(c){return a.decoder[c]}).includes(s);if(u){var f=new this.draco.AttributeQuantizationTransform;try{if(f.InitFromAttribute(e))return{quantization_bits:f.quantization_bits()}}finally{this.draco.destroy(f)}}return null}}]),t}();function eB(t,r){switch(r){case Float32Array:return t.DT_FLOAT32;case Int8Array:return t.DT_INT8;case Int16Array:return t.DT_INT16;case Int32Array:return t.DT_INT32;case Uint8Array:return t.DT_UINT8;case Uint16Array:return t.DT_UINT16;case Uint32Array:return t.DT_UINT32;default:return t.DT_INVALID}}function tB(t){for(var r=t.size(),e=new Int32Array(r),n=0;n<r;n++)e[n]=t.GetValue(n);return e}function rB(t){for(var r=t.size(),e=new Int32Array(r),n=0;n<r;n++)e[n]=t.GetValue(n);return e}var Qv=m(Qe()),$v=m(ae()),fu=m(Ee()),Tn=m(Be());function Wv(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),e.push.apply(e,n)}return e}function Yv(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?Wv(Object(e),!0).forEach(function(n){(0,$v.default)(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):Wv(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}var nB="1.5.5",aB="1.4.1",cu="https://www.gstatic.com/draco/versioned/decoders/".concat(nB),iB="".concat(cu,"/draco_decoder.js"),oB="".concat(cu,"/draco_wasm_wrapper.js"),sB="".concat(cu,"/draco_decoder.wasm"),YL="https://raw.githubusercontent.com/google/draco/".concat(aB,"/javascript/draco_encoder.js"),xn;function qv(t){return su.apply(this,arguments)}function su(){return su=(0,fu.default)(Tn.default.mark(function t(r){var e;return Tn.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return e=r.modules||{},e.draco3d?xn=xn||e.draco3d.createDecoderModule({}).then(function(i){return{draco:i}}):xn=xn||uB(r),a.next=4,xn;case 4:return a.abrupt("return",a.sent);case 5:case"end":return a.stop()}},t)})),su.apply(this,arguments)}function uB(t){return uu.apply(this,arguments)}function uu(){return uu=(0,fu.default)(Tn.default.mark(function t(r){var e,n,a,i;return Tn.default.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:s.t0=r.draco&&r.draco.decoderType,s.next=s.t0==="js"?3:(s.t0==="wasm",7);break;case 3:return s.next=5,Bt(iB,"draco",r);case 5:return e=s.sent,s.abrupt("break",21);case 7:return s.t1=Promise,s.next=10,Bt(oB,"draco",r);case 10:return s.t2=s.sent,s.next=13,Bt(sB,"draco",r);case 13:return s.t3=s.sent,s.t4=[s.t2,s.t3],s.next=17,s.t1.all.call(s.t1,s.t4);case 17:a=s.sent,i=(0,Qv.default)(a,2),e=i[0],n=i[1];case 21:return e=e||globalThis.DracoDecoderModule,s.next=24,fB(e,n);case 24:return s.abrupt("return",s.sent);case 25:case"end":return s.stop()}},t)})),uu.apply(this,arguments)}function fB(t,r){var e={};return r&&(e.wasmBinary=r),new Promise(function(n){t(Yv(Yv({},e),{},{onModuleLoaded:function(i){return n({draco:i})}}))})}function Zv(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),e.push.apply(e,n)}return e}function eg(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?Zv(Object(e),!0).forEach(function(n){(0,rg.default)(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):Zv(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}var ng=eg(eg({},Dv),{},{parse:cB});function cB(t,r){return du.apply(this,arguments)}function du(){return du=(0,tg.default)(lu.default.mark(function t(r,e){var n,a,i;return lu.default.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,qv(e);case 2:return n=s.sent,a=n.draco,i=new Kv(a),s.prev=5,s.abrupt("return",i.parseSync(r,e?.draco));case 7:return s.prev=7,i.destroy(),s.finish(7);case 10:case"end":return s.stop()}},t,null,[[5,,7,10]])})),du.apply(this,arguments)}function ag(t){var r={};for(var e in t){var n=t[e];if(e!=="indices"){var a=hu(n);r[e]=a}}return r}function hu(t){var r=lB(t),e=r.buffer,n=r.size,a=r.count,i={value:e,size:n,byteOffset:0,count:a,type:di(n),componentType:hi(e)};return i}function lB(t){var r=t,e=1,n=0;return t&&t.value&&(r=t.value,e=t.size||1),r&&(ArrayBuffer.isView(r)||(r=dB(r,Float32Array)),n=r.length/e),{buffer:r,size:e,count:n}}function dB(t,r){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return t?Array.isArray(t)?new r(t):e&&!(t instanceof r)?new r(t):t:null}function ig(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),e.push.apply(e,n)}return e}function hB(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?ig(Object(e),!0).forEach(function(n){(0,vu.default)(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):ig(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}var mB=lr.default.mark(yu);function Cn(t,r){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=pB(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var n=0,a=function(){};return{s:a,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(f){throw f},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,o=!1,s;return{s:function(){e=e.call(t)},n:function(){var f=e.next();return i=f.done,f},e:function(f){o=!0,s=f},f:function(){try{!i&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function pB(t,r){if(t){if(typeof t=="string")return og(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return og(t,r)}}function og(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}var dr="KHR_draco_mesh_compression",vB=dr;function gB(t,r,e){var n=new ye(t),a=Cn(yu(n)),i;try{for(a.s();!(i=a.n()).done;){var o=i.value;n.getObjectExtension(o,dr)}}catch(s){a.e(s)}finally{a.f()}}function yB(t,r,e){return mu.apply(this,arguments)}function mu(){return mu=(0,gu.default)(lr.default.mark(function t(r,e,n){var a,i,o,s,u,f;return lr.default.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(e!=null&&(a=e.gltf)!==null&&a!==void 0&&a.decompressMeshes){l.next=2;break}return l.abrupt("return");case 2:i=new ye(r),o=[],s=Cn(yu(i));try{for(s.s();!(u=s.n()).done;)f=u.value,i.getObjectExtension(f,dr)&&o.push(_B(i,f,e,n))}catch(d){s.e(d)}finally{s.f()}return l.next=8,Promise.all(o);case 8:i.removeExtension(dr);case 9:case"end":return l.stop()}},t)})),mu.apply(this,arguments)}function AB(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},e=new ye(t),n=Cn(e.json.meshes||[]),a;try{for(n.s();!(a=n.n()).done;){var i=a.value;bB(i,r),e.addRequiredExtension(dr)}}catch(o){n.e(o)}finally{n.f()}}function _B(t,r,e,n){return pu.apply(this,arguments)}function pu(){return pu=(0,gu.default)(lr.default.mark(function t(r,e,n,a){var i,o,s,u,f,c,l,d,h,v,g,y,A,_;return lr.default.wrap(function(B){for(;;)switch(B.prev=B.next){case 0:if(i=r.getObjectExtension(e,dr),i){B.next=3;break}return B.abrupt("return");case 3:return o=r.getTypedArrayForBufferView(i.bufferView),s=vn(o.buffer,o.byteOffset),u=a.parse,f=hB({},n),delete f["3d-tiles"],B.next=10,u(s,ng,f,a);case 10:for(c=B.sent,l=ag(c.attributes),d=0,h=Object.entries(l);d<h.length;d++)v=(0,sg.default)(h[d],2),g=v[0],y=v[1],g in e.attributes&&(A=e.attributes[g],_=r.getAccessor(A),_!=null&&_.min&&_!==null&&_!==void 0&&_.max&&(y.min=_.min,y.max=_.max));e.attributes=l,c.indices&&(e.indices=hu(c.indices)),EB(e);case 16:case"end":return B.stop()}},t)})),pu.apply(this,arguments)}function bB(t,r){var e,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:4,a=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0;if(!a.DracoWriter)throw new Error("options.gltf.DracoWriter not provided");var o=a.DracoWriter.encodeSync({attributes:t}),s=i==null||(e=i.parseSync)===null||e===void 0?void 0:e.call(i,{attributes:t}),u=a._addFauxAttributes(s.attributes),f=a.addBufferView(o),c={primitives:[{attributes:u,mode:n,extensions:(0,vu.default)({},dr,{bufferView:f,attributes:u})}]};return c}function EB(t){if(!t.attributes&&Object.keys(t.attributes).length>0)throw new Error("glTF: Empty primitive detected: Draco decompression failure?")}function yu(t){var r,e,n,a,i,o;return lr.default.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:r=Cn(t.json.meshes||[]),u.prev=1,r.s();case 3:if((e=r.n()).done){u.next=24;break}n=e.value,a=Cn(n.primitives),u.prev=6,a.s();case 8:if((i=a.n()).done){u.next=14;break}return o=i.value,u.next=12,o;case 12:u.next=8;break;case 14:u.next=19;break;case 16:u.prev=16,u.t0=u.catch(6),a.e(u.t0);case 19:return u.prev=19,a.f(),u.finish(19);case 22:u.next=3;break;case 24:u.next=29;break;case 26:u.prev=26,u.t1=u.catch(1),r.e(u.t1);case 29:return u.prev=29,r.f(),u.finish(29);case 32:case"end":return u.stop()}},mB,null,[[1,26,29,32],[6,16,19,22]])}var Bu={};mt(Bu,{decode:()=>SB,name:()=>xB});var dg=m(Qe()),hg=m(Ee()),_u=m(Be());var ug={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},fg={5120:1,5121:1,5122:2,5123:2,5125:4,5126:4};function cg(t,r){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=BB(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var n=0,a=function(){};return{s:a,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(f){throw f},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,o=!1,s;return{s:function(){e=e.call(t)},n:function(){var f=e.next();return i=f.done,f},e:function(f){o=!0,s=f},f:function(){try{!i&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function BB(t,r){if(t){if(typeof t=="string")return lg(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return lg(t,r)}}function lg(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}var Eu="KHR_texture_transform",xB=Eu,vi=new ar,TB=new ir,CB=new ir;function SB(t,r){return bu.apply(this,arguments)}function bu(){return bu=(0,hg.default)(_u.default.mark(function t(r,e){var n,a,i,o;return _u.default.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(n=new ye(r),a=n.getExtension(Eu),a){u.next=4;break}return u.abrupt("return");case 4:for(i=r.json.materials||[],o=0;o<i.length;o++)MB(o,r);case 6:case"end":return u.stop()}},t)})),bu.apply(this,arguments)}function MB(t,r){var e,n,a,i=[],o=(e=r.json.materials)===null||e===void 0?void 0:e[t],s=o==null||(n=o.pbrMetallicRoughness)===null||n===void 0?void 0:n.baseColorTexture;s&&Sn(r,t,s,i);var u=o?.emissiveTexture;u&&Sn(r,t,u,i);var f=o?.normalTexture;f&&Sn(r,t,f,i);var c=o?.occlusionTexture;c&&Sn(r,t,c,i);var l=o==null||(a=o.pbrMetallicRoughness)===null||a===void 0?void 0:a.metallicRoughnessTexture;l&&Sn(r,t,l,i)}function Sn(t,r,e,n){var a=RB(e,n);if(a){var i=t.json.meshes||[],o=cg(i),s;try{for(o.s();!(s=o.n()).done;){var u=s.value,f=cg(u.primitives),c;try{for(f.s();!(c=f.n()).done;){var l=c.value,d=l.material;Number.isFinite(d)&&r===d&&IB(t,l,a)}}catch(h){f.e(h)}finally{f.f()}}}catch(h){o.e(h)}finally{o.f()}}}function RB(t,r){var e,n=(e=t.extensions)===null||e===void 0?void 0:e[Eu],a=t.texCoord,i=a===void 0?0:a,o=n.texCoord,s=o===void 0?i:o,u=r.findIndex(function(c){var l=(0,dg.default)(c,2),d=l[0],h=l[1];return d===i&&h===s})!==-1;if(!u){var f=FB(n);return i!==s&&(t.texCoord=s),r.push([i,s]),{originalTexCoord:i,texCoord:s,matrix:f}}return null}function IB(t,r,e){var n=e.originalTexCoord,a=e.texCoord,i=e.matrix,o=r.attributes["TEXCOORD_".concat(n)];if(Number.isFinite(o)){var s,u=(s=t.json.accessors)===null||s===void 0?void 0:s[o];if(u&&u.bufferView){var f,c=(f=t.json.bufferViews)===null||f===void 0?void 0:f[u.bufferView];if(c){for(var l=t.buffers[c.buffer],d=l.arrayBuffer,h=l.byteOffset,v=(h||0)+(u.byteOffset||0)+(c.byteOffset||0),g=Fr(u,c),y=g.ArrayType,A=g.length,_=fg[u.componentType],T=ug[u.type],B=c.byteStride||_*T,x=new Float32Array(A),R=0;R<u.count;R++){var L=new y(d,v+R*B,2);vi.set(L[0],L[1],1),vi.transformByMatrix3(i),x.set([vi[0],vi[1]],R*T)}n===a?OB(u,c,t.buffers,x):wB(a,u,r,t,x)}}}}function OB(t,r,e,n){t.componentType=5126,e.push({arrayBuffer:n.buffer,byteOffset:0,byteLength:n.buffer.byteLength}),r.buffer=e.length-1,r.byteLength=n.buffer.byteLength,r.byteOffset=0,delete r.byteStride}function wB(t,r,e,n,a){n.buffers.push({arrayBuffer:a.buffer,byteOffset:0,byteLength:a.buffer.byteLength});var i=n.json.bufferViews;if(i){i.push({buffer:n.buffers.length-1,byteLength:a.buffer.byteLength,byteOffset:0});var o=n.json.accessors;o&&(o.push({bufferView:i?.length-1,byteOffset:0,componentType:5126,count:r.count,type:"VEC2"}),e.attributes["TEXCOORD_".concat(t)]=o.length-1)}}function FB(t){var r=t.offset,e=r===void 0?[0,0]:r,n=t.rotation,a=n===void 0?0:n,i=t.scale,o=i===void 0?[1,1]:i,s=new ir().set(1,0,0,0,1,0,e[0],e[1],1),u=TB.set(Math.cos(a),Math.sin(a),0,-Math.sin(a),Math.cos(a),0,0,0,1),f=CB.set(o[0],0,0,0,o[1],0,0,0,1);return s.multiplyRight(u).multiplyRight(f)}var Su={};mt(Su,{decode:()=>PB,encode:()=>GB,name:()=>DB});var Cu=m(Ee()),Mn=m(Be());function pg(t,r){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=LB(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var n=0,a=function(){};return{s:a,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(f){throw f},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,o=!1,s;return{s:function(){e=e.call(t)},n:function(){var f=e.next();return i=f.done,f},e:function(f){o=!0,s=f},f:function(){try{!i&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function LB(t,r){if(t){if(typeof t=="string")return mg(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return mg(t,r)}}function mg(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}var hr="KHR_lights_punctual",DB=hr;function PB(t){return xu.apply(this,arguments)}function xu(){return xu=(0,Cu.default)(Mn.default.mark(function t(r){var e,n,a,i,o,s,u;return Mn.default.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:e=new ye(r),n=e.json,a=e.getExtension(hr),a&&(e.json.lights=a.lights,e.removeExtension(hr)),i=pg(n.nodes||[]);try{for(i.s();!(o=i.n()).done;)s=o.value,u=e.getObjectExtension(s,hr),u&&(s.light=u.light),e.removeObjectExtension(s,hr)}catch(l){i.e(l)}finally{i.f()}case 6:case"end":return c.stop()}},t)})),xu.apply(this,arguments)}function GB(t){return Tu.apply(this,arguments)}function Tu(){return Tu=(0,Cu.default)(Mn.default.mark(function t(r){var e,n,a,i,o,s,u;return Mn.default.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(e=new ye(r),n=e.json,n.lights&&(a=e.addExtension(hr),Re(!a.lights),a.lights=n.lights,delete n.lights),e.json.lights){i=pg(e.json.lights);try{for(i.s();!(o=i.n()).done;)s=o.value,u=s.node,e.addObjectExtension(u,hr,s)}catch(l){i.e(l)}finally{i.f()}delete e.json.lights}case 4:case"end":return c.stop()}},t)})),Tu.apply(this,arguments)}var Iu={};mt(Iu,{decode:()=>NB,encode:()=>HB,name:()=>UB});var gg=m(Ee()),Mu=m(Be());function yg(t,r){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=kB(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var n=0,a=function(){};return{s:a,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(f){throw f},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,o=!1,s;return{s:function(){e=e.call(t)},n:function(){var f=e.next();return i=f.done,f},e:function(f){o=!0,s=f},f:function(){try{!i&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function kB(t,r){if(t){if(typeof t=="string")return vg(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return vg(t,r)}}function vg(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}var Rn="KHR_materials_unlit",UB=Rn;function NB(t){return Ru.apply(this,arguments)}function Ru(){return Ru=(0,gg.default)(Mu.default.mark(function t(r){var e,n,a,i,o,s;return Mu.default.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:e=new ye(r),n=e.json,a=yg(n.materials||[]);try{for(a.s();!(i=a.n()).done;)o=i.value,s=o.extensions&&o.extensions.KHR_materials_unlit,s&&(o.unlit=!0),e.removeObjectExtension(o,Rn)}catch(c){a.e(c)}finally{a.f()}e.removeExtension(Rn);case 5:case"end":return f.stop()}},t)})),Ru.apply(this,arguments)}function HB(t){var r=new ye(t),e=r.json;if(r.materials){var n=yg(e.materials||[]),a;try{for(n.s();!(a=n.n()).done;){var i=a.value;i.unlit&&(delete i.unlit,r.addObjectExtension(i,Rn,{}),r.addExtension(Rn))}}catch(o){n.e(o)}finally{n.f()}}}var Lu={};mt(Lu,{decode:()=>XB,encode:()=>zB,name:()=>JB});var _g=m(Ie()),Fu=m(Ee()),On=m(Be());function jB(t,r){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=VB(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var n=0,a=function(){};return{s:a,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(f){throw f},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,o=!1,s;return{s:function(){e=e.call(t)},n:function(){var f=e.next();return i=f.done,f},e:function(f){o=!0,s=f},f:function(){try{!i&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function VB(t,r){if(t){if(typeof t=="string")return Ag(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return Ag(t,r)}}function Ag(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}var In="KHR_techniques_webgl",JB=In;function XB(t){return Ou.apply(this,arguments)}function Ou(){return Ou=(0,Fu.default)(On.default.mark(function t(r){var e,n,a,i,o,s,u,f;return On.default.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(e=new ye(r),n=e.json,a=e.getExtension(In),a){i=KB(a,e),o=jB(n.materials||[]);try{for(o.s();!(s=o.n()).done;)u=s.value,f=e.getObjectExtension(u,In),f&&(u.technique=Object.assign({},f,i[f.technique]),u.technique.values=WB(u.technique,e)),e.removeObjectExtension(u,In)}catch(d){o.e(d)}finally{o.f()}e.removeExtension(In)}case 4:case"end":return l.stop()}},t)})),Ou.apply(this,arguments)}function zB(t,r){return wu.apply(this,arguments)}function wu(){return wu=(0,Fu.default)(On.default.mark(function t(r,e){return On.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:case"end":return a.stop()}},t)})),wu.apply(this,arguments)}function KB(t,r){var e=t.programs,n=e===void 0?[]:e,a=t.shaders,i=a===void 0?[]:a,o=t.techniques,s=o===void 0?[]:o,u=new TextDecoder;return i.forEach(function(f){if(Number.isFinite(f.bufferView))f.code=u.decode(r.getTypedArrayForBufferView(f.bufferView));else throw new Error("KHR_techniques_webgl: no shader code")}),n.forEach(function(f){f.fragmentShader=i[f.fragmentShader],f.vertexShader=i[f.vertexShader]}),s.forEach(function(f){f.program=n[f.program]}),s}function WB(t,r){var e=Object.assign({},t.values);return Object.keys(t.uniforms||{}).forEach(function(n){t.uniforms[n].value&&!(n in e)&&(e[n]=t.uniforms[n].value)}),Object.keys(e).forEach(function(n){(0,_g.default)(e[n])==="object"&&e[n].index!==void 0&&(e[n].texture=r.getTexture(e[n].index))}),e}var Gu={};mt(Gu,{decode:()=>QB,name:()=>YB});var bg=m(Ee()),Du=m(Be());var Eg="EXT_feature_metadata",YB=Eg;function QB(t){return Pu.apply(this,arguments)}function Pu(){return Pu=(0,bg.default)(Du.default.mark(function t(r){var e;return Du.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:e=new ye(r),$B(e);case 2:case"end":return a.stop()}},t)})),Pu.apply(this,arguments)}function $B(t){var r,e=t.getExtension(Eg),n=e==null||(r=e.schema)===null||r===void 0?void 0:r.classes,a=e?.featureTables,i=e?.featureTextures;if(i&&console.warn('featureTextures is not yet supported in the "EXT_feature_metadata" extension.'),n&&a)for(var o in n){var s=n[o],u=ex(a,o);u&&qB(t,u,s)}}function qB(t,r,e){for(var n in e.properties){var a,i=e.properties[n],o=r==null||(a=r.properties)===null||a===void 0?void 0:a[n],s=r.count;if(o){var u=ZB(t,i,s,o);o.data=u}}}function ZB(t,r,e,n){var a=n.bufferView,i=t.getTypedArrayForBufferView(a);switch(r.type){case"STRING":{var o=n.stringOffsetBufferView,s=t.getTypedArrayForBufferView(o);i=tx(i,s,e);break}default:}return i}function ex(t,r){for(var e in t){var n=t[e];if(n.class===r)return n}return null}function tx(t,r,e){for(var n=[],a=new TextDecoder("utf8"),i=0,o=4,s=0;s<e;s++){var u=r[(s+1)*o]-r[s*o],f=t.subarray(i,u+i),c=a.decode(f);n.push(c),i+=u}return n}function Tg(t,r){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=rx(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var n=0,a=function(){};return{s:a,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(f){throw f},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,o=!1,s;return{s:function(){e=e.call(t)},n:function(){var f=e.next();return i=f.done,f},e:function(f){o=!0,s=f},f:function(){try{!i&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function rx(t,r){if(t){if(typeof t=="string")return Bg(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return Bg(t,r)}}function Bg(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}var Cg=[nu,au,iu,Au,Su,Iu,Lu,Bu,Gu];function Sg(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},e=arguments.length>2?arguments[2]:void 0,n=Cg.filter(function(u){return Rg(u.name,r)}),a=Tg(n),i;try{for(a.s();!(i=a.n()).done;){var o=i.value,s;(s=o.preprocess)===null||s===void 0||s.call(o,t,r,e)}}catch(u){a.e(u)}finally{a.f()}}function Mg(t){return Uu.apply(this,arguments)}function Uu(){return Uu=(0,xg.default)(ku.default.mark(function t(r){var e,n,a,i,o,s,u,f=arguments;return ku.default.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:e=f.length>1&&f[1]!==void 0?f[1]:{},n=f.length>2?f[2]:void 0,a=Cg.filter(function(d){return Rg(d.name,e)}),i=Tg(a),l.prev=4,i.s();case 6:if((o=i.n()).done){l.next=12;break}return s=o.value,l.next=10,(u=s.decode)===null||u===void 0?void 0:u.call(s,r,e,n);case 10:l.next=6;break;case 12:l.next=17;break;case 14:l.prev=14,l.t0=l.catch(4),i.e(l.t0);case 17:return l.prev=17,i.f(),l.finish(17);case 20:case"end":return l.stop()}},t,null,[[4,14,17,20]])})),Uu.apply(this,arguments)}function Rg(t,r){var e,n=(r==null||(e=r.gltf)===null||e===void 0?void 0:e.excludeExtensions)||{},a=t in n&&!n[t];return!a}var Lg=m(Y()),Dg=m(Q());function nx(t,r){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=ax(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var n=0,a=function(){};return{s:a,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(f){throw f},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,o=!1,s;return{s:function(){e=e.call(t)},n:function(){var f=e.next();return i=f.done,f},e:function(f){o=!0,s=f},f:function(){try{!i&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function ax(t,r){if(t){if(typeof t=="string")return Ig(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return Ig(t,r)}}function Ig(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}var Nu="KHR_binary_glTF";function Og(t){var r=new ye(t),e=r.json,n=nx(e.images||[]),a;try{for(n.s();!(a=n.n()).done;){var i=a.value,o=r.getObjectExtension(i,Nu);o&&Object.assign(i,o),r.removeObjectExtension(i,Nu)}}catch(s){n.e(s)}finally{n.f()}e.buffers&&e.buffers[0]&&delete e.buffers[0].uri,r.removeExtension(Nu)}function Vt(t,r){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=ox(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var n=0,a=function(){};return{s:a,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(f){throw f},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,o=!1,s;return{s:function(){e=e.call(t)},n:function(){var f=e.next();return i=f.done,f},e:function(f){o=!0,s=f},f:function(){try{!i&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function ox(t,r){if(t){if(typeof t=="string")return wg(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return wg(t,r)}}function wg(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}var Fg={accessors:"accessor",animations:"animation",buffers:"buffer",bufferViews:"bufferView",images:"image",materials:"material",meshes:"mesh",nodes:"node",samplers:"sampler",scenes:"scene",skins:"skin",textures:"texture"},sx={accessor:"accessors",animations:"animation",buffer:"buffers",bufferView:"bufferViews",image:"images",material:"materials",mesh:"meshes",node:"nodes",sampler:"samplers",scene:"scenes",skin:"skins",texture:"textures"},ux=function(){function t(){(0,Lg.default)(this,t),w(this,"idToIndexMap",{animations:{},accessors:{},buffers:{},bufferViews:{},images:{},materials:{},meshes:{},nodes:{},samplers:{},scenes:{},skins:{},textures:{}}),w(this,"json",void 0)}return(0,Dg.default)(t,[{key:"normalize",value:function(e,n){this.json=e.json;var a=e.json;switch(a.asset&&a.asset.version){case"2.0":return;case void 0:case"1.0":break;default:console.warn("glTF: Unknown version ".concat(a.asset.version));return}if(!n.normalize)throw new Error("glTF v1 is not supported.");console.warn("Converting glTF v1 to glTF v2 format. This is experimental and may fail."),this._addAsset(a),this._convertTopLevelObjectsToArrays(a),Og(e),this._convertObjectIdsToArrayIndices(a),this._updateObjects(a),this._updateMaterial(a)}},{key:"_addAsset",value:function(e){e.asset=e.asset||{},e.asset.version="2.0",e.asset.generator=e.asset.generator||"Normalized to glTF 2.0 by loaders.gl"}},{key:"_convertTopLevelObjectsToArrays",value:function(e){for(var n in Fg)this._convertTopLevelObjectToArray(e,n)}},{key:"_convertTopLevelObjectToArray",value:function(e,n){var a=e[n];if(!(!a||Array.isArray(a))){e[n]=[];for(var i in a){var o=a[i];o.id=o.id||i;var s=e[n].length;e[n].push(o),this.idToIndexMap[n][i]=s}}}},{key:"_convertObjectIdsToArrayIndices",value:function(e){for(var n in Fg)this._convertIdsToIndices(e,n);"scene"in e&&(e.scene=this._convertIdToIndex(e.scene,"scene"));var a=Vt(e.textures),i;try{for(a.s();!(i=a.n()).done;){var o=i.value;this._convertTextureIds(o)}}catch(y){a.e(y)}finally{a.f()}var s=Vt(e.meshes),u;try{for(s.s();!(u=s.n()).done;){var f=u.value;this._convertMeshIds(f)}}catch(y){s.e(y)}finally{s.f()}var c=Vt(e.nodes),l;try{for(c.s();!(l=c.n()).done;){var d=l.value;this._convertNodeIds(d)}}catch(y){c.e(y)}finally{c.f()}var h=Vt(e.scenes),v;try{for(h.s();!(v=h.n()).done;){var g=v.value;this._convertSceneIds(g)}}catch(y){h.e(y)}finally{h.f()}}},{key:"_convertTextureIds",value:function(e){e.source&&(e.source=this._convertIdToIndex(e.source,"image"))}},{key:"_convertMeshIds",value:function(e){var n=Vt(e.primitives),a;try{for(n.s();!(a=n.n()).done;){var i=a.value,o=i.attributes,s=i.indices,u=i.material;for(var f in o)o[f]=this._convertIdToIndex(o[f],"accessor");s&&(i.indices=this._convertIdToIndex(s,"accessor")),u&&(i.material=this._convertIdToIndex(u,"material"))}}catch(c){n.e(c)}finally{n.f()}}},{key:"_convertNodeIds",value:function(e){var n=this;e.children&&(e.children=e.children.map(function(a){return n._convertIdToIndex(a,"node")})),e.meshes&&(e.meshes=e.meshes.map(function(a){return n._convertIdToIndex(a,"mesh")}))}},{key:"_convertSceneIds",value:function(e){var n=this;e.nodes&&(e.nodes=e.nodes.map(function(a){return n._convertIdToIndex(a,"node")}))}},{key:"_convertIdsToIndices",value:function(e,n){e[n]||(console.warn("gltf v1: json doesn't contain attribute ".concat(n)),e[n]=[]);var a=Vt(e[n]),i;try{for(a.s();!(i=a.n()).done;){var o=i.value;for(var s in o){var u=o[s],f=this._convertIdToIndex(u,s);o[s]=f}}}catch(c){a.e(c)}finally{a.f()}}},{key:"_convertIdToIndex",value:function(e,n){var a=sx[n];if(a in this.idToIndexMap){var i=this.idToIndexMap[a][e];if(!Number.isFinite(i))throw new Error("gltf v1: failed to resolve ".concat(n," with id ").concat(e));return i}return e}},{key:"_updateObjects",value:function(e){var n=Vt(this.json.buffers),a;try{for(n.s();!(a=n.n()).done;){var i=a.value;delete i.type}}catch(o){n.e(o)}finally{n.f()}}},{key:"_updateMaterial",value:function(e){var n=Vt(e.materials),a;try{var i=function(){var c=a.value;c.pbrMetallicRoughness={baseColorFactor:[1,1,1,1],metallicFactor:1,roughnessFactor:1};var l=((o=c.values)===null||o===void 0?void 0:o.tex)||((s=c.values)===null||s===void 0?void 0:s.texture2d_0)||((u=c.values)===null||u===void 0?void 0:u.diffuseTex),d=e.textures.findIndex(function(h){return h.id===l});d!==-1&&(c.pbrMetallicRoughness.baseColorTexture={index:d})};for(n.s();!(a=n.n()).done;){var o,s,u;i()}}catch(f){n.e(f)}finally{n.f()}}}]),t}();function Pg(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new ux().normalize(t,r)}var kg=m(Ie()),Ug=m(Y()),Ng=m(Q()),Pr=m(ae());var Dr;function Gg(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),e.push.apply(e,n)}return e}function Rt(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?Gg(Object(e),!0).forEach(function(n){(0,Pr.default)(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):Gg(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}var fx={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},cx={5120:1,5121:1,5122:2,5123:2,5125:4,5126:4},ft={TEXTURE_MAG_FILTER:10240,TEXTURE_MIN_FILTER:10241,TEXTURE_WRAP_S:10242,TEXTURE_WRAP_T:10243,REPEAT:10497,LINEAR:9729,NEAREST_MIPMAP_LINEAR:9986},lx={magFilter:ft.TEXTURE_MAG_FILTER,minFilter:ft.TEXTURE_MIN_FILTER,wrapS:ft.TEXTURE_WRAP_S,wrapT:ft.TEXTURE_WRAP_T},dx=(Dr={},(0,Pr.default)(Dr,ft.TEXTURE_MAG_FILTER,ft.LINEAR),(0,Pr.default)(Dr,ft.TEXTURE_MIN_FILTER,ft.NEAREST_MIPMAP_LINEAR),(0,Pr.default)(Dr,ft.TEXTURE_WRAP_S,ft.REPEAT),(0,Pr.default)(Dr,ft.TEXTURE_WRAP_T,ft.REPEAT),Dr);function hx(t){return cx[t]}function mx(t){return fx[t]}var px=function(){function t(){(0,Ug.default)(this,t),w(this,"baseUri",""),w(this,"json",{}),w(this,"buffers",[]),w(this,"images",[])}return(0,Ng.default)(t,[{key:"postProcess",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=e.json,i=e.buffers,o=i===void 0?[]:i,s=e.images,u=s===void 0?[]:s,f=e.baseUri,c=f===void 0?"":f;return Re(a),this.baseUri=c,this.json=a,this.buffers=o,this.images=u,this._resolveTree(this.json,n),this.json}},{key:"_resolveTree",value:function(e){var n=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};e.bufferViews&&(e.bufferViews=e.bufferViews.map(function(i,o){return n._resolveBufferView(i,o)})),e.images&&(e.images=e.images.map(function(i,o){return n._resolveImage(i,o)})),e.samplers&&(e.samplers=e.samplers.map(function(i,o){return n._resolveSampler(i,o)})),e.textures&&(e.textures=e.textures.map(function(i,o){return n._resolveTexture(i,o)})),e.accessors&&(e.accessors=e.accessors.map(function(i,o){return n._resolveAccessor(i,o)})),e.materials&&(e.materials=e.materials.map(function(i,o){return n._resolveMaterial(i,o)})),e.meshes&&(e.meshes=e.meshes.map(function(i,o){return n._resolveMesh(i,o)})),e.nodes&&(e.nodes=e.nodes.map(function(i,o){return n._resolveNode(i,o)})),e.skins&&(e.skins=e.skins.map(function(i,o){return n._resolveSkin(i,o)})),e.scenes&&(e.scenes=e.scenes.map(function(i,o){return n._resolveScene(i,o)})),e.scene!==void 0&&(e.scene=e.scenes[this.json.scene])}},{key:"getScene",value:function(e){return this._get("scenes",e)}},{key:"getNode",value:function(e){return this._get("nodes",e)}},{key:"getSkin",value:function(e){return this._get("skins",e)}},{key:"getMesh",value:function(e){return this._get("meshes",e)}},{key:"getMaterial",value:function(e){return this._get("materials",e)}},{key:"getAccessor",value:function(e){return this._get("accessors",e)}},{key:"getCamera",value:function(e){return null}},{key:"getTexture",value:function(e){return this._get("textures",e)}},{key:"getSampler",value:function(e){return this._get("samplers",e)}},{key:"getImage",value:function(e){return this._get("images",e)}},{key:"getBufferView",value:function(e){return this._get("bufferViews",e)}},{key:"getBuffer",value:function(e){return this._get("buffers",e)}},{key:"_get",value:function(e,n){if((0,kg.default)(n)==="object")return n;var a=this.json[e]&&this.json[e][n];return a||console.warn("glTF file error: Could not find ".concat(e,"[").concat(n,"]")),a}},{key:"_resolveScene",value:function(e,n){var a=this;return e.id=e.id||"scene-".concat(n),e.nodes=(e.nodes||[]).map(function(i){return a.getNode(i)}),e}},{key:"_resolveNode",value:function(e,n){var a=this;return e.id=e.id||"node-".concat(n),e.children&&(e.children=e.children.map(function(i){return a.getNode(i)})),e.mesh!==void 0?e.mesh=this.getMesh(e.mesh):e.meshes!==void 0&&e.meshes.length&&(e.mesh=e.meshes.reduce(function(i,o){var s=a.getMesh(o);return i.id=s.id,i.primitives=i.primitives.concat(s.primitives),i},{primitives:[]})),e.camera!==void 0&&(e.camera=this.getCamera(e.camera)),e.skin!==void 0&&(e.skin=this.getSkin(e.skin)),e}},{key:"_resolveSkin",value:function(e,n){return e.id=e.id||"skin-".concat(n),e.inverseBindMatrices=this.getAccessor(e.inverseBindMatrices),e}},{key:"_resolveMesh",value:function(e,n){var a=this;return e.id=e.id||"mesh-".concat(n),e.primitives&&(e.primitives=e.primitives.map(function(i){i=Rt({},i);var o=i.attributes;i.attributes={};for(var s in o)i.attributes[s]=a.getAccessor(o[s]);return i.indices!==void 0&&(i.indices=a.getAccessor(i.indices)),i.material!==void 0&&(i.material=a.getMaterial(i.material)),i})),e}},{key:"_resolveMaterial",value:function(e,n){if(e.id=e.id||"material-".concat(n),e.normalTexture&&(e.normalTexture=Rt({},e.normalTexture),e.normalTexture.texture=this.getTexture(e.normalTexture.index)),e.occlusionTexture&&(e.occlustionTexture=Rt({},e.occlustionTexture),e.occlusionTexture.texture=this.getTexture(e.occlusionTexture.index)),e.emissiveTexture&&(e.emmisiveTexture=Rt({},e.emmisiveTexture),e.emissiveTexture.texture=this.getTexture(e.emissiveTexture.index)),e.emissiveFactor||(e.emissiveFactor=e.emmisiveTexture?[1,1,1]:[0,0,0]),e.pbrMetallicRoughness){e.pbrMetallicRoughness=Rt({},e.pbrMetallicRoughness);var a=e.pbrMetallicRoughness;a.baseColorTexture&&(a.baseColorTexture=Rt({},a.baseColorTexture),a.baseColorTexture.texture=this.getTexture(a.baseColorTexture.index)),a.metallicRoughnessTexture&&(a.metallicRoughnessTexture=Rt({},a.metallicRoughnessTexture),a.metallicRoughnessTexture.texture=this.getTexture(a.metallicRoughnessTexture.index))}return e}},{key:"_resolveAccessor",value:function(e,n){if(e.id=e.id||"accessor-".concat(n),e.bufferView!==void 0&&(e.bufferView=this.getBufferView(e.bufferView)),e.bytesPerComponent=hx(e.componentType),e.components=mx(e.type),e.bytesPerElement=e.bytesPerComponent*e.components,e.bufferView){var a=e.bufferView.buffer,i=Fr(e,e.bufferView),o=i.ArrayType,s=i.byteLength,u=(e.bufferView.byteOffset||0)+(e.byteOffset||0)+a.byteOffset,f=a.arrayBuffer.slice(u,u+s);e.bufferView.byteStride&&(f=this._getValueFromInterleavedBuffer(a,u,e.bufferView.byteStride,e.bytesPerElement,e.count)),e.value=new o(f)}return e}},{key:"_getValueFromInterleavedBuffer",value:function(e,n,a,i,o){for(var s=new Uint8Array(o*i),u=0;u<o;u++){var f=n+u*a;s.set(new Uint8Array(e.arrayBuffer.slice(f,f+i)),u*i)}return s.buffer}},{key:"_resolveTexture",value:function(e,n){return e.id=e.id||"texture-".concat(n),e.sampler="sampler"in e?this.getSampler(e.sampler):dx,e.source=this.getImage(e.source),e}},{key:"_resolveSampler",value:function(e,n){e.id=e.id||"sampler-".concat(n),e.parameters={};for(var a in e){var i=this._enumSamplerParameter(a);i!==void 0&&(e.parameters[i]=e[a])}return e}},{key:"_enumSamplerParameter",value:function(e){return lx[e]}},{key:"_resolveImage",value:function(e,n){e.id=e.id||"image-".concat(n),e.bufferView!==void 0&&(e.bufferView=this.getBufferView(e.bufferView));var a=this.images[n];return a&&(e.image=a),e}},{key:"_resolveBufferView",value:function(e,n){var a=e.buffer,i=Rt(Rt({id:"bufferView-".concat(n)},e),{},{buffer:this.buffers[a]}),o=this.buffers[a].arrayBuffer,s=this.buffers[a].byteOffset||0;return"byteOffset"in e&&(s+=e.byteOffset),i.data=new Uint8Array(o,s,e.byteLength),i}},{key:"_resolveCamera",value:function(e,n){return e.id=e.id||"camera-".concat(n),e.perspective,e.orthographic,e}}]),t}();function Hg(t,r){return new px().postProcess(t,r)}var jg=1735152710,Vu=12,gi=8,vx=1313821514,gx=5130562,yx=0,Ax=1,_x=0,Gr=!0;function bx(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return"".concat(String.fromCharCode(t.getUint8(r+0))).concat(String.fromCharCode(t.getUint8(r+1))).concat(String.fromCharCode(t.getUint8(r+2))).concat(String.fromCharCode(t.getUint8(r+3)))}function Vg(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=new DataView(t),a=e.magic,i=a===void 0?jg:a,o=n.getUint32(r,!1);return o===i||o===jg}function Ju(t,r){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},a=new DataView(r),i=bx(a,e+0),o=a.getUint32(e+4,Gr),s=a.getUint32(e+8,Gr);switch(Object.assign(t,{header:{byteOffset:e,byteLength:s,hasBinChunk:!1},type:i,version:o,json:{},binChunks:[]}),e+=Vu,t.version){case 1:return Ex(t,a,e);case 2:return Bx(t,a,e,n={});default:throw new Error("Invalid GLB version ".concat(t.version,". Only supports v1 and v2."))}}function Ex(t,r,e){ut(t.header.byteLength>Vu+gi);var n=r.getUint32(e+0,Gr),a=r.getUint32(e+4,Gr);return e+=gi,ut(a===_x),Hu(t,r,e,n),e+=n,e+=ju(t,r,e,t.header.byteLength),e}function Bx(t,r,e,n){return ut(t.header.byteLength>Vu+gi),xx(t,r,e,n),e+t.header.byteLength}function xx(t,r,e,n){for(;e+8<=t.header.byteLength;){var a=r.getUint32(e+0,Gr),i=r.getUint32(e+4,Gr);switch(e+=gi,i){case vx:Hu(t,r,e,a);break;case gx:ju(t,r,e,a);break;case yx:n.strict||Hu(t,r,e,a);break;case Ax:n.strict||ju(t,r,e,a);break;default:break}e+=jt(a,4)}return e}function Hu(t,r,e,n){var a=new Uint8Array(r.buffer,e,n),i=new TextDecoder("utf8"),o=i.decode(a);return t.json=JSON.parse(o),jt(n,4)}function ju(t,r,e,n){return t.header.hasBinChunk=!0,t.binChunks.push({byteOffset:e,byteLength:n,arrayBuffer:r.buffer}),jt(n,4)}function Xg(t,r){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=Tx(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var n=0,a=function(){};return{s:a,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(f){throw f},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,o=!1,s;return{s:function(){e=e.call(t)},n:function(){var f=e.next();return i=f.done,f},e:function(f){o=!0,s=f},f:function(){try{!i&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function Tx(t,r){if(t){if(typeof t=="string")return Jg(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return Jg(t,r)}}function Jg(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function zg(t,r){return Xu.apply(this,arguments)}function Xu(){return Xu=(0,wn.default)(It.default.mark(function t(r,e){var n,a,i,o,s,u,f,c,l,d,h=arguments;return It.default.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if(s=h.length>2&&h[2]!==void 0?h[2]:0,u=h.length>3?h[3]:void 0,f=h.length>4?h[4]:void 0,Cx(r,e,s,u),Pg(r,{normalize:u==null||(n=u.gltf)===null||n===void 0?void 0:n.normalize}),Sg(r,u,f),c=[],!(u!=null&&(a=u.gltf)!==null&&a!==void 0&&a.loadBuffers&&r.json.buffers)){g.next=10;break}return g.next=10,Sx(r,u,f);case 10:return u!=null&&(i=u.gltf)!==null&&i!==void 0&&i.loadImages&&(l=Mx(r,u,f),c.push(l)),d=Mg(r,u,f),c.push(d),g.next=15,Promise.all(c);case 15:return g.abrupt("return",u!=null&&(o=u.gltf)!==null&&o!==void 0&&o.postProcess?Hg(r,u):r);case 16:case"end":return g.stop()}},t)})),Xu.apply(this,arguments)}function Cx(t,r,e,n){if(n.uri&&(t.baseUri=n.uri),r instanceof ArrayBuffer&&!Vg(r,e,n)){var a=new TextDecoder;r=a.decode(r)}if(typeof r=="string")t.json=os(r);else if(r instanceof ArrayBuffer){var i={};e=Ju(i,r,e,n.glb),Re(i.type==="glTF","Invalid GLB magic string ".concat(i.type)),t._glb=i,t.json=i.json}else Re(!1,"GLTF: must be ArrayBuffer or string");var o=t.json.buffers||[];if(t.buffers=new Array(o.length).fill(null),t._glb&&t._glb.header.hasBinChunk){var s=t._glb.binChunks;t.buffers[0]={arrayBuffer:s[0].arrayBuffer,byteOffset:s[0].byteOffset,byteLength:s[0].byteLength}}var u=t.json.images||[];t.images=new Array(u.length).fill({})}function Sx(t,r,e){return zu.apply(this,arguments)}function zu(){return zu=(0,wn.default)(It.default.mark(function t(r,e,n){var a,i,o,s,u,f,c,l,d;return It.default.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:a=r.json.buffers||[],i=0;case 2:if(!(i<a.length)){v.next=22;break}if(o=a[i],!o.uri){v.next=18;break}return f=n.fetch,Re(f),c=Ws(o.uri,e),v.next=10,n==null||(s=n.fetch)===null||s===void 0?void 0:s.call(n,c);case 10:return l=v.sent,v.next=13,l==null||(u=l.arrayBuffer)===null||u===void 0?void 0:u.call(l);case 13:d=v.sent,r.buffers[i]={arrayBuffer:d,byteOffset:0,byteLength:d.byteLength},delete o.uri,v.next=19;break;case 18:r.buffers[i]===null&&(r.buffers[i]={arrayBuffer:new ArrayBuffer(o.byteLength),byteOffset:0,byteLength:o.byteLength});case 19:++i,v.next=2;break;case 22:case"end":return v.stop()}},t)})),zu.apply(this,arguments)}function Mx(t,r,e){return Ku.apply(this,arguments)}function Ku(){return Ku=(0,wn.default)(It.default.mark(function t(r,e,n){var a,i,o,s,u,f;return It.default.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:a=Rx(r),i=r.json.images||[],o=[],s=Xg(a);try{for(s.s();!(u=s.n()).done;)f=u.value,o.push(Ix(r,i[f],f,e,n))}catch(d){s.e(d)}finally{s.f()}return l.next=7,Promise.all(o);case 7:return l.abrupt("return",l.sent);case 8:case"end":return l.stop()}},t)})),Ku.apply(this,arguments)}function Rx(t){var r=new Set,e=t.json.textures||[],n=Xg(e),a;try{for(n.s();!(a=n.n()).done;){var i=a.value;i.source!==void 0&&r.add(i.source)}}catch(o){n.e(o)}finally{n.f()}return Array.from(r).sort()}function Ix(t,r,e,n,a){return Wu.apply(this,arguments)}function Wu(){return Wu=(0,wn.default)(It.default.mark(function t(r,e,n,a,i){var o,s,u,f,c,l,d;return It.default.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(o=i.fetch,s=i.parse,!(e.uri&&!e.hasOwnProperty("bufferView"))){v.next=10;break}return f=Ws(e.uri,a),v.next=5,o(f);case 5:return c=v.sent,v.next=8,c.arrayBuffer();case 8:u=v.sent,e.bufferView={data:u};case 10:return Number.isFinite(e.bufferView)&&(l=Av(r.json,r.buffers,e.bufferView),u=vn(l.buffer,l.byteOffset,l.byteLength)),Re(u,"glTF image has no data"),v.next=14,s(u,[Ts,Ks],{mimeType:e.mimeType,basis:a.basis||{format:li()}},i);case 14:d=v.sent,d&&d[0]&&(d={compressed:!0,mipmaps:!1,width:d[0].width,height:d[0].height,data:d[0]}),r.images=r.images||[],r.images[n]=d;case 18:case"end":return v.stop()}},t)})),Wu.apply(this,arguments)}function Kg(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),e.push.apply(e,n)}return e}function yi(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?Kg(Object(e),!0).forEach(function(n){(0,Wg.default)(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):Kg(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}var Fn={name:"glTF",id:"gltf",module:"gltf",version:Qp,extensions:["gltf","glb"],mimeTypes:["model/gltf+json","model/gltf-binary"],text:!0,binary:!0,tests:["glTF"],parse:Ox,options:{gltf:{normalize:!0,loadBuffers:!0,loadImages:!0,decompressMeshes:!0,postProcess:!0},log:console},deprecatedOptions:{fetchImages:"gltf.loadImages",createImages:"gltf.loadImages",decompress:"gltf.decompressMeshes",postProcess:"gltf.postProcess",gltf:{decompress:"gltf.decompressMeshes"}}};function Ox(t){return Qu.apply(this,arguments)}function Qu(){return Qu=(0,Yg.default)(Yu.default.mark(function t(r){var e,n,a,i,o,s,u=arguments;return Yu.default.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return e=u.length>1&&u[1]!==void 0?u[1]:{},n=u.length>2?u[2]:void 0,e=yi(yi({},Fn.options),e),e.gltf=yi(yi({},Fn.options.gltf),e.gltf),a=e,i=a.byteOffset,o=i===void 0?0:i,s={},c.next=8,zg(s,r,o,e,n);case 8:return c.abrupt("return",c.sent);case 9:case"end":return c.stop()}},t)})),Qu.apply(this,arguments)}var Zu=m(Ee()),Ln=m(Be());function Qg(t){return $u.apply(this,arguments)}function $u(){return $u=(0,Zu.default)(Ln.default.mark(function t(r){var e;return Ln.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return e=[],r.scenes.forEach(function(i){i.traverse(function(o){Object.values(o.model.getUniforms()).forEach(function(s){s.loaded===!1&&e.push(s)})})}),a.next=4,wx(function(){return e.some(function(i){return!i.loaded})});case 4:return a.abrupt("return",a.sent);case 5:case"end":return a.stop()}},t)})),$u.apply(this,arguments)}function wx(t){return qu.apply(this,arguments)}function qu(){return qu=(0,Zu.default)(Ln.default.mark(function t(r){return Ln.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!r()){n.next=5;break}return n.next=3,new Promise(function(a){return requestAnimationFrame(a)});case 3:n.next=0;break;case 5:case"end":return n.stop()}},t)})),qu.apply(this,arguments)}var $g=`#version 300 es
in vec3 instancePositions;
in vec3 instancePositions64Low;
in vec4 instanceColors;
in vec3 instancePickingColors;
in mat3 instanceModelMatrix;
in vec3 instanceTranslation;
uniform float sizeScale;
uniform float sizeMinPixels;
uniform float sizeMaxPixels;
uniform mat4 sceneModelMatrix;
uniform bool composeModelMatrix;
in vec4 POSITION;

#ifdef HAS_UV
  in vec2 TEXCOORD_0;
#endif

#ifdef MODULE_PBR
  #ifdef HAS_NORMALS
    in vec4 NORMAL;
  #endif
#endif
out vec4 vColor;
#ifndef MODULE_PBR
  #ifdef HAS_UV
    out vec2 vTEXCOORD_0;
  #endif
#endif
void main(void) {
  #if defined(HAS_UV) && !defined(MODULE_PBR)
    vTEXCOORD_0 = TEXCOORD_0;
    geometry.uv = vTEXCOORD_0;
  #endif

  geometry.worldPosition = instancePositions;
  geometry.pickingColor = instancePickingColors;

  vec3 normal = vec3(0.0, 0.0, 1.0);
  #ifdef MODULE_PBR
    #ifdef HAS_NORMALS
      normal = instanceModelMatrix * (sceneModelMatrix * vec4(NORMAL.xyz, 0.0)).xyz;
    #endif
  #endif

  float originalSize = project_size_to_pixel(sizeScale);
  float clampedSize = clamp(originalSize, sizeMinPixels, sizeMaxPixels);

  vec3 pos = (instanceModelMatrix * (sceneModelMatrix * POSITION).xyz) * sizeScale * (clampedSize / originalSize) + instanceTranslation;
  if(composeModelMatrix) {
    DECKGL_FILTER_SIZE(pos, geometry);
    geometry.normal = project_normal(normal);
    geometry.worldPosition += pos;
    gl_Position = project_position_to_clipspace(pos + instancePositions, instancePositions64Low, vec3(0.0), geometry.position);
  }
  else {
    pos = project_size(pos);
    DECKGL_FILTER_SIZE(pos, geometry);
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, pos, geometry.position);
    geometry.normal = project_normal(normal);
  }
  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);

  #ifdef MODULE_PBR
    pbr_vPosition = geometry.position.xyz;
    #ifdef HAS_NORMALS
      pbr_vNormal = geometry.normal;
    #endif

    #ifdef HAS_UV
      pbr_vUV = TEXCOORD_0;
    #else
      pbr_vUV = vec2(0., 0.);
    #endif
    geometry.uv = pbr_vUV;
  #endif

  vColor = instanceColors;
  DECKGL_FILTER_COLOR(vColor, geometry);
}
`;var qg=`#version 300 es
uniform float opacity;
in vec4 vColor;

out vec4 fragmentColor;
#ifndef MODULE_PBR
  #if defined(HAS_UV) && defined(HAS_BASECOLORMAP)
    in vec2 vTEXCOORD_0;
    uniform sampler2D u_BaseColorSampler;
  #endif
#endif

void main(void) {
  #ifdef MODULE_PBR
    fragmentColor = vColor * pbr_filterColor(vec4(0));
    geometry.uv = pbr_vUV;
  #else
    #if defined(HAS_UV) && defined(HAS_BASECOLORMAP)
      fragmentColor = vColor * texture2D(u_BaseColorSampler, vTEXCOORD_0);
      geometry.uv = vTEXCOORD_0;
    #else
      fragmentColor = vColor;
    #endif
  #endif

  fragmentColor.a *= opacity;
  DECKGL_FILTER_COLOR(fragmentColor, geometry);
}
`;function Zg(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),e.push.apply(e,n)}return e}function ey(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?Zg(Object(e),!0).forEach(function(n){(0,Pn.default)(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):Zg(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}function Fx(t){var r=Lx();return function(){var n=(0,Dn.default)(t),a;if(r){var i=(0,Dn.default)(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return(0,iy.default)(this,a)}}function Lx(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var uy=[255,255,255,255],Dx={scenegraph:{type:"object",value:null,async:!0},getScene:function(r){return r&&r.scenes?(0,oy.default)(r.scene)==="object"?r.scene:r.scenes[r.scene||0]:r},getAnimator:function(r){return r&&r.animator},_animations:null,sizeScale:{type:"number",value:1,min:0},sizeMinPixels:{type:"number",min:0,value:0},sizeMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},getPosition:{type:"accessor",value:function(r){return r.position}},getColor:{type:"accessor",value:uy},_lighting:"flat",_imageBasedLightingEnvironment:null,getOrientation:{type:"accessor",value:[0,0,0]},getScale:{type:"accessor",value:[1,1,1]},getTranslation:{type:"accessor",value:[0,0,0]},getTransformMatrix:{type:"accessor",value:[]},loaders:[Fn]},Ai=function(t){(0,ay.default)(e,t);var r=Fx(e);function e(){var n;(0,ty.default)(this,e);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return n=r.call.apply(r,[this].concat(i)),(0,Pn.default)((0,ny.default)(n),"state",void 0),n}return(0,ry.default)(e,[{key:"getShaders",value:function(){var a=[ht.project32,ht.picking];return this.props._lighting==="pbr"&&a.push(hn),{vs:$g,fs:qg,modules:a}}},{key:"initializeState",value:function(){var a=this.getAttributeManager();a.addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),accessor:"getPosition",transition:!0},instanceColors:{type:5121,size:this.props.colorFormat.length,accessor:"getColor",normalized:!0,defaultValue:uy,transition:!0},instanceModelMatrix:Ta})}},{key:"updateState",value:function(a){(0,ef.default)((0,Dn.default)(e.prototype),"updateState",this).call(this,a);var i=a.props,o=a.oldProps;i.scenegraph!==o.scenegraph?this._updateScenegraph():i._animations!==o._animations&&this._applyAnimationsProp(this.state.scenegraph,this.state.animator,i._animations)}},{key:"finalizeState",value:function(a){(0,ef.default)((0,Dn.default)(e.prototype),"finalizeState",this).call(this,a),this._deleteScenegraph()}},{key:"_updateScenegraph",value:function(){var a=this,i=this.props,o=this.context.gl,s=null;if(i.scenegraph instanceof Tt)s={scenes:[i.scenegraph]};else if(i.scenegraph&&!i.scenegraph.gltf){var u=i.scenegraph,f=fi(o,u,this._getModelOptions());s=ey({gltf:u},f),Qg(f).then(function(){return a.setNeedsRedraw()})}else i.scenegraph&&(ht.log.deprecated("ScenegraphLayer.props.scenegraph","Use GLTFLoader instead of GLTFScenegraphLoader")(),s=i.scenegraph);var c={layer:this,gl:o},l=i.getScene(s,c),d=i.getAnimator(s,c);l instanceof Tt?(this._deleteScenegraph(),this._applyAllAttributes(l),this._applyAnimationsProp(l,d,i._animations),this.setState({scenegraph:l,animator:d})):l!==null&&ht.log.warn("invalid scenegraph:",l)()}},{key:"_applyAllAttributes",value:function(a){var i=this;if(this.state.attributesAvailable){var o=this.getAttributeManager().getAttributes();a.traverse(function(s){i._setModelAttributes(s.model,o)})}}},{key:"_applyAnimationsProp",value:function(a,i,o){if(!(!a||!i||!o)){var s=i.getAnimations();Object.keys(o).sort().forEach(function(u){var f=o[u];if(u==="*")s.forEach(function(d){Object.assign(d,f)});else if(Number.isFinite(Number(u))){var c=Number(u);c>=0&&c<s.length?Object.assign(s[c],f):ht.log.warn("animation ".concat(u," not found"))()}else{var l=s.find(function(d){var h=d.name;return h===u});l?Object.assign(l,f):ht.log.warn("animation ".concat(u," not found"))()}})}}},{key:"_deleteScenegraph",value:function(){var a=this.state.scenegraph;a instanceof Tt&&a.delete()}},{key:"_getModelOptions",value:function(){var a=this.props._imageBasedLightingEnvironment,i=null;return a&&(typeof a=="function"?i=a({gl:this.context.gl,layer:this}):i=a),{gl:this.context.gl,waitForFullLoad:!0,imageBasedLightingEnvironment:i,modelOptions:ey({isInstanced:!0,transpileToGLSL100:!(0,sy.isWebGL2)(this.context.gl)},this.getShaders()),useTangents:!1}}},{key:"updateAttributes",value:function(a){var i=this;this.setState({attributesAvailable:!0}),this.state.scenegraph&&this.state.scenegraph.traverse(function(o){i._setModelAttributes(o.model,a)})}},{key:"draw",value:function(a){var i=a.moduleParameters,o=i===void 0?null:i,s=a.parameters,u=s===void 0?{}:s,f=a.context;if(this.state.scenegraph){this.props._animations&&this.state.animator&&(this.state.animator.animate(f.timeline.getTime()),this.setNeedsRedraw());var c=this.context.viewport,l=this.props,d=l.sizeScale,h=l.sizeMinPixels,v=l.sizeMaxPixels,g=l.opacity,y=l.coordinateSystem,A=this.getNumInstances();this.state.scenegraph.traverse(function(_,T){var B=T.worldMatrix;_.model.setInstanceCount(A),_.updateModuleSettings(o),_.draw({parameters:u,uniforms:{sizeScale:d,opacity:g,sizeMinPixels:h,sizeMaxPixels:v,composeModelMatrix:Ca(c,y),sceneModelMatrix:B,u_Camera:_.model.getUniforms().project_uCameraPosition}})})}}}]),e}(ht.Layer);(0,Pn.default)(Ai,"defaultProps",Dx);(0,Pn.default)(Ai,"layerName","ScenegraphLayer");return vy(Gn);})();
      return __exports__;
      });
