(function webpackUniversalModuleDefinition(root, factory) {
  if (typeof exports === 'object' && typeof module === 'object')
    module.exports = factory();
  else if (typeof define === 'function' && define.amd) define([], factory);
        else if (typeof exports === 'object') exports['deck'] = factory();
  else root['deck'] = factory();})(globalThis, function () {
"use strict";var __exports__=(()=>{var GB=Object.create;var so=Object.defineProperty;var NB=Object.getOwnPropertyDescriptor;var UB=Object.getOwnPropertyNames;var jB=Object.getPrototypeOf,HB=Object.prototype.hasOwnProperty;var Im=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(r,t)=>(typeof require<"u"?require:r)[t]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw new Error('Dynamic require of "'+e+'" is not supported')});var K=(e,r)=>()=>(r||e((r={exports:{}}).exports,r),r.exports),Ot=(e,r)=>{for(var t in r)so(e,t,{get:r[t],enumerable:!0})},oo=(e,r,t,n)=>{if(r&&typeof r=="object"||typeof r=="function")for(let a of UB(r))!HB.call(e,a)&&a!==t&&so(e,a,{get:()=>r[a],enumerable:!(n=NB(r,a))||n.enumerable});return e},_r=(e,r,t)=>(oo(e,r,"default"),t&&oo(t,r,"default")),m=(e,r,t)=>(t=e!=null?GB(jB(e)):{},oo(r||!e||!e.__esModule?so(t,"default",{value:e,enumerable:!0}):t,e)),VB=e=>oo(so({},"__esModule",{value:!0}),e);var It=K((eU,Pm)=>{Pm.exports=globalThis.deck});var Lm=K((rU,Fm)=>{function zB(e){if(Array.isArray(e))return e}Fm.exports=zB});var Dm=K((nU,km)=>{function WB(e,r){if(Symbol.iterator in Object(e)||Object.prototype.toString.call(e)==="[object Arguments]"){var t=[],n=!0,a=!1,i=void 0;try{for(var o=e[Symbol.iterator](),s;!(n=(s=o.next()).done)&&(t.push(s.value),!(r&&t.length===r));n=!0);}catch(u){a=!0,i=u}finally{try{!n&&o.return!=null&&o.return()}finally{if(a)throw i}}return t}}km.exports=WB});var Nm=K((aU,Gm)=>{function JB(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}Gm.exports=JB});var ce=K((iU,Um)=>{var qB=Lm(),XB=Dm(),YB=Nm();function KB(e,r){return qB(e)||XB(e,r)||YB()}Um.exports=KB});var X=K((oU,Hm)=>{function jm(e,r,t,n,a,i,o){try{var s=e[i](o),u=s.value}catch(f){t(f);return}s.done?r(u):Promise.resolve(u).then(n,a)}function QB(e){return function(){var r=this,t=arguments;return new Promise(function(n,a){var i=e.apply(r,t);function o(u){jm(i,n,a,o,s,"next",u)}function s(u){jm(i,n,a,o,s,"throw",u)}o(void 0)})}}Hm.exports=QB});var H=K((sU,Vm)=>{function ZB(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}Vm.exports=ZB});var z=K((uU,Wm)=>{function zm(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function $B(e,r,t){return r&&zm(e.prototype,r),t&&zm(e,t),e}Wm.exports=$B});var nt=K((fU,Jm)=>{function e2(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}Jm.exports=e2});var sf=K((lU,of)=>{function af(e,r){return of.exports=af=Object.setPrototypeOf||function(n,a){return n.__proto__=a,n},af(e,r)}of.exports=af});var Te=K((cU,qm)=>{var t2=sf();function r2(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&t2(e,r)}qm.exports=r2});var Xe=K((hU,fo)=>{function uo(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?fo.exports=uo=function(t){return typeof t}:fo.exports=uo=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},uo(e)}fo.exports=uo});var xe=K((dU,Xm)=>{var n2=Xe(),a2=nt();function i2(e,r){return r&&(n2(r)==="object"||typeof r=="function")?r:a2(e)}Xm.exports=i2});var ye=K((pU,ff)=>{function uf(e){return ff.exports=uf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},uf(e)}ff.exports=uf});var W=K((mU,Ym)=>{function o2(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}Ym.exports=o2});var Qm=K((vU,lf)=>{var Km=function(e){"use strict";var r=Object.prototype,t=r.hasOwnProperty,n,a=typeof Symbol=="function"?Symbol:{},i=a.iterator||"@@iterator",o=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function u(M,O,P,U){var G=O&&O.prototype instanceof v?O:v,j=Object.create(G.prototype),q=new F(U||[]);return j._invoke=B(M,P,q),j}e.wrap=u;function f(M,O,P){try{return{type:"normal",arg:M.call(O,P)}}catch(U){return{type:"throw",arg:U}}}var l="suspendedStart",c="suspendedYield",h="executing",d="completed",p={};function v(){}function g(){}function y(){}var b={};b[i]=function(){return this};var E=Object.getPrototypeOf,T=E&&E(E(D([])));T&&T!==r&&t.call(T,i)&&(b=T);var S=y.prototype=v.prototype=Object.create(b);g.prototype=S.constructor=y,y.constructor=g,y[s]=g.displayName="GeneratorFunction";function I(M){["next","throw","return"].forEach(function(O){M[O]=function(P){return this._invoke(O,P)}})}e.isGeneratorFunction=function(M){var O=typeof M=="function"&&M.constructor;return O?O===g||(O.displayName||O.name)==="GeneratorFunction":!1},e.mark=function(M){return Object.setPrototypeOf?Object.setPrototypeOf(M,y):(M.__proto__=y,s in M||(M[s]="GeneratorFunction")),M.prototype=Object.create(S),M},e.awrap=function(M){return{__await:M}};function L(M){function O(G,j,q,ne){var Re=f(M[G],M,j);if(Re.type==="throw")ne(Re.arg);else{var we=Re.arg,rt=we.value;return rt&&typeof rt=="object"&&t.call(rt,"__await")?Promise.resolve(rt.__await).then(function(Ue){O("next",Ue,q,ne)},function(Ue){O("throw",Ue,q,ne)}):Promise.resolve(rt).then(function(Ue){we.value=Ue,q(we)},function(Ue){return O("throw",Ue,q,ne)})}}var P;function U(G,j){function q(){return new Promise(function(ne,Re){O(G,j,ne,Re)})}return P=P?P.then(q,q):q()}this._invoke=U}I(L.prototype),L.prototype[o]=function(){return this},e.AsyncIterator=L,e.async=function(M,O,P,U){var G=new L(u(M,O,P,U));return e.isGeneratorFunction(O)?G:G.next().then(function(j){return j.done?j.value:G.next()})};function B(M,O,P){var U=l;return function(j,q){if(U===h)throw new Error("Generator is already running");if(U===d){if(j==="throw")throw q;return k()}for(P.method=j,P.arg=q;;){var ne=P.delegate;if(ne){var Re=C(ne,P);if(Re){if(Re===p)continue;return Re}}if(P.method==="next")P.sent=P._sent=P.arg;else if(P.method==="throw"){if(U===l)throw U=d,P.arg;P.dispatchException(P.arg)}else P.method==="return"&&P.abrupt("return",P.arg);U=h;var we=f(M,O,P);if(we.type==="normal"){if(U=P.done?d:c,we.arg===p)continue;return{value:we.arg,done:P.done}}else we.type==="throw"&&(U=d,P.method="throw",P.arg=we.arg)}}}function C(M,O){var P=M.iterator[O.method];if(P===n){if(O.delegate=null,O.method==="throw"){if(M.iterator.return&&(O.method="return",O.arg=n,C(M,O),O.method==="throw"))return p;O.method="throw",O.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var U=f(P,M.iterator,O.arg);if(U.type==="throw")return O.method="throw",O.arg=U.arg,O.delegate=null,p;var G=U.arg;if(!G)return O.method="throw",O.arg=new TypeError("iterator result is not an object"),O.delegate=null,p;if(G.done)O[M.resultName]=G.value,O.next=M.nextLoc,O.method!=="return"&&(O.method="next",O.arg=n);else return G;return O.delegate=null,p}I(S),S[s]="Generator",S[i]=function(){return this},S.toString=function(){return"[object Generator]"};function _(M){var O={tryLoc:M[0]};1 in M&&(O.catchLoc=M[1]),2 in M&&(O.finallyLoc=M[2],O.afterLoc=M[3]),this.tryEntries.push(O)}function R(M){var O=M.completion||{};O.type="normal",delete O.arg,M.completion=O}function F(M){this.tryEntries=[{tryLoc:"root"}],M.forEach(_,this),this.reset(!0)}e.keys=function(M){var O=[];for(var P in M)O.push(P);return O.reverse(),function U(){for(;O.length;){var G=O.pop();if(G in M)return U.value=G,U.done=!1,U}return U.done=!0,U}};function D(M){if(M){var O=M[i];if(O)return O.call(M);if(typeof M.next=="function")return M;if(!isNaN(M.length)){var P=-1,U=function G(){for(;++P<M.length;)if(t.call(M,P))return G.value=M[P],G.done=!1,G;return G.value=n,G.done=!0,G};return U.next=U}}return{next:k}}e.values=D;function k(){return{value:n,done:!0}}return F.prototype={constructor:F,reset:function(M){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(R),!M)for(var O in this)O.charAt(0)==="t"&&t.call(this,O)&&!isNaN(+O.slice(1))&&(this[O]=n)},stop:function(){this.done=!0;var M=this.tryEntries[0],O=M.completion;if(O.type==="throw")throw O.arg;return this.rval},dispatchException:function(M){if(this.done)throw M;var O=this;function P(Re,we){return j.type="throw",j.arg=M,O.next=Re,we&&(O.method="next",O.arg=n),!!we}for(var U=this.tryEntries.length-1;U>=0;--U){var G=this.tryEntries[U],j=G.completion;if(G.tryLoc==="root")return P("end");if(G.tryLoc<=this.prev){var q=t.call(G,"catchLoc"),ne=t.call(G,"finallyLoc");if(q&&ne){if(this.prev<G.catchLoc)return P(G.catchLoc,!0);if(this.prev<G.finallyLoc)return P(G.finallyLoc)}else if(q){if(this.prev<G.catchLoc)return P(G.catchLoc,!0)}else if(ne){if(this.prev<G.finallyLoc)return P(G.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(M,O){for(var P=this.tryEntries.length-1;P>=0;--P){var U=this.tryEntries[P];if(U.tryLoc<=this.prev&&t.call(U,"finallyLoc")&&this.prev<U.finallyLoc){var G=U;break}}G&&(M==="break"||M==="continue")&&G.tryLoc<=O&&O<=G.finallyLoc&&(G=null);var j=G?G.completion:{};return j.type=M,j.arg=O,G?(this.method="next",this.next=G.finallyLoc,p):this.complete(j)},complete:function(M,O){if(M.type==="throw")throw M.arg;return M.type==="break"||M.type==="continue"?this.next=M.arg:M.type==="return"?(this.rval=this.arg=M.arg,this.method="return",this.next="end"):M.type==="normal"&&O&&(this.next=O),p},finish:function(M){for(var O=this.tryEntries.length-1;O>=0;--O){var P=this.tryEntries[O];if(P.finallyLoc===M)return this.complete(P.completion,P.afterLoc),R(P),p}},catch:function(M){for(var O=this.tryEntries.length-1;O>=0;--O){var P=this.tryEntries[O];if(P.tryLoc===M){var U=P.completion;if(U.type==="throw"){var G=U.arg;R(P)}return G}}throw new Error("illegal catch attempt")},delegateYield:function(M,O,P){return this.delegate={iterator:D(M),resultName:O,nextLoc:P},this.method==="next"&&(this.arg=n),p}},e}(typeof lf=="object"?lf.exports:{});try{regeneratorRuntime=Km}catch{Function("r","regeneratorRuntime = r")(Km)}});var Y=K((gU,Zm)=>{Zm.exports=Qm()});var Pt=K((yU,$m)=>{$m.exports=globalThis.deck});var cf=K(Zt=>{"use strict";var ev=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",s2=ev+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",tv="["+ev+"]["+s2+"]*",u2=new RegExp("^"+tv+"$"),f2=function(r,t){for(var n=[],a=t.exec(r);a;){var i=[];i.startIndex=t.lastIndex-a[0].length;for(var o=a.length,s=0;s<o;s++)i.push(a[s]);n.push(i),a=t.exec(r)}return n},l2=function(r){var t=u2.exec(r);return!(t===null||typeof t>"u")};Zt.isExist=function(e){return typeof e<"u"};Zt.isEmptyObject=function(e){return Object.keys(e).length===0};Zt.merge=function(e,r,t){if(r)for(var n=Object.keys(r),a=n.length,i=0;i<a;i++)t==="strict"?e[n[i]]=[r[n[i]]]:e[n[i]]=r[n[i]]};Zt.getValue=function(e){return Zt.isExist(e)?e:""};Zt.isName=l2;Zt.getAllMatches=f2;Zt.nameRegexp=tv});var df=K(ov=>{"use strict";var hf=cf(),c2={allowBooleanAttributes:!1,unpairedTags:[]};ov.validate=function(e,r){r=Object.assign({},c2,r);var t=[],n=!1,a=!1;e[0]==="\uFEFF"&&(e=e.substr(1));for(var i=0;i<e.length;i++)if(e[i]==="<"&&e[i+1]==="?"){if(i+=2,i=nv(e,i),i.err)return i}else if(e[i]==="<"){var o=i;if(i++,e[i]==="!"){i=av(e,i);continue}else{var s=!1;e[i]==="/"&&(s=!0,i++);for(var u="";i<e.length&&e[i]!==">"&&e[i]!==" "&&e[i]!=="	"&&e[i]!==`
`&&e[i]!=="\r";i++)u+=e[i];if(u=u.trim(),u[u.length-1]==="/"&&(u=u.substring(0,u.length-1),i--),!A2(u)){var f=void 0;return u.trim().length===0?f="Invalid space after '<'.":f="Tag '"+u+"' is an invalid name.",Ge("InvalidTag",f,ct(e,i))}var l=p2(e,i);if(l===!1)return Ge("InvalidAttr","Attributes for '"+u+"' have open quote.",ct(e,i));var c=l.value;if(i=l.index,c[c.length-1]==="/"){var h=i-c.length;c=c.substring(0,c.length-1);var d=iv(c,r);if(d===!0)n=!0;else return Ge(d.err.code,d.err.msg,ct(e,h+d.err.line))}else if(s)if(l.tagClosed){if(c.trim().length>0)return Ge("InvalidTag","Closing tag '"+u+"' can't have attributes or invalid starting.",ct(e,o));var p=t.pop();if(u!==p.tagName){var v=ct(e,p.tagStartPos);return Ge("InvalidTag","Expected closing tag '"+p.tagName+"' (opened in line "+v.line+", col "+v.col+") instead of closing tag '"+u+"'.",ct(e,o))}t.length==0&&(a=!0)}else return Ge("InvalidTag","Closing tag '"+u+"' doesn't have proper closing.",ct(e,i));else{var g=iv(c,r);if(g!==!0)return Ge(g.err.code,g.err.msg,ct(e,i-c.length+g.err.line));if(a===!0)return Ge("InvalidXml","Multiple possible root nodes found.",ct(e,i));r.unpairedTags.indexOf(u)!==-1||t.push({tagName:u,tagStartPos:o}),n=!0}for(i++;i<e.length;i++)if(e[i]==="<")if(e[i+1]==="!"){i++,i=av(e,i);continue}else if(e[i+1]==="?"){if(i=nv(e,++i),i.err)return i}else break;else if(e[i]==="&"){var y=g2(e,i);if(y==-1)return Ge("InvalidChar","char '&' is not expected.",ct(e,i));i=y}else if(a===!0&&!rv(e[i]))return Ge("InvalidXml","Extra text at the end",ct(e,i));e[i]==="<"&&i--}}else{if(rv(e[i]))continue;return Ge("InvalidChar","char '"+e[i]+"' is not expected.",ct(e,i))}if(n){if(t.length==1)return Ge("InvalidTag","Unclosed tag '"+t[0].tagName+"'.",ct(e,t[0].tagStartPos));if(t.length>0)return Ge("InvalidXml","Invalid '"+JSON.stringify(t.map(function(b){return b.tagName}),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return Ge("InvalidXml","Start tag expected.",1);return!0};function rv(e){return e===" "||e==="	"||e===`
`||e==="\r"}function nv(e,r){for(var t=r;r<e.length;r++)if(e[r]=="?"||e[r]==" "){var n=e.substr(t,r-t);if(r>5&&n==="xml")return Ge("InvalidXml","XML declaration allowed only at the start of the document.",ct(e,r));if(e[r]=="?"&&e[r+1]==">"){r++;break}else continue}return r}function av(e,r){if(e.length>r+5&&e[r+1]==="-"&&e[r+2]==="-"){for(r+=3;r<e.length;r++)if(e[r]==="-"&&e[r+1]==="-"&&e[r+2]===">"){r+=2;break}}else if(e.length>r+8&&e[r+1]==="D"&&e[r+2]==="O"&&e[r+3]==="C"&&e[r+4]==="T"&&e[r+5]==="Y"&&e[r+6]==="P"&&e[r+7]==="E"){var t=1;for(r+=8;r<e.length;r++)if(e[r]==="<")t++;else if(e[r]===">"&&(t--,t===0))break}else if(e.length>r+9&&e[r+1]==="["&&e[r+2]==="C"&&e[r+3]==="D"&&e[r+4]==="A"&&e[r+5]==="T"&&e[r+6]==="A"&&e[r+7]==="["){for(r+=8;r<e.length;r++)if(e[r]==="]"&&e[r+1]==="]"&&e[r+2]===">"){r+=2;break}}return r}var h2='"',d2="'";function p2(e,r){for(var t="",n="",a=!1;r<e.length;r++){if(e[r]===h2||e[r]===d2)n===""?n=e[r]:n!==e[r]||(n="");else if(e[r]===">"&&n===""){a=!0;break}t+=e[r]}return n!==""?!1:{value:t,index:r,tagClosed:a}}var m2=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function iv(e,r){for(var t=hf.getAllMatches(e,m2),n={},a=0;a<t.length;a++){if(t[a][1].length===0)return Ge("InvalidAttr","Attribute '"+t[a][2]+"' has no space in starting.",Na(t[a]));if(t[a][3]!==void 0&&t[a][4]===void 0)return Ge("InvalidAttr","Attribute '"+t[a][2]+"' is without value.",Na(t[a]));if(t[a][3]===void 0&&!r.allowBooleanAttributes)return Ge("InvalidAttr","boolean attribute '"+t[a][2]+"' is not allowed.",Na(t[a]));var i=t[a][2];if(!y2(i))return Ge("InvalidAttr","Attribute '"+i+"' is an invalid name.",Na(t[a]));if(!n.hasOwnProperty(i))n[i]=1;else return Ge("InvalidAttr","Attribute '"+i+"' is repeated.",Na(t[a]))}return!0}function v2(e,r){var t=/\d/;for(e[r]==="x"&&(r++,t=/[\da-fA-F]/);r<e.length;r++){if(e[r]===";")return r;if(!e[r].match(t))break}return-1}function g2(e,r){if(r++,e[r]===";")return-1;if(e[r]==="#")return r++,v2(e,r);for(var t=0;r<e.length;r++,t++)if(!(e[r].match(/\w/)&&t<20)){if(e[r]===";")break;return-1}return r}function Ge(e,r,t){return{err:{code:e,msg:r,line:t.line||t,col:t.col}}}function y2(e){return hf.isName(e)}function A2(e){return hf.isName(e)}function ct(e,r){var t=e.substring(0,r).split(/\r?\n/);return{line:t.length,col:t[t.length-1].length+1}}function Na(e){return e.startIndex+e[1].length}});var uv=K(pf=>{var sv={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(r,t){return t},attributeValueProcessor:function(r,t){return t},stopNodes:[],alwaysCreateTextNode:!1,isArray:function(){return!1},commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1},_2=function(r){return Object.assign({},sv,r)};pf.buildOptions=_2;pf.defaultOptions=sv});var hv=K((xU,cv)=>{"use strict";var Ua=m(W()),fv=m(H()),lv=m(z()),b2=function(){function e(r){(0,fv.default)(this,e),this.tagname=r,this.child=[],this[":@"]={}}return(0,lv.default)(e,[{key:"add",value:function(t,n){t==="__proto__"&&(t="#__proto__"),this.child.push((0,Ua.default)({},t,n))}},{key:"addChild",value:function(t){if(t.tagname==="__proto__"&&(t.tagname="#__proto__"),t[":@"]&&Object.keys(t[":@"]).length>0){var n;this.child.push((n={},(0,Ua.default)(n,t.tagname,t.child),(0,Ua.default)(n,":@",t[":@"]),n))}else this.child.push((0,Ua.default)({},t.tagname,t.child))}}]),e}();cv.exports=b2});var pv=K((EU,dv)=>{function T2(e,r){var t={};if(e[r+3]==="O"&&e[r+4]==="C"&&e[r+5]==="T"&&e[r+6]==="Y"&&e[r+7]==="P"&&e[r+8]==="E"){r=r+9;for(var n=1,a=!1,i=!1,o=!1,s="";r<e.length;r++)if(e[r]==="<"&&!o){if(a&&e[r+1]==="!"&&e[r+2]==="E"&&e[r+3]==="N"&&e[r+4]==="T"&&e[r+5]==="I"&&e[r+6]==="T"&&e[r+7]==="Y")r+=7,i=!0;else if(a&&e[r+1]==="!"&&e[r+2]==="E"&&e[r+3]==="L"&&e[r+4]==="E"&&e[r+5]==="M"&&e[r+6]==="E"&&e[r+7]==="N"&&e[r+8]==="T")r+=8;else if(a&&e[r+1]==="!"&&e[r+2]==="A"&&e[r+3]==="T"&&e[r+4]==="T"&&e[r+5]==="L"&&e[r+6]==="I"&&e[r+7]==="S"&&e[r+8]==="T")r+=8;else if(a&&e[r+1]==="!"&&e[r+2]==="N"&&e[r+3]==="O"&&e[r+4]==="T"&&e[r+5]==="A"&&e[r+6]==="T"&&e[r+7]==="I"&&e[r+8]==="O"&&e[r+9]==="N")r+=9;else if(e[r+1]==="!"&&e[r+2]==="-"&&e[r+3]==="-")o=!0;else throw new Error("Invalid DOCTYPE");n++,s=""}else if(e[r]===">"){if(o?e[r-1]==="-"&&e[r-2]==="-"&&(o=!1,n--):(i&&(E2(s,t),i=!1),n--),n===0)break}else e[r]==="["?a=!0:s+=e[r];if(n!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:t,i:r}}var x2=RegExp(`^\\s([a-zA-z0-0]+)[ 	](['"])([^&]+)\\2`);function E2(e,r){var t=x2.exec(e);t&&(r[t[1]]={regx:RegExp("&".concat(t[1],";"),"g"),val:t[3]})}dv.exports=T2});var vv=K((SU,mv)=>{var S2=/^[-+]?0x[a-fA-F0-9]+$/,C2=/^([\-\+])?(0*)(\.[0-9]+([eE]\-?[0-9]+)?|[0-9]+(\.[0-9]+([eE]\-?[0-9]+)?)?)$/;!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt);!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);var w2={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function B2(e,r={}){if(r=Object.assign({},w2,r),!e||typeof e!="string")return e;let t=e.trim();if(r.skipLike!==void 0&&r.skipLike.test(t))return e;if(r.hex&&S2.test(t))return Number.parseInt(t,16);{let n=C2.exec(t);if(n){let a=n[1],i=n[2],o=M2(n[3]),s=n[4]||n[6];if(!r.leadingZeros&&i.length>0&&a&&t[2]!==".")return e;if(!r.leadingZeros&&i.length>0&&!a&&t[1]!==".")return e;{let u=Number(t),f=""+u;return f.search(/[eE]/)!==-1||s?r.eNotation?u:e:t.indexOf(".")!==-1?f==="0"&&o===""||f===o||a&&f==="-"+o?u:e:i?o===f||a+o===f?u:e:t===f||t===a+f?u:e}}else return e}}function M2(e){return e&&e.indexOf(".")!==-1&&(e=e.replace(/0+$/,""),e==="."?e="0":e[0]==="."?e="0"+e:e[e.length-1]==="."&&(e=e.substr(0,e.length-1))),e}mv.exports=B2});var Av=K((wU,yv)=>{"use strict";var mf=m(W()),Ha=m(Xe()),gv=m(H()),yf=cf(),ja=hv(),O2=pv(),I2=vv(),CU="<((!\\[CDATA\\[([\\s\\S]*?)(]]>))|((NAME:)?(NAME))([^>]*)>|((\\/)(NAME)\\s*>))([^<]*)".replace(/NAME/g,yf.nameRegexp),P2=function e(r){(0,gv.default)(this,e),this.options=r,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"\xA2"},pound:{regex:/&(pound|#163);/g,val:"\xA3"},yen:{regex:/&(yen|#165);/g,val:"\xA5"},euro:{regex:/&(euro|#8364);/g,val:"\u20AC"},copyright:{regex:/&(copy|#169);/g,val:"\xA9"},reg:{regex:/&(reg|#174);/g,val:"\xAE"},inr:{regex:/&(inr|#8377);/g,val:"\u20B9"}},this.addExternalEntities=R2,this.parseXml=G2,this.parseTextData=F2,this.resolveNameSpace=L2,this.buildAttributesMap=D2,this.isItStopNode=j2,this.replaceEntitiesValue=N2,this.readStopNodeData=V2,this.saveTextToParentTag=U2};function R2(e){for(var r=Object.keys(e),t=0;t<r.length;t++){var n=r[t];this.lastEntities[n]={regex:new RegExp("&"+n+";","g"),val:e[n]}}}function F2(e,r,t,n,a,i,o){if(e!==void 0&&(this.options.trimValues&&!n&&(e=e.trim()),e.length>0)){o||(e=this.replaceEntitiesValue(e));var s=this.options.tagValueProcessor(r,e,t,a,i);if(s==null)return e;if((0,Ha.default)(s)!==(0,Ha.default)(e)||s!==e)return s;if(this.options.trimValues)return gf(e,this.options.parseTagValue,this.options.numberParseOptions);var u=e.trim();return u===e?gf(e,this.options.parseTagValue,this.options.numberParseOptions):e}}function L2(e){if(this.options.removeNSPrefix){var r=e.split(":"),t=e.charAt(0)==="/"?"/":"";if(r[0]==="xmlns")return"";r.length===2&&(e=t+r[1])}return e}var k2=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function D2(e,r){if(!this.options.ignoreAttributes&&typeof e=="string"){for(var t=yf.getAllMatches(e,k2),n=t.length,a={},i=0;i<n;i++){var o=this.resolveNameSpace(t[i][1]),s=t[i][4],u=this.options.attributeNamePrefix+o;if(o.length)if(this.options.transformAttributeName&&(u=this.options.transformAttributeName(u)),u==="__proto__"&&(u="#__proto__"),s!==void 0){this.options.trimValues&&(s=s.trim()),s=this.replaceEntitiesValue(s);var f=this.options.attributeValueProcessor(o,s,r);f==null?a[u]=s:(0,Ha.default)(f)!==(0,Ha.default)(s)||f!==s?a[u]=f:a[u]=gf(s,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(a[u]=!0)}if(!Object.keys(a).length)return;if(this.options.attributesGroupName){var l={};return l[this.options.attributesGroupName]=a,l}return a}}var G2=function(r){r=r.replace(/\r\n?/g,`
`);for(var t=new ja("!xml"),n=t,a="",i="",o=0;o<r.length;o++){var s=r[o];if(s==="<")if(r[o+1]==="/"){var u=Kr(r,">",o,"Closing Tag is not closed."),f=r.substring(o+2,u).trim();if(this.options.removeNSPrefix){var l=f.indexOf(":");l!==-1&&(f=f.substr(l+1))}this.options.transformTagName&&(f=this.options.transformTagName(f)),n&&(a=this.saveTextToParentTag(a,n,i)),i=i.substr(0,i.lastIndexOf(".")),n=this.tagsNodeStack.pop(),a="",o=u}else if(r[o+1]==="?"){var c=vf(r,o,!1,"?>");if(!c)throw new Error("Pi Tag is not closed.");if(a=this.saveTextToParentTag(a,n,i),!(this.options.ignoreDeclaration&&c.tagName==="?xml"||this.options.ignorePiTags)){var h=new ja(c.tagName);h.add(this.options.textNodeName,""),c.tagName!==c.tagExp&&c.attrExpPresent&&(h[":@"]=this.buildAttributesMap(c.tagExp,i)),n.addChild(h)}o=c.closeIndex+1}else if(r.substr(o+1,3)==="!--"){var d=Kr(r,"-->",o+4,"Comment is not closed.");if(this.options.commentPropName){var p=r.substring(o+4,d-2);a=this.saveTextToParentTag(a,n,i),n.add(this.options.commentPropName,[(0,mf.default)({},this.options.textNodeName,p)])}o=d}else if(r.substr(o+1,2)==="!D"){var v=O2(r,o);this.docTypeEntities=v.entities,o=v.i}else if(r.substr(o+1,2)==="!["){var g=Kr(r,"]]>",o,"CDATA is not closed.")-2,y=r.substring(o+9,g);if(a=this.saveTextToParentTag(a,n,i),this.options.cdataPropName)n.add(this.options.cdataPropName,[(0,mf.default)({},this.options.textNodeName,y)]);else{var b=this.parseTextData(y,n.tagname,i,!0,!1,!0);b==null&&(b=""),n.add(this.options.textNodeName,b)}o=g+2}else{var E=vf(r,o,this.options.removeNSPrefix),T=E.tagName,S=E.tagExp,I=E.attrExpPresent,L=E.closeIndex;this.options.transformTagName&&(T=this.options.transformTagName(T)),n&&a&&n.tagname!=="!xml"&&(a=this.saveTextToParentTag(a,n,i,!1)),T!==t.tagname&&(i+=i?"."+T:T);var B=n;if(B&&this.options.unpairedTags.indexOf(B.tagname)!==-1&&(n=this.tagsNodeStack.pop()),this.isItStopNode(this.options.stopNodes,i,T)){var C="";if(S.length>0&&S.lastIndexOf("/")===S.length-1)o=E.closeIndex;else if(this.options.unpairedTags.indexOf(T)!==-1)o=E.closeIndex;else{var _=this.readStopNodeData(r,T,L+1);if(!_)throw new Error("Unexpected end of ".concat(T));o=_.i,C=_.tagContent}var R=new ja(T);T!==S&&I&&(R[":@"]=this.buildAttributesMap(S,i)),C&&(C=this.parseTextData(C,T,i,!0,I,!0,!0)),i=i.substr(0,i.lastIndexOf(".")),R.add(this.options.textNodeName,C),n.addChild(R)}else{if(S.length>0&&S.lastIndexOf("/")===S.length-1){T[T.length-1]==="/"?(T=T.substr(0,T.length-1),S=T):S=S.substr(0,S.length-1),this.options.transformTagName&&(T=this.options.transformTagName(T));var F=new ja(T);T!==S&&I&&(F[":@"]=this.buildAttributesMap(S,i)),i=i.substr(0,i.lastIndexOf(".")),n.addChild(F)}else{var D=new ja(T);this.tagsNodeStack.push(n),T!==S&&I&&(D[":@"]=this.buildAttributesMap(S,i)),n.addChild(D),n=D}a="",o=L}}else a+=r[o]}return t.child},N2=function(r){if(this.options.processEntities){for(var t in this.docTypeEntities){var n=this.docTypeEntities[t];r=r.replace(n.regx,n.val)}for(var a in this.lastEntities){var i=this.lastEntities[a];r=r.replace(i.regex,i.val)}if(this.options.htmlEntities)for(var o in this.htmlEntities){var s=this.htmlEntities[o];r=r.replace(s.regex,s.val)}r=r.replace(this.ampEntity.regex,this.ampEntity.val)}return r};function U2(e,r,t,n){return e&&(n===void 0&&(n=Object.keys(r.child).length===0),e=this.parseTextData(e,r.tagname,t,!1,r[":@"]?Object.keys(r[":@"]).length!==0:!1,n),e!==void 0&&e!==""&&r.add(this.options.textNodeName,e),e=""),e}function j2(e,r,t){var n="*."+t;for(var a in e){var i=e[a];if(n===i||r===i)return!0}return!1}function H2(e,r){for(var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:">",n,a="",i=r;i<e.length;i++){var o=e[i];if(n)o===n&&(n="");else if(o==='"'||o==="'")n=o;else if(o===t[0])if(t[1]){if(e[i+1]===t[1])return{data:a,index:i}}else return{data:a,index:i};else o==="	"&&(o=" ");a+=o}}function Kr(e,r,t,n){var a=e.indexOf(r,t);if(a===-1)throw new Error(n);return a+r.length-1}function vf(e,r,t){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:">",a=H2(e,r+1,n);if(a){var i=a.data,o=a.index,s=i.search(/\s/),u=i,f=!0;if(s!==-1&&(u=i.substr(0,s).replace(/\s\s*$/,""),i=i.substr(s+1)),t){var l=u.indexOf(":");l!==-1&&(u=u.substr(l+1),f=u!==a.data.substr(l+1))}return{tagName:u,tagExp:i,closeIndex:o,attrExpPresent:f}}}function V2(e,r,t){for(var n=t,a=1;t<e.length;t++)if(e[t]==="<")if(e[t+1]==="/"){var i=Kr(e,">",t,"".concat(r," is not closed")),o=e.substring(t+2,i).trim();if(o===r&&(a--,a===0))return{tagContent:e.substring(n,t),i};t=i}else if(e[t+1]==="?"){var s=Kr(e,"?>",t+1,"StopNode is not closed.");t=s}else if(e.substr(t+1,3)==="!--"){var u=Kr(e,"-->",t+3,"StopNode is not closed.");t=u}else if(e.substr(t+1,2)==="!["){var f=Kr(e,"]]>",t,"StopNode is not closed.")-2;t=f}else{var l=vf(e,t,">");if(l){var c=l&&l.tagName;c===r&&l.tagExp[l.tagExp.length-1]!=="/"&&a++,t=l.closeIndex}}}function gf(e,r,t){if(r&&typeof e=="string"){var n=e.trim();return n==="true"?!0:n==="false"?!1:I2(e,t)}else return yf.isExist(e)?e:""}yv.exports=P2});var Tv=K(bv=>{"use strict";function z2(e,r){return _v(e,r)}function _v(e,r,t){for(var n,a={},i=0;i<e.length;i++){var o=e[i],s=W2(o),u="";if(t===void 0?u=s:u=t+"."+s,s===r.textNodeName)n===void 0?n=o[s]:n+=""+o[s];else{if(s===void 0)continue;if(o[s]){var f=_v(o[s],r,u),l=q2(f,r);o[":@"]?J2(f,o[":@"],u,r):Object.keys(f).length===1&&f[r.textNodeName]!==void 0&&!r.alwaysCreateTextNode?f=f[r.textNodeName]:Object.keys(f).length===0&&(r.alwaysCreateTextNode?f[r.textNodeName]="":f=""),a[s]!==void 0&&a.hasOwnProperty(s)?(Array.isArray(a[s])||(a[s]=[a[s]]),a[s].push(f)):r.isArray(s,u,l)?a[s]=[f]:a[s]=f}}}return typeof n=="string"?n.length>0&&(a[r.textNodeName]=n):n!==void 0&&(a[r.textNodeName]=n),a}function W2(e){for(var r=Object.keys(e),t=0;t<r.length;t++){var n=r[t];if(n!==":@")return n}}function J2(e,r,t,n){if(r)for(var a=Object.keys(r),i=a.length,o=0;o<i;o++){var s=a[o];n.isArray(s,t+"."+s,!0,!0)?e[s]=[r[s]]:e[s]=r[s]}}function q2(e,r){var t=Object.keys(e).length;return!!(t===0||t===1&&e[r.textNodeName])}bv.prettify=z2});var Cv=K((MU,Sv)=>{var xv=m(H()),Ev=m(z()),X2=uv(),Y2=X2.buildOptions,K2=Av(),Q2=Tv(),Z2=Q2.prettify,$2=df(),eM=function(){function e(r){(0,xv.default)(this,e),this.externalEntities={},this.options=Y2(r)}return(0,Ev.default)(e,[{key:"parse",value:function(t,n){if(typeof t!="string")if(t.toString)t=t.toString();else throw new Error("XML data is accepted in String or Bytes[] form.");if(n){n===!0&&(n={});var a=$2.validate(t,n);if(a!==!0)throw Error("".concat(a.err.msg,":").concat(a.err.line,":").concat(a.err.col))}var i=new K2(this.options);i.addExternalEntities(this.externalEntities);var o=i.parseXml(t);return this.options.preserveOrder||o===void 0?o:Z2(o,this.options)}},{key:"addEntity",value:function(t,n){if(n.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(t.indexOf("&")!==-1||t.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(n==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[t]=n}}]),e}();Sv.exports=eM});var Iv=K((OU,Ov)=>{var tM=`
`;function rM(e,r){var t="";return r.format&&r.indentBy.length>0&&(t=tM),Bv(e,r,"",t)}function Bv(e,r,t,n){for(var a="",i=!1,o=0;o<e.length;o++){var s=e[o],u=nM(s),f="";if(t.length===0?f=u:f="".concat(t,".").concat(u),u===r.textNodeName){var l=s[u];aM(f,r)||(l=r.tagValueProcessor(u,l),l=Mv(l,r)),i&&(a+=n),a+=l,i=!1;continue}else if(u===r.cdataPropName){i&&(a+=n),a+="<![CDATA[".concat(s[u][0][r.textNodeName],"]]>"),i=!1;continue}else if(u===r.commentPropName){a+=n+"<!--".concat(s[u][0][r.textNodeName],"-->"),i=!0;continue}else if(u[0]==="?"){var c=wv(s[":@"],r),h=u==="?xml"?"":n,d=s[u][0][r.textNodeName];d=d.length!==0?" "+d:"",a+=h+"<".concat(u).concat(d).concat(c,"?>"),i=!0;continue}var p=n;p!==""&&(p+=r.indentBy);var v=wv(s[":@"],r),g=n+"<".concat(u).concat(v),y=Bv(s[u],r,f,p);r.unpairedTags.indexOf(u)!==-1?r.suppressUnpairedNode?a+=g+">":a+=g+"/>":(!y||y.length===0)&&r.suppressEmptyNode?a+=g+"/>":y&&y.endsWith(">")?a+=g+">".concat(y).concat(n,"</").concat(u,">"):(a+=g+">",y&&n!==""&&(y.includes("/>")||y.includes("</"))?a+=n+r.indentBy+y+n:a+=y,a+="</".concat(u,">")),i=!0}return a}function nM(e){for(var r=Object.keys(e),t=0;t<r.length;t++){var n=r[t];if(n!==":@")return n}}function wv(e,r){var t="";if(e&&!r.ignoreAttributes)for(var n in e){var a=r.attributeValueProcessor(n,e[n]);a=Mv(a,r),a===!0&&r.suppressBooleanAttributes?t+=" ".concat(n.substr(r.attributeNamePrefix.length)):t+=" ".concat(n.substr(r.attributeNamePrefix.length),'="').concat(a,'"')}return t}function aM(e,r){e=e.substr(0,e.length-r.textNodeName.length-1);var t=e.substr(e.lastIndexOf(".")+1);for(var n in r.stopNodes)if(r.stopNodes[n]===e||r.stopNodes[n]==="*."+t)return!0;return!1}function Mv(e,r){if(e&&e.length>0&&r.processEntities)for(var t=0;t<r.entities.length;t++){var n=r.entities[t];e=e.replace(n.regex,n.val)}return e}Ov.exports=rM});var Fv=K((IU,Rv)=>{"use strict";var Af=m(Xe()),Pv=m(W()),iM=Iv(),oM={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(r,t){return t},attributeValueProcessor:function(r,t){return t},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[]};function br(e){this.options=Object.assign({},oM,e),this.options.ignoreAttributes||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=fM),this.processTextOrObjNode=sM,this.options.format?(this.indentate=uM,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}br.prototype.build=function(e){return this.options.preserveOrder?iM(e,this.options):(Array.isArray(e)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(e=(0,Pv.default)({},this.options.arrayNodeName,e)),this.j2x(e,0).val)};br.prototype.j2x=function(e,r){var t="",n="";for(var a in e)if(!(typeof e[a]>"u"))if(e[a]===null)a[0]==="?"?n+=this.indentate(r)+"<"+a+"?"+this.tagEndChar:n+=this.indentate(r)+"<"+a+"/"+this.tagEndChar;else if(e[a]instanceof Date)n+=this.buildTextValNode(e[a],a,"",r);else if((0,Af.default)(e[a])!=="object"){var i=this.isAttribute(a);if(i)t+=this.buildAttrPairStr(i,""+e[a]);else if(a===this.options.textNodeName){var o=this.options.tagValueProcessor(a,""+e[a]);n+=this.replaceEntitiesValue(o)}else n+=this.buildTextValNode(e[a],a,"",r)}else if(Array.isArray(e[a]))for(var s=e[a].length,u=0;u<s;u++){var f=e[a][u];typeof f>"u"||(f===null?a[0]==="?"?n+=this.indentate(r)+"<"+a+"?"+this.tagEndChar:n+=this.indentate(r)+"<"+a+"/"+this.tagEndChar:(0,Af.default)(f)==="object"?n+=this.processTextOrObjNode(f,a,r):n+=this.buildTextValNode(f,a,"",r))}else if(this.options.attributesGroupName&&a===this.options.attributesGroupName)for(var l=Object.keys(e[a]),c=l.length,h=0;h<c;h++)t+=this.buildAttrPairStr(l[h],""+e[a][l[h]]);else n+=this.processTextOrObjNode(e[a],a,r);return{attrStr:t,val:n}};br.prototype.buildAttrPairStr=function(e,r){return r=this.options.attributeValueProcessor(e,""+r),r=this.replaceEntitiesValue(r),this.options.suppressBooleanAttributes&&r==="true"?" "+e:" "+e+'="'+r+'"'};function sM(e,r,t){var n=this.j2x(e,t+1);return e[this.options.textNodeName]!==void 0&&Object.keys(e).length===1?this.buildTextValNode(e[this.options.textNodeName],r,n.attrStr,t):this.buildObjectNode(n.val,r,n.attrStr,t)}br.prototype.buildObjectNode=function(e,r,t,n){if(e==="")return r[0]==="?"?this.indentate(n)+"<"+r+t+"?"+this.tagEndChar:this.indentate(n)+"<"+r+t+this.closeTag(r)+this.tagEndChar;var a="</"+r+this.tagEndChar,i="";return r[0]==="?"&&(i="?",a=""),t&&e.indexOf("<")===-1?this.indentate(n)+"<"+r+t+i+">"+e+a:this.options.commentPropName!==!1&&r===this.options.commentPropName&&i.length===0?this.indentate(n)+"<!--".concat(e,"-->")+this.newLine:this.indentate(n)+"<"+r+t+i+this.tagEndChar+e+this.indentate(n)+a};br.prototype.closeTag=function(e){var r="";return this.options.unpairedTags.indexOf(e)!==-1?this.options.suppressUnpairedNode||(r="/"):this.options.suppressEmptyNode?r="/":r="></".concat(e),r};br.prototype.buildTextValNode=function(e,r,t,n){if(this.options.cdataPropName!==!1&&r===this.options.cdataPropName)return this.indentate(n)+"<![CDATA[".concat(e,"]]>")+this.newLine;if(this.options.commentPropName!==!1&&r===this.options.commentPropName)return this.indentate(n)+"<!--".concat(e,"-->")+this.newLine;if(r[0]==="?")return this.indentate(n)+"<"+r+t+"?"+this.tagEndChar;var a=this.options.tagValueProcessor(r,e);return a=this.replaceEntitiesValue(a),a===""?this.indentate(n)+"<"+r+t+this.closeTag(r)+this.tagEndChar:this.indentate(n)+"<"+r+t+">"+a+"</"+r+this.tagEndChar};br.prototype.replaceEntitiesValue=function(e){if(e&&e.length>0&&this.options.processEntities)for(var r=0;r<this.options.entities.length;r++){var t=this.options.entities[r];e=e.replace(t.regex,t.val)}return e};function uM(e){return this.options.indentBy.repeat(e)}function fM(e){return e.startsWith(this.options.attributeNamePrefix)?e.substr(this.attrPrefixLen):!1}Rv.exports=br});var kv=K((PU,Lv)=>{"use strict";var lM=df(),cM=Cv(),hM=Fv();Lv.exports={XMLParser:cM,XMLValidator:lM,XMLBuilder:hM}});var ig=K(()=>{});var ey=K((V6,$g)=>{function _O(e){if(Array.isArray(e)){for(var r=0,t=new Array(e.length);r<e.length;r++)t[r]=e[r];return t}}$g.exports=_O});var ry=K((z6,ty)=>{function bO(e){if(Symbol.iterator in Object(e)||Object.prototype.toString.call(e)==="[object Arguments]")return Array.from(e)}ty.exports=bO});var ay=K((W6,ny)=>{function TO(){throw new TypeError("Invalid attempt to spread non-iterable instance")}ny.exports=TO});var Et=K((J6,iy)=>{var xO=ey(),EO=ry(),SO=ay();function CO(e){return xO(e)||EO(e)||SO()}iy.exports=CO});var Nl=K((i0,li)=>{(function(e,r){typeof define=="function"&&define.amd?define([],r):typeof Im=="function"&&typeof li=="object"&&li&&li.exports?li.exports=r():(e.dcodeIO=e.dcodeIO||{}).Long=r()})(i0,function(){"use strict";function e(C,_,R){this.low=C|0,this.high=_|0,this.unsigned=!!R}e.prototype.__isLong__,Object.defineProperty(e.prototype,"__isLong__",{value:!0,enumerable:!1,configurable:!1});function r(C){return(C&&C.__isLong__)===!0}e.isLong=r;var t={},n={};function a(C,_){var R,F,D;return _?(C>>>=0,(D=0<=C&&C<256)&&(F=n[C],F)?F:(R=o(C,(C|0)<0?-1:0,!0),D&&(n[C]=R),R)):(C|=0,(D=-128<=C&&C<128)&&(F=t[C],F)?F:(R=o(C,C<0?-1:0,!1),D&&(t[C]=R),R))}e.fromInt=a;function i(C,_){if(isNaN(C)||!isFinite(C))return _?y:g;if(_){if(C<0)return y;if(C>=d)return I}else{if(C<=-p)return L;if(C+1>=p)return S}return C<0?i(-C,_).neg():o(C%h|0,C/h|0,_)}e.fromNumber=i;function o(C,_,R){return new e(C,_,R)}e.fromBits=o;var s=Math.pow;function u(C,_,R){if(C.length===0)throw Error("empty string");if(C==="NaN"||C==="Infinity"||C==="+Infinity"||C==="-Infinity")return g;if(typeof _=="number"?(R=_,_=!1):_=!!_,R=R||10,R<2||36<R)throw RangeError("radix");var F;if((F=C.indexOf("-"))>0)throw Error("interior hyphen");if(F===0)return u(C.substring(1),_,R).neg();for(var D=i(s(R,8)),k=g,M=0;M<C.length;M+=8){var O=Math.min(8,C.length-M),P=parseInt(C.substring(M,M+O),R);if(O<8){var U=i(s(R,O));k=k.mul(U).add(i(P))}else k=k.mul(D),k=k.add(i(P))}return k.unsigned=_,k}e.fromString=u;function f(C){return C instanceof e?C:typeof C=="number"?i(C):typeof C=="string"?u(C):o(C.low,C.high,C.unsigned)}e.fromValue=f;var l=1<<16,c=1<<24,h=l*l,d=h*h,p=d/2,v=a(c),g=a(0);e.ZERO=g;var y=a(0,!0);e.UZERO=y;var b=a(1);e.ONE=b;var E=a(1,!0);e.UONE=E;var T=a(-1);e.NEG_ONE=T;var S=o(-1,2147483647,!1);e.MAX_VALUE=S;var I=o(-1,-1,!0);e.MAX_UNSIGNED_VALUE=I;var L=o(0,-2147483648,!1);e.MIN_VALUE=L;var B=e.prototype;return B.toInt=function(){return this.unsigned?this.low>>>0:this.low},B.toNumber=function(){return this.unsigned?(this.high>>>0)*h+(this.low>>>0):this.high*h+(this.low>>>0)},B.toString=function(_){if(_=_||10,_<2||36<_)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(L)){var R=i(_),F=this.div(R),D=F.mul(R).sub(this);return F.toString(_)+D.toInt().toString(_)}else return"-"+this.neg().toString(_);for(var k=i(s(_,6),this.unsigned),M=this,O="";;){var P=M.div(k),U=M.sub(P.mul(k)).toInt()>>>0,G=U.toString(_);if(M=P,M.isZero())return G+O;for(;G.length<6;)G="0"+G;O=""+G+O}},B.getHighBits=function(){return this.high},B.getHighBitsUnsigned=function(){return this.high>>>0},B.getLowBits=function(){return this.low},B.getLowBitsUnsigned=function(){return this.low>>>0},B.getNumBitsAbs=function(){if(this.isNegative())return this.eq(L)?64:this.neg().getNumBitsAbs();for(var _=this.high!=0?this.high:this.low,R=31;R>0&&!(_&1<<R);R--);return this.high!=0?R+33:R+1},B.isZero=function(){return this.high===0&&this.low===0},B.isNegative=function(){return!this.unsigned&&this.high<0},B.isPositive=function(){return this.unsigned||this.high>=0},B.isOdd=function(){return(this.low&1)===1},B.isEven=function(){return(this.low&1)===0},B.equals=function(_){return r(_)||(_=f(_)),this.unsigned!==_.unsigned&&this.high>>>31===1&&_.high>>>31===1?!1:this.high===_.high&&this.low===_.low},B.eq=B.equals,B.notEquals=function(_){return!this.eq(_)},B.neq=B.notEquals,B.lessThan=function(_){return this.comp(_)<0},B.lt=B.lessThan,B.lessThanOrEqual=function(_){return this.comp(_)<=0},B.lte=B.lessThanOrEqual,B.greaterThan=function(_){return this.comp(_)>0},B.gt=B.greaterThan,B.greaterThanOrEqual=function(_){return this.comp(_)>=0},B.gte=B.greaterThanOrEqual,B.compare=function(_){if(r(_)||(_=f(_)),this.eq(_))return 0;var R=this.isNegative(),F=_.isNegative();return R&&!F?-1:!R&&F?1:this.unsigned?_.high>>>0>this.high>>>0||_.high===this.high&&_.low>>>0>this.low>>>0?-1:1:this.sub(_).isNegative()?-1:1},B.comp=B.compare,B.negate=function(){return!this.unsigned&&this.eq(L)?L:this.not().add(b)},B.neg=B.negate,B.add=function(_){r(_)||(_=f(_));var R=this.high>>>16,F=this.high&65535,D=this.low>>>16,k=this.low&65535,M=_.high>>>16,O=_.high&65535,P=_.low>>>16,U=_.low&65535,G=0,j=0,q=0,ne=0;return ne+=k+U,q+=ne>>>16,ne&=65535,q+=D+P,j+=q>>>16,q&=65535,j+=F+O,G+=j>>>16,j&=65535,G+=R+M,G&=65535,o(q<<16|ne,G<<16|j,this.unsigned)},B.subtract=function(_){return r(_)||(_=f(_)),this.add(_.neg())},B.sub=B.subtract,B.multiply=function(_){if(this.isZero()||(r(_)||(_=f(_)),_.isZero()))return g;if(this.eq(L))return _.isOdd()?L:g;if(_.eq(L))return this.isOdd()?L:g;if(this.isNegative())return _.isNegative()?this.neg().mul(_.neg()):this.neg().mul(_).neg();if(_.isNegative())return this.mul(_.neg()).neg();if(this.lt(v)&&_.lt(v))return i(this.toNumber()*_.toNumber(),this.unsigned);var R=this.high>>>16,F=this.high&65535,D=this.low>>>16,k=this.low&65535,M=_.high>>>16,O=_.high&65535,P=_.low>>>16,U=_.low&65535,G=0,j=0,q=0,ne=0;return ne+=k*U,q+=ne>>>16,ne&=65535,q+=D*U,j+=q>>>16,q&=65535,q+=k*P,j+=q>>>16,q&=65535,j+=F*U,G+=j>>>16,j&=65535,j+=D*P,G+=j>>>16,j&=65535,j+=k*O,G+=j>>>16,j&=65535,G+=R*U+F*P+D*O+k*M,G&=65535,o(q<<16|ne,G<<16|j,this.unsigned)},B.mul=B.multiply,B.divide=function(_){if(r(_)||(_=f(_)),_.isZero())throw Error("division by zero");if(this.isZero())return this.unsigned?y:g;var R,F,D;if(this.unsigned){if(_.unsigned||(_=_.toUnsigned()),_.gt(this))return y;if(_.gt(this.shru(1)))return E;D=y}else{if(this.eq(L)){if(_.eq(b)||_.eq(T))return L;if(_.eq(L))return b;var k=this.shr(1);return R=k.div(_).shl(1),R.eq(g)?_.isNegative()?b:T:(F=this.sub(_.mul(R)),D=R.add(F.div(_)),D)}else if(_.eq(L))return this.unsigned?y:g;if(this.isNegative())return _.isNegative()?this.neg().div(_.neg()):this.neg().div(_).neg();if(_.isNegative())return this.div(_.neg()).neg();D=g}for(F=this;F.gte(_);){R=Math.max(1,Math.floor(F.toNumber()/_.toNumber()));for(var M=Math.ceil(Math.log(R)/Math.LN2),O=M<=48?1:s(2,M-48),P=i(R),U=P.mul(_);U.isNegative()||U.gt(F);)R-=O,P=i(R,this.unsigned),U=P.mul(_);P.isZero()&&(P=b),D=D.add(P),F=F.sub(U)}return D},B.div=B.divide,B.modulo=function(_){return r(_)||(_=f(_)),this.sub(this.div(_).mul(_))},B.mod=B.modulo,B.not=function(){return o(~this.low,~this.high,this.unsigned)},B.and=function(_){return r(_)||(_=f(_)),o(this.low&_.low,this.high&_.high,this.unsigned)},B.or=function(_){return r(_)||(_=f(_)),o(this.low|_.low,this.high|_.high,this.unsigned)},B.xor=function(_){return r(_)||(_=f(_)),o(this.low^_.low,this.high^_.high,this.unsigned)},B.shiftLeft=function(_){return r(_)&&(_=_.toInt()),(_&=63)===0?this:_<32?o(this.low<<_,this.high<<_|this.low>>>32-_,this.unsigned):o(0,this.low<<_-32,this.unsigned)},B.shl=B.shiftLeft,B.shiftRight=function(_){return r(_)&&(_=_.toInt()),(_&=63)===0?this:_<32?o(this.low>>>_|this.high<<32-_,this.high>>_,this.unsigned):o(this.high>>_-32,this.high>=0?0:-1,this.unsigned)},B.shr=B.shiftRight,B.shiftRightUnsigned=function(_){if(r(_)&&(_=_.toInt()),_&=63,_===0)return this;var R=this.high;if(_<32){var F=this.low;return o(F>>>_|R<<32-_,R>>>_,this.unsigned)}else return _===32?o(R,0,this.unsigned):o(R>>>_-32,0,this.unsigned)},B.shru=B.shiftRightUnsigned,B.toSigned=function(){return this.unsigned?o(this.low,this.high,!1):this},B.toUnsigned=function(){return this.unsigned?this:o(this.low,this.high,!0)},B.toBytes=function(C){return C?this.toBytesLE():this.toBytesBE()},B.toBytesLE=function(){var C=this.high,_=this.low;return[_&255,_>>>8&255,_>>>16&255,_>>>24&255,C&255,C>>>8&255,C>>>16&255,C>>>24&255]},B.toBytesBE=function(){var C=this.high,_=this.low;return[C>>>24&255,C>>>16&255,C>>>8&255,C&255,_>>>24&255,_>>>16&255,_>>>8&255,_&255]},e})});var j1=K((dz,U1)=>{var kP=ye();function DP(e,r){for(;!Object.prototype.hasOwnProperty.call(e,r)&&(e=kP(e),e!==null););return e}U1.exports=DP});var fa=K((pz,fs)=>{var GP=j1();function us(e,r,t){return typeof Reflect<"u"&&Reflect.get?fs.exports=us=Reflect.get:fs.exports=us=function(a,i,o){var s=GP(a,i);if(s){var u=Object.getOwnPropertyDescriptor(s,i);return u.get?u.get.call(o):u.value}},us(e,r,t||e)}fs.exports=us});var Mc=K((vz,Y1)=>{Y1.exports=globalThis.h3||{}});var Fc=K((Tz,pA)=>{pA.exports=globalThis.luma});var vs=K((xz,mA)=>{mA.exports=globalThis.deck});var n_=K((CJ,Is)=>{var X3=sf();function Y3(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function Os(e,r,t){return Y3()?Is.exports=Os=Reflect.construct:Is.exports=Os=function(a,i,o){var s=[null];s.push.apply(s,i);var u=Function.bind.apply(a,s),f=new u;return o&&X3(f,o.prototype),f},Os.apply(null,arguments)}Is.exports=Os});var _a=K((aX,yb)=>{yb.exports=globalThis.loaders});var tw=K((Bee,ew)=>{ew.exports=globalThis.deck});var Ew=K(pm=>{pm.read=function(e,r,t,n,a){var i,o,s=a*8-n-1,u=(1<<s)-1,f=u>>1,l=-7,c=t?a-1:0,h=t?-1:1,d=e[r+c];for(c+=h,i=d&(1<<-l)-1,d>>=-l,l+=s;l>0;i=i*256+e[r+c],c+=h,l-=8);for(o=i&(1<<-l)-1,i>>=-l,l+=n;l>0;o=o*256+e[r+c],c+=h,l-=8);if(i===0)i=1-f;else{if(i===u)return o?NaN:(d?-1:1)*(1/0);o=o+Math.pow(2,n),i=i-f}return(d?-1:1)*o*Math.pow(2,i-n)};pm.write=function(e,r,t,n,a,i){var o,s,u,f=i*8-a-1,l=(1<<f)-1,c=l>>1,h=a===23?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:i-1,p=n?1:-1,v=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(s=isNaN(r)?1:0,o=l):(o=Math.floor(Math.log(r)/Math.LN2),r*(u=Math.pow(2,-o))<1&&(o--,u*=2),o+c>=1?r+=h/u:r+=h*Math.pow(2,1-c),r*u>=2&&(o++,u/=2),o+c>=l?(s=0,o=l):o+c>=1?(s=(r*u-1)*Math.pow(2,a),o=o+c):(s=r*Math.pow(2,c-1)*Math.pow(2,a),o=0));a>=8;e[t+d]=s&255,d+=p,s/=256,a-=8);for(o=o<<a|s,f+=a;f>0;e[t+d]=o&255,d+=p,o/=256,f-=8);e[t+d-p]|=v*128}});var Ow=K((mte,Mw)=>{"use strict";Mw.exports=me;var Yu=Ew();function me(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}me.Varint=0;me.Fixed64=1;me.Bytes=2;me.Fixed32=5;var mm=(1<<16)*(1<<16),Sw=1/mm,JG=12,Bw=typeof TextDecoder>"u"?null:new TextDecoder("utf8");me.prototype={destroy:function(){this.buf=null},readFields:function(e,r,t){for(t=t||this.length;this.pos<t;){var n=this.readVarint(),a=n>>3,i=this.pos;this.type=n&7,e(a,r,this),this.pos===i&&this.skip(n)}return r},readMessage:function(e,r){return this.readFields(e,r,this.readVarint()+this.pos)},readFixed32:function(){var e=Ku(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=ww(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=Ku(this.buf,this.pos)+Ku(this.buf,this.pos+4)*mm;return this.pos+=8,e},readSFixed64:function(){var e=Ku(this.buf,this.pos)+ww(this.buf,this.pos+4)*mm;return this.pos+=8,e},readFloat:function(){var e=Yu.read(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=Yu.read(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var r=this.buf,t,n;return n=r[this.pos++],t=n&127,n<128||(n=r[this.pos++],t|=(n&127)<<7,n<128)||(n=r[this.pos++],t|=(n&127)<<14,n<128)||(n=r[this.pos++],t|=(n&127)<<21,n<128)?t:(n=r[this.pos],t|=(n&15)<<28,qG(t,e,this))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2===1?(e+1)/-2:e/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var e=this.readVarint()+this.pos,r=this.pos;return this.pos=e,e-r>=JG&&Bw?sN(this.buf,r,e):oN(this.buf,r,e)},readBytes:function(){var e=this.readVarint()+this.pos,r=this.buf.subarray(this.pos,e);return this.pos=e,r},readPackedVarint:function(e,r){if(this.type!==me.Bytes)return e.push(this.readVarint(r));var t=yr(this);for(e=e||[];this.pos<t;)e.push(this.readVarint(r));return e},readPackedSVarint:function(e){if(this.type!==me.Bytes)return e.push(this.readSVarint());var r=yr(this);for(e=e||[];this.pos<r;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){if(this.type!==me.Bytes)return e.push(this.readBoolean());var r=yr(this);for(e=e||[];this.pos<r;)e.push(this.readBoolean());return e},readPackedFloat:function(e){if(this.type!==me.Bytes)return e.push(this.readFloat());var r=yr(this);for(e=e||[];this.pos<r;)e.push(this.readFloat());return e},readPackedDouble:function(e){if(this.type!==me.Bytes)return e.push(this.readDouble());var r=yr(this);for(e=e||[];this.pos<r;)e.push(this.readDouble());return e},readPackedFixed32:function(e){if(this.type!==me.Bytes)return e.push(this.readFixed32());var r=yr(this);for(e=e||[];this.pos<r;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){if(this.type!==me.Bytes)return e.push(this.readSFixed32());var r=yr(this);for(e=e||[];this.pos<r;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){if(this.type!==me.Bytes)return e.push(this.readFixed64());var r=yr(this);for(e=e||[];this.pos<r;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){if(this.type!==me.Bytes)return e.push(this.readSFixed64());var r=yr(this);for(e=e||[];this.pos<r;)e.push(this.readSFixed64());return e},skip:function(e){var r=e&7;if(r===me.Varint)for(;this.buf[this.pos++]>127;);else if(r===me.Bytes)this.pos=this.readVarint()+this.pos;else if(r===me.Fixed32)this.pos+=4;else if(r===me.Fixed64)this.pos+=8;else throw new Error("Unimplemented type: "+r)},writeTag:function(e,r){this.writeVarint(e<<3|r)},realloc:function(e){for(var r=this.length||16;r<this.pos+e;)r*=2;if(r!==this.length){var t=new Uint8Array(r);t.set(this.buf),this.buf=t,this.length=r}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),Ga(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),Ga(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),Ga(this.buf,e&-1,this.pos),Ga(this.buf,Math.floor(e*Sw),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),Ga(this.buf,e&-1,this.pos),Ga(this.buf,Math.floor(e*Sw),this.pos+4),this.pos+=8},writeVarint:function(e){if(e=+e||0,e>268435455||e<0){XG(e,this);return}this.realloc(4),this.buf[this.pos++]=e&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=e>>>7&127)))},writeSVarint:function(e){this.writeVarint(e<0?-e*2-1:e*2)},writeBoolean:function(e){this.writeVarint(Boolean(e))},writeString:function(e){e=String(e),this.realloc(e.length*4),this.pos++;var r=this.pos;this.pos=uN(this.buf,e,this.pos);var t=this.pos-r;t>=128&&Cw(r,t,this),this.pos=r-1,this.writeVarint(t),this.pos+=t},writeFloat:function(e){this.realloc(4),Yu.write(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),Yu.write(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var r=e.length;this.writeVarint(r),this.realloc(r);for(var t=0;t<r;t++)this.buf[this.pos++]=e[t]},writeRawMessage:function(e,r){this.pos++;var t=this.pos;e(r,this);var n=this.pos-t;n>=128&&Cw(t,n,this),this.pos=t-1,this.writeVarint(n),this.pos+=n},writeMessage:function(e,r,t){this.writeTag(e,me.Bytes),this.writeRawMessage(r,t)},writePackedVarint:function(e,r){r.length&&this.writeMessage(e,QG,r)},writePackedSVarint:function(e,r){r.length&&this.writeMessage(e,ZG,r)},writePackedBoolean:function(e,r){r.length&&this.writeMessage(e,tN,r)},writePackedFloat:function(e,r){r.length&&this.writeMessage(e,$G,r)},writePackedDouble:function(e,r){r.length&&this.writeMessage(e,eN,r)},writePackedFixed32:function(e,r){r.length&&this.writeMessage(e,rN,r)},writePackedSFixed32:function(e,r){r.length&&this.writeMessage(e,nN,r)},writePackedFixed64:function(e,r){r.length&&this.writeMessage(e,aN,r)},writePackedSFixed64:function(e,r){r.length&&this.writeMessage(e,iN,r)},writeBytesField:function(e,r){this.writeTag(e,me.Bytes),this.writeBytes(r)},writeFixed32Field:function(e,r){this.writeTag(e,me.Fixed32),this.writeFixed32(r)},writeSFixed32Field:function(e,r){this.writeTag(e,me.Fixed32),this.writeSFixed32(r)},writeFixed64Field:function(e,r){this.writeTag(e,me.Fixed64),this.writeFixed64(r)},writeSFixed64Field:function(e,r){this.writeTag(e,me.Fixed64),this.writeSFixed64(r)},writeVarintField:function(e,r){this.writeTag(e,me.Varint),this.writeVarint(r)},writeSVarintField:function(e,r){this.writeTag(e,me.Varint),this.writeSVarint(r)},writeStringField:function(e,r){this.writeTag(e,me.Bytes),this.writeString(r)},writeFloatField:function(e,r){this.writeTag(e,me.Fixed32),this.writeFloat(r)},writeDoubleField:function(e,r){this.writeTag(e,me.Fixed64),this.writeDouble(r)},writeBooleanField:function(e,r){this.writeVarintField(e,Boolean(r))}};function qG(e,r,t){var n=t.buf,a,i;if(i=n[t.pos++],a=(i&112)>>4,i<128||(i=n[t.pos++],a|=(i&127)<<3,i<128)||(i=n[t.pos++],a|=(i&127)<<10,i<128)||(i=n[t.pos++],a|=(i&127)<<17,i<128)||(i=n[t.pos++],a|=(i&127)<<24,i<128)||(i=n[t.pos++],a|=(i&1)<<31,i<128))return Da(e,a,r);throw new Error("Expected varint not more than 10 bytes")}function yr(e){return e.type===me.Bytes?e.readVarint()+e.pos:e.pos+1}function Da(e,r,t){return t?r*4294967296+(e>>>0):(r>>>0)*4294967296+(e>>>0)}function XG(e,r){var t,n;if(e>=0?(t=e%4294967296|0,n=e/4294967296|0):(t=~(-e%4294967296),n=~(-e/4294967296),t^4294967295?t=t+1|0:(t=0,n=n+1|0)),e>=18446744073709552e3||e<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");r.realloc(10),YG(t,n,r),KG(n,r)}function YG(e,r,t){t.buf[t.pos++]=e&127|128,e>>>=7,t.buf[t.pos++]=e&127|128,e>>>=7,t.buf[t.pos++]=e&127|128,e>>>=7,t.buf[t.pos++]=e&127|128,e>>>=7,t.buf[t.pos]=e&127}function KG(e,r){var t=(e&7)<<4;r.buf[r.pos++]|=t|((e>>>=3)?128:0),e&&(r.buf[r.pos++]=e&127|((e>>>=7)?128:0),e&&(r.buf[r.pos++]=e&127|((e>>>=7)?128:0),e&&(r.buf[r.pos++]=e&127|((e>>>=7)?128:0),e&&(r.buf[r.pos++]=e&127|((e>>>=7)?128:0),e&&(r.buf[r.pos++]=e&127)))))}function Cw(e,r,t){var n=r<=16383?1:r<=2097151?2:r<=268435455?3:Math.floor(Math.log(r)/(Math.LN2*7));t.realloc(n);for(var a=t.pos-1;a>=e;a--)t.buf[a+n]=t.buf[a]}function QG(e,r){for(var t=0;t<e.length;t++)r.writeVarint(e[t])}function ZG(e,r){for(var t=0;t<e.length;t++)r.writeSVarint(e[t])}function $G(e,r){for(var t=0;t<e.length;t++)r.writeFloat(e[t])}function eN(e,r){for(var t=0;t<e.length;t++)r.writeDouble(e[t])}function tN(e,r){for(var t=0;t<e.length;t++)r.writeBoolean(e[t])}function rN(e,r){for(var t=0;t<e.length;t++)r.writeFixed32(e[t])}function nN(e,r){for(var t=0;t<e.length;t++)r.writeSFixed32(e[t])}function aN(e,r){for(var t=0;t<e.length;t++)r.writeFixed64(e[t])}function iN(e,r){for(var t=0;t<e.length;t++)r.writeSFixed64(e[t])}function Ku(e,r){return(e[r]|e[r+1]<<8|e[r+2]<<16)+e[r+3]*16777216}function Ga(e,r,t){e[t]=r,e[t+1]=r>>>8,e[t+2]=r>>>16,e[t+3]=r>>>24}function ww(e,r){return(e[r]|e[r+1]<<8|e[r+2]<<16)+(e[r+3]<<24)}function oN(e,r,t){for(var n="",a=r;a<t;){var i=e[a],o=null,s=i>239?4:i>223?3:i>191?2:1;if(a+s>t)break;var u,f,l;s===1?i<128&&(o=i):s===2?(u=e[a+1],(u&192)===128&&(o=(i&31)<<6|u&63,o<=127&&(o=null))):s===3?(u=e[a+1],f=e[a+2],(u&192)===128&&(f&192)===128&&(o=(i&15)<<12|(u&63)<<6|f&63,(o<=2047||o>=55296&&o<=57343)&&(o=null))):s===4&&(u=e[a+1],f=e[a+2],l=e[a+3],(u&192)===128&&(f&192)===128&&(l&192)===128&&(o=(i&15)<<18|(u&63)<<12|(f&63)<<6|l&63,(o<=65535||o>=1114112)&&(o=null))),o===null?(o=65533,s=1):o>65535&&(o-=65536,n+=String.fromCharCode(o>>>10&1023|55296),o=56320|o&1023),n+=String.fromCharCode(o),a+=s}return n}function sN(e,r,t){return Bw.decode(e.subarray(r,t))}function uN(e,r,t){for(var n=0,a,i;n<r.length;n++){if(a=r.charCodeAt(n),a>55295&&a<57344)if(i)if(a<56320){e[t++]=239,e[t++]=191,e[t++]=189,i=a;continue}else a=i-55296<<10|a-56320|65536,i=null;else{a>56319||n+1===r.length?(e[t++]=239,e[t++]=191,e[t++]=189):i=a;continue}else i&&(e[t++]=239,e[t++]=191,e[t++]=189,i=null);a<128?e[t++]=a:(a<2048?e[t++]=a>>6|192:(a<65536?e[t++]=a>>12|224:(e[t++]=a>>18|240,e[t++]=a>>12&63|128),e[t++]=a>>6&63|128),e[t++]=a&63|128)}return t}});var io={};Ot(io,{GeohashLayer:()=>nf,GreatCircleLayer:()=>Lo,H3ClusterLayer:()=>ms,H3HexagonLayer:()=>vn,MVTLayer:()=>rf,QuadkeyLayer:()=>Uo,S2Layer:()=>Go,TerrainLayer:()=>Hu,Tile3DLayer:()=>Ru,TileLayer:()=>ir,TripsLayer:()=>hs,_GeoCellLayer:()=>St,_Tile2DHeader:()=>di,_Tileset2D:()=>Ai,_WMSLayer:()=>Fo,_getURLFromTemplate:()=>Wt});var Dt={},Rm=m(It());_r(Dt,m(It()));if(!Rm.GeoJsonLayer)throw new Error("@deck.gl/layers is not found");_r(io,Dt);var Rl=m(ce()),Ro=m(X()),Vy=m(H()),zy=m(z()),Wy=m(nt()),Jy=m(Te()),qy=m(xe()),Fl=m(ye()),fi=m(W()),un=m(Y()),fn=m(Pt()),Xy=m(It());var Xv=m(W()),Yv=m(X()),Cf=m(Y());var Hv=m(ce());var Uv=m(X()),bf=m(Y());var Gv=m(W());function A(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var Nv=m(kv());function Dv(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function dM(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?Dv(Object(t),!0).forEach(function(n){(0,Gv.default)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Dv(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function _f(e,r){var t=new Nv.XMLParser(dM({ignoreAttributes:!1,attributeNamePrefix:""},r?.xml)),n=t.parse(e);return n}var pM="3.3.1",Qr={name:"XML",id:"xml",module:"xml",version:pM,worker:!1,extensions:["xml"],mimeTypes:["application/xml","text/xml"],testText:mM,options:{xml:{}},parse:function(){var e=(0,Uv.default)(bf.default.mark(function t(n,a){return bf.default.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",_f(new TextDecoder().decode(n),a));case 1:case"end":return o.stop()}},t)}));function r(t,n){return e.apply(this,arguments)}return r}(),parseTextSync:function(r,t){return _f(r,t)}};function mM(e){return e.startsWith("<?xml")}function Vv(e,r){var t=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=vM(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(f){throw f},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,o=!1,s;return{s:function(){t=t.call(e)},n:function(){var f=t.next();return i=f.done,f},e:function(f){o=!0,s=f},f:function(){try{!i&&t.return!=null&&t.return()}finally{if(o)throw s}}}}function vM(e,r){if(e){if(typeof e=="string")return jv(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return jv(e,r)}}function jv(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function Tf(e,r){var t=Qr.parseTextSync(e,r),n=t.WMT_MS_Capabilities||t.WMS_Capabilities||t;return gM(n)}function gM(e){var r,t,n,a={name:((r=e.Service)===null||r===void 0?void 0:r.Name)||"unnamed",title:(t=e.Service)===null||t===void 0?void 0:t.Title,keywords:[],requests:{},layer:zv((n=e.Capability)===null||n===void 0?void 0:n.Layer),raw:e},i=Vv(((u=e.Service)===null||u===void 0||(f=u.KeywordList)===null||f===void 0?void 0:f.Keyword)||[]),o;try{for(i.s();!(o=i.n()).done;){var s=o.value,u,f;a.keywords.push(s)}}catch(g){i.e(g)}finally{i.f()}for(var l=0,c=Object.entries(((v=e.Capability)===null||v===void 0?void 0:v.Request)||{});l<c.length;l++){var h=(0,Hv.default)(c[l],2),d=h[0],p=h[1],v;a.requests[d]=yM(d,p)}return a}function yM(e,r){var t=r?.Format,n=Array.isArray(t)?t:[t];return{name:e,mimeTypes:n}}function zv(e){var r={name:e?.Name,title:e?.Title,srs:e?.SRS||[],layers:[]},t=AM(e?.Layer),n=Vv(t),a;try{for(n.s();!(a=n.n()).done;){var i=a.value,o;(o=r.layers)===null||o===void 0||o.push(zv(i))}}catch(s){n.e(s)}finally{n.f()}return r}function AM(e){return Array.isArray(e)?e:e?[e]:[]}function xf(e,r){var t,n=Qr.parseTextSync(e,r),a=((t=n.FeatureInfoResponse)===null||t===void 0?void 0:t.FIELDS)||[],i=Array.isArray(a)?a:[a];return{features:i.map(function(o){return _M(o)})}}function _M(e){var r=e||{};return{attributes:r,type:"",bounds:{bottom:0,top:0,left:0,right:0}}}function Ef(e,r){var t=Qr.parseTextSync(e,r);return t}function Wv(e,r){var t,n,a,i=(t=Qr.parseTextSync)===null||t===void 0?void 0:t.call(Qr,e,r),o=(i==null||(n=i.ServiceExceptionReport)===null||n===void 0?void 0:n.ServiceException)||(i==null||(a=i["ogc:ServiceExceptionReport"])===null||a===void 0?void 0:a["ogc:ServiceException"]),s=typeof o=="string"?o:o["#text"]||o.code||"Unknown error";return s}function Jv(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function qv(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?Jv(Object(t),!0).forEach(function(n){(0,Xv.default)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Jv(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var bM="3.3.1",Wn={id:"wms-error",name:"WMS Error",module:"wms",version:bM,worker:!1,extensions:["xml"],mimeTypes:["application/vnd.ogc.se_xml","application/xml","text/xml"],testText:TM,options:{wms:{throwOnError:!1}},parse:function(){var e=(0,Yv.default)(Cf.default.mark(function t(n,a){return Cf.default.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",Sf(new TextDecoder().decode(n),a));case 1:case"end":return o.stop()}},t)}));function r(t,n){return e.apply(this,arguments)}return r}(),parseSync:function(r,t){return Sf(new TextDecoder().decode(r),t)},parseTextSync:function(r,t){return Sf(r,t)}};function TM(e){return e.startsWith("<?xml")}function Sf(e,r){var t=qv(qv({},Wn.options.wms),r?.wms),n=Wv(e,t),a=t.minimalErrors?n:"WMS Service error: ".concat(n);if(t.throwOnError)throw new Error(a);return a}var Kv=m(X()),wf=m(Y());var xM="3.3.1",Zr={id:"wms-capabilities",name:"WMS Capabilities",module:"wms",version:xM,worker:!1,extensions:["xml"],mimeTypes:["application/vnd.ogc.wms_xml","application/xml","text/xml"],testText:EM,options:{wms:{}},parse:function(){var e=(0,Kv.default)(wf.default.mark(function t(n,a){return wf.default.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",Tf(new TextDecoder().decode(n),a));case 1:case"end":return o.stop()}},t)}));function r(t,n){return e.apply(this,arguments)}return r}(),parseTextSync:function(r,t){return Tf(r,t)}};function EM(e){return e.startsWith("<?xml")}var Qv=m(H()),$t=function e(){(0,Qv.default)(this,e)};var wg=m(W()),$f=m(ce()),el=m(X()),Bg=m(H()),Mg=m(z()),tl=m(nt()),Og=m(Te()),Ig=m(xe()),rl=m(ye()),$a=m(Y());var Zv="3.3.1";var Sg=m(X()),Xf=m(Y());function te(e,r){if(!e)throw new Error(r||"loader assertion failed.")}var eg=m(Xe()),Gt={self:typeof self<"u"&&self,window:typeof window<"u"&&window,global:typeof global<"u"&&global,document:typeof document<"u"&&document},SM=Gt.self||Gt.window||Gt.global||{},CM=Gt.window||Gt.self||Gt.global||{},wM=Gt.global||Gt.self||Gt.window||{},BM=Gt.document||{};var $r=Boolean((typeof process>"u"?"undefined":(0,eg.default)(process))!=="object"||String(process)!=="[object process]"||process.browser);var $v=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version),MM=$v&&parseFloat($v[1])||0;function tg(e,r){if(!e)throw new Error(r||"loaders.gl assertion failed.")}var ng=m(Xe()),Nt={self:typeof self<"u"&&self,window:typeof window<"u"&&window,global:typeof global<"u"&&global,document:typeof document<"u"&&document},YU=Nt.self||Nt.window||Nt.global||{},KU=Nt.window||Nt.self||Nt.global||{},ag=Nt.global||Nt.self||Nt.window||{},QU=Nt.document||{};var er=(typeof process>"u"?"undefined":(0,ng.default)(process))!=="object"||String(process)!=="[object process]"||process.browser,Va=typeof importScripts=="function",ZU=typeof window<"u"&&typeof window.orientation<"u",rg=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version),$U=rg&&parseFloat(rg[1])||0;var If=m(X()),za=m(Y());var en=m(ig());var OM="3.3.1",Bf={};function Ut(e){return Mf.apply(this,arguments)}function Mf(){return Mf=(0,If.default)(za.default.mark(function e(r){var t,n,a=arguments;return za.default.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return t=a.length>1&&a[1]!==void 0?a[1]:null,n=a.length>2&&a[2]!==void 0?a[2]:{},t&&(r=og(r,t,n)),Bf[r]=Bf[r]||IM(r),o.next=6,Bf[r];case 6:return o.abrupt("return",o.sent);case 7:case"end":return o.stop()}},e)})),Mf.apply(this,arguments)}function og(e,r,t){if(e.startsWith("http"))return e;var n=t.modules||{};return n[e]?n[e]:er?t.CDN?(tg(t.CDN.startsWith("http")),"".concat(t.CDN,"/").concat(r,"@").concat(OM,"/dist/libs/").concat(e)):Va?"../src/libs/".concat(e):"modules/".concat(r,"/src/libs/").concat(e):"modules/".concat(r,"/dist/libs/").concat(e)}function IM(e){return Of.apply(this,arguments)}function Of(){return Of=(0,If.default)(za.default.mark(function e(r){var t,n,a;return za.default.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(!r.endsWith("wasm")){o.next=7;break}return o.next=3,fetch(r);case 3:return t=o.sent,o.next=6,t.arrayBuffer();case 6:return o.abrupt("return",o.sent);case 7:if(er){o.next=20;break}if(o.prev=8,o.t0=en&&en.requireFromFile,!o.t0){o.next=14;break}return o.next=13,en.requireFromFile(r);case 13:o.t0=o.sent;case 14:return o.abrupt("return",o.t0);case 17:return o.prev=17,o.t1=o.catch(8),o.abrupt("return",null);case 20:if(!Va){o.next=22;break}return o.abrupt("return",importScripts(r));case 22:return o.next=24,fetch(r);case 24:return n=o.sent,o.next=27,n.text();case 27:return a=o.sent,o.abrupt("return",PM(a,r));case 29:case"end":return o.stop()}},e,null,[[8,17]])})),Of.apply(this,arguments)}function PM(e,r){if(!er)return en.requireFromString&&en.requireFromString(e,r);if(Va)return eval.call(ag,e),null;var t=document.createElement("script");t.id=r;try{t.appendChild(document.createTextNode(e))}catch{t.text=e}return document.body.appendChild(t),null}function ug(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:5;if(typeof e=="string")return e.slice(0,r);if(ArrayBuffer.isView(e))return sg(e.buffer,e.byteOffset,r);if(e instanceof ArrayBuffer){var t=0;return sg(e,t,r)}return""}function sg(e,r,t){if(e.byteLength<=r+t)return"";for(var n=new DataView(e),a="",i=0;i<t;i++)a+=String.fromCharCode(n.getUint8(r+i));return a}function Pf(e){try{return JSON.parse(e)}catch{throw new Error('Failed to parse JSON from data starting with "'.concat(ug(e),'"'))}}function Wa(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];var n=r,a=n&&n.length>1&&n[0].constructor||null;if(!a)throw new Error('"concatenateTypedArrays" - incorrect quantity of arguments or arguments have incompatible data types');for(var i=n.reduce(function(c,h){return c+h.length},0),o=new a(i),s=0,u=0,f=n;u<f.length;u++){var l=f[u];o.set(l,s),s+=l.length}return o}function tn(e,r,t){var n=t!==void 0?new Uint8Array(e).subarray(r,r+t):new Uint8Array(e).subarray(r),a=new Uint8Array(n);return a.buffer}function Tr(e,r){return te(e>=0),te(r>0),e+(r-1)&~(r-1)}function Rf(e,r,t){var n;if(e instanceof ArrayBuffer)n=new Uint8Array(e);else{var a=e.byteOffset,i=e.byteLength;n=new Uint8Array(e.buffer||e.arrayBuffer,a,i)}return r.set(n,t),t+Tr(n.byteLength,4)}var mg=m(W()),vg=m(H()),gg=m(z());var cg=m(H()),hg=m(z());var fg=m(H()),lg=m(z());function Ja(){var e;if(typeof window<"u"&&window.performance)e=window.performance.now();else if(typeof process<"u"&&process.hrtime){var r=process.hrtime();e=r[0]*1e3+r[1]/1e6}else e=Date.now();return e}var lo=function(){function e(r,t){(0,fg.default)(this,e),A(this,"name",void 0),A(this,"type",void 0),A(this,"sampleSize",1),A(this,"time",void 0),A(this,"count",void 0),A(this,"samples",void 0),A(this,"lastTiming",void 0),A(this,"lastSampleTime",void 0),A(this,"lastSampleCount",void 0),A(this,"_count",0),A(this,"_time",0),A(this,"_samples",0),A(this,"_startTime",0),A(this,"_timerPending",!1),this.name=r,this.type=t,this.reset()}return(0,lg.default)(e,[{key:"setSampleSize",value:function(t){return this.sampleSize=t,this}},{key:"incrementCount",value:function(){return this.addCount(1),this}},{key:"decrementCount",value:function(){return this.subtractCount(1),this}},{key:"addCount",value:function(t){return this._count+=t,this._samples++,this._checkSampling(),this}},{key:"subtractCount",value:function(t){return this._count-=t,this._samples++,this._checkSampling(),this}},{key:"addTime",value:function(t){return this._time+=t,this.lastTiming=t,this._samples++,this._checkSampling(),this}},{key:"timeStart",value:function(){return this._startTime=Ja(),this._timerPending=!0,this}},{key:"timeEnd",value:function(){return this._timerPending?(this.addTime(Ja()-this._startTime),this._timerPending=!1,this._checkSampling(),this):this}},{key:"getSampleAverageCount",value:function(){return this.sampleSize>0?this.lastSampleCount/this.sampleSize:0}},{key:"getSampleAverageTime",value:function(){return this.sampleSize>0?this.lastSampleTime/this.sampleSize:0}},{key:"getSampleHz",value:function(){return this.lastSampleTime>0?this.sampleSize/(this.lastSampleTime/1e3):0}},{key:"getAverageCount",value:function(){return this.samples>0?this.count/this.samples:0}},{key:"getAverageTime",value:function(){return this.samples>0?this.time/this.samples:0}},{key:"getHz",value:function(){return this.time>0?this.samples/(this.time/1e3):0}},{key:"reset",value:function(){return this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this}},{key:"_checkSampling",value:function(){this._samples===this.sampleSize&&(this.lastSampleTime=this._time,this.lastSampleCount=this._count,this.count+=this._count,this.time+=this._time,this.samples+=this._samples,this._time=0,this._count=0,this._samples=0)}}]),e}();var rn=function(){function e(r){(0,cg.default)(this,e),A(this,"id",void 0),A(this,"stats",{}),this.id=r.id,this.stats={},this._initializeStats(r.stats),Object.seal(this)}return(0,hg.default)(e,[{key:"get",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"count";return this._getOrCreate({name:t,type:n})}},{key:"size",get:function(){return Object.keys(this.stats).length}},{key:"reset",value:function(){for(var t in this.stats)this.stats[t].reset();return this}},{key:"forEach",value:function(t){for(var n in this.stats)t(this.stats[n])}},{key:"getTable",value:function(){var t={};return this.forEach(function(n){t[n.name]={time:n.time||0,count:n.count||0,average:n.getAverageTime()||0,hz:n.getHz()||0}}),t}},{key:"_initializeStats",value:function(){var t=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];n.forEach(function(a){return t._getOrCreate(a)})}},{key:"_getOrCreate",value:function(t){if(!t||!t.name)return null;var n=t.name,a=t.type;return this.stats[n]||(t instanceof lo?this.stats[n]=t:this.stats[n]=new lo(n,a)),this.stats[n]}}]),e}();function dg(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function pg(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?dg(Object(t),!0).forEach(function(n){(0,mg.default)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):dg(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var RM="Queued Requests",FM="Active Requests",LM="Cancelled Requests",kM="Queued Requests Ever",DM="Active Requests Ever",GM={id:"request-scheduler",throttleRequests:!0,maxRequests:6},qa=function(){function e(){(0,vg.default)(this,e);var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};A(this,"props",void 0),A(this,"stats",void 0),A(this,"activeRequestCount",0),A(this,"requestQueue",[]),A(this,"requestMap",new Map),A(this,"deferredUpdate",null),this.props=pg(pg({},GM),r),this.stats=new rn({id:this.props.id}),this.stats.get(RM),this.stats.get(FM),this.stats.get(LM),this.stats.get(kM),this.stats.get(DM)}return(0,gg.default)(e,[{key:"scheduleRequest",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){return 0};if(!this.props.throttleRequests)return Promise.resolve({done:function(){}});if(this.requestMap.has(t))return this.requestMap.get(t);var a={handle:t,priority:0,getPriority:n},i=new Promise(function(o){return a.resolve=o,a});return this.requestQueue.push(a),this.requestMap.set(t,i),this._issueNewRequests(),i}},{key:"_issueRequest",value:function(t){var n=this,a=t.handle,i=t.resolve,o=!1,s=function(){o||(o=!0,n.requestMap.delete(a),n.activeRequestCount--,n._issueNewRequests())};return this.activeRequestCount++,i?i({done:s}):Promise.resolve({done:s})}},{key:"_issueNewRequests",value:function(){var t=this;this.deferredUpdate||(this.deferredUpdate=setTimeout(function(){return t._issueNewRequestsAsync()},0))}},{key:"_issueNewRequestsAsync",value:function(){this.deferredUpdate=null;var t=Math.max(this.props.maxRequests-this.activeRequestCount,0);if(t!==0){this._updateAllRequests();for(var n=0;n<t;++n){var a=this.requestQueue.shift();a&&this._issueRequest(a)}}}},{key:"_updateAllRequests",value:function(){for(var t=this.requestQueue,n=0;n<t.length;++n){var a=t[n];this._updateRequest(a)||(t.splice(n,1),this.requestMap.delete(a.handle),n--)}t.sort(function(i,o){return i.priority-o.priority})}},{key:"_updateRequest",value:function(t){return t.priority=t.getPriority(t.handle),t.priority<0?(t.resolve(null),!1):!0}}]),e}();var Jn={};Ot(Jn,{dirname:()=>UM,filename:()=>NM,join:()=>jM});function NM(e){var r=e&&e.lastIndexOf("/");return r>=0?e.substr(r+1):""}function UM(e){var r=e&&e.lastIndexOf("/");return r>=0?e.substr(0,r):""}function jM(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];var n="/";return r=r.map(function(a,i){return i&&(a=a.replace(new RegExp("^".concat(n)),"")),i!==r.length-1&&(a=a.replace(new RegExp("".concat(n,"$")),"")),a}),r.join(n)}var HM=globalThis._parseImageNode,Ff=typeof Image<"u",Lf=typeof ImageBitmap<"u",VM=Boolean(HM),kf=$r?!0:VM;function yg(e){switch(e){case"auto":return Lf||Ff||kf;case"imagebitmap":return Lf;case"image":return Ff;case"data":return kf;default:throw new Error("@loaders.gl/images: image ".concat(e," not supported in this environment"))}}function Ag(){if(Lf)return"imagebitmap";if(Ff)return"image";if(kf)return"data";throw new Error("Install '@loaders.gl/polyfills' to parse images under Node.js")}var _g=m(Xe());function zM(e){var r=WM(e);if(!r)throw new Error("Not an image");return r}function bg(e){switch(zM(e)){case"data":return e;case"image":case"imagebitmap":var r=document.createElement("canvas"),t=r.getContext("2d");if(!t)throw new Error("getImageData");return r.width=e.width,r.height=e.height,t.drawImage(e,0,0),t.getImageData(0,0,e.width,e.height);default:throw new Error("getImageData")}}function WM(e){return typeof ImageBitmap<"u"&&e instanceof ImageBitmap?"imagebitmap":typeof Image<"u"&&e instanceof Image?"image":e&&(0,_g.default)(e)==="object"&&e.data&&e.width&&e.height?"data":null}var Uf=m(X()),Xa=m(Y());var JM=/^data:image\/svg\+xml/,qM=/\.svg((\?|#).*)?$/;function co(e){return e&&(JM.test(e)||qM.test(e))}function Tg(e,r){if(co(r)){var t=new TextDecoder,n=t.decode(e);try{typeof unescape=="function"&&typeof encodeURIComponent=="function"&&(n=unescape(encodeURIComponent(n)))}catch(i){throw new Error(i.message)}var a="data:image/svg+xml;base64,".concat(btoa(n));return a}return Df(e,r)}function Df(e,r){if(co(r))throw new Error("SVG cannot be parsed directly to imagebitmap");return new Blob([new Uint8Array(e)])}function Ya(e,r,t){return Gf.apply(this,arguments)}function Gf(){return Gf=(0,Uf.default)(Xa.default.mark(function e(r,t,n){var a,i,o;return Xa.default.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return a=Tg(r,n),i=self.URL||self.webkitURL,o=typeof a!="string"&&i.createObjectURL(a),u.prev=3,u.next=6,XM(o||a,t);case 6:return u.abrupt("return",u.sent);case 7:return u.prev=7,o&&i.revokeObjectURL(o),u.finish(7);case 10:case"end":return u.stop()}},e,null,[[3,,7,10]])})),Gf.apply(this,arguments)}function XM(e,r){return Nf.apply(this,arguments)}function Nf(){return Nf=(0,Uf.default)(Xa.default.mark(function e(r,t){var n;return Xa.default.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(n=new Image,n.src=r,!(t.image&&t.image.decode&&n.decode)){i.next=6;break}return i.next=5,n.decode();case 5:return i.abrupt("return",n);case 6:return i.next=8,new Promise(function(o,s){try{n.onload=function(){return o(n)},n.onerror=function(u){return s(new Error("Could not load image ".concat(r,": ").concat(u)))}}catch(u){s(u)}});case 8:return i.abrupt("return",i.sent);case 9:case"end":return i.stop()}},e)})),Nf.apply(this,arguments)}var Vf=m(X()),Ka=m(Y());var YM={},xg=!0;function zf(e,r,t){return jf.apply(this,arguments)}function jf(){return jf=(0,Vf.default)(Ka.default.mark(function e(r,t,n){var a,i,o;return Ka.default.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(!co(n)){u.next=7;break}return u.next=3,Ya(r,t,n);case 3:i=u.sent,a=i,u.next=8;break;case 7:a=Df(r,n);case 8:return o=t&&t.imagebitmap,u.next=11,KM(a,o);case 11:return u.abrupt("return",u.sent);case 12:case"end":return u.stop()}},e)})),jf.apply(this,arguments)}function KM(e){return Hf.apply(this,arguments)}function Hf(){return Hf=(0,Vf.default)(Ka.default.mark(function e(r){var t,n=arguments;return Ka.default.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(t=n.length>1&&n[1]!==void 0?n[1]:null,(QM(t)||!xg)&&(t=null),!t){i.next=13;break}return i.prev=3,i.next=6,createImageBitmap(r,t);case 6:return i.abrupt("return",i.sent);case 9:i.prev=9,i.t0=i.catch(3),console.warn(i.t0),xg=!1;case 13:return i.next=15,createImageBitmap(r);case 15:return i.abrupt("return",i.sent);case 16:case"end":return i.stop()}},e,null,[[3,9]])})),Hf.apply(this,arguments)}function QM(e){for(var r in e||YM)return!1;return!0}var Eg=m(X()),Wf=m(Y());var jt=!1,Qa=!0;function nn(e){var r=Za(e);return ZM(r)||tO(r)||$M(r)||eO(r)}function ZM(e){var r=Za(e),t=r.byteLength>=24&&r.getUint32(0,jt)===2303741511;return t?{mimeType:"image/png",width:r.getUint32(16,jt),height:r.getUint32(20,jt)}:null}function $M(e){var r=Za(e),t=r.byteLength>=10&&r.getUint32(0,jt)===1195984440;return t?{mimeType:"image/gif",width:r.getUint16(6,Qa),height:r.getUint16(8,Qa)}:null}function eO(e){var r=Za(e),t=r.byteLength>=14&&r.getUint16(0,jt)===16973&&r.getUint32(2,Qa)===r.byteLength;return t?{mimeType:"image/bmp",width:r.getUint32(18,Qa),height:r.getUint32(22,Qa)}:null}function tO(e){var r=Za(e),t=r.byteLength>=3&&r.getUint16(0,jt)===65496&&r.getUint8(2)===255;if(!t)return null;for(var n=rO(),a=n.tableMarkers,i=n.sofMarkers,o=2;o+9<r.byteLength;){var s=r.getUint16(o,jt);if(i.has(s))return{mimeType:"image/jpeg",height:r.getUint16(o+5,jt),width:r.getUint16(o+7,jt)};if(!a.has(s))return null;o+=2,o+=r.getUint16(o,jt)}return null}function rO(){for(var e=new Set([65499,65476,65484,65501,65534]),r=65504;r<65520;++r)e.add(r);var t=new Set([65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487,65502]);return{tableMarkers:e,sofMarkers:t}}function Za(e){if(e instanceof DataView)return e;if(ArrayBuffer.isView(e))return new DataView(e.buffer);if(e instanceof ArrayBuffer)return new DataView(e);throw new Error("toDataView")}function qf(e,r){return Jf.apply(this,arguments)}function Jf(){return Jf=(0,Eg.default)(Wf.default.mark(function e(r,t){var n,a,i;return Wf.default.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return n=nn(r)||{},a=n.mimeType,i=globalThis._parseImageNode,te(i),s.next=5,i(r,a);case 5:return s.abrupt("return",s.sent);case 6:case"end":return s.stop()}},e)})),Jf.apply(this,arguments)}function Kf(e,r,t){return Yf.apply(this,arguments)}function Yf(){return Yf=(0,Sg.default)(Xf.default.mark(function e(r,t,n){var a,i,o,s,u,f;return Xf.default.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:t=t||{},a=t.image||{},i=a.type||"auto",o=n||{},s=o.url,u=nO(i),c.t0=u,c.next=c.t0==="imagebitmap"?8:c.t0==="image"?12:c.t0==="data"?16:20;break;case 8:return c.next=10,zf(r,t,s);case 10:return f=c.sent,c.abrupt("break",21);case 12:return c.next=14,Ya(r,t,s);case 14:return f=c.sent,c.abrupt("break",21);case 16:return c.next=18,qf(r,t);case 18:return f=c.sent,c.abrupt("break",21);case 20:te(!1);case 21:return i==="data"&&(f=bg(f)),c.abrupt("return",f);case 23:case"end":return c.stop()}},e)})),Yf.apply(this,arguments)}function nO(e){switch(e){case"auto":case"data":return Ag();default:return yg(e),e}}var aO=["png","jpg","jpeg","gif","webp","bmp","ico","svg"],iO=["image/png","image/jpeg","image/gif","image/webp","image/bmp","image/vnd.microsoft.icon","image/svg+xml"],oO={image:{type:"auto",decode:!0}},tr={id:"image",module:"images",name:"Images",version:Zv,mimeTypes:iO,extensions:aO,parse:Kf,tests:[function(e){return Boolean(nn(new DataView(e)))}],options:oO};var sO=["image/png","image/jpeg","image/gif"],Qf={};function Zf(e){return Qf[e]===void 0&&(Qf[e]=uO(e)),Qf[e]}function uO(e){switch(e){case"image/webp":return fO();case"image/svg":return $r;default:if(!$r){var r=globalThis._parseImageNode;return Boolean(r)&&sO.includes(e)}return!0}}function fO(){if(!$r)return!1;try{var e=document.createElement("canvas");return e.toDataURL("image/webp").indexOf("data:image/webp")===0}catch{return!1}}function Cg(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function qn(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?Cg(Object(t),!0).forEach(function(n){(0,wg.default)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Cg(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function lO(e){var r=cO();return function(){var n=(0,rl.default)(e),a;if(r){var i=(0,rl.default)(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return(0,Ig.default)(this,a)}}function cO(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var ei=function(e){(0,Og.default)(t,e);var r=lO(t);function t(n){var a;return(0,Bg.default)(this,t),a=r.call(this),A((0,tl.default)(a),"props",void 0),A((0,tl.default)(a),"fetch",void 0),a.props=ti(n),a.fetch=Xn(n),a}return(0,Mg.default)(t,[{key:"getMetadata",value:function(){var n=(0,el.default)($a.default.mark(function i(){return $a.default.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:throw new Error("ImageSource.getMetadata not implemented");case 1:case"end":return s.stop()}},i)}));function a(){return n.apply(this,arguments)}return a}()},{key:"getImage",value:function(){var n=(0,el.default)($a.default.mark(function i(o){var s,u,f,l;return $a.default.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return s=this.getGranularParameters(o),u=this.getURLFromTemplate(s),h.next=4,this.fetch(u);case 4:return f=h.sent,h.next=7,f.arrayBuffer();case 7:return l=h.sent,h.next=10,tr.parse(l);case 10:return h.abrupt("return",h.sent);case 11:case"end":return h.stop()}},i,this)}));function a(i){return n.apply(this,arguments)}return a}()},{key:"getGranularParameters",value:function(a){var i=(0,$f.default)(a.bbox,4),o=i[0],s=i[1],u=i[2],f=i[3];return qn(qn({},a),{},{east:o,north:s,south:f,west:u})}},{key:"getURLFromTemplate",value:function(a){for(var i=this.props.url,o=0,s=Object.entries(a);o<s.length;o++){var u=(0,$f.default)(s[o],2),f=u[0],l=u[1];i=i.replace("${".concat(f,"}"),String(l)),i=i.replace("{".concat(f,"}"),String(l))}return i}}]),t}($t);A(ei,"type","template");A(ei,"testURL",function(e){return e.toLowerCase().includes("{")});function Xn(e){var r=e?.fetch;if(r&&typeof r=="function")return function(n,a){return r(n,a)};var t=e?.fetch;return t&&typeof t!="function"?function(n){return fetch(n,t)}:function(n){return fetch(n)}}function ti(e){return qn(qn({},e),{},{loadOptions:qn(qn({},e.loadOptions),{},{fetch:Xn(e.loadOptions)})})}var jg=m(ce()),an=m(X()),Hg=m(W()),Vg=m(H()),zg=m(z()),ri=m(nt()),Wg=m(Te()),Jg=m(xe()),sl=m(ye()),At=m(Y());var Fg=m(X()),Lg=m(W()),nl=m(Y());function Pg(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function Rg(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?Pg(Object(t),!0).forEach(function(n){(0,Lg.default)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Pg(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var al=Rg(Rg({},Zr),{},{id:"wms-feature-info",name:"WMS FeatureInfo",parse:function(){var e=(0,Fg.default)(nl.default.mark(function t(n,a){return nl.default.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",xf(new TextDecoder().decode(n),a));case 1:case"end":return o.stop()}},t)}));function r(t,n){return e.apply(this,arguments)}return r}(),parseTextSync:function(r,t){return xf(r,t)}});var Gg=m(X()),Ng=m(W()),il=m(Y());function kg(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function Dg(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?kg(Object(t),!0).forEach(function(n){(0,Ng.default)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):kg(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var ol=Dg(Dg({},Zr),{},{id:"wms-layer-description",name:"WMS DescribeLayer",parse:function(){var e=(0,Gg.default)(il.default.mark(function t(n,a){return il.default.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",Ef(new TextDecoder().decode(n),a));case 1:case"end":return o.stop()}},t)}));function r(t,n){return e.apply(this,arguments)}return r}(),parseTextSync:function(r,t){return Ef(r,t)}});function Ug(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function Ze(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?Ug(Object(t),!0).forEach(function(n){(0,Hg.default)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Ug(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function hO(e){var r=dO();return function(){var n=(0,sl.default)(e),a;if(r){var i=(0,sl.default)(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return(0,Jg.default)(this,a)}}function dO(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var ni=function(e){(0,Wg.default)(t,e);var r=hO(t);function t(n){var a;(0,Vg.default)(this,t);var i;return a=r.call(this),A((0,ri.default)(a),"props",void 0),A((0,ri.default)(a),"fetch",void 0),A((0,ri.default)(a),"capabilities",null),A((0,ri.default)(a),"loaders",[tr,Wn,Zr,al,ol]),a.props=ti(n),a.fetch=Xn(a.props),a.props.loadOptions=Ze(Ze({},a.props.loadOptions),{},{wms:Ze(Ze({},(i=a.props.loadOptions)===null||i===void 0?void 0:i.wms),{},{throwOnError:!0})}),a}return(0,zg.default)(t,[{key:"getMetadata",value:function(){return this.getCapabilities()}},{key:"getImage",value:function(a){return this.getMap(a)}},{key:"getCapabilities",value:function(){var n=(0,an.default)(At.default.mark(function i(o,s){var u,f,l,c;return At.default.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return u=this.getCapabilitiesURL(o,s),d.next=3,this.fetch(u);case 3:return f=d.sent,d.next=6,f.arrayBuffer();case 6:return l=d.sent,this._checkResponse(f,l),d.next=10,Zr.parse(l,this.props.loadOptions);case 10:return c=d.sent,this.capabilities=c,d.abrupt("return",c);case 13:case"end":return d.stop()}},i,this)}));function a(i,o){return n.apply(this,arguments)}return a}()},{key:"getMap",value:function(){var n=(0,an.default)(At.default.mark(function i(o,s){var u,f,l;return At.default.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return u=this.getMapURL(o,s),h.next=3,this.fetch(u);case 3:return f=h.sent,h.next=6,f.arrayBuffer();case 6:return l=h.sent,this._checkResponse(f,l),h.prev=8,h.next=11,tr.parse(l,this.props.loadOptions);case 11:return h.abrupt("return",h.sent);case 14:throw h.prev=14,h.t0=h.catch(8),this._parseError(l);case 17:case"end":return h.stop()}},i,this,[[8,14]])}));function a(i,o){return n.apply(this,arguments)}return a}()},{key:"getFeatureInfo",value:function(){var n=(0,an.default)(At.default.mark(function i(o,s){var u,f,l;return At.default.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return u=this.getFeatureInfoURL(o,s),h.next=3,this.fetch(u);case 3:return f=h.sent,h.next=6,f.arrayBuffer();case 6:return l=h.sent,this._checkResponse(f,l),h.next=10,al.parse(l,this.props.loadOptions);case 10:return h.abrupt("return",h.sent);case 11:case"end":return h.stop()}},i,this)}));function a(i,o){return n.apply(this,arguments)}return a}()},{key:"getFeatureInfoText",value:function(){var n=(0,an.default)(At.default.mark(function i(o,s){var u,f,l;return At.default.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return o=Ze(Ze({},o),{},{info_format:"text/plain"}),u=this.getFeatureInfoURL(o,s),h.next=4,this.fetch(u);case 4:return f=h.sent,h.next=7,f.arrayBuffer();case 7:return l=h.sent,this._checkResponse(f,l),h.abrupt("return",new TextDecoder().decode(l));case 10:case"end":return h.stop()}},i,this)}));function a(i,o){return n.apply(this,arguments)}return a}()},{key:"describeLayer",value:function(){var n=(0,an.default)(At.default.mark(function i(o,s){var u,f,l;return At.default.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return u=this.describeLayerURL(o,s),h.next=3,this.fetch(u);case 3:return f=h.sent,h.next=6,f.arrayBuffer();case 6:return l=h.sent,this._checkResponse(f,l),h.next=10,ol.parse(l,this.props.loadOptions);case 10:return h.abrupt("return",h.sent);case 11:case"end":return h.stop()}},i,this)}));function a(i,o){return n.apply(this,arguments)}return a}()},{key:"getLegendGraphic",value:function(){var n=(0,an.default)(At.default.mark(function i(o,s){var u,f,l;return At.default.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return u=this.getLegendGraphicURL(o,s),h.next=3,this.fetch(u);case 3:return f=h.sent,h.next=6,f.arrayBuffer();case 6:return l=h.sent,this._checkResponse(f,l),h.prev=8,h.next=11,tr.parse(l,this.props.loadOptions);case 11:return h.abrupt("return",h.sent);case 14:throw h.prev=14,h.t0=h.catch(8),this._parseError(l);case 17:case"end":return h.stop()}},i,this,[[8,14]])}));function a(i,o){return n.apply(this,arguments)}return a}()},{key:"getCapabilitiesURL",value:function(a,i){var o=Ze(Ze({service:"WMS",version:"1.1.1",request:"GetCapabilities"},a),i);return this._getWMSUrl(o,i)}},{key:"getMapURL",value:function(a,i){var o=Ze(Ze({service:"WMS",version:"1.1.1",request:"GetMap",styles:void 0,srs:"EPSG:4326",format:"image/png"},a),i);return this._getWMSUrl(o,i)}},{key:"getFeatureInfoURL",value:function(a,i){var o=Ze(Ze({service:"WMS",version:"1.1.1",request:"GetFeatureInfo",srs:"EPSG:4326",format:"image/png",info_format:"text/plain",styles:void 0},a),i);return this._getWMSUrl(o,i)}},{key:"describeLayerURL",value:function(a,i){var o=Ze(Ze({service:"WMS",version:"1.1.1",request:"DescribeLayer"},a),i);return this._getWMSUrl(o,i)}},{key:"getLegendGraphicURL",value:function(a,i){var o=Ze(Ze({service:"WMS",version:"1.1.1",request:"GetLegendGraphic"},a),i);return this._getWMSUrl(o,i)}},{key:"_getWMSUrl",value:function(a,i){for(var o=this.props.url,s=!0,u=0,f=Object.entries(a);u<f.length;u++){var l=(0,jg.default)(f[u],2),c=l[0],h=l[1];o+=s?"?":"&",s=!1,Array.isArray(h)?o+="".concat(c.toUpperCase(),"=").concat(h.join(",")):o+="".concat(c.toUpperCase(),"=").concat(h?String(h):"")}return encodeURI(o)}},{key:"_checkResponse",value:function(a,i){var o=a.headers["content-type"];if(!a.ok||Wn.mimeTypes.includes(o)){var s=Wn.parseSync(i,this.props.loadOptions);throw new Error(s)}}},{key:"_parseError",value:function(a){var i=Wn.parseSync(a,this.props.loadOptions);return new Error(i)}}]),t}($t);A(ni,"type","wms");A(ni,"testURL",function(e){return e.toLowerCase().includes("wms")});var qg=m(ce()),ai=m(X()),Xg=m(H()),Yg=m(z()),ul=m(nt()),Kg=m(Te()),Qg=m(xe()),fl=m(ye()),rr=m(Y());function pO(e){var r=mO();return function(){var n=(0,fl.default)(e),a;if(r){var i=(0,fl.default)(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return(0,Qg.default)(this,a)}}function mO(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var ho=function(e){(0,Kg.default)(t,e);var r=pO(t);function t(n){var a;return(0,Xg.default)(this,t),a=r.call(this),A((0,ul.default)(a),"props",void 0),A((0,ul.default)(a),"fetch",void 0),a.props=ti(n),a.fetch=Xn(a.props),a}return(0,Yg.default)(t,[{key:"getMetadata",value:function(){var n=(0,ai.default)(rr.default.mark(function i(){return rr.default.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,this.info();case 2:return s.abrupt("return",s.sent);case 3:case"end":return s.stop()}},i,this)}));function a(){return n.apply(this,arguments)}return a}()},{key:"getImage",value:function(){var n=(0,ai.default)(rr.default.mark(function i(o){return rr.default.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:throw new Error("not implemented");case 1:case"end":return u.stop()}},i)}));function a(i){return n.apply(this,arguments)}return a}()},{key:"info",value:function(){var n=(0,ai.default)(rr.default.mark(function i(){return rr.default.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:throw new Error("not implemented");case 1:case"end":return s.stop()}},i)}));function a(){return n.apply(this,arguments)}return a}()},{key:"exportImage",value:function(a){throw new Error("not implemented")}},{key:"infoURL",value:function(a){return this.props.url}},{key:"exportImageURL",value:function(a){return this.props.url}},{key:"getUrl",value:function(a,i){for(var o="".concat(this.props.url),s=!0,u=0,f=Object.entries(a);u<f.length;u++){var l=(0,qg.default)(f[u],2),c=l[0],h=l[1];o+=s?"?":"&",s=!1,Array.isArray(h)?o+="".concat(c.toUpperCase(),"=").concat(h.join(",")):o+="".concat(c.toUpperCase(),"=").concat(h?String(h):"")}return o}},{key:"checkResponse",value:function(){var n=(0,ai.default)(rr.default.mark(function i(o){return rr.default.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(o.ok){u.next=2;break}throw new Error("error");case 2:case"end":return u.stop()}},i)}));function a(i){return n.apply(this,arguments)}return a}()}]),t}($t);A(ho,"type","arcgis-image-server");A(ho,"testURL",function(e){return e.toLowerCase().includes("ImageServer")});function vO(e,r){var t=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=gO(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(f){throw f},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,o=!1,s;return{s:function(){t=t.call(e)},n:function(){var f=t.next();return i=f.done,f},e:function(f){o=!0,s=f},f:function(){try{!i&&t.return!=null&&t.return()}finally{if(o)throw s}}}}function gO(e,r){if(e){if(typeof e=="string")return Zg(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Zg(e,r)}}function Zg(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var yO=[ni,ho,ei];function ll(e){var r=e.type,t=r===void 0?"auto":r,n=t==="auto"?AO(e.url):t;switch(n){case"template":return new ei(e);case"wms":return new ni(e);default:throw new Error("Not a valid image source type")}}function AO(e){var r=vO(yO),t;try{for(r.s();!(t=r.n()).done;){var n=t.value;if(n.testURL&&n.testURL(e))return n.type}}catch(a){r.e(a)}finally{r.f()}return"wms"}function Yn(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function cl(e){if(Array.isArray(e))return Yn(e)}function hl(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function ii(e,r){if(e){if(typeof e=="string")return Yn(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Yn(e,r)}}function dl(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Kn(e){return cl(e)||hl(e)||ii(e)||dl()}function pl(e){if(Array.isArray(e))return e}function ml(e,r){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var n=[],a=!0,i=!1,o,s;try{for(t=t.call(e);!(a=(o=t.next()).done)&&(n.push(o.value),!(r&&n.length===r));a=!0);}catch(u){i=!0,s=u}finally{try{!a&&t.return!=null&&t.return()}finally{if(i)throw s}}return n}}function vl(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $e(e,r){return pl(e)||ml(e,r)||ii(e,r)||vl()}function gl(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function oy(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function yl(e,r,t){return r&&oy(e.prototype,r),t&&oy(e,t),e}function Ee(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var Ae=1e-6,Qe=typeof Float32Array<"u"?Float32Array:Array;var A4=Math.PI/180;Math.hypot||(Math.hypot=function(){for(var e=0,r=arguments.length;r--;)e+=arguments[r]*arguments[r];return Math.sqrt(e)});function wO(){var e=new Qe(4);return Qe!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0),e}function sy(e,r,t){return e[0]=r[0]+t[0],e[1]=r[1]+t[1],e[2]=r[2]+t[2],e[3]=r[3]+t[3],e}function po(e,r,t){return e[0]=r[0]*t,e[1]=r[1]*t,e[2]=r[2]*t,e[3]=r[3]*t,e}function uy(e){var r=e[0],t=e[1],n=e[2],a=e[3];return Math.hypot(r,t,n,a)}function fy(e){var r=e[0],t=e[1],n=e[2],a=e[3];return r*r+t*t+n*n+a*a}function ly(e,r){var t=r[0],n=r[1],a=r[2],i=r[3],o=t*t+n*n+a*a+i*i;return o>0&&(o=1/Math.sqrt(o)),e[0]=t*o,e[1]=n*o,e[2]=a*o,e[3]=i*o,e}function cy(e,r){return e[0]*r[0]+e[1]*r[1]+e[2]*r[2]+e[3]*r[3]}function hy(e,r,t,n){var a=r[0],i=r[1],o=r[2],s=r[3];return e[0]=a+n*(t[0]-a),e[1]=i+n*(t[1]-i),e[2]=o+n*(t[2]-o),e[3]=s+n*(t[3]-s),e}function mo(e,r,t){var n=r[0],a=r[1],i=r[2],o=r[3];return e[0]=t[0]*n+t[4]*a+t[8]*i+t[12]*o,e[1]=t[1]*n+t[5]*a+t[9]*i+t[13]*o,e[2]=t[2]*n+t[6]*a+t[10]*i+t[14]*o,e[3]=t[3]*n+t[7]*a+t[11]*i+t[15]*o,e}function dy(e,r,t){var n=r[0],a=r[1],i=r[2],o=t[0],s=t[1],u=t[2],f=t[3],l=f*n+s*i-u*a,c=f*a+u*n-o*i,h=f*i+o*a-s*n,d=-o*n-s*a-u*i;return e[0]=l*f+d*-o+c*-u-h*-s,e[1]=c*f+d*-s+h*-o-l*-u,e[2]=h*f+d*-u+l*-s-c*-o,e[3]=r[3],e}var _4=function(){var e=wO();return function(r,t,n,a,i,o){var s,u;for(t||(t=4),n||(n=0),a?u=Math.min(a*t+n,r.length):u=r.length,s=n;s<u;s+=t)e[0]=r[s],e[1]=r[s+1],e[2]=r[s+2],e[3]=r[s+3],i(e,e,o),r[s]=e[0],r[s+1]=e[1],r[s+2]=e[2],r[s+3]=e[3];return r}}();function Zn(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function xr(e,r){var t=mo([],r,e);return po(t,t,1/t[3]),t}function oi(e,r,t){return e<r?r:e>t?t:e}function BO(e){return Math.log(e)*Math.LOG2E}var vo=Math.log2||BO;function MO(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function py(e,r){if(e===r){var t=r[1],n=r[2],a=r[3],i=r[6],o=r[7],s=r[11];e[1]=r[4],e[2]=r[8],e[3]=r[12],e[4]=t,e[6]=r[9],e[7]=r[13],e[8]=n,e[9]=i,e[11]=r[14],e[12]=a,e[13]=o,e[14]=s}else e[0]=r[0],e[1]=r[4],e[2]=r[8],e[3]=r[12],e[4]=r[1],e[5]=r[5],e[6]=r[9],e[7]=r[13],e[8]=r[2],e[9]=r[6],e[10]=r[10],e[11]=r[14],e[12]=r[3],e[13]=r[7],e[14]=r[11],e[15]=r[15];return e}function go(e,r){var t=r[0],n=r[1],a=r[2],i=r[3],o=r[4],s=r[5],u=r[6],f=r[7],l=r[8],c=r[9],h=r[10],d=r[11],p=r[12],v=r[13],g=r[14],y=r[15],b=t*s-n*o,E=t*u-a*o,T=t*f-i*o,S=n*u-a*s,I=n*f-i*s,L=a*f-i*u,B=l*v-c*p,C=l*g-h*p,_=l*y-d*p,R=c*g-h*v,F=c*y-d*v,D=h*y-d*g,k=b*D-E*F+T*R+S*_-I*C+L*B;return k?(k=1/k,e[0]=(s*D-u*F+f*R)*k,e[1]=(a*F-n*D-i*R)*k,e[2]=(v*L-g*I+y*S)*k,e[3]=(h*I-c*L-d*S)*k,e[4]=(u*_-o*D-f*C)*k,e[5]=(t*D-a*_+i*C)*k,e[6]=(g*T-p*L-y*E)*k,e[7]=(l*L-h*T+d*E)*k,e[8]=(o*F-s*_+f*B)*k,e[9]=(n*_-t*F-i*B)*k,e[10]=(p*I-v*T+y*b)*k,e[11]=(c*T-l*I-d*b)*k,e[12]=(s*C-o*R-u*B)*k,e[13]=(t*R-n*C+a*B)*k,e[14]=(v*E-p*S-g*b)*k,e[15]=(l*S-c*E+h*b)*k,e):null}function my(e){var r=e[0],t=e[1],n=e[2],a=e[3],i=e[4],o=e[5],s=e[6],u=e[7],f=e[8],l=e[9],c=e[10],h=e[11],d=e[12],p=e[13],v=e[14],g=e[15],y=r*o-t*i,b=r*s-n*i,E=r*u-a*i,T=t*s-n*o,S=t*u-a*o,I=n*u-a*s,L=f*p-l*d,B=f*v-c*d,C=f*g-h*d,_=l*v-c*p,R=l*g-h*p,F=c*g-h*v;return y*F-b*R+E*_+T*C-S*B+I*L}function on(e,r,t){var n=r[0],a=r[1],i=r[2],o=r[3],s=r[4],u=r[5],f=r[6],l=r[7],c=r[8],h=r[9],d=r[10],p=r[11],v=r[12],g=r[13],y=r[14],b=r[15],E=t[0],T=t[1],S=t[2],I=t[3];return e[0]=E*n+T*s+S*c+I*v,e[1]=E*a+T*u+S*h+I*g,e[2]=E*i+T*f+S*d+I*y,e[3]=E*o+T*l+S*p+I*b,E=t[4],T=t[5],S=t[6],I=t[7],e[4]=E*n+T*s+S*c+I*v,e[5]=E*a+T*u+S*h+I*g,e[6]=E*i+T*f+S*d+I*y,e[7]=E*o+T*l+S*p+I*b,E=t[8],T=t[9],S=t[10],I=t[11],e[8]=E*n+T*s+S*c+I*v,e[9]=E*a+T*u+S*h+I*g,e[10]=E*i+T*f+S*d+I*y,e[11]=E*o+T*l+S*p+I*b,E=t[12],T=t[13],S=t[14],I=t[15],e[12]=E*n+T*s+S*c+I*v,e[13]=E*a+T*u+S*h+I*g,e[14]=E*i+T*f+S*d+I*y,e[15]=E*o+T*l+S*p+I*b,e}function sn(e,r,t){var n=t[0],a=t[1],i=t[2],o,s,u,f,l,c,h,d,p,v,g,y;return r===e?(e[12]=r[0]*n+r[4]*a+r[8]*i+r[12],e[13]=r[1]*n+r[5]*a+r[9]*i+r[13],e[14]=r[2]*n+r[6]*a+r[10]*i+r[14],e[15]=r[3]*n+r[7]*a+r[11]*i+r[15]):(o=r[0],s=r[1],u=r[2],f=r[3],l=r[4],c=r[5],h=r[6],d=r[7],p=r[8],v=r[9],g=r[10],y=r[11],e[0]=o,e[1]=s,e[2]=u,e[3]=f,e[4]=l,e[5]=c,e[6]=h,e[7]=d,e[8]=p,e[9]=v,e[10]=g,e[11]=y,e[12]=o*n+l*a+p*i+r[12],e[13]=s*n+c*a+v*i+r[13],e[14]=u*n+h*a+g*i+r[14],e[15]=f*n+d*a+y*i+r[15]),e}function $n(e,r,t){var n=t[0],a=t[1],i=t[2];return e[0]=r[0]*n,e[1]=r[1]*n,e[2]=r[2]*n,e[3]=r[3]*n,e[4]=r[4]*a,e[5]=r[5]*a,e[6]=r[6]*a,e[7]=r[7]*a,e[8]=r[8]*i,e[9]=r[9]*i,e[10]=r[10]*i,e[11]=r[11]*i,e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15],e}function vy(e,r,t,n){var a=n[0],i=n[1],o=n[2],s=Math.hypot(a,i,o),u,f,l,c,h,d,p,v,g,y,b,E,T,S,I,L,B,C,_,R,F,D,k,M;return s<Ae?null:(s=1/s,a*=s,i*=s,o*=s,u=Math.sin(t),f=Math.cos(t),l=1-f,c=r[0],h=r[1],d=r[2],p=r[3],v=r[4],g=r[5],y=r[6],b=r[7],E=r[8],T=r[9],S=r[10],I=r[11],L=a*a*l+f,B=i*a*l+o*u,C=o*a*l-i*u,_=a*i*l-o*u,R=i*i*l+f,F=o*i*l+a*u,D=a*o*l+i*u,k=i*o*l-a*u,M=o*o*l+f,e[0]=c*L+v*B+E*C,e[1]=h*L+g*B+T*C,e[2]=d*L+y*B+S*C,e[3]=p*L+b*B+I*C,e[4]=c*_+v*R+E*F,e[5]=h*_+g*R+T*F,e[6]=d*_+y*R+S*F,e[7]=p*_+b*R+I*F,e[8]=c*D+v*k+E*M,e[9]=h*D+g*k+T*M,e[10]=d*D+y*k+S*M,e[11]=p*D+b*k+I*M,r!==e&&(e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15]),e)}function yo(e,r,t){var n=Math.sin(t),a=Math.cos(t),i=r[4],o=r[5],s=r[6],u=r[7],f=r[8],l=r[9],c=r[10],h=r[11];return r!==e&&(e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15]),e[4]=i*a+f*n,e[5]=o*a+l*n,e[6]=s*a+c*n,e[7]=u*a+h*n,e[8]=f*a-i*n,e[9]=l*a-o*n,e[10]=c*a-s*n,e[11]=h*a-u*n,e}function gy(e,r,t){var n=Math.sin(t),a=Math.cos(t),i=r[0],o=r[1],s=r[2],u=r[3],f=r[8],l=r[9],c=r[10],h=r[11];return r!==e&&(e[4]=r[4],e[5]=r[5],e[6]=r[6],e[7]=r[7],e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15]),e[0]=i*a-f*n,e[1]=o*a-l*n,e[2]=s*a-c*n,e[3]=u*a-h*n,e[8]=i*n+f*a,e[9]=o*n+l*a,e[10]=s*n+c*a,e[11]=u*n+h*a,e}function Ao(e,r,t){var n=Math.sin(t),a=Math.cos(t),i=r[0],o=r[1],s=r[2],u=r[3],f=r[4],l=r[5],c=r[6],h=r[7];return r!==e&&(e[8]=r[8],e[9]=r[9],e[10]=r[10],e[11]=r[11],e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15]),e[0]=i*a+f*n,e[1]=o*a+l*n,e[2]=s*a+c*n,e[3]=u*a+h*n,e[4]=f*a-i*n,e[5]=l*a-o*n,e[6]=c*a-s*n,e[7]=h*a-u*n,e}function yy(e,r){var t=r[0],n=r[1],a=r[2],i=r[4],o=r[5],s=r[6],u=r[8],f=r[9],l=r[10];return e[0]=Math.hypot(t,n,a),e[1]=Math.hypot(i,o,s),e[2]=Math.hypot(u,f,l),e}function Ay(e,r){var t=r[0],n=r[1],a=r[2],i=r[3],o=t+t,s=n+n,u=a+a,f=t*o,l=n*o,c=n*s,h=a*o,d=a*s,p=a*u,v=i*o,g=i*s,y=i*u;return e[0]=1-c-p,e[1]=l+y,e[2]=h-g,e[3]=0,e[4]=l-y,e[5]=1-f-p,e[6]=d+v,e[7]=0,e[8]=h+g,e[9]=d-v,e[10]=1-f-c,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function _y(e,r,t,n,a,i,o){var s=1/(t-r),u=1/(a-n),f=1/(i-o);return e[0]=i*2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=i*2*u,e[6]=0,e[7]=0,e[8]=(t+r)*s,e[9]=(a+n)*u,e[10]=(o+i)*f,e[11]=-1,e[12]=0,e[13]=0,e[14]=o*i*2*f,e[15]=0,e}function OO(e,r,t,n,a){var i=1/Math.tan(r/2),o;return e[0]=i/t,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=i,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,a!=null&&a!==1/0?(o=1/(n-a),e[10]=(a+n)*o,e[14]=2*a*n*o):(e[10]=-1,e[14]=-2*n),e}var _o=OO;function IO(e,r,t,n,a,i,o){var s=1/(r-t),u=1/(n-a),f=1/(i-o);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*u,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*f,e[11]=0,e[12]=(r+t)*s,e[13]=(a+n)*u,e[14]=(o+i)*f,e[15]=1,e}var by=IO;function Ty(e,r,t,n){var a,i,o,s,u,f,l,c,h,d,p=r[0],v=r[1],g=r[2],y=n[0],b=n[1],E=n[2],T=t[0],S=t[1],I=t[2];return Math.abs(p-T)<Ae&&Math.abs(v-S)<Ae&&Math.abs(g-I)<Ae?MO(e):(l=p-T,c=v-S,h=g-I,d=1/Math.hypot(l,c,h),l*=d,c*=d,h*=d,a=b*h-E*c,i=E*l-y*h,o=y*c-b*l,d=Math.hypot(a,i,o),d?(d=1/d,a*=d,i*=d,o*=d):(a=0,i=0,o=0),s=c*o-h*i,u=h*a-l*o,f=l*i-c*a,d=Math.hypot(s,u,f),d?(d=1/d,s*=d,u*=d,f*=d):(s=0,u=0,f=0),e[0]=a,e[1]=s,e[2]=l,e[3]=0,e[4]=i,e[5]=u,e[6]=c,e[7]=0,e[8]=o,e[9]=f,e[10]=h,e[11]=0,e[12]=-(a*p+i*v+o*g),e[13]=-(s*p+u*v+f*g),e[14]=-(l*p+c*v+h*g),e[15]=1,e)}function bl(e,r){var t=e[0],n=e[1],a=e[2],i=e[3],o=e[4],s=e[5],u=e[6],f=e[7],l=e[8],c=e[9],h=e[10],d=e[11],p=e[12],v=e[13],g=e[14],y=e[15],b=r[0],E=r[1],T=r[2],S=r[3],I=r[4],L=r[5],B=r[6],C=r[7],_=r[8],R=r[9],F=r[10],D=r[11],k=r[12],M=r[13],O=r[14],P=r[15];return Math.abs(t-b)<=Ae*Math.max(1,Math.abs(t),Math.abs(b))&&Math.abs(n-E)<=Ae*Math.max(1,Math.abs(n),Math.abs(E))&&Math.abs(a-T)<=Ae*Math.max(1,Math.abs(a),Math.abs(T))&&Math.abs(i-S)<=Ae*Math.max(1,Math.abs(i),Math.abs(S))&&Math.abs(o-I)<=Ae*Math.max(1,Math.abs(o),Math.abs(I))&&Math.abs(s-L)<=Ae*Math.max(1,Math.abs(s),Math.abs(L))&&Math.abs(u-B)<=Ae*Math.max(1,Math.abs(u),Math.abs(B))&&Math.abs(f-C)<=Ae*Math.max(1,Math.abs(f),Math.abs(C))&&Math.abs(l-_)<=Ae*Math.max(1,Math.abs(l),Math.abs(_))&&Math.abs(c-R)<=Ae*Math.max(1,Math.abs(c),Math.abs(R))&&Math.abs(h-F)<=Ae*Math.max(1,Math.abs(h),Math.abs(F))&&Math.abs(d-D)<=Ae*Math.max(1,Math.abs(d),Math.abs(D))&&Math.abs(p-k)<=Ae*Math.max(1,Math.abs(p),Math.abs(k))&&Math.abs(v-M)<=Ae*Math.max(1,Math.abs(v),Math.abs(M))&&Math.abs(g-O)<=Ae*Math.max(1,Math.abs(g),Math.abs(O))&&Math.abs(y-P)<=Ae*Math.max(1,Math.abs(y),Math.abs(P))}function PO(){var e=new Qe(2);return Qe!=Float32Array&&(e[0]=0,e[1]=0),e}function Tl(e,r,t){return e[0]=r[0]+t[0],e[1]=r[1]+t[1],e}function xy(e,r){return e[0]=-r[0],e[1]=-r[1],e}function To(e,r,t,n){var a=r[0],i=r[1];return e[0]=a+n*(t[0]-a),e[1]=i+n*(t[1]-i),e}function Ey(e,r,t){var n=r[0],a=r[1];return e[0]=t[0]*n+t[2]*a,e[1]=t[1]*n+t[3]*a,e}function Sy(e,r,t){var n=r[0],a=r[1];return e[0]=t[0]*n+t[2]*a+t[4],e[1]=t[1]*n+t[3]*a+t[5],e}function xo(e,r,t){var n=r[0],a=r[1];return e[0]=t[0]*n+t[3]*a+t[6],e[1]=t[1]*n+t[4]*a+t[7],e}function Eo(e,r,t){var n=r[0],a=r[1];return e[0]=t[0]*n+t[4]*a+t[12],e[1]=t[1]*n+t[5]*a+t[13],e}var x4=function(){var e=PO();return function(r,t,n,a,i,o){var s,u;for(t||(t=2),n||(n=0),a?u=Math.min(a*t+n,r.length):u=r.length,s=n;s<u;s+=t)e[0]=r[s],e[1]=r[s+1],i(e,e,o),r[s]=e[0],r[s+1]=e[1];return r}}();function xl(){var e=new Qe(3);return Qe!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function El(e){var r=e[0],t=e[1],n=e[2];return Math.hypot(r,t,n)}function Sl(e,r,t){var n=new Qe(3);return n[0]=e,n[1]=r,n[2]=t,n}function Cy(e,r,t){return e[0]=r[0]+t[0],e[1]=r[1]+t[1],e[2]=r[2]+t[2],e}function RO(e,r,t){return e[0]=r[0]*t[0],e[1]=r[1]*t[1],e[2]=r[2]*t[2],e}function wy(e,r){return e[0]=-r[0],e[1]=-r[1],e[2]=-r[2],e}function By(e,r){var t=r[0],n=r[1],a=r[2],i=t*t+n*n+a*a;return i>0&&(i=1/Math.sqrt(i)),e[0]=r[0]*i,e[1]=r[1]*i,e[2]=r[2]*i,e}function si(e,r){return e[0]*r[0]+e[1]*r[1]+e[2]*r[2]}function ta(e,r,t){var n=r[0],a=r[1],i=r[2],o=t[0],s=t[1],u=t[2];return e[0]=a*u-i*s,e[1]=i*o-n*u,e[2]=n*s-a*o,e}function ra(e,r,t){var n=r[0],a=r[1],i=r[2],o=t[3]*n+t[7]*a+t[11]*i+t[15];return o=o||1,e[0]=(t[0]*n+t[4]*a+t[8]*i+t[12])/o,e[1]=(t[1]*n+t[5]*a+t[9]*i+t[13])/o,e[2]=(t[2]*n+t[6]*a+t[10]*i+t[14])/o,e}function So(e,r,t){var n=r[0],a=r[1],i=r[2];return e[0]=n*t[0]+a*t[3]+i*t[6],e[1]=n*t[1]+a*t[4]+i*t[7],e[2]=n*t[2]+a*t[5]+i*t[8],e}function Co(e,r,t){var n=t[0],a=t[1],i=t[2],o=t[3],s=r[0],u=r[1],f=r[2],l=a*f-i*u,c=i*s-n*f,h=n*u-a*s,d=a*h-i*c,p=i*l-n*h,v=n*c-a*l,g=o*2;return l*=g,c*=g,h*=g,d*=2,p*=2,v*=2,e[0]=s+l+d,e[1]=u+c+p,e[2]=f+h+v,e}function My(e,r,t,n){var a=[],i=[];return a[0]=r[0]-t[0],a[1]=r[1]-t[1],a[2]=r[2]-t[2],i[0]=a[0],i[1]=a[1]*Math.cos(n)-a[2]*Math.sin(n),i[2]=a[1]*Math.sin(n)+a[2]*Math.cos(n),e[0]=i[0]+t[0],e[1]=i[1]+t[1],e[2]=i[2]+t[2],e}function Oy(e,r,t,n){var a=[],i=[];return a[0]=r[0]-t[0],a[1]=r[1]-t[1],a[2]=r[2]-t[2],i[0]=a[2]*Math.sin(n)+a[0]*Math.cos(n),i[1]=a[1],i[2]=a[2]*Math.cos(n)-a[0]*Math.sin(n),e[0]=i[0]+t[0],e[1]=i[1]+t[1],e[2]=i[2]+t[2],e}function Iy(e,r,t,n){var a=[],i=[];return a[0]=r[0]-t[0],a[1]=r[1]-t[1],a[2]=r[2]-t[2],i[0]=a[0]*Math.cos(n)-a[1]*Math.sin(n),i[1]=a[0]*Math.sin(n)+a[1]*Math.cos(n),i[2]=a[2],e[0]=i[0]+t[0],e[1]=i[1]+t[1],e[2]=i[2]+t[2],e}function Py(e,r){var t=e[0],n=e[1],a=e[2],i=r[0],o=r[1],s=r[2],u=Math.sqrt(t*t+n*n+a*a),f=Math.sqrt(i*i+o*o+s*s),l=u*f,c=l&&si(e,r)/l;return Math.acos(Math.min(Math.max(c,-1),1))}var Ry=RO;var Fy=El;var E4=function(){var e=xl();return function(r,t,n,a,i,o){var s,u;for(t||(t=3),n||(n=0),a?u=Math.min(a*t+n,r.length):u=r.length,s=n;s<u;s+=t)e[0]=r[s],e[1]=r[s+1],e[2]=r[s+2],i(e,e,o),r[s]=e[0],r[s+1]=e[1],r[s+2]=e[2];return r}}();function Rt(e,r){if(!e)throw new Error(r||"@math.gl/web-mercator: assertion failed.")}var Ft=Math.PI,ky=Ft/4,Ht=Ft/180,Cl=180/Ft,ui=512,Ly=4003e4,aa=85.051129,wl=1.5;function wo(e){return Math.pow(2,e)}function at(e){var r=$e(e,2),t=r[0],n=r[1];Rt(Number.isFinite(t)),Rt(Number.isFinite(n)&&n>=-90&&n<=90,"invalid latitude");var a=t*Ht,i=n*Ht,o=ui*(a+Ft)/(2*Ft),s=ui*(Ft+Math.log(Math.tan(ky+i*.5)))/(2*Ft);return[o,s]}function ht(e){var r=$e(e,2),t=r[0],n=r[1],a=t/ui*(2*Ft)-Ft,i=2*(Math.atan(Math.exp(n/ui*(2*Ft)-Ft))-ky);return[a*Cl,i*Cl]}function Bl(e){var r=e.latitude,t=e.longitude,n=e.highPrecision,a=n===void 0?!1:n;Rt(Number.isFinite(r)&&Number.isFinite(t));var i=ui,o=Math.cos(r*Ht),s=i/360,u=s/o,f=i/Ly/o,l={unitsPerMeter:[f,f,f],metersPerUnit:[1/f,1/f,1/f],unitsPerDegree:[s,u,f],degreesPerUnit:[1/s,1/u,1/f]};if(a){var c=Ht*Math.tan(r*Ht)/o,h=s*c/2,d=i/Ly*c,p=d/u*f;l.unitsPerDegree2=[0,h,d],l.unitsPerMeter2=[p,0,p]}return l}function Ml(e){var r=e.height,t=e.pitch,n=e.bearing,a=e.altitude,i=e.scale,o=e.center,s=Zn();sn(s,s,[0,0,-a]),yo(s,s,-t*Ht),Ao(s,s,n*Ht);var u=i/r;return $n(s,s,[u,u,u]),o&&sn(s,s,wy([],o)),s}function Dy(e){var r=e.width,t=e.height,n=e.altitude,a=e.pitch,i=a===void 0?0:a,o=e.offset,s=e.center,u=e.scale,f=e.nearZMultiplier,l=f===void 0?1:f,c=e.farZMultiplier,h=c===void 0?1:c,d=e.fovy,p=d===void 0?na(wl):d;n!==void 0&&(p=na(n));var v=p*Ht,g=i*Ht,y=Bo(p),b=y;s&&(b+=s[2]*u/Math.cos(g)/t);var E=v*(.5+(o?o[1]:0)/t),T=Math.sin(E)*b/Math.sin(oi(Math.PI/2-g-E,.01,Math.PI-.01)),S=Math.sin(g)*T+b,I=b*10,L=Math.min(S*h,I);return{fov:v,aspect:r/t,focalDistance:y,near:l,far:L}}function Ol(e){var r=Dy(e),t=r.fov,n=r.aspect,a=r.near,i=r.far,o=_o([],t,n,a,i);return o}function na(e){return 2*Math.atan(.5/e)*Cl}function Bo(e){return .5/Math.tan(.5*e*Ht)}function Il(e,r){var t=$e(e,3),n=t[0],a=t[1],i=t[2],o=i===void 0?0:i;return Rt(Number.isFinite(n)&&Number.isFinite(a)&&Number.isFinite(o)),xr(r,[n,a,o,1])}function Mo(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,n=$e(e,3),a=n[0],i=n[1],o=n[2];if(Rt(Number.isFinite(a)&&Number.isFinite(i),"invalid pixel coordinate"),Number.isFinite(o)){var s=xr(r,[a,i,o,1]);return s}var u=xr(r,[a,i,0,1]),f=xr(r,[a,i,1,1]),l=u[2],c=f[2],h=l===c?0:((t||0)-l)/(c-l);return To([],u,f,h)}function Oo(e){var r=e.width,t=e.height,n=e.bounds,a=e.minExtent,i=a===void 0?0:a,o=e.maxZoom,s=o===void 0?24:o,u=e.offset,f=u===void 0?[0,0]:u,l=$e(n,2),c=$e(l[0],2),h=c[0],d=c[1],p=$e(l[1],2),v=p[0],g=p[1],y=FO(e.padding),b=at([h,oi(g,-aa,aa)]),E=at([v,oi(d,-aa,aa)]),T=[Math.max(Math.abs(E[0]-b[0]),i),Math.max(Math.abs(E[1]-b[1]),i)],S=[r-y.left-y.right-Math.abs(f[0])*2,t-y.top-y.bottom-Math.abs(f[1])*2];Rt(S[0]>0&&S[1]>0);var I=S[0]/T[0],L=S[1]/T[1],B=(y.right-y.left)/2/I,C=(y.bottom-y.top)/2/L,_=[(E[0]+b[0])/2+B,(E[1]+b[1])/2+C],R=ht(_),F=Math.min(s,vo(Math.abs(Math.min(I,L))));return Rt(Number.isFinite(F)),{longitude:R[0],latitude:R[1],zoom:F}}function FO(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return typeof e=="number"?{top:e,bottom:e,left:e,right:e}:(Rt(Number.isFinite(e.top)&&Number.isFinite(e.bottom)&&Number.isFinite(e.left)&&Number.isFinite(e.right)),e)}var Gy=Math.PI/180;function Io(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=e.width,n=e.height,a=e.unproject,i={targetZ:r},o=a([0,n],i),s=a([t,n],i),u,f,l=e.fovy?.5*e.fovy*Gy:Math.atan(.5/e.altitude),c=(90-e.pitch)*Gy;return l>c-.01?(u=Ny(e,0,r),f=Ny(e,t,r)):(u=a([0,0],i),f=a([t,0],i)),[o,s,f,u]}function Ny(e,r,t){var n=e.pixelUnprojectionMatrix,a=xr(n,[r,0,1,1]),i=xr(n,[r,e.height,1,1]),o=t*e.distanceScales.unitsPerMeter[2],s=(o-a[2])/(i[2]-a[2]),u=To([],a,i,s),f=ht(u);return f.push(t),f}var Uy=function(){function e(){var r=this,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{width:1,height:1};gl(this,e),Ee(this,"latitude",void 0),Ee(this,"longitude",void 0),Ee(this,"zoom",void 0),Ee(this,"pitch",void 0),Ee(this,"bearing",void 0),Ee(this,"altitude",void 0),Ee(this,"fovy",void 0),Ee(this,"meterOffset",void 0),Ee(this,"center",void 0),Ee(this,"width",void 0),Ee(this,"height",void 0),Ee(this,"scale",void 0),Ee(this,"distanceScales",void 0),Ee(this,"viewMatrix",void 0),Ee(this,"projectionMatrix",void 0),Ee(this,"viewProjectionMatrix",void 0),Ee(this,"pixelProjectionMatrix",void 0),Ee(this,"pixelUnprojectionMatrix",void 0),Ee(this,"equals",function(F){return F instanceof e?F.width===r.width&&F.height===r.height&&bl(F.projectionMatrix,r.projectionMatrix)&&bl(F.viewMatrix,r.viewMatrix):!1}),Ee(this,"project",function(F){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},k=D.topLeft,M=k===void 0?!0:k,O=r.projectPosition(F),P=Il(O,r.pixelProjectionMatrix),U=$e(P,2),G=U[0],j=U[1],q=M?j:r.height-j;return F.length===2?[G,q]:[G,q,P[2]]}),Ee(this,"unproject",function(F){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},k=D.topLeft,M=k===void 0?!0:k,O=D.targetZ,P=O===void 0?void 0:O,U=$e(F,3),G=U[0],j=U[1],q=U[2],ne=M?j:r.height-j,Re=P&&P*r.distanceScales.unitsPerMeter[2],we=Mo([G,ne,q],r.pixelUnprojectionMatrix,Re),rt=r.unprojectPosition(we),Ue=$e(rt,3),Ar=Ue[0],xt=Ue[1],zn=Ue[2];return Number.isFinite(q)?[Ar,xt,zn]:Number.isFinite(P)?[Ar,xt,P]:[Ar,xt]}),Ee(this,"projectPosition",function(F){var D=at(F),k=$e(D,2),M=k[0],O=k[1],P=(F[2]||0)*r.distanceScales.unitsPerMeter[2];return[M,O,P]}),Ee(this,"unprojectPosition",function(F){var D=ht(F),k=$e(D,2),M=k[0],O=k[1],P=(F[2]||0)*r.distanceScales.metersPerUnit[2];return[M,O,P]});var n=t.width,a=t.height,i=t.altitude,o=i===void 0?null:i,s=t.fovy,u=s===void 0?null:s,f=t.latitude,l=f===void 0?0:f,c=t.longitude,h=c===void 0?0:c,d=t.zoom,p=d===void 0?0:d,v=t.pitch,g=v===void 0?0:v,y=t.bearing,b=y===void 0?0:y,E=t.position,T=E===void 0?null:E,S=t.nearZMultiplier,I=S===void 0?.02:S,L=t.farZMultiplier,B=L===void 0?1.01:L;n=n||1,a=a||1,u===null&&o===null?(o=wl,u=na(o)):u===null?u=na(o):o===null&&(o=Bo(u));var C=wo(p);o=Math.max(.75,o);var _=Bl({longitude:h,latitude:l}),R=at([h,l]);R.push(0),T&&Cy(R,R,Ry([],T,_.unitsPerMeter)),this.projectionMatrix=Ol({width:n,height:a,scale:C,center:R,pitch:g,fovy:u,nearZMultiplier:I,farZMultiplier:B}),this.viewMatrix=Ml({height:a,scale:C,center:R,pitch:g,bearing:b,altitude:o}),this.width=n,this.height=a,this.scale=C,this.latitude=l,this.longitude=h,this.zoom=p,this.pitch=g,this.bearing=b,this.altitude=o,this.fovy=u,this.center=R,this.meterOffset=T||[0,0,0],this.distanceScales=_,this._initMatrices(),Object.freeze(this)}return yl(e,[{key:"_initMatrices",value:function(){var t=this.width,n=this.height,a=this.projectionMatrix,i=this.viewMatrix,o=Zn();on(o,o,a),on(o,o,i),this.viewProjectionMatrix=o;var s=Zn();$n(s,s,[t/2,-n/2,1]),sn(s,s,[1,-1,0]),on(s,s,o);var u=go(Zn(),s);if(!u)throw new Error("Pixel project matrix not invertible");this.pixelProjectionMatrix=s,this.pixelUnprojectionMatrix=u}},{key:"projectFlat",value:function(t){return at(t)}},{key:"unprojectFlat",value:function(t){return ht(t)}},{key:"getMapCenterByLngLatPosition",value:function(t){var n=t.lngLat,a=t.pos,i=Mo(a,this.pixelUnprojectionMatrix),o=at(n),s=Tl([],o,xy([],i)),u=Tl([],this.center,s);return ht(u)}},{key:"fitBounds",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=this.width,i=this.height,o=Oo(Object.assign({width:a,height:i,bounds:t},n)),s=o.longitude,u=o.latitude,f=o.zoom;return new e({width:a,height:i,longitude:s,latitude:u,zoom:f})}},{key:"getBounds",value:function(t){var n=this.getBoundingRegion(t),a=Math.min.apply(Math,Kn(n.map(function(u){return u[0]}))),i=Math.max.apply(Math,Kn(n.map(function(u){return u[0]}))),o=Math.min.apply(Math,Kn(n.map(function(u){return u[1]}))),s=Math.max.apply(Math,Kn(n.map(function(u){return u[1]})));return[[a,o],[i,s]]}},{key:"getBoundingRegion",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Io(this,t.z||0)}},{key:"getLocationAtPoint",value:function(t){var n=t.lngLat,a=t.pos;return this.getMapCenterByLngLatPosition({lngLat:n,pos:a})}}]),e}();var jy=6378137*Math.PI;function Pl(e){var r=at(e);return r[0]=(r[0]/256-1)*jy,r[1]=(r[1]/256-1)*jy,r}function Hy(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function Po(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?Hy(Object(t),!0).forEach(function(n){(0,fi.default)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Hy(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function kO(e){var r=DO();return function(){var n=(0,Fl.default)(e),a;if(r){var i=(0,Fl.default)(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return(0,qy.default)(this,a)}}function DO(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var GO={id:"imagery-layer",data:"",serviceType:"auto",srs:"auto",layers:{type:"array",compare:!0,value:[]},onMetadataLoad:{type:"function",value:function(){}},onMetadataLoadError:{type:"function",value:console.error},onImageLoadStart:{type:"function",value:function(){}},onImageLoad:{type:"function",value:function(){}},onImageLoadError:{type:"function",compare:!1,value:function(r,t){return console.error(t,r)}}},Fo=function(e){(0,Jy.default)(t,e);var r=kO(t);function t(){var n;(0,Vy.default)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return n=r.call.apply(r,[this].concat(i)),(0,fi.default)((0,Wy.default)(n),"state",void 0),n}return(0,zy.default)(t,[{key:"shouldUpdateState",value:function(){return!0}},{key:"initializeState",value:function(){this.state._nextRequestId=0,this.state.lastRequestId=-1}},{key:"updateState",value:function(a){var i=this,o=a.changeFlags,s=a.props,u=a.oldProps,f=this.context.viewport;o.dataChanged||s.serviceType!==u.serviceType?(this.state.imageSource=this._createImageSource(s),this._loadMetadata(),this.debounce(function(){return i.loadImage(f,"image source changed")},0)):(0,fn._deepEqual)(s.layers,u.layers,1)?o.viewportChanged&&this.debounce(function(){return i.loadImage(f,"viewport changed")}):this.debounce(function(){return i.loadImage(f,"layers changed")},0)}},{key:"finalizeState",value:function(){}},{key:"renderLayers",value:function(){var a=this.state,i=a.bounds,o=a.image,s=a.lastRequestParameters;return o&&new Xy.BitmapLayer(Po(Po({},this.getSubLayerProps({id:"bitmap"})),{},{_imageCoordinateSystem:s.srs==="EPSG:4326"?fn.COORDINATE_SYSTEM.LNGLAT:fn.COORDINATE_SYSTEM.CARTESIAN,bounds:i,image:o}))}},{key:"getFeatureInfoText",value:function(){var n=(0,Ro.default)(un.default.mark(function i(o,s){var u,f,l,c;return un.default.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(u=this.state.lastRequestParameters,!u){d.next=6;break}return d.next=4,(f=(l=this.state.imageSource).getFeatureInfoText)===null||f===void 0?void 0:f.call(l,Po(Po({},u),{},{query_layers:u.layers,x:o,y:s,info_format:"application/vnd.ogc.gml"}));case 4:return c=d.sent,d.abrupt("return",c);case 6:return d.abrupt("return","");case 7:case"end":return d.stop()}},i,this)}));function a(i,o){return n.apply(this,arguments)}return a}()},{key:"_createImageSource",value:function(a){if(a.data instanceof $t)return a.data;if(typeof a.data=="string")return ll({url:a.data,loadOptions:a.loadOptions,type:a.serviceType});throw new Error("invalid image source in props.data")}},{key:"_loadMetadata",value:function(){var n=(0,Ro.default)(un.default.mark(function i(){var o,s,u,f;return un.default.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return o=this.state.imageSource,c.prev=1,c.next=4,o.getMetadata();case 4:s=c.sent,this.state.imageSource===o&&((u=this.getCurrentLayer())===null||u===void 0||u.props.onMetadataLoad(s)),c.next=11;break;case 8:c.prev=8,c.t0=c.catch(1),(f=this.getCurrentLayer())===null||f===void 0||f.props.onMetadataLoadError(c.t0);case 11:case"end":return c.stop()}},i,this,[[1,8]])}));function a(){return n.apply(this,arguments)}return a}()},{key:"loadImage",value:function(){var n=(0,Ro.default)(un.default.mark(function i(o,s){var u,f,l,c,h,d,p,v,g,y,b,E,T,S,I,L,B,C,_,R;return un.default.wrap(function(D){for(;;)switch(D.prev=D.next){case 0:if(u=this.props,f=u.layers,l=u.serviceType,!(l==="wms"&&f.length===0)){D.next=3;break}return D.abrupt("return");case 3:return c=o.getBounds(),h=o.width,d=o.height,p=this.getRequestId(),v=this.props.srs,v==="auto"&&(v=o.resolution?"EPSG:4326":"EPSG:3857"),g={width:h,height:d,bbox:c,layers:f,srs:v},v==="EPSG:3857"&&(y=Pl([c[0],c[1]]),b=(0,Rl.default)(y,2),E=b[0],T=b[1],S=Pl([c[2],c[3]]),I=(0,Rl.default)(S,2),L=I[0],B=I[1],g.bbox=[E,T,L,B]),D.prev=10,this.props.onImageLoadStart(p),D.next=14,this.state.imageSource.getImage(g);case 14:C=D.sent,this.state.lastRequestId<p&&((_=this.getCurrentLayer())===null||_===void 0||_.props.onImageLoad(p),this.setState({image:C,bounds:c,lastRequestParameters:g,lastRequestId:p})),D.next=22;break;case 18:D.prev=18,D.t0=D.catch(10),this.raiseError(D.t0,"Load image"),(R=this.getCurrentLayer())===null||R===void 0||R.props.onImageLoadError(p,D.t0);case 22:case"end":return D.stop()}},i,this,[[10,18]])}));function a(i,o){return n.apply(this,arguments)}return a}()},{key:"getRequestId",value:function(){return this.state._nextRequestId++}},{key:"debounce",value:function(a){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:500;clearTimeout(this.state._timeoutId),this.state._timeoutId=setTimeout(function(){return a()},i)}}]),t}(fn.CompositeLayer);(0,fi.default)(Fo,"layerName","WMSLayer");(0,fi.default)(Fo,"defaultProps",GO);var Yy=m(H()),Ky=m(Te()),Qy=m(xe()),Ll=m(ye()),kl=m(W()),Zy=m(It());function NO(e){var r=UO();return function(){var n=(0,Ll.default)(e),a;if(r){var i=(0,Ll.default)(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return(0,Qy.default)(this,a)}}function UO(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var jO={getHeight:{type:"accessor",value:0},greatCircle:!0},Lo=function(e){(0,Ky.default)(t,e);var r=NO(t);function t(){return(0,Yy.default)(this,t),r.apply(this,arguments)}return t}(Zy.ArcLayer);(0,kl.default)(Lo,"layerName","GreatCircleLayer");(0,kl.default)(Lo,"defaultProps",jO);var v0=m(H()),g0=m(z()),y0=m(Te()),A0=m(xe()),jl=m(ye()),Hl=m(W());var e0=m(H()),t0=m(z()),r0=m(Te()),n0=m(xe()),Dl=m(ye()),ko=m(W()),a0=m(Pt()),Gl=m(It());function HO(e){var r=VO();return function(){var n=(0,Dl.default)(e),a;if(r){var i=(0,Dl.default)(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return(0,n0.default)(this,a)}}function VO(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function $y(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function zO(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?$y(Object(t),!0).forEach(function(n){(0,ko.default)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):$y(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var WO=zO({},Gl.PolygonLayer.defaultProps),St=function(e){(0,r0.default)(t,e);var r=HO(t);function t(){return(0,e0.default)(this,t),r.apply(this,arguments)}return(0,t0.default)(t,[{key:"indexToBounds",value:function(){return null}},{key:"renderLayers",value:function(){var a=this.props,i=a.elevationScale,o=a.extruded,s=a.wireframe,u=a.filled,f=a.stroked,l=a.lineWidthUnits,c=a.lineWidthScale,h=a.lineWidthMinPixels,d=a.lineWidthMaxPixels,p=a.lineJointRounded,v=a.lineMiterLimit,g=a.lineDashJustified,y=a.getElevation,b=a.getFillColor,E=a.getLineColor,T=a.getLineWidth,S=this.props,I=S.updateTriggers,L=S.material,B=S.transitions,C=this.getSubLayerClass("cell",Gl.PolygonLayer);return new C({filled:u,wireframe:s,extruded:o,elevationScale:i,stroked:f,lineWidthUnits:l,lineWidthScale:c,lineWidthMinPixels:h,lineWidthMaxPixels:d,lineJointRounded:p,lineMiterLimit:v,lineDashJustified:g,material:L,transitions:B,getElevation:y,getFillColor:b,getLineColor:E,getLineWidth:T},this.getSubLayerProps({id:"cell",updateTriggers:I&&{getElevation:I.getElevation,getFillColor:I.getFillColor,getLineColor:I.getLineColor,getLineWidth:I.getLineWidth}}),this.indexToBounds())}}]),t}(a0.CompositeLayer);(0,ko.default)(St,"layerName","GeoCellLayer");(0,ko.default)(St,"defaultProps",WO);var Ul=m(ce()),Do=m(Nl()),JO=3,qO=30,XO=2*qO+1,o0=180/Math.PI;function u0(e,r,t){var n=1<<r;return[(e[0]+t[0])/n,(e[1]+t[1])/n]}function s0(e){return e>=.5?1/3*(4*e*e-1):1/3*(1-4*(1-e)*(1-e))}function f0(e){return[s0(e[0]),s0(e[1])]}function l0(e,r){var t=(0,Ul.default)(r,2),n=t[0],a=t[1];switch(e){case 0:return[1,n,a];case 1:return[-n,1,a];case 2:return[-n,-a,1];case 3:return[-1,-a,-n];case 4:return[a,-1,-n];case 5:return[a,n,-1];default:throw new Error("Invalid face")}}function c0(e){var r=(0,Ul.default)(e,3),t=r[0],n=r[1],a=r[2],i=Math.atan2(a,Math.sqrt(t*t+n*n)),o=Math.atan2(n,t);return[o*o0,i*o0]}function h0(e){for(var r=Do.default.fromString(e,!0,10).toString(2);r.length<JO+XO;)r="0"+r;for(var t=r.lastIndexOf("1"),n=r.substring(0,3),a=r.substring(3,t),i=a.length/2,o=Do.default.fromString(n,!0,2).toString(10),s=Do.default.fromString(a,!0,2).toString(4);s.length<i;)s="0"+s;return"".concat(o,"/").concat(s)}function YO(e,r,t,n){if(n===0){t===1&&(r[0]=e-1-r[0],r[1]=e-1-r[1]);var a=r[0];r[0]=r[1],r[1]=a}}function d0(e){for(var r=e.split("/"),t=parseInt(r[0],10),n=r[1],a=n.length,i=[0,0],o,s=a-1;s>=0;s--){o=a-s;var u=n[s],f=0,l=0;u==="1"?l=1:u==="2"?(f=1,l=1):u==="3"&&(f=1);var c=Math.pow(2,o-1);YO(c,i,f,l),i[0]+=c*f,i[1]+=c*l}if(t%2===1){var h=i[0];i[0]=i[1],i[1]=h}return{face:t,ij:i,level:o}}var p0=m(Nl());function KO(e){var r=e.padEnd(16,"0");return p0.default.fromString(r,16)}var QO=100;function ZO(e){for(var r=e.face,t=e.ij,n=e.level,a=[[0,0],[0,1],[1,1],[1,0],[0,0]],i=Math.max(1,Math.ceil(QO*Math.pow(2,-n))),o=new Float64Array(4*i*2+2),s=0,u=0,f=0;f<4;f++)for(var l=a[f].slice(0),c=a[f+1],h=(c[0]-l[0])/i,d=(c[1]-l[1])/i,p=0;p<i;p++){l[0]+=h,l[1]+=d;var v=u0(t,n,l),g=f0(v),y=l0(r,g),b=c0(y);Math.abs(b[1])>89.999&&(b[0]=u);var E=b[0]-u;b[0]+=E>180?-360:E<-180?360:0,o[s++]=b[0],o[s++]=b[1],u=b[0]}return o[s++]=o[0],o[s++]=o[1],o}function $O(e){if(typeof e=="string"){if(e.indexOf("/")>0)return e;e=KO(e)}return h0(e.toString())}function m0(e){var r=$O(e),t=d0(r);return ZO(t)}function eI(e){var r=tI();return function(){var n=(0,jl.default)(e),a;if(r){var i=(0,jl.default)(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return(0,A0.default)(this,a)}}function tI(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var rI={getS2Token:{type:"accessor",value:function(r){return r.token}}},Go=function(e){(0,y0.default)(t,e);var r=eI(t);function t(){return(0,v0.default)(this,t),r.apply(this,arguments)}return(0,g0.default)(t,[{key:"indexToBounds",value:function(){var a=this.props,i=a.data,o=a.getS2Token;return{data:i,_normalize:!1,positionFormat:"XY",getPolygon:function(u,f){return m0(o(u,f))}}}}]),t}(St);(0,Hl.default)(Go,"layerName","S2Layer");(0,Hl.default)(Go,"defaultProps",rI);var b0=m(H()),T0=m(z()),x0=m(Te()),E0=m(xe()),zl=m(ye()),Wl=m(W());var No=m(ce());var Vl=512;function nI(e){for(var r=0,t=0,n=1<<e.length,a=n/Vl,i=0;i<e.length;i++){n>>=1;var o=parseInt(e[i]);o%2&&(r|=n),o>1&&(t|=n)}return[[r/a,Vl-t/a],[(r+.99)/a,Vl-(t+.99)/a]]}function _0(e){var r=nI(e),t=(0,No.default)(r,2),n=t[0],a=t[1],i=ht(n),o=(0,No.default)(i,2),s=o[0],u=o[1],f=ht(a),l=(0,No.default)(f,2),c=l[0],h=l[1];return[c,u,c,h,s,h,s,u,c,u]}function aI(e){var r=iI();return function(){var n=(0,zl.default)(e),a;if(r){var i=(0,zl.default)(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return(0,E0.default)(this,a)}}function iI(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var oI={getQuadkey:{type:"accessor",value:function(r){return r.quadkey}}},Uo=function(e){(0,x0.default)(t,e);var r=aI(t);function t(){return(0,b0.default)(this,t),r.apply(this,arguments)}return(0,T0.default)(t,[{key:"indexToBounds",value:function(){var a=this.props,i=a.data,o=a.getQuadkey;return{data:i,_normalize:!1,positionFormat:"XY",getPolygon:function(u,f){return _0(o(u,f))}}}}]),t}(St);(0,Wl.default)(Uo,"layerName","QuadkeyLayer");(0,Wl.default)(Uo,"defaultProps",oI);var L1=m(H()),k1=m(z()),D1=m(Te()),G1=m(xe()),Bc=m(ye()),os=m(W()),ss=m(Pt()),N1=m(It());var Sc=m(ce()),O1=m(H()),I1=m(z()),De=m(W());function je(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function S0(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function He(e,r,t){return r&&S0(e.prototype,r),t&&S0(e,t),e}function ci(e,r){return ci=Object.setPrototypeOf||function(n,a){return n.__proto__=a,n},ci(e,r)}function Ve(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&ci(e,r)}function ln(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ln=function(t){return typeof t}:ln=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ln(e)}function Jl(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ze(e,r){if(r&&(ln(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Jl(e)}function ve(e){return ve=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},ve(e)}function ue(e,r){if(!e)throw new Error("math.gl assertion ".concat(r))}var sI=1/Math.PI*180,uI=1/180*Math.PI,_e={EPSILON:1e-12,debug:!1,precision:4,printTypes:!1,printDegrees:!1,printRowMajor:!0};function ql(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=r.precision,n=t===void 0?_e.precision:t;return e=fI(e),"".concat(parseFloat(e.toPrecision(n)))}function it(e){return Array.isArray(e)||ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Xl(e){return C0(e)}function Yl(e){return cn(e)}function C0(e,r){return Kl(e,function(t){return t*uI},r)}function cn(e,r){return Kl(e,function(t){return t*sI},r)}function jo(e,r,t){return Kl(e,function(n){return Math.max(r,Math.min(t,n))})}function Sr(e,r,t){return it(e)?e.map(function(n,a){return Sr(n,r[a],t)}):t*r+(1-t)*e}function We(e,r,t){var n=_e.EPSILON;t&&(_e.EPSILON=t);try{if(e===r)return!0;if(it(e)&&it(r)){if(e.length!==r.length)return!1;for(var a=0;a<e.length;++a)if(!We(e[a],r[a]))return!1;return!0}return e&&e.equals?e.equals(r):r&&r.equals?r.equals(e):typeof e=="number"&&typeof r=="number"?Math.abs(e-r)<=_e.EPSILON*Math.max(1,Math.abs(e),Math.abs(r)):!1}finally{_e.EPSILON=n}}function fI(e){return Math.round(e/_e.EPSILON)*_e.EPSILON}function lI(e){return e.clone?e.clone():new Array(e.length)}function Kl(e,r,t){if(it(e)){var n=e;t=t||lI(n);for(var a=0;a<t.length&&a<n.length;++a)t[a]=r(e[a],a,t);return t}return r(e)}function cI(e){var r=hI();return function(){var n=ve(e),a;if(r){var i=ve(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return ze(this,a)}}function hI(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function dI(e){function r(){var t=Reflect.construct(e,Array.from(arguments));return Object.setPrototypeOf(t,Object.getPrototypeOf(this)),t}return r.prototype=Object.create(e.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(r,e):r.__proto__=e,r}var ia=function(e){Ve(t,e);var r=cI(t);function t(){return je(this,t),r.apply(this,arguments)}return He(t,[{key:"clone",value:function(){return new this.constructor().copy(this)}},{key:"fromArray",value:function(a){for(var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=0;o<this.ELEMENTS;++o)this[o]=a[o+i];return this.check()}},{key:"toArray",value:function(){for(var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=0;o<this.ELEMENTS;++o)a[i+o]=this[o];return a}},{key:"from",value:function(a){return Array.isArray(a)?this.copy(a):this.fromObject(a)}},{key:"to",value:function(a){return a===this?this:it(a)?this.toArray(a):this.toObject(a)}},{key:"toTarget",value:function(a){return a?this.to(a):this}},{key:"toFloat32Array",value:function(){return new Float32Array(this)}},{key:"toString",value:function(){return this.formatString(_e)}},{key:"formatString",value:function(a){for(var i="",o=0;o<this.ELEMENTS;++o)i+=(o>0?", ":"")+ql(this[o],a);return"".concat(a.printTypes?this.constructor.name:"","[").concat(i,"]")}},{key:"equals",value:function(a){if(!a||this.length!==a.length)return!1;for(var i=0;i<this.ELEMENTS;++i)if(!We(this[i],a[i]))return!1;return!0}},{key:"exactEquals",value:function(a){if(!a||this.length!==a.length)return!1;for(var i=0;i<this.ELEMENTS;++i)if(this[i]!==a[i])return!1;return!0}},{key:"negate",value:function(){for(var a=0;a<this.ELEMENTS;++a)this[a]=-this[a];return this.check()}},{key:"lerp",value:function(a,i,o){if(o===void 0)return this.lerp(this,a,i);for(var s=0;s<this.ELEMENTS;++s){var u=a[s];this[s]=u+o*(i[s]-u)}return this.check()}},{key:"min",value:function(a){for(var i=0;i<this.ELEMENTS;++i)this[i]=Math.min(a[i],this[i]);return this.check()}},{key:"max",value:function(a){for(var i=0;i<this.ELEMENTS;++i)this[i]=Math.max(a[i],this[i]);return this.check()}},{key:"clamp",value:function(a,i){for(var o=0;o<this.ELEMENTS;++o)this[o]=Math.min(Math.max(this[o],a[o]),i[o]);return this.check()}},{key:"add",value:function(){for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];for(var s=0,u=i;s<u.length;s++)for(var f=u[s],l=0;l<this.ELEMENTS;++l)this[l]+=f[l];return this.check()}},{key:"subtract",value:function(){for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];for(var s=0,u=i;s<u.length;s++)for(var f=u[s],l=0;l<this.ELEMENTS;++l)this[l]-=f[l];return this.check()}},{key:"scale",value:function(a){if(typeof a=="number")for(var i=0;i<this.ELEMENTS;++i)this[i]*=a;else for(var o=0;o<this.ELEMENTS&&o<a.length;++o)this[o]*=a[o];return this.check()}},{key:"multiplyByScalar",value:function(a){for(var i=0;i<this.ELEMENTS;++i)this[i]*=a;return this.check()}},{key:"check",value:function(){if(_e.debug&&!this.validate())throw new Error("math.gl: ".concat(this.constructor.name," some fields set to invalid numbers'"));return this}},{key:"validate",value:function(){for(var a=this.length===this.ELEMENTS,i=0;i<this.ELEMENTS;++i)a=a&&Number.isFinite(this[i]);return a}},{key:"sub",value:function(a){return this.subtract(a)}},{key:"setScalar",value:function(a){for(var i=0;i<this.ELEMENTS;++i)this[i]=a;return this.check()}},{key:"addScalar",value:function(a){for(var i=0;i<this.ELEMENTS;++i)this[i]+=a;return this.check()}},{key:"subScalar",value:function(a){return this.addScalar(-a)}},{key:"multiplyScalar",value:function(a){for(var i=0;i<this.ELEMENTS;++i)this[i]*=a;return this.check()}},{key:"divideScalar",value:function(a){return this.multiplyByScalar(1/a)}},{key:"clampScalar",value:function(a,i){for(var o=0;o<this.ELEMENTS;++o)this[o]=Math.min(Math.max(this[o],a),i);return this.check()}},{key:"elements",get:function(){return this}}]),t}(dI(Array));function pI(e,r){if(e.length!==r)return!1;for(var t=0;t<e.length;++t)if(!Number.isFinite(e[t]))return!1;return!0}function ie(e){if(!Number.isFinite(e))throw new Error("Invalid number ".concat(e));return e}function Cr(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";if(_e.debug&&!pI(e,r))throw new Error("math.gl: ".concat(t," some fields set to invalid numbers'"));return e}function mI(e){var r=vI();return function(){var n=ve(e),a;if(r){var i=ve(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return ze(this,a)}}function vI(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var oa=function(e){Ve(t,e);var r=mI(t);function t(){return je(this,t),r.apply(this,arguments)}return He(t,[{key:"x",get:function(){return this[0]},set:function(a){this[0]=ie(a)}},{key:"y",get:function(){return this[1]},set:function(a){this[1]=ie(a)}},{key:"len",value:function(){return Math.sqrt(this.lengthSquared())}},{key:"magnitude",value:function(){return this.len()}},{key:"lengthSquared",value:function(){for(var a=0,i=0;i<this.ELEMENTS;++i)a+=this[i]*this[i];return a}},{key:"magnitudeSquared",value:function(){return this.lengthSquared()}},{key:"distance",value:function(a){return Math.sqrt(this.distanceSquared(a))}},{key:"distanceSquared",value:function(a){for(var i=0,o=0;o<this.ELEMENTS;++o){var s=this[o]-a[o];i+=s*s}return ie(i)}},{key:"dot",value:function(a){for(var i=0,o=0;o<this.ELEMENTS;++o)i+=this[o]*a[o];return ie(i)}},{key:"normalize",value:function(){var a=this.magnitude();if(a!==0)for(var i=0;i<this.ELEMENTS;++i)this[i]/=a;return this.check()}},{key:"multiply",value:function(){for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];for(var s=0,u=i;s<u.length;s++)for(var f=u[s],l=0;l<this.ELEMENTS;++l)this[l]*=f[l];return this.check()}},{key:"divide",value:function(){for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];for(var s=0,u=i;s<u.length;s++)for(var f=u[s],l=0;l<this.ELEMENTS;++l)this[l]/=f[l];return this.check()}},{key:"lengthSq",value:function(){return this.lengthSquared()}},{key:"distanceTo",value:function(a){return this.distance(a)}},{key:"distanceToSquared",value:function(a){return this.distanceSquared(a)}},{key:"getComponent",value:function(a){return ue(a>=0&&a<this.ELEMENTS,"index is out of range"),ie(this[a])}},{key:"setComponent",value:function(a,i){return ue(a>=0&&a<this.ELEMENTS,"index is out of range"),this[a]=i,this.check()}},{key:"addVectors",value:function(a,i){return this.copy(a).add(i)}},{key:"subVectors",value:function(a,i){return this.copy(a).subtract(i)}},{key:"multiplyVectors",value:function(a,i){return this.copy(a).multiply(i)}},{key:"addScaledVector",value:function(a,i){return this.add(new this.constructor(a).multiplyScalar(i))}}]),t}(ia);function Ho(e,r,t){var n=r[0],a=r[1],i=t[3]*n+t[7]*a||1;return e[0]=(t[0]*n+t[4]*a)/i,e[1]=(t[1]*n+t[5]*a)/i,e}function Vo(e,r,t){var n=r[0],a=r[1],i=r[2],o=t[3]*n+t[7]*a+t[11]*i||1;return e[0]=(t[0]*n+t[4]*a+t[8]*i)/o,e[1]=(t[1]*n+t[5]*a+t[9]*i)/o,e[2]=(t[2]*n+t[6]*a+t[10]*i)/o,e}function w0(e,r,t){var n=r[0],a=r[1];return e[0]=t[0]*n+t[2]*a,e[1]=t[1]*n+t[3]*a,e[2]=r[2],e}function B0(e,r,t){var n=r[0],a=r[1];return e[0]=t[0]*n+t[2]*a,e[1]=t[1]*n+t[3]*a,e[2]=r[2],e[3]=r[3],e}function zo(e,r,t){var n=r[0],a=r[1],i=r[2];return e[0]=t[0]*n+t[3]*a+t[6]*i,e[1]=t[1]*n+t[4]*a+t[7]*i,e[2]=t[2]*n+t[5]*a+t[8]*i,e[3]=r[3],e}function gI(e){var r=yI();return function(){var n=ve(e),a;if(r){var i=ve(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return ze(this,a)}}function yI(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var hn=function(e){Ve(t,e);var r=gI(t);function t(){var n,a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return je(this,t),n=r.call(this,2),it(a)&&arguments.length===1?n.copy(a):(_e.debug&&(ie(a),ie(i)),n[0]=a,n[1]=i),n}return He(t,[{key:"set",value:function(a,i){return this[0]=a,this[1]=i,this.check()}},{key:"copy",value:function(a){return this[0]=a[0],this[1]=a[1],this.check()}},{key:"fromObject",value:function(a){return _e.debug&&(ie(a.x),ie(a.y)),this[0]=a.x,this[1]=a.y,this.check()}},{key:"toObject",value:function(a){return a.x=this[0],a.y=this[1],a}},{key:"ELEMENTS",get:function(){return 2}},{key:"horizontalAngle",value:function(){return Math.atan2(this.y,this.x)}},{key:"verticalAngle",value:function(){return Math.atan2(this.x,this.y)}},{key:"transform",value:function(a){return this.transformAsPoint(a)}},{key:"transformAsPoint",value:function(a){return Eo(this,this,a),this.check()}},{key:"transformAsVector",value:function(a){return Ho(this,this,a),this.check()}},{key:"transformByMatrix3",value:function(a){return xo(this,this,a),this.check()}},{key:"transformByMatrix2x3",value:function(a){return Sy(this,this,a),this.check()}},{key:"transformByMatrix2",value:function(a){return Ey(this,this,a),this.check()}}]),t}(oa);function AI(e){var r=_I();return function(){var n=ve(e),a;if(r){var i=ve(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return ze(this,a)}}function _I(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Ql=[0,0,0],Wo,w=function(e){Ve(t,e);var r=AI(t);function t(){var n,a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return je(this,t),n=r.call(this,-0,-0,-0),arguments.length===1&&it(a)?n.copy(a):(_e.debug&&(ie(a),ie(i),ie(o)),n[0]=a,n[1]=i,n[2]=o),n}return He(t,[{key:"set",value:function(a,i,o){return this[0]=a,this[1]=i,this[2]=o,this.check()}},{key:"copy",value:function(a){return this[0]=a[0],this[1]=a[1],this[2]=a[2],this.check()}},{key:"fromObject",value:function(a){return _e.debug&&(ie(a.x),ie(a.y),ie(a.z)),this[0]=a.x,this[1]=a.y,this[2]=a.z,this.check()}},{key:"toObject",value:function(a){return a.x=this[0],a.y=this[1],a.z=this[2],a}},{key:"ELEMENTS",get:function(){return 3}},{key:"z",get:function(){return this[2]},set:function(a){this[2]=ie(a)}},{key:"angle",value:function(a){return Py(this,a)}},{key:"cross",value:function(a){return ta(this,this,a),this.check()}},{key:"rotateX",value:function(a){var i=a.radians,o=a.origin,s=o===void 0?Ql:o;return My(this,this,s,i),this.check()}},{key:"rotateY",value:function(a){var i=a.radians,o=a.origin,s=o===void 0?Ql:o;return Oy(this,this,s,i),this.check()}},{key:"rotateZ",value:function(a){var i=a.radians,o=a.origin,s=o===void 0?Ql:o;return Iy(this,this,s,i),this.check()}},{key:"transform",value:function(a){return this.transformAsPoint(a)}},{key:"transformAsPoint",value:function(a){return ra(this,this,a),this.check()}},{key:"transformAsVector",value:function(a){return Vo(this,this,a),this.check()}},{key:"transformByMatrix3",value:function(a){return So(this,this,a),this.check()}},{key:"transformByMatrix2",value:function(a){return w0(this,this,a),this.check()}},{key:"transformByQuaternion",value:function(a){return Co(this,this,a),this.check()}}],[{key:"ZERO",get:function(){return Wo||(Wo=new t(0,0,0),Object.freeze(Wo)),Wo}}]),t}(oa);function bI(e){var r=TI();return function(){var n=ve(e),a;if(r){var i=ve(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return ze(this,a)}}function TI(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Jo,M0=function(e){Ve(t,e);var r=bI(t);function t(){var n,a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;return je(this,t),n=r.call(this,-0,-0,-0,-0),it(a)&&arguments.length===1?n.copy(a):(_e.debug&&(ie(a),ie(i),ie(o),ie(s)),n[0]=a,n[1]=i,n[2]=o,n[3]=s),n}return He(t,[{key:"set",value:function(a,i,o,s){return this[0]=a,this[1]=i,this[2]=o,this[3]=s,this.check()}},{key:"copy",value:function(a){return this[0]=a[0],this[1]=a[1],this[2]=a[2],this[3]=a[3],this.check()}},{key:"fromObject",value:function(a){return _e.debug&&(ie(a.x),ie(a.y),ie(a.z),ie(a.w)),this[0]=a.x,this[1]=a.y,this[2]=a.z,this[3]=a.w,this}},{key:"toObject",value:function(a){return a.x=this[0],a.y=this[1],a.z=this[2],a.w=this[3],a}},{key:"ELEMENTS",get:function(){return 4}},{key:"z",get:function(){return this[2]},set:function(a){this[2]=ie(a)}},{key:"w",get:function(){return this[3]},set:function(a){this[3]=ie(a)}},{key:"transform",value:function(a){return ra(this,this,a),this.check()}},{key:"transformByMatrix3",value:function(a){return zo(this,this,a),this.check()}},{key:"transformByMatrix2",value:function(a){return B0(this,this,a),this.check()}},{key:"transformByQuaternion",value:function(a){return Co(this,this,a),this.check()}},{key:"applyMatrix4",value:function(a){return a.transform(this,this),this}}],[{key:"ZERO",get:function(){return Jo||(Jo=new t(0,0,0,0),Object.freeze(Jo)),Jo}}]),t}(oa);function xI(e){var r=EI();return function(){var n=ve(e),a;if(r){var i=ve(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return ze(this,a)}}function EI(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var qo=function(e){Ve(t,e);var r=xI(t);function t(){return je(this,t),r.apply(this,arguments)}return He(t,[{key:"toString",value:function(){var a="[";if(_e.printRowMajor){a+="row-major:";for(var i=0;i<this.RANK;++i)for(var o=0;o<this.RANK;++o)a+=" ".concat(this[o*this.RANK+i])}else{a+="column-major:";for(var s=0;s<this.ELEMENTS;++s)a+=" ".concat(this[s])}return a+="]",a}},{key:"getElementIndex",value:function(a,i){return i*this.RANK+a}},{key:"getElement",value:function(a,i){return this[i*this.RANK+a]}},{key:"setElement",value:function(a,i,o){return this[i*this.RANK+a]=ie(o),this}},{key:"getColumn",value:function(a){for(var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:new Array(this.RANK).fill(-0),o=a*this.RANK,s=0;s<this.RANK;++s)i[s]=this[o+s];return i}},{key:"setColumn",value:function(a,i){for(var o=a*this.RANK,s=0;s<this.RANK;++s)this[o+s]=i[s];return this}}]),t}(ia);function O0(){var e=new Qe(9);return Qe!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}function I0(e,r){if(e===r){var t=r[1],n=r[2],a=r[5];e[1]=r[3],e[2]=r[6],e[3]=t,e[5]=r[7],e[6]=n,e[7]=a}else e[0]=r[0],e[1]=r[3],e[2]=r[6],e[3]=r[1],e[4]=r[4],e[5]=r[7],e[6]=r[2],e[7]=r[5],e[8]=r[8];return e}function P0(e,r){var t=r[0],n=r[1],a=r[2],i=r[3],o=r[4],s=r[5],u=r[6],f=r[7],l=r[8],c=l*o-s*f,h=-l*i+s*u,d=f*i-o*u,p=t*c+n*h+a*d;return p?(p=1/p,e[0]=c*p,e[1]=(-l*n+a*f)*p,e[2]=(s*n-a*o)*p,e[3]=h*p,e[4]=(l*t-a*u)*p,e[5]=(-s*t+a*i)*p,e[6]=d*p,e[7]=(-f*t+n*u)*p,e[8]=(o*t-n*i)*p,e):null}function R0(e){var r=e[0],t=e[1],n=e[2],a=e[3],i=e[4],o=e[5],s=e[6],u=e[7],f=e[8];return r*(f*i-o*u)+t*(-f*a+o*s)+n*(u*a-i*s)}function Zl(e,r,t){var n=r[0],a=r[1],i=r[2],o=r[3],s=r[4],u=r[5],f=r[6],l=r[7],c=r[8],h=t[0],d=t[1],p=t[2],v=t[3],g=t[4],y=t[5],b=t[6],E=t[7],T=t[8];return e[0]=h*n+d*o+p*f,e[1]=h*a+d*s+p*l,e[2]=h*i+d*u+p*c,e[3]=v*n+g*o+y*f,e[4]=v*a+g*s+y*l,e[5]=v*i+g*u+y*c,e[6]=b*n+E*o+T*f,e[7]=b*a+E*s+T*l,e[8]=b*i+E*u+T*c,e}function F0(e,r,t){var n=r[0],a=r[1],i=r[2],o=r[3],s=r[4],u=r[5],f=r[6],l=r[7],c=r[8],h=t[0],d=t[1];return e[0]=n,e[1]=a,e[2]=i,e[3]=o,e[4]=s,e[5]=u,e[6]=h*n+d*o+f,e[7]=h*a+d*s+l,e[8]=h*i+d*u+c,e}function L0(e,r,t){var n=r[0],a=r[1],i=r[2],o=r[3],s=r[4],u=r[5],f=r[6],l=r[7],c=r[8],h=Math.sin(t),d=Math.cos(t);return e[0]=d*n+h*o,e[1]=d*a+h*s,e[2]=d*i+h*u,e[3]=d*o-h*n,e[4]=d*s-h*a,e[5]=d*u-h*i,e[6]=f,e[7]=l,e[8]=c,e}function $l(e,r,t){var n=t[0],a=t[1];return e[0]=n*r[0],e[1]=n*r[1],e[2]=n*r[2],e[3]=a*r[3],e[4]=a*r[4],e[5]=a*r[5],e[6]=r[6],e[7]=r[7],e[8]=r[8],e}function k0(e,r){var t=r[0],n=r[1],a=r[2],i=r[3],o=t+t,s=n+n,u=a+a,f=t*o,l=n*o,c=n*s,h=a*o,d=a*s,p=a*u,v=i*o,g=i*s,y=i*u;return e[0]=1-c-p,e[3]=l-y,e[6]=h+g,e[1]=l+y,e[4]=1-f-p,e[7]=d-v,e[2]=h-g,e[5]=d+v,e[8]=1-f-c,e}function SI(e){var r=CI();return function(){var n=ve(e),a;if(r){var i=ve(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return ze(this,a)}}function CI(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var ec;(function(e){e[e.COL0ROW0=0]="COL0ROW0",e[e.COL0ROW1=1]="COL0ROW1",e[e.COL0ROW2=2]="COL0ROW2",e[e.COL1ROW0=3]="COL1ROW0",e[e.COL1ROW1=4]="COL1ROW1",e[e.COL1ROW2=5]="COL1ROW2",e[e.COL2ROW0=6]="COL2ROW0",e[e.COL2ROW1=7]="COL2ROW1",e[e.COL2ROW2=8]="COL2ROW2"})(ec||(ec={}));var wI=Object.freeze([1,0,0,0,1,0,0,0,1]),ge=function(e){Ve(t,e);var r=SI(t);function t(n){for(var a,i=arguments.length,o=new Array(i>1?i-1:0),s=1;s<i;s++)o[s-1]=arguments[s];return je(this,t),a=r.call(this,-0,-0,-0,-0,-0,-0,-0,-0,-0),arguments.length===1&&Array.isArray(n)?a.copy(n):o.length>0?a.copy([n].concat(o)):a.identity(),a}return He(t,[{key:"ELEMENTS",get:function(){return 9}},{key:"RANK",get:function(){return 3}},{key:"INDICES",get:function(){return ec}},{key:"copy",value:function(a){return this[0]=a[0],this[1]=a[1],this[2]=a[2],this[3]=a[3],this[4]=a[4],this[5]=a[5],this[6]=a[6],this[7]=a[7],this[8]=a[8],this.check()}},{key:"identity",value:function(){return this.copy(wI)}},{key:"fromObject",value:function(a){return this.check()}},{key:"fromQuaternion",value:function(a){return k0(this,a),this.check()}},{key:"set",value:function(a,i,o,s,u,f,l,c,h){return this[0]=a,this[1]=i,this[2]=o,this[3]=s,this[4]=u,this[5]=f,this[6]=l,this[7]=c,this[8]=h,this.check()}},{key:"setRowMajor",value:function(a,i,o,s,u,f,l,c,h){return this[0]=a,this[1]=s,this[2]=l,this[3]=i,this[4]=u,this[5]=c,this[6]=o,this[7]=f,this[8]=h,this.check()}},{key:"determinant",value:function(){return R0(this)}},{key:"transpose",value:function(){return I0(this,this),this.check()}},{key:"invert",value:function(){return P0(this,this),this.check()}},{key:"multiplyLeft",value:function(a){return Zl(this,a,this),this.check()}},{key:"multiplyRight",value:function(a){return Zl(this,this,a),this.check()}},{key:"rotate",value:function(a){return L0(this,this,a),this.check()}},{key:"scale",value:function(a){return Array.isArray(a)?$l(this,this,a):$l(this,this,[a,a]),this.check()}},{key:"translate",value:function(a){return F0(this,this,a),this.check()}},{key:"transform",value:function(a,i){var o;switch(a.length){case 2:o=xo(i||[-0,-0],a,this);break;case 3:o=So(i||[-0,-0,-0],a,this);break;case 4:o=zo(i||[-0,-0,-0,-0],a,this);break;default:throw new Error("Illegal vector")}return Cr(o,a.length),o}},{key:"transformVector",value:function(a,i){return this.transform(a,i)}},{key:"transformVector2",value:function(a,i){return this.transform(a,i)}},{key:"transformVector3",value:function(a,i){return this.transform(a,i)}}],[{key:"IDENTITY",get:function(){return MI()}},{key:"ZERO",get:function(){return BI()}}]),t}(qo);var Xo,Yo;function BI(){return Xo||(Xo=new ge([0,0,0,0,0,0,0,0,0]),Object.freeze(Xo)),Xo}function MI(){return Yo||(Yo=new ge,Object.freeze(Yo)),Yo}function OI(e){var r=II();return function(){var n=ve(e),a;if(r){var i=ve(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return ze(this,a)}}function II(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var nc;(function(e){e[e.COL0ROW0=0]="COL0ROW0",e[e.COL0ROW1=1]="COL0ROW1",e[e.COL0ROW2=2]="COL0ROW2",e[e.COL0ROW3=3]="COL0ROW3",e[e.COL1ROW0=4]="COL1ROW0",e[e.COL1ROW1=5]="COL1ROW1",e[e.COL1ROW2=6]="COL1ROW2",e[e.COL1ROW3=7]="COL1ROW3",e[e.COL2ROW0=8]="COL2ROW0",e[e.COL2ROW1=9]="COL2ROW1",e[e.COL2ROW2=10]="COL2ROW2",e[e.COL2ROW3=11]="COL2ROW3",e[e.COL3ROW0=12]="COL3ROW0",e[e.COL3ROW1=13]="COL3ROW1",e[e.COL3ROW2=14]="COL3ROW2",e[e.COL3ROW3=15]="COL3ROW3"})(nc||(nc={}));var PI=45*Math.PI/180,RI=1,tc=.1,rc=500,FI=Object.freeze([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),$=function(e){Ve(t,e);var r=OI(t);function t(n){var a;return je(this,t),a=r.call(this,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0),arguments.length===1&&Array.isArray(n)?a.copy(n):a.identity(),a}return He(t,[{key:"ELEMENTS",get:function(){return 16}},{key:"RANK",get:function(){return 4}},{key:"INDICES",get:function(){return nc}},{key:"copy",value:function(a){return this[0]=a[0],this[1]=a[1],this[2]=a[2],this[3]=a[3],this[4]=a[4],this[5]=a[5],this[6]=a[6],this[7]=a[7],this[8]=a[8],this[9]=a[9],this[10]=a[10],this[11]=a[11],this[12]=a[12],this[13]=a[13],this[14]=a[14],this[15]=a[15],this.check()}},{key:"set",value:function(a,i,o,s,u,f,l,c,h,d,p,v,g,y,b,E){return this[0]=a,this[1]=i,this[2]=o,this[3]=s,this[4]=u,this[5]=f,this[6]=l,this[7]=c,this[8]=h,this[9]=d,this[10]=p,this[11]=v,this[12]=g,this[13]=y,this[14]=b,this[15]=E,this.check()}},{key:"setRowMajor",value:function(a,i,o,s,u,f,l,c,h,d,p,v,g,y,b,E){return this[0]=a,this[1]=u,this[2]=h,this[3]=g,this[4]=i,this[5]=f,this[6]=d,this[7]=y,this[8]=o,this[9]=l,this[10]=p,this[11]=b,this[12]=s,this[13]=c,this[14]=v,this[15]=E,this.check()}},{key:"toRowMajor",value:function(a){return a[0]=this[0],a[1]=this[4],a[2]=this[8],a[3]=this[12],a[4]=this[1],a[5]=this[5],a[6]=this[9],a[7]=this[13],a[8]=this[2],a[9]=this[6],a[10]=this[10],a[11]=this[14],a[12]=this[3],a[13]=this[7],a[14]=this[11],a[15]=this[15],a}},{key:"identity",value:function(){return this.copy(FI)}},{key:"fromObject",value:function(a){return this.check()}},{key:"fromQuaternion",value:function(a){return Ay(this,a),this.check()}},{key:"frustum",value:function(a){var i=a.left,o=a.right,s=a.bottom,u=a.top,f=a.near,l=f===void 0?tc:f,c=a.far,h=c===void 0?rc:c;return h===1/0?DI(this,i,o,s,u,l):_y(this,i,o,s,u,l,h),this.check()}},{key:"lookAt",value:function(a){var i=a.eye,o=a.center,s=o===void 0?[0,0,0]:o,u=a.up,f=u===void 0?[0,1,0]:u;return Ty(this,i,s,f),this.check()}},{key:"ortho",value:function(a){var i=a.left,o=a.right,s=a.bottom,u=a.top,f=a.near,l=f===void 0?tc:f,c=a.far,h=c===void 0?rc:c;return by(this,i,o,s,u,l,h),this.check()}},{key:"orthographic",value:function(a){var i=a.fovy,o=i===void 0?PI:i,s=a.aspect,u=s===void 0?RI:s,f=a.focalDistance,l=f===void 0?1:f,c=a.near,h=c===void 0?tc:c,d=a.far,p=d===void 0?rc:d;G0(o);var v=o/2,g=l*Math.tan(v),y=g*u;return this.ortho({left:-y,right:y,bottom:-g,top:g,near:h,far:p})}},{key:"perspective",value:function(a){var i=a.fovy,o=i===void 0?45*Math.PI/180:i,s=a.aspect,u=s===void 0?1:s,f=a.near,l=f===void 0?.1:f,c=a.far,h=c===void 0?500:c;return G0(o),_o(this,o,u,l,h),this.check()}},{key:"determinant",value:function(){return my(this)}},{key:"getScale",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[-0,-0,-0];return a[0]=Math.sqrt(this[0]*this[0]+this[1]*this[1]+this[2]*this[2]),a[1]=Math.sqrt(this[4]*this[4]+this[5]*this[5]+this[6]*this[6]),a[2]=Math.sqrt(this[8]*this[8]+this[9]*this[9]+this[10]*this[10]),a}},{key:"getTranslation",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[-0,-0,-0];return a[0]=this[12],a[1]=this[13],a[2]=this[14],a}},{key:"getRotation",value:function(a,i){a=a||[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],i=i||[-0,-0,-0];var o=this.getScale(i),s=1/o[0],u=1/o[1],f=1/o[2];return a[0]=this[0]*s,a[1]=this[1]*u,a[2]=this[2]*f,a[3]=0,a[4]=this[4]*s,a[5]=this[5]*u,a[6]=this[6]*f,a[7]=0,a[8]=this[8]*s,a[9]=this[9]*u,a[10]=this[10]*f,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}},{key:"getRotationMatrix3",value:function(a,i){a=a||[-0,-0,-0,-0,-0,-0,-0,-0,-0],i=i||[-0,-0,-0];var o=this.getScale(i),s=1/o[0],u=1/o[1],f=1/o[2];return a[0]=this[0]*s,a[1]=this[1]*u,a[2]=this[2]*f,a[3]=this[4]*s,a[4]=this[5]*u,a[5]=this[6]*f,a[6]=this[8]*s,a[7]=this[9]*u,a[8]=this[10]*f,a}},{key:"transpose",value:function(){return py(this,this),this.check()}},{key:"invert",value:function(){return go(this,this),this.check()}},{key:"multiplyLeft",value:function(a){return on(this,a,this),this.check()}},{key:"multiplyRight",value:function(a){return on(this,this,a),this.check()}},{key:"rotateX",value:function(a){return yo(this,this,a),this.check()}},{key:"rotateY",value:function(a){return gy(this,this,a),this.check()}},{key:"rotateZ",value:function(a){return Ao(this,this,a),this.check()}},{key:"rotateXYZ",value:function(a){return this.rotateX(a[0]).rotateY(a[1]).rotateZ(a[2])}},{key:"rotateAxis",value:function(a,i){return vy(this,this,a,i),this.check()}},{key:"scale",value:function(a){return $n(this,this,Array.isArray(a)?a:[a,a,a]),this.check()}},{key:"translate",value:function(a){return sn(this,this,a),this.check()}},{key:"transform",value:function(a,i){return a.length===4?(i=mo(i||[-0,-0,-0,-0],a,this),Cr(i,4),i):this.transformAsPoint(a,i)}},{key:"transformAsPoint",value:function(a,i){var o=a.length,s;switch(o){case 2:s=Eo(i||[-0,-0],a,this);break;case 3:s=ra(i||[-0,-0,-0],a,this);break;default:throw new Error("Illegal vector")}return Cr(s,a.length),s}},{key:"transformAsVector",value:function(a,i){var o;switch(a.length){case 2:o=Ho(i||[-0,-0],a,this);break;case 3:o=Vo(i||[-0,-0,-0],a,this);break;default:throw new Error("Illegal vector")}return Cr(o,a.length),o}},{key:"transformPoint",value:function(a,i){return this.transformAsPoint(a,i)}},{key:"transformVector",value:function(a,i){return this.transformAsPoint(a,i)}},{key:"transformDirection",value:function(a,i){return this.transformAsVector(a,i)}},{key:"makeRotationX",value:function(a){return this.identity().rotateX(a)}},{key:"makeTranslation",value:function(a,i,o){return this.identity().translate([a,i,o])}}],[{key:"IDENTITY",get:function(){return kI()}},{key:"ZERO",get:function(){return LI()}}]),t}(qo);var Ko,Qo;function LI(){return Ko||(Ko=new $([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Object.freeze(Ko)),Ko}function kI(){return Qo||(Qo=new $,Object.freeze(Qo)),Qo}function G0(e){if(e>Math.PI*2)throw Error("expected radians")}function DI(e,r,t,n,a,i){var o=2*i/(t-r),s=2*i/(a-n),u=(t+r)/(t-r),f=(a+n)/(a-n),l=-1,c=-1,h=-2*i;return e[0]=o,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=s,e[6]=0,e[7]=0,e[8]=u,e[9]=f,e[10]=l,e[11]=c,e[12]=0,e[13]=0,e[14]=h,e[15]=0,e}function N0(){var e=new Qe(4);return Qe!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}function U0(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e}function ac(e,r,t){t=t*.5;var n=Math.sin(t);return e[0]=n*r[0],e[1]=n*r[1],e[2]=n*r[2],e[3]=Math.cos(t),e}function ic(e,r,t){var n=r[0],a=r[1],i=r[2],o=r[3],s=t[0],u=t[1],f=t[2],l=t[3];return e[0]=n*l+o*s+a*f-i*u,e[1]=a*l+o*u+i*s-n*f,e[2]=i*l+o*f+n*u-a*s,e[3]=o*l-n*s-a*u-i*f,e}function j0(e,r,t){t*=.5;var n=r[0],a=r[1],i=r[2],o=r[3],s=Math.sin(t),u=Math.cos(t);return e[0]=n*u+o*s,e[1]=a*u+i*s,e[2]=i*u-a*s,e[3]=o*u-n*s,e}function H0(e,r,t){t*=.5;var n=r[0],a=r[1],i=r[2],o=r[3],s=Math.sin(t),u=Math.cos(t);return e[0]=n*u-i*s,e[1]=a*u+o*s,e[2]=i*u+n*s,e[3]=o*u-a*s,e}function V0(e,r,t){t*=.5;var n=r[0],a=r[1],i=r[2],o=r[3],s=Math.sin(t),u=Math.cos(t);return e[0]=n*u+a*s,e[1]=a*u-n*s,e[2]=i*u+o*s,e[3]=o*u-i*s,e}function z0(e,r){var t=r[0],n=r[1],a=r[2];return e[0]=t,e[1]=n,e[2]=a,e[3]=Math.sqrt(Math.abs(1-t*t-n*n-a*a)),e}function hi(e,r,t,n){var a=r[0],i=r[1],o=r[2],s=r[3],u=t[0],f=t[1],l=t[2],c=t[3],h,d,p,v,g;return d=a*u+i*f+o*l+s*c,d<0&&(d=-d,u=-u,f=-f,l=-l,c=-c),1-d>Ae?(h=Math.acos(d),p=Math.sin(h),v=Math.sin((1-n)*h)/p,g=Math.sin(n*h)/p):(v=1-n,g=n),e[0]=v*a+g*u,e[1]=v*i+g*f,e[2]=v*o+g*l,e[3]=v*s+g*c,e}function W0(e,r){var t=r[0],n=r[1],a=r[2],i=r[3],o=t*t+n*n+a*a+i*i,s=o?1/o:0;return e[0]=-t*s,e[1]=-n*s,e[2]=-a*s,e[3]=i*s,e}function J0(e,r){return e[0]=-r[0],e[1]=-r[1],e[2]=-r[2],e[3]=r[3],e}function oc(e,r){var t=r[0]+r[4]+r[8],n;if(t>0)n=Math.sqrt(t+1),e[3]=.5*n,n=.5/n,e[0]=(r[5]-r[7])*n,e[1]=(r[6]-r[2])*n,e[2]=(r[1]-r[3])*n;else{var a=0;r[4]>r[0]&&(a=1),r[8]>r[a*3+a]&&(a=2);var i=(a+1)%3,o=(a+2)%3;n=Math.sqrt(r[a*3+a]-r[i*3+i]-r[o*3+o]+1),e[a]=.5*n,n=.5/n,e[3]=(r[i*3+o]-r[o*3+i])*n,e[i]=(r[i*3+a]+r[a*3+i])*n,e[o]=(r[o*3+a]+r[a*3+o])*n}return e}var q0=sy;var X0=po,Y0=cy,K0=hy,Q0=uy;var Z0=fy;var $0=ly;var e1=function(){var e=xl(),r=Sl(1,0,0),t=Sl(0,1,0);return function(n,a,i){var o=si(a,i);return o<-.999999?(ta(e,r,a),Fy(e)<1e-6&&ta(e,t,a),By(e,e),ac(n,e,Math.PI),n):o>.999999?(n[0]=0,n[1]=0,n[2]=0,n[3]=1,n):(ta(e,a,i),n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=1+o,$0(n,n))}}(),EH=function(){var e=N0(),r=N0();return function(t,n,a,i,o,s){return hi(e,n,o,s),hi(r,a,i,s),hi(t,e,r,2*s*(1-s)),t}}(),SH=function(){var e=O0();return function(r,t,n,a){return e[0]=n[0],e[3]=n[1],e[6]=n[2],e[1]=a[0],e[4]=a[1],e[7]=a[2],e[2]=-t[0],e[5]=-t[1],e[8]=-t[2],$0(r,oc(r,e))}}();function NI(e){var r=UI();return function(){var n=ve(e),a;if(r){var i=ve(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return ze(this,a)}}function UI(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var jI=[0,0,0,1],wr=function(e){Ve(t,e);var r=NI(t);function t(){var n,a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1;return je(this,t),n=r.call(this,-0,-0,-0,-0),Array.isArray(a)&&arguments.length===1?n.copy(a):n.set(a,i,o,s),n}return He(t,[{key:"copy",value:function(a){return this[0]=a[0],this[1]=a[1],this[2]=a[2],this[3]=a[3],this.check()}},{key:"set",value:function(a,i,o,s){return this[0]=a,this[1]=i,this[2]=o,this[3]=s,this.check()}},{key:"fromObject",value:function(a){return this[0]=a.x,this[1]=a.y,this[2]=a.z,this[3]=a.w,this.check()}},{key:"fromMatrix3",value:function(a){return oc(this,a),this.check()}},{key:"fromAxisRotation",value:function(a,i){return ac(this,a,i),this.check()}},{key:"identity",value:function(){return U0(this),this.check()}},{key:"setAxisAngle",value:function(a,i){return this.fromAxisRotation(a,i)}},{key:"ELEMENTS",get:function(){return 4}},{key:"x",get:function(){return this[0]},set:function(a){this[0]=ie(a)}},{key:"y",get:function(){return this[1]},set:function(a){this[1]=ie(a)}},{key:"z",get:function(){return this[2]},set:function(a){this[2]=ie(a)}},{key:"w",get:function(){return this[3]},set:function(a){this[3]=ie(a)}},{key:"len",value:function(){return Q0(this)}},{key:"lengthSquared",value:function(){return Z0(this)}},{key:"dot",value:function(a){return Y0(this,a)}},{key:"rotationTo",value:function(a,i){return e1(this,a,i),this.check()}},{key:"add",value:function(a){return q0(this,this,a),this.check()}},{key:"calculateW",value:function(){return z0(this,this),this.check()}},{key:"conjugate",value:function(){return J0(this,this),this.check()}},{key:"invert",value:function(){return W0(this,this),this.check()}},{key:"lerp",value:function(a,i,o){return o===void 0?this.lerp(this,a,i):(K0(this,a,i,o),this.check())}},{key:"multiplyRight",value:function(a){return ic(this,this,a),this.check()}},{key:"multiplyLeft",value:function(a){return ic(this,a,this),this.check()}},{key:"normalize",value:function(){var a=this.len(),i=a>0?1/a:0;return this[0]=this[0]*i,this[1]=this[1]*i,this[2]=this[2]*i,this[3]=this[3]*i,a===0&&(this[3]=1),this.check()}},{key:"rotateX",value:function(a){return j0(this,this,a),this.check()}},{key:"rotateY",value:function(a){return H0(this,this,a),this.check()}},{key:"rotateZ",value:function(a){return V0(this,this,a),this.check()}},{key:"scale",value:function(a){return X0(this,this,a),this.check()}},{key:"slerp",value:function(a,i,o){var s,u,f;switch(arguments.length){case 1:var l=a.start;s=l===void 0?jI:l,u=a.target,f=a.ratio;break;case 2:s=this,u=a,f=i;break;default:s=a,u=i,f=o}return hi(this,s,u,f),this.check()}},{key:"transformVector4",value:function(a){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:new M0;return dy(i,a,this),Cr(i,4)}},{key:"lengthSq",value:function(){return this.lengthSquared()}},{key:"setFromAxisAngle",value:function(a,i){return this.setAxisAngle(a,i)}},{key:"premultiply",value:function(a){return this.multiplyLeft(a)}},{key:"multiply",value:function(a){return this.multiplyRight(a)}}]),t}(ia);var Vt={EPSILON1:.1,EPSILON2:.01,EPSILON3:.001,EPSILON4:1e-4,EPSILON5:1e-5,EPSILON6:1e-6,EPSILON7:1e-7,EPSILON8:1e-8,EPSILON9:1e-9,EPSILON10:1e-10,EPSILON11:1e-11,EPSILON12:1e-12,EPSILON13:1e-13,EPSILON14:1e-14,EPSILON15:1e-15,EPSILON16:1e-16,EPSILON17:1e-17,EPSILON18:1e-18,EPSILON19:1e-19,EPSILON20:1e-20,PI_OVER_TWO:Math.PI/2,PI_OVER_FOUR:Math.PI/4,PI_OVER_SIX:Math.PI/6,TWO_PI:Math.PI*2};var t1=m(X()),r1=m(H()),n1=m(z()),Je=m(W()),sc=m(Y()),di=function(){function e(r){(0,r1.default)(this,e),(0,Je.default)(this,"index",void 0),(0,Je.default)(this,"isVisible",void 0),(0,Je.default)(this,"isSelected",void 0),(0,Je.default)(this,"parent",void 0),(0,Je.default)(this,"children",void 0),(0,Je.default)(this,"content",void 0),(0,Je.default)(this,"state",void 0),(0,Je.default)(this,"layers",void 0),(0,Je.default)(this,"id",void 0),(0,Je.default)(this,"bbox",void 0),(0,Je.default)(this,"zoom",void 0),(0,Je.default)(this,"userData",void 0),(0,Je.default)(this,"_abortController",void 0),(0,Je.default)(this,"_loader",void 0),(0,Je.default)(this,"_loaderId",void 0),(0,Je.default)(this,"_isLoaded",void 0),(0,Je.default)(this,"_isCancelled",void 0),(0,Je.default)(this,"_needsReload",void 0),this.index=r,this.isVisible=!1,this.isSelected=!1,this.parent=null,this.children=[],this.content=null,this._loader=void 0,this._abortController=null,this._loaderId=0,this._isLoaded=!1,this._isCancelled=!1,this._needsReload=!1}return(0,n1.default)(e,[{key:"data",get:function(){var t=this;return this.isLoading&&this._loader?this._loader.then(function(){return t.data}):this.content}},{key:"isLoaded",get:function(){return this._isLoaded&&!this._needsReload}},{key:"isLoading",get:function(){return Boolean(this._loader)&&!this._isCancelled}},{key:"needsReload",get:function(){return this._needsReload||this._isCancelled}},{key:"byteLength",get:function(){var t=this.content?this.content.byteLength:0;return Number.isFinite(t)||console.error("byteLength not defined in tile data"),t}},{key:"_loadData",value:function(){var r=(0,t1.default)(sc.default.mark(function n(a){var i,o,s,u,f,l,c,h,d,p,v,g,y,b;return sc.default.wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return i=a.getData,o=a.requestScheduler,s=a.onLoad,u=a.onError,f=this.index,l=this.id,c=this.bbox,h=this.userData,d=this.zoom,p=this._loaderId,this._abortController=new AbortController,v=this._abortController.signal,T.next=7,o.scheduleRequest(this,function(S){return S.isSelected?1:-1});case 7:if(g=T.sent,g){T.next=11;break}return this._isCancelled=!0,T.abrupt("return");case 11:if(!this._isCancelled){T.next=14;break}return g.done(),T.abrupt("return");case 14:return y=null,T.prev=15,T.next=18,i({index:f,id:l,bbox:c,userData:h,zoom:d,signal:v});case 18:y=T.sent,T.next=24;break;case 21:T.prev=21,T.t0=T.catch(15),b=T.t0||!0;case 24:return T.prev=24,g.done(),T.finish(24);case 27:if(p===this._loaderId){T.next=29;break}return T.abrupt("return");case 29:if(this._loader=void 0,this.content=y,!(this._isCancelled&&!y)){T.next=34;break}return this._isLoaded=!1,T.abrupt("return");case 34:this._isLoaded=!0,this._isCancelled=!1,b?u(b,this):s(this);case 37:case"end":return T.stop()}},n,this,[[15,21,24,27]])}));function t(n){return r.apply(this,arguments)}return t}()},{key:"loadData",value:function(t){return this._isLoaded=!1,this._isCancelled=!1,this._needsReload=!1,this._loaderId++,this._loader=this._loadData(t),this._loader}},{key:"setNeedsReload",value:function(){this.isLoading&&(this.abort(),this._loader=void 0),this._needsReload=!0}},{key:"abort",value:function(){var t;this.isLoaded||(this._isCancelled=!0,(t=this._abortController)===null||t===void 0||t.abort())}}]),e}();var mn=m(ce()),vi=m(Et());var yc=m(ce()),g1=m(H()),y1=m(z()),pn=m(W()),mi=m(Pt());var Le={OUTSIDE:-1,INTERSECTING:0,INSIDE:1};function ot(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function a1(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function st(e,r,t){return r&&a1(e.prototype,r),t&&a1(e,t),e}function J(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var i1=new w,HI=new w,Zo=function(){function e(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[0,0,0],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0,0,0],n=arguments.length>2?arguments[2]:void 0;ot(this,e),J(this,"center",void 0),J(this,"halfDiagonal",void 0),J(this,"minimum",void 0),J(this,"maximum",void 0),n=n||i1.copy(r).add(t).scale(.5),this.center=new w(n),this.halfDiagonal=new w(t).subtract(this.center),this.minimum=new w(r),this.maximum=new w(t)}return st(e,[{key:"clone",value:function(){return new e(this.minimum,this.maximum,this.center)}},{key:"equals",value:function(t){return this===t||Boolean(t)&&this.minimum.equals(t.minimum)&&this.maximum.equals(t.maximum)}},{key:"transform",value:function(t){return this.center.transformAsPoint(t),this.halfDiagonal.transform(t),this.minimum.transform(t),this.maximum.transform(t),this}},{key:"intersectPlane",value:function(t){var n=this.halfDiagonal,a=HI.from(t.normal),i=n.x*Math.abs(a.x)+n.y*Math.abs(a.y)+n.z*Math.abs(a.z),o=this.center.dot(a)+t.distance;return o-i>0?Le.INSIDE:o+i<0?Le.OUTSIDE:Le.INTERSECTING}},{key:"distanceTo",value:function(t){return Math.sqrt(this.distanceSquaredTo(t))}},{key:"distanceSquaredTo",value:function(t){var n=i1.from(t).subtract(this.center),a=this.halfDiagonal,i=0,o;return o=Math.abs(n.x)-a.x,o>0&&(i+=o*o),o=Math.abs(n.y)-a.y,o>0&&(i+=o*o),o=Math.abs(n.z)-a.z,o>0&&(i+=o*o),i}}]),e}();var pi=new w,o1=new w,Br=function(){function e(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[0,0,0],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;ot(this,e),J(this,"center",void 0),J(this,"radius",void 0),this.radius=-0,this.center=new w,this.fromCenterRadius(r,t)}return st(e,[{key:"fromCenterRadius",value:function(t,n){return this.center.from(t),this.radius=n,this}},{key:"fromCornerPoints",value:function(t,n){return n=pi.from(n),this.center=new w().from(t).add(n).scale(.5),this.radius=this.center.distance(n),this}},{key:"equals",value:function(t){return this===t||Boolean(t)&&this.center.equals(t.center)&&this.radius===t.radius}},{key:"clone",value:function(){return new e(this.center,this.radius)}},{key:"union",value:function(t){var n=this.center,a=this.radius,i=t.center,o=t.radius,s=pi.copy(i).subtract(n),u=s.magnitude();if(a>=u+o)return this.clone();if(o>=u+a)return t.clone();var f=(a+u+o)*.5;return o1.copy(s).scale((-a+f)/u).add(n),this.center.copy(o1),this.radius=f,this}},{key:"expand",value:function(t){var n=pi.from(t),a=n.subtract(this.center).magnitude();return a>this.radius&&(this.radius=a),this}},{key:"transform",value:function(t){this.center.transform(t);var n=yy(pi,t);return this.radius=Math.max(n[0],Math.max(n[1],n[2]))*this.radius,this}},{key:"distanceSquaredTo",value:function(t){var n=this.distanceTo(t);return n*n}},{key:"distanceTo",value:function(t){var n=pi.from(t),a=n.subtract(this.center);return Math.max(0,a.len()-this.radius)}},{key:"intersectPlane",value:function(t){var n=this.center,a=this.radius,i=t.normal,o=i.dot(n)+t.distance;return o<-a?Le.OUTSIDE:o<a?Le.INTERSECTING:Le.INSIDE}}]),e}();function sa(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function uc(e){if(Array.isArray(e))return sa(e)}function fc(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function lc(e,r){if(e){if(typeof e=="string")return sa(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return sa(e,r)}}function cc(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Mr(e){return uc(e)||fc(e)||lc(e)||cc()}var VI=new w,zI=new w,$o=new w,es=new w,ts=new w,WI=new w,JI=new w,nr={COLUMN0ROW0:0,COLUMN0ROW1:1,COLUMN0ROW2:2,COLUMN1ROW0:3,COLUMN1ROW1:4,COLUMN1ROW2:5,COLUMN2ROW0:6,COLUMN2ROW1:7,COLUMN2ROW2:8},dn=function(){function e(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[0,0,0],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0,0,0,0,0,0,0,0,0];ot(this,e),J(this,"center",void 0),J(this,"halfAxes",void 0),this.center=new w().from(r),this.halfAxes=new ge(t)}return st(e,[{key:"halfSize",get:function(){var t=this.halfAxes.getColumn(0),n=this.halfAxes.getColumn(1),a=this.halfAxes.getColumn(2);return[new w(t).len(),new w(n).len(),new w(a).len()]}},{key:"quaternion",get:function(){var t=this.halfAxes.getColumn(0),n=this.halfAxes.getColumn(1),a=this.halfAxes.getColumn(2),i=new w(t).normalize(),o=new w(n).normalize(),s=new w(a).normalize();return new wr().fromMatrix3(new ge([].concat(Mr(i),Mr(o),Mr(s))))}},{key:"fromCenterHalfSizeQuaternion",value:function(t,n,a){var i=new wr(a),o=new ge().fromQuaternion(i);return o[0]=o[0]*n[0],o[1]=o[1]*n[0],o[2]=o[2]*n[0],o[3]=o[3]*n[1],o[4]=o[4]*n[1],o[5]=o[5]*n[1],o[6]=o[6]*n[2],o[7]=o[7]*n[2],o[8]=o[8]*n[2],this.center=new w().from(t),this.halfAxes=o,this}},{key:"clone",value:function(){return new e(this.center,this.halfAxes)}},{key:"equals",value:function(t){return this===t||Boolean(t)&&this.center.equals(t.center)&&this.halfAxes.equals(t.halfAxes)}},{key:"getBoundingSphere",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new Br,n=this.halfAxes,a=n.getColumn(0,$o),i=n.getColumn(1,es),o=n.getColumn(2,ts),s=VI.copy(a).add(i).add(o);return t.center.copy(this.center),t.radius=s.magnitude(),t}},{key:"intersectPlane",value:function(t){var n=this.center,a=t.normal,i=this.halfAxes,o=a.x,s=a.y,u=a.z,f=Math.abs(o*i[nr.COLUMN0ROW0]+s*i[nr.COLUMN0ROW1]+u*i[nr.COLUMN0ROW2])+Math.abs(o*i[nr.COLUMN1ROW0]+s*i[nr.COLUMN1ROW1]+u*i[nr.COLUMN1ROW2])+Math.abs(o*i[nr.COLUMN2ROW0]+s*i[nr.COLUMN2ROW1]+u*i[nr.COLUMN2ROW2]),l=a.dot(n)+t.distance;return l<=-f?Le.OUTSIDE:l>=f?Le.INSIDE:Le.INTERSECTING}},{key:"distanceTo",value:function(t){return Math.sqrt(this.distanceSquaredTo(t))}},{key:"distanceSquaredTo",value:function(t){var n=zI.from(t).subtract(this.center),a=this.halfAxes,i=a.getColumn(0,$o),o=a.getColumn(1,es),s=a.getColumn(2,ts),u=i.magnitude(),f=o.magnitude(),l=s.magnitude();i.normalize(),o.normalize(),s.normalize();var c=0,h;return h=Math.abs(n.dot(i))-u,h>0&&(c+=h*h),h=Math.abs(n.dot(o))-f,h>0&&(c+=h*h),h=Math.abs(n.dot(s))-l,h>0&&(c+=h*h),c}},{key:"computePlaneDistances",value:function(t,n){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[-0,-0],i=Number.POSITIVE_INFINITY,o=Number.NEGATIVE_INFINITY,s=this.center,u=this.halfAxes,f=u.getColumn(0,$o),l=u.getColumn(1,es),c=u.getColumn(2,ts),h=WI.copy(f).add(l).add(c).add(s),d=JI.copy(h).subtract(t),p=n.dot(d);return i=Math.min(p,i),o=Math.max(p,o),h.copy(s).add(f).add(l).subtract(c),d.copy(h).subtract(t),p=n.dot(d),i=Math.min(p,i),o=Math.max(p,o),h.copy(s).add(f).subtract(l).add(c),d.copy(h).subtract(t),p=n.dot(d),i=Math.min(p,i),o=Math.max(p,o),h.copy(s).add(f).subtract(l).subtract(c),d.copy(h).subtract(t),p=n.dot(d),i=Math.min(p,i),o=Math.max(p,o),s.copy(h).subtract(f).add(l).add(c),d.copy(h).subtract(t),p=n.dot(d),i=Math.min(p,i),o=Math.max(p,o),s.copy(h).subtract(f).add(l).subtract(c),d.copy(h).subtract(t),p=n.dot(d),i=Math.min(p,i),o=Math.max(p,o),s.copy(h).subtract(f).subtract(l).add(c),d.copy(h).subtract(t),p=n.dot(d),i=Math.min(p,i),o=Math.max(p,o),s.copy(h).subtract(f).subtract(l).subtract(c),d.copy(h).subtract(t),p=n.dot(d),i=Math.min(p,i),o=Math.max(p,o),a[0]=i,a[1]=o,a}},{key:"transform",value:function(t){this.center.transformAsPoint(t);var n=this.halfAxes.getColumn(0,$o);n.transformAsPoint(t);var a=this.halfAxes.getColumn(1,es);a.transformAsPoint(t);var i=this.halfAxes.getColumn(2,ts);return i.transformAsPoint(t),this.halfAxes=new ge([].concat(Mr(n),Mr(a),Mr(i))),this}},{key:"getTransform",value:function(){throw new Error("not implemented")}}]),e}();var s1=new w,u1=new w,ke=function(){function e(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[0,0,1],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;ot(this,e),J(this,"normal",void 0),J(this,"distance",void 0),this.normal=new w,this.distance=-0,this.fromNormalDistance(r,t)}return st(e,[{key:"fromNormalDistance",value:function(t,n){return ue(Number.isFinite(n)),this.normal.from(t).normalize(),this.distance=n,this}},{key:"fromPointNormal",value:function(t,n){t=s1.from(t),this.normal.from(n).normalize();var a=-this.normal.dot(t);return this.distance=a,this}},{key:"fromCoefficients",value:function(t,n,a,i){return this.normal.set(t,n,a),ue(We(this.normal.len(),1)),this.distance=i,this}},{key:"clone",value:function(){return new e(this.normal,this.distance)}},{key:"equals",value:function(t){return We(this.distance,t.distance)&&We(this.normal,t.normal)}},{key:"getPointDistance",value:function(t){return this.normal.dot(t)+this.distance}},{key:"transform",value:function(t){var n=u1.copy(this.normal).transformAsVector(t).normalize(),a=this.normal.scale(-this.distance).transform(t);return this.fromPointNormal(a,n)}},{key:"projectPointOntoPlane",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0,0,0];t=s1.from(t);var a=this.getPointDistance(t),i=u1.copy(this.normal).scale(a);return t.subtract(i).to(n)}}]),e}();function f1(e,r){var t=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=qI(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(f){throw f},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,o=!1,s;return{s:function(){t=t.call(e)},n:function(){var f=t.next();return i=f.done,f},e:function(f){o=!0,s=f},f:function(){try{!i&&t.return!=null&&t.return()}finally{if(o)throw s}}}}function qI(e,r){if(e){if(typeof e=="string")return l1(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return l1(e,r)}}function l1(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var c1=[new w([1,0,0]),new w([0,1,0]),new w([0,0,1])],h1=new w,XI=new w,YV=new ke(new w(1,0,0),0),dt=function(){function e(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];ot(this,e),J(this,"planes",void 0),this.planes=r}return st(e,[{key:"fromBoundingSphere",value:function(t){this.planes.length=2*c1.length;var n=t.center,a=t.radius,i=0,o=f1(c1),s;try{for(o.s();!(s=o.n()).done;){var u=s.value,f=this.planes[i],l=this.planes[i+1];f||(f=this.planes[i]=new ke),l||(l=this.planes[i+1]=new ke);var c=h1.copy(u).scale(-a).add(n),h=-u.dot(c);f.fromPointNormal(c,u);var d=h1.copy(u).scale(a).add(n),p=XI.copy(u).negate(),v=-p.dot(d);l.fromPointNormal(d,p),i+=2}}catch(g){o.e(g)}finally{o.f()}return this}},{key:"computeVisibility",value:function(t){var n=Le.INSIDE,a=f1(this.planes),i;try{for(a.s();!(i=a.n()).done;){var o=i.value,s=t.intersectPlane(o);switch(s){case Le.OUTSIDE:return Le.OUTSIDE;case Le.INTERSECTING:n=Le.INTERSECTING;break;default:}}}catch(u){a.e(u)}finally{a.f()}return n}},{key:"computeVisibilityWithPlaneMask",value:function(t,n){if(ue(Number.isFinite(n),"parentPlaneMask is required."),n===e.MASK_OUTSIDE||n===e.MASK_INSIDE)return n;for(var a=e.MASK_INSIDE,i=this.planes,o=0;o<this.planes.length;++o){var s=o<31?1<<o:0;if(!(o<31&&!(n&s))){var u=i[o],f=t.intersectPlane(u);if(f===Le.OUTSIDE)return e.MASK_OUTSIDE;f===Le.INTERSECTING&&(a|=s)}}return a}}]),e}();J(dt,"MASK_OUTSIDE",4294967295);J(dt,"MASK_INSIDE",0);J(dt,"MASK_INDETERMINATE",2147483647);var YI=new w,KI=new w,QI=new w,ZI=new w,$I=new w,hc=function(){function e(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};ot(this,e),J(this,"left",void 0),J(this,"_left",void 0),J(this,"right",void 0),J(this,"_right",void 0),J(this,"top",void 0),J(this,"_top",void 0),J(this,"bottom",void 0),J(this,"_bottom",void 0),J(this,"near",void 0),J(this,"_near",void 0),J(this,"far",void 0),J(this,"_far",void 0),J(this,"_cullingVolume",new dt([new ke,new ke,new ke,new ke,new ke,new ke])),J(this,"_perspectiveMatrix",new $),J(this,"_infinitePerspective",new $);var t=r.near,n=t===void 0?1:t,a=r.far,i=a===void 0?5e8:a;this.left=r.left,this._left=void 0,this.right=r.right,this._right=void 0,this.top=r.top,this._top=void 0,this.bottom=r.bottom,this._bottom=void 0,this.near=n,this._near=n,this.far=i,this._far=i}return st(e,[{key:"clone",value:function(){return new e({right:this.right,left:this.left,top:this.top,bottom:this.bottom,near:this.near,far:this.far})}},{key:"equals",value:function(t){return t&&t instanceof e&&this.right===t.right&&this.left===t.left&&this.top===t.top&&this.bottom===t.bottom&&this.near===t.near&&this.far===t.far}},{key:"projectionMatrix",get:function(){return this._update(),this._perspectiveMatrix}},{key:"infiniteProjectionMatrix",get:function(){return this._update(),this._infinitePerspective}},{key:"computeCullingVolume",value:function(t,n,a){ue(t,"position is required."),ue(n,"direction is required."),ue(a,"up is required.");var i=this._cullingVolume.planes;a=YI.copy(a).normalize();var o=KI.copy(n).cross(a).normalize(),s=QI.copy(n).multiplyByScalar(this.near).add(t),u=ZI.copy(n).multiplyByScalar(this.far).add(t),f=$I;return f.copy(o).multiplyByScalar(this.left).add(s).subtract(t).cross(a),i[0].fromPointNormal(t,f),f.copy(o).multiplyByScalar(this.right).add(s).subtract(t).cross(a).negate(),i[1].fromPointNormal(t,f),f.copy(a).multiplyByScalar(this.bottom).add(s).subtract(t).cross(o).negate(),i[2].fromPointNormal(t,f),f.copy(a).multiplyByScalar(this.top).add(s).subtract(t).cross(o),i[3].fromPointNormal(t,f),f=new w().copy(n),i[4].fromPointNormal(s,f),f.negate(),i[5].fromPointNormal(u,f),this._cullingVolume}},{key:"getPixelDimensions",value:function(t,n,a,i){this._update(),ue(Number.isFinite(t)&&Number.isFinite(n)),ue(t>0),ue(n>0),ue(a>0),ue(i);var o=1/this.near,s=this.top*o,u=2*a*s/n;s=this.right*o;var f=2*a*s/t;return i.x=f,i.y=u,i}},{key:"_update",value:function(){ue(Number.isFinite(this.right)&&Number.isFinite(this.left)&&Number.isFinite(this.top)&&Number.isFinite(this.bottom)&&Number.isFinite(this.near)&&Number.isFinite(this.far));var t=this.top,n=this.bottom,a=this.right,i=this.left,o=this.near,s=this.far;(t!==this._top||n!==this._bottom||i!==this._left||a!==this._right||o!==this._near||s!==this._far)&&(ue(this.near>0&&this.near<this.far,"near must be greater than zero and less than far."),this._left=i,this._right=a,this._top=t,this._bottom=n,this._near=o,this._far=s,this._perspectiveMatrix=new $().frustum({left:i,right:a,bottom:n,top:t,near:o,far:s}),this._infinitePerspective=new $().frustum({left:i,right:a,bottom:n,top:t,near:o,far:1/0}))}}]),e}();var eP=function(r){return r!==null&&typeof r<"u"},tP=function(){function e(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};ot(this,e),J(this,"_offCenterFrustum",new hc),J(this,"fov",void 0),J(this,"_fov",void 0),J(this,"_fovy",void 0),J(this,"_sseDenominator",void 0),J(this,"aspectRatio",void 0),J(this,"_aspectRatio",void 0),J(this,"near",void 0),J(this,"_near",void 0),J(this,"far",void 0),J(this,"_far",void 0),J(this,"xOffset",void 0),J(this,"_xOffset",void 0),J(this,"yOffset",void 0),J(this,"_yOffset",void 0);var t=r.fov,n=r.aspectRatio,a=r.near,i=a===void 0?1:a,o=r.far,s=o===void 0?5e8:o,u=r.xOffset,f=u===void 0?0:u,l=r.yOffset,c=l===void 0?0:l;this.fov=t,this.aspectRatio=n,this.near=i,this.far=s,this.xOffset=f,this.yOffset=c}return st(e,[{key:"clone",value:function(){return new e({aspectRatio:this.aspectRatio,fov:this.fov,near:this.near,far:this.far})}},{key:"equals",value:function(t){return!eP(t)||!(t instanceof e)?!1:(this._update(),t._update(),this.fov===t.fov&&this.aspectRatio===t.aspectRatio&&this.near===t.near&&this.far===t.far&&this._offCenterFrustum.equals(t._offCenterFrustum))}},{key:"projectionMatrix",get:function(){return this._update(),this._offCenterFrustum.projectionMatrix}},{key:"infiniteProjectionMatrix",get:function(){return this._update(),this._offCenterFrustum.infiniteProjectionMatrix}},{key:"fovy",get:function(){return this._update(),this._fovy}},{key:"sseDenominator",get:function(){return this._update(),this._sseDenominator}},{key:"computeCullingVolume",value:function(t,n,a){return this._update(),this._offCenterFrustum.computeCullingVolume(t,n,a)}},{key:"getPixelDimensions",value:function(t,n,a,i){return this._update(),this._offCenterFrustum.getPixelDimensions(t,n,a,i||new hn)}},{key:"_update",value:function(){ue(Number.isFinite(this.fov)&&Number.isFinite(this.aspectRatio)&&Number.isFinite(this.near)&&Number.isFinite(this.far));var t=this._offCenterFrustum;(this.fov!==this._fov||this.aspectRatio!==this._aspectRatio||this.near!==this._near||this.far!==this._far||this.xOffset!==this._xOffset||this.yOffset!==this._yOffset)&&(ue(this.fov>=0&&this.fov<Math.PI),ue(this.aspectRatio>0),ue(this.near>=0&&this.near<this.far),this._aspectRatio=this.aspectRatio,this._fov=this.fov,this._fovy=this.aspectRatio<=1?this.fov:Math.atan(Math.tan(this.fov*.5)/this.aspectRatio)*2,this._near=this.near,this._far=this.far,this._sseDenominator=2*Math.tan(.5*this._fovy),this._xOffset=this.xOffset,this._yOffset=this.yOffset,t.top=this.near*Math.tan(.5*this._fovy),t.bottom=-t.top,t.right=this.aspectRatio*t.top,t.left=-t.right,t.near=this.near,t.far=this.far,t.right+=this.xOffset,t.left+=this.xOffset,t.top+=this.yOffset,t.bottom+=this.yOffset)}}]),e}();var h5=new w,d5=new w,p5=new w,m5=new w,v5=new w,g5=new w,y5=new w,A5=new w,_5=new w,b5=new w,T5=new w,x5=new w,E5=4/3*Math.PI;var zt=new ge,rP=new ge,nP=new ge,rs=new ge,d1=new ge;function ns(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=Vt.EPSILON20,n=10,a=0,i=0,o=rP,s=nP;o.identity(),s.copy(e);for(var u=t*aP(s);i<n&&iP(s)>u;)oP(s,rs),d1.copy(rs).transpose(),s.multiplyRight(rs),s.multiplyLeft(d1),o.multiplyRight(rs),++a>2&&(++i,a=0);return r.unitary=o.toTarget(r.unitary),r.diagonal=s.toTarget(r.diagonal),r}function aP(e){for(var r=0,t=0;t<9;++t){var n=e[t];r+=n*n}return Math.sqrt(r)}var dc=[1,0,0],pc=[2,2,1];function iP(e){for(var r=0,t=0;t<3;++t){var n=e[zt.getElementIndex(pc[t],dc[t])];r+=2*n*n}return Math.sqrt(r)}function oP(e,r){for(var t=Vt.EPSILON15,n=0,a=1,i=0;i<3;++i){var o=Math.abs(e[zt.getElementIndex(pc[i],dc[i])]);o>n&&(a=i,n=o)}var s=dc[a],u=pc[a],f=1,l=0;if(Math.abs(e[zt.getElementIndex(u,s)])>t){var c=e[zt.getElementIndex(u,u)],h=e[zt.getElementIndex(s,s)],d=e[zt.getElementIndex(u,s)],p=(c-h)/2/d,v;p<0?v=-1/(-p+Math.sqrt(1+p*p)):v=1/(p+Math.sqrt(1+p*p)),f=1/Math.sqrt(1+v*v),l=v*f}return ge.IDENTITY.to(r),r[zt.getElementIndex(s,s)]=r[zt.getElementIndex(u,u)]=f,r[zt.getElementIndex(u,s)]=l,r[zt.getElementIndex(s,u)]=-l,r}function mc(e,r){var t=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=sP(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(f){throw f},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,o=!1,s;return{s:function(){t=t.call(e)},n:function(){var f=t.next();return i=f.done,f},e:function(f){o=!0,s=f},f:function(){try{!i&&t.return!=null&&t.return()}finally{if(o)throw s}}}}function sP(e,r){if(e){if(typeof e=="string")return p1(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return p1(e,r)}}function p1(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var Or=new w,uP=new w,fP=new w,lP=new w,cP=new w,hP=new ge,dP={diagonal:new ge,unitary:new ge};function vc(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:new dn;if(!e||e.length===0)return r.halfAxes=new ge([0,0,0,0,0,0,0,0,0]),r.center=new w,r;var t=e.length,n=new w(0,0,0),a=mc(e),i;try{for(a.s();!(i=a.n()).done;){var o=i.value;n.add(o)}}catch(j){a.e(j)}finally{a.f()}var s=1/t;n.multiplyByScalar(s);var u=0,f=0,l=0,c=0,h=0,d=0,p=mc(e),v;try{for(p.s();!(v=p.n()).done;){var g=v.value,y=Or.copy(g).subtract(n);u+=y.x*y.x,f+=y.x*y.y,l+=y.x*y.z,c+=y.y*y.y,h+=y.y*y.z,d+=y.z*y.z}}catch(j){p.e(j)}finally{p.f()}u*=s,f*=s,l*=s,c*=s,h*=s,d*=s;var b=hP;b[0]=u,b[1]=f,b[2]=l,b[3]=f,b[4]=c,b[5]=h,b[6]=l,b[7]=h,b[8]=d;var E=ns(b,dP),T=E.unitary,S=r.halfAxes.copy(T),I=S.getColumn(0,fP),L=S.getColumn(1,lP),B=S.getColumn(2,cP),C=-Number.MAX_VALUE,_=-Number.MAX_VALUE,R=-Number.MAX_VALUE,F=Number.MAX_VALUE,D=Number.MAX_VALUE,k=Number.MAX_VALUE,M=mc(e),O;try{for(M.s();!(O=M.n()).done;){var P=O.value;Or.copy(P),C=Math.max(Or.dot(I),C),_=Math.max(Or.dot(L),_),R=Math.max(Or.dot(B),R),F=Math.min(Or.dot(I),F),D=Math.min(Or.dot(L),D),k=Math.min(Or.dot(B),k)}}catch(j){M.e(j)}finally{M.f()}I=I.multiplyByScalar(.5*(F+C)),L=L.multiplyByScalar(.5*(D+_)),B=B.multiplyByScalar(.5*(k+R)),r.center.copy(I).add(L).add(B);var U=uP.set(C-F,_-D,R-k).multiplyByScalar(.5),G=new ge([U[0],0,0,0,U[1],0,0,0,U[2]]);return r.halfAxes.multiplyRight(G),r}function gc(e,r){var t=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=pP(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(f){throw f},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,o=!1,s;return{s:function(){t=t.call(e)},n:function(){var f=t.next();return i=f.done,f},e:function(f){o=!0,s=f},f:function(){try{!i&&t.return!=null&&t.return()}finally{if(o)throw s}}}}function pP(e,r){if(e){if(typeof e=="string")return m1(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return m1(e,r)}}function m1(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var ua=512,v1=3,A1=[[.5,.5],[0,0],[0,1],[1,0],[1,1]],_1=A1.concat([[0,.5],[.5,0],[1,.5],[.5,1]]),mP=_1.concat([[.25,.5],[.75,.5]]),vP=function(){function e(r,t,n){(0,g1.default)(this,e),(0,pn.default)(this,"x",void 0),(0,pn.default)(this,"y",void 0),(0,pn.default)(this,"z",void 0),(0,pn.default)(this,"childVisible",void 0),(0,pn.default)(this,"selected",void 0),(0,pn.default)(this,"_children",void 0),this.x=r,this.y=t,this.z=n}return(0,y1.default)(e,[{key:"children",get:function(){if(!this._children){var t=this.x*2,n=this.y*2,a=this.z+1;this._children=[new e(t,n,a),new e(t,n+1,a),new e(t+1,n,a),new e(t+1,n+1,a)]}return this._children}},{key:"update",value:function(t){var n=t.viewport,a=t.cullingVolume,i=t.elevationBounds,o=t.minZ,s=t.maxZ,u=t.bounds,f=t.offset,l=t.project,c=this.getBoundingVolume(i,f,l);if(u&&!this.insideBounds(u))return!1;var h=a.computeVisibility(c);if(h<0)return!1;if(!this.childVisible){var d=this.z;if(d<s&&d>=o){var p=c.distanceTo(n.cameraPosition)*n.scale/n.height;d+=Math.floor(Math.log2(p))}if(d>=s)return this.selected=!0,!0}this.selected=!1,this.childVisible=!0;var v=gc(this.children),g;try{for(v.s();!(g=v.n()).done;){var y=g.value;y.update(t)}}catch(b){v.e(b)}finally{v.f()}return!0}},{key:"getSelected",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];if(this.selected&&t.push(this),this._children){var n=gc(this._children),a;try{for(n.s();!(a=n.n()).done;){var i=a.value;i.getSelected(t)}}catch(o){n.e(o)}finally{n.f()}}return t}},{key:"insideBounds",value:function(t){var n=(0,yc.default)(t,4),a=n[0],i=n[1],o=n[2],s=n[3],u=Math.pow(2,this.z),f=ua/u;return this.x*f<o&&this.y*f<s&&(this.x+1)*f>a&&(this.y+1)*f>i}},{key:"getBoundingVolume",value:function(t,n,a){if(a){var i=this.z<1?mP:this.z<2?_1:A1,o=[],s=gc(i),u;try{for(s.s();!(u=s.n()).done;){var f=u.value,l=as(this.x+f[0],this.y+f[1],this.z);l[2]=t[0],o.push(a(l)),t[0]!==t[1]&&(l[2]=t[1],o.push(a(l)))}}catch(v){s.e(v)}finally{s.f()}return vc(o)}var c=Math.pow(2,this.z),h=ua/c,d=this.x*h+n*ua,p=ua-(this.y+1)*h;return new Zo([d,p,t[0]],[d+h,p+h,t[1]])}}]),e}();function b1(e,r,t,n){var a=e instanceof mi._GlobeViewport&&e.resolution?e.projectPosition:null,i=Object.values(e.getFrustumPlanes()).map(function(S){var I=S.normal,L=S.distance;return new ke(I.clone().negate(),L)}),o=new dt(i),s=e.distanceScales.unitsPerMeter[2],u=t&&t[0]*s||0,f=t&&t[1]*s||0,l=e instanceof mi.WebMercatorViewport&&e.pitch<=60?r:0;if(n){var c=n,h=(0,yc.default)(c,4),d=h[0],p=h[1],v=h[2],g=h[3],y=at([d,g]),b=at([v,p]);n=[y[0],ua-y[1],b[0],ua-b[1]]}var E=new vP(0,0,0),T={viewport:e,project:a,cullingVolume:o,elevationBounds:[u,f],minZ:l,maxZ:r,bounds:n,offset:0};if(E.update(T),e instanceof mi.WebMercatorViewport&&e.subViewports&&e.subViewports.length>1){for(T.offset=-1;E.update(T)&&!(--T.offset<-v1););for(T.offset=1;E.update(T)&&!(++T.offset>v1););}return E.getSelected()}var ar=512,gP=[-1/0,-1/0,1/0,1/0],Ir={type:"object",value:null,validate:function(r,t){return t.optional&&r===null||typeof r=="string"||Array.isArray(r)&&r.every(function(n){return typeof n=="string"})},equal:function(r,t){if(r===t)return!0;if(!Array.isArray(r)||!Array.isArray(t))return!1;var n=r.length;if(n!==t.length)return!1;for(var a=0;a<n;a++)if(r[a]!==t[a])return!1;return!0}};function x1(e,r){var t=[r.transformAsPoint([e[0],e[1]]),r.transformAsPoint([e[2],e[1]]),r.transformAsPoint([e[0],e[3]]),r.transformAsPoint([e[2],e[3]])],n=[Math.min.apply(Math,(0,vi.default)(t.map(function(a){return a[0]}))),Math.min.apply(Math,(0,vi.default)(t.map(function(a){return a[1]}))),Math.max.apply(Math,(0,vi.default)(t.map(function(a){return a[0]}))),Math.max.apply(Math,(0,vi.default)(t.map(function(a){return a[1]})))];return n}function yP(e){return Math.abs(e.split("").reduce(function(r,t){return(r<<5)-r+t.charCodeAt(0)|0},0))}function Wt(e,r){if(!e||!e.length)return null;var t=r.index,n=r.id;if(Array.isArray(e)){var a=yP(n)%e.length;e=e[a]}for(var i=e,o=0,s=Object.keys(t);o<s.length;o++){var u=s[o],f=new RegExp("{".concat(u,"}"),"g");i=i.replace(f,String(t[u]))}return Number.isInteger(t.y)&&Number.isInteger(t.z)&&(i=i.replace(/\{-y\}/g,String(Math.pow(2,t.z)-t.y-1))),i}function AP(e,r,t){var n;if(r&&r.length===2){var a=(0,mn.default)(r,2),i=a[0],o=a[1],s=e.getBounds({z:i}),u=e.getBounds({z:o});n=[Math.min(s[0],u[0]),Math.min(s[1],u[1]),Math.max(s[2],u[2]),Math.max(s[3],u[3])]}else n=e.getBounds();return e.isGeospatial?[Math.max(n[0],t[0]),Math.max(n[1],t[1]),Math.min(n[2],t[2]),Math.min(n[3],t[3])]:[Math.max(Math.min(n[0],t[2]),t[0]),Math.max(Math.min(n[1],t[3]),t[1]),Math.min(Math.max(n[2],t[0]),t[2]),Math.min(Math.max(n[3],t[1]),t[3])]}function E1(e){var r=e.viewport,t=e.z,n=t===void 0?0:t,a=e.cullRect,i=r.subViewports||[r];return i.map(function(o){return Ac(o,n,a)})}function Ac(e,r,t){if(!Array.isArray(r)){var n=t.x-e.x,a=t.y-e.y,i=t.width,o=t.height,s={targetZ:r},u=e.unproject([n,a],s),f=e.unproject([n+i,a],s),l=e.unproject([n,a+o],s),c=e.unproject([n+i,a+o],s);return[Math.min(u[0],f[0],l[0],c[0]),Math.min(u[1],f[1],l[1],c[1]),Math.max(u[0],f[0],l[0],c[0]),Math.max(u[1],f[1],l[1],c[1])]}var h=Ac(e,r[0],t),d=Ac(e,r[1],t);return[Math.min(h[0],d[0]),Math.min(h[1],d[1]),Math.max(h[2],d[2]),Math.max(h[3],d[3])]}function _P(e,r,t){if(t){var n=x1(e,t).map(function(a){return a*r/ar});return n}return e.map(function(a){return a*r/ar})}function _c(e,r){return Math.pow(2,e)*ar/r}function as(e,r,t){var n=_c(t,ar),a=e/n*360-180,i=Math.PI-2*Math.PI*r/n,o=180/Math.PI*Math.atan(.5*(Math.exp(i)-Math.exp(-i)));return[a,o]}function T1(e,r,t,n){var a=_c(t,n);return[e/a*ar,r/a*ar]}function bc(e,r,t,n){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:ar;if(e.isGeospatial){var i=as(r,t,n),o=(0,mn.default)(i,2),s=o[0],u=o[1],f=as(r+1,t+1,n),l=(0,mn.default)(f,2),c=l[0],h=l[1];return{west:s,north:u,east:c,south:h}}var d=T1(r,t,n,a),p=(0,mn.default)(d,2),v=p[0],g=p[1],y=T1(r+1,t+1,n,a),b=(0,mn.default)(y,2),E=b[0],T=b[1];return{left:v,top:g,right:E,bottom:T}}function bP(e,r,t,n,a){for(var i=AP(e,null,n),o=_c(r,t),s=_P(i,o,a),u=(0,mn.default)(s,4),f=u[0],l=u[1],c=u[2],h=u[3],d=[],p=Math.floor(f);p<c;p++)for(var v=Math.floor(l);v<h;v++)d.push({x:p,y:v,z:r});return d}function Tc(e){var r=e.viewport,t=e.maxZoom,n=e.minZoom,a=e.zRange,i=e.extent,o=e.tileSize,s=o===void 0?ar:o,u=e.modelMatrix,f=e.modelMatrixInverse,l=e.zoomOffset,c=l===void 0?0:l,h=r.isGeospatial?Math.round(r.zoom+Math.log2(ar/s))+c:Math.ceil(r.zoom)+c;if(typeof n=="number"&&Number.isFinite(n)&&h<n){if(!i)return[];h=n}typeof t=="number"&&Number.isFinite(t)&&h>t&&(h=t);var d=i;return u&&f&&i&&!r.isGeospatial&&(d=x1(i,u)),r.isGeospatial?b1(r,h,a,i):bP(r,h,s,d||gP,f)}function xc(e){return/(?=.*{z})(?=.*{x})(?=.*({y}|{-y}))/.test(e)}function Ec(e){return Number.isFinite(e.west)&&Number.isFinite(e.north)&&Number.isFinite(e.east)&&Number.isFinite(e.south)}function S1(e){var r={},t;return function(n){for(var a in n)if(!TP(n[a],r[a])){t=e(n),r=n;break}return t}}function TP(e,r){if(e===r)return!0;if(Array.isArray(e)){var t=e.length;if(!r||r.length!==t)return!1;for(var n=0;n<t;n++)if(e[n]!==r[n])return!1;return!0}return!1}var gi;function Ye(e,r){var t=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=xP(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(f){throw f},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,o=!1,s;return{s:function(){t=t.call(e)},n:function(){var f=t.next();return i=f.done,f},e:function(f){o=!0,s=f},f:function(){try{!i&&t.return!=null&&t.return()}finally{if(o)throw s}}}}function xP(e,r){if(e){if(typeof e=="string")return C1(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return C1(e,r)}}function C1(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function w1(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function B1(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?w1(Object(t),!0).forEach(function(n){(0,De.default)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):w1(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var M1=1,is=2,EP="never",SP="no-overlap",yi="best-available",CP=5,wP=(gi={},(0,De.default)(gi,yi,MP),(0,De.default)(gi,SP,OP),(0,De.default)(gi,EP,function(){}),gi),BP={extent:null,tileSize:512,maxZoom:null,minZoom:null,maxCacheSize:null,maxCacheByteSize:null,refinementStrategy:"best-available",zRange:null,maxRequests:6,zoomOffset:0,onTileLoad:function(){},onTileUnload:function(){},onTileError:function(){}},Ai=function(){function e(r){var t=this;(0,O1.default)(this,e),(0,De.default)(this,"opts",void 0),(0,De.default)(this,"_requestScheduler",void 0),(0,De.default)(this,"_cache",void 0),(0,De.default)(this,"_dirty",void 0),(0,De.default)(this,"_tiles",void 0),(0,De.default)(this,"_cacheByteSize",void 0),(0,De.default)(this,"_viewport",void 0),(0,De.default)(this,"_zRange",void 0),(0,De.default)(this,"_selectedTiles",void 0),(0,De.default)(this,"_frameNumber",void 0),(0,De.default)(this,"_modelMatrix",void 0),(0,De.default)(this,"_modelMatrixInverse",void 0),(0,De.default)(this,"_maxZoom",void 0),(0,De.default)(this,"_minZoom",void 0),(0,De.default)(this,"onTileLoad",void 0),(0,De.default)(this,"_getCullBounds",S1(E1)),this.opts=B1(B1({},BP),r),this.onTileLoad=function(n){var a,i;(a=(i=t.opts).onTileLoad)===null||a===void 0||a.call(i,n),t.opts.maxCacheByteSize&&(t._cacheByteSize+=n.byteLength,t._resizeCache())},this._requestScheduler=new qa({maxRequests:r.maxRequests,throttleRequests:Boolean(r.maxRequests&&r.maxRequests>0)}),this._cache=new Map,this._tiles=[],this._dirty=!1,this._cacheByteSize=0,this._viewport=null,this._selectedTiles=null,this._frameNumber=0,this._modelMatrix=new $,this._modelMatrixInverse=new $,this.setOptions(r)}return(0,I1.default)(e,[{key:"tiles",get:function(){return this._tiles}},{key:"selectedTiles",get:function(){return this._selectedTiles}},{key:"isLoaded",get:function(){return this._selectedTiles!==null&&this._selectedTiles.every(function(t){return t.isLoaded})}},{key:"needsReload",get:function(){return this._selectedTiles!==null&&this._selectedTiles.some(function(t){return t.needsReload})}},{key:"setOptions",value:function(t){Object.assign(this.opts,t),Number.isFinite(t.maxZoom)&&(this._maxZoom=Math.floor(t.maxZoom)),Number.isFinite(t.minZoom)&&(this._minZoom=Math.ceil(t.minZoom))}},{key:"finalize",value:function(){var t=Ye(this._cache.values()),n;try{for(t.s();!(n=t.n()).done;){var a=n.value;a.isLoading&&a.abort()}}catch(i){t.e(i)}finally{t.f()}this._cache.clear(),this._tiles=[],this._selectedTiles=null}},{key:"reloadAll",value:function(){var t=Ye(this._cache.keys()),n;try{for(t.s();!(n=t.n()).done;){var a=n.value,i=this._cache.get(a);!this._selectedTiles||!this._selectedTiles.includes(i)?this._cache.delete(a):i.setNeedsReload()}}catch(o){t.e(o)}finally{t.f()}}},{key:"update",value:function(t){var n=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=a.zRange,o=a.modelMatrix,s=new $(o),u=!s.equals(this._modelMatrix);if(!this._viewport||!t.equals(this._viewport)||!We(this._zRange,i)||u){u&&(this._modelMatrixInverse=s.clone().invert(),this._modelMatrix=s),this._viewport=t,this._zRange=i;var f=this.getTileIndices({viewport:t,maxZoom:this._maxZoom,minZoom:this._minZoom,zRange:i,modelMatrix:this._modelMatrix,modelMatrixInverse:this._modelMatrixInverse});this._selectedTiles=f.map(function(c){return n._getTile(c,!0)}),this._dirty&&this._rebuildTree()}else this.needsReload&&(this._selectedTiles=this._selectedTiles.map(function(c){return n._getTile(c.index,!0)}));var l=this.updateTileStates();return this._pruneRequests(),this._dirty&&this._resizeCache(),l&&this._frameNumber++,this._frameNumber}},{key:"isTileVisible",value:function(t,n){if(!t.isVisible)return!1;if(n&&this._viewport){var a=this._getCullBounds({viewport:this._viewport,z:this._zRange,cullRect:n}),i=t.bbox,o=Ye(a),s;try{for(o.s();!(s=o.n()).done;){var u=(0,Sc.default)(s.value,4),f=u[0],l=u[1],c=u[2],h=u[3],d=void 0;if("west"in i)d=i.west<c&&i.east>f&&i.south<h&&i.north>l;else{var p=Math.min(i.top,i.bottom),v=Math.max(i.top,i.bottom);d=i.left<c&&i.right>f&&p<h&&v>l}if(d)return!0}}catch(g){o.e(g)}finally{o.f()}return!1}return!0}},{key:"getTileIndices",value:function(t){var n=t.viewport,a=t.maxZoom,i=t.minZoom,o=t.zRange,s=t.modelMatrix,u=t.modelMatrixInverse,f=this.opts,l=f.tileSize,c=f.extent,h=f.zoomOffset;return Tc({viewport:n,maxZoom:a,minZoom:i,zRange:o,tileSize:l,extent:c,modelMatrix:s,modelMatrixInverse:u,zoomOffset:h})}},{key:"getTileId",value:function(t){return"".concat(t.x,"-").concat(t.y,"-").concat(t.z)}},{key:"getTileZoom",value:function(t){return t.z}},{key:"getTileMetadata",value:function(t){var n=this.opts.tileSize;return{bbox:bc(this._viewport,t.x,t.y,t.z,n)}}},{key:"getParentIndex",value:function(t){var n=Math.floor(t.x/2),a=Math.floor(t.y/2),i=t.z-1;return{x:n,y:a,z:i}}},{key:"updateTileStates",value:function(){var t=this.opts.refinementStrategy||yi,n=new Array(this._cache.size),a=0,i=Ye(this._cache.values()),o;try{for(i.s();!(o=i.n()).done;){var s=o.value;n[a++]=s.isVisible,s.isSelected=!1,s.isVisible=!1}}catch(p){i.e(p)}finally{i.f()}var u=Ye(this._selectedTiles),f;try{for(u.s();!(f=u.n()).done;){var l=f.value;l.isSelected=!0,l.isVisible=!0}}catch(p){u.e(p)}finally{u.f()}(typeof t=="function"?t:wP[t])(Array.from(this._cache.values())),a=0;var c=Ye(this._cache.values()),h;try{for(c.s();!(h=c.n()).done;){var d=h.value;if(n[a++]!==d.isVisible)return!0}}catch(p){c.e(p)}finally{c.f()}return!1}},{key:"_pruneRequests",value:function(){var t=this.opts.maxRequests,n=t===void 0?0:t,a=[],i=0,o=Ye(this._cache.values()),s;try{for(o.s();!(s=o.n()).done;){var u=s.value;u.isLoading&&(i++,!u.isSelected&&!u.isVisible&&a.push(u))}}catch(l){o.e(l)}finally{o.f()}for(;n>0&&i>n&&a.length>0;){var f=a.shift();f.abort(),i--}}},{key:"_rebuildTree",value:function(){var t=this._cache,n=Ye(t.values()),a;try{for(n.s();!(a=n.n()).done;){var i=a.value;i.parent=null,i.children&&(i.children.length=0)}}catch(l){n.e(l)}finally{n.f()}var o=Ye(t.values()),s;try{for(o.s();!(s=o.n()).done;){var u=s.value,f=this._getNearestAncestor(u);u.parent=f,f!=null&&f.children&&f.children.push(u)}}catch(l){o.e(l)}finally{o.f()}}},{key:"_resizeCache",value:function(){var t=this._cache,n=this.opts,a=n.maxCacheSize||(n.maxCacheByteSize?1/0:CP*this.selectedTiles.length),i=n.maxCacheByteSize||1/0,o=t.size>a||this._cacheByteSize>i;if(o){var s=Ye(t),u;try{for(s.s();!(u=s.n()).done;){var f=(0,Sc.default)(u.value,2),l=f[0],c=f[1];if(!c.isVisible&&!c.isSelected){var h,d;this._cacheByteSize-=n.maxCacheByteSize?c.byteLength:0,t.delete(l),(h=(d=this.opts).onTileUnload)===null||h===void 0||h.call(d,c)}if(t.size<=a&&this._cacheByteSize<=i)break}}catch(p){s.e(p)}finally{s.f()}this._rebuildTree(),this._dirty=!0}this._dirty&&(this._tiles=Array.from(this._cache.values()).sort(function(p,v){return p.zoom-v.zoom}),this._dirty=!1)}},{key:"_getTile",value:function(t,n){var a=this.getTileId(t),i=this._cache.get(a),o=!1;return!i&&n?(i=new di(t),Object.assign(i,this.getTileMetadata(i.index)),Object.assign(i,{id:a,zoom:this.getTileZoom(i.index)}),o=!0,this._cache.set(a,i),this._dirty=!0):i&&i.needsReload&&(o=!0),i&&o&&i.loadData({getData:this.opts.getTileData,requestScheduler:this._requestScheduler,onLoad:this.onTileLoad,onError:this.opts.onTileError}),i}},{key:"_getNearestAncestor",value:function(t){for(var n=this._minZoom,a=n===void 0?0:n,i=t.index;this.getTileZoom(i)>a;){i=this.getParentIndex(i);var o=this._getTile(i);if(o)return o}return null}}]),e}();function MP(e){var r=Ye(e),t;try{for(r.s();!(t=r.n()).done;){var n=t.value;n.state=0}}catch(l){r.e(l)}finally{r.f()}var a=Ye(e),i;try{for(a.s();!(i=a.n()).done;){var o=i.value;o.isSelected&&!P1(o)&&Cc(o)}}catch(l){a.e(l)}finally{a.f()}var s=Ye(e),u;try{for(s.s();!(u=s.n()).done;){var f=u.value;f.isVisible=Boolean(f.state&is)}}catch(l){s.e(l)}finally{s.f()}}function OP(e){var r=Ye(e),t;try{for(r.s();!(t=r.n()).done;){var n=t.value;n.state=0}}catch(p){r.e(p)}finally{r.f()}var a=Ye(e),i;try{for(a.s();!(i=a.n()).done;){var o=i.value;o.isSelected&&P1(o)}}catch(p){a.e(p)}finally{a.f()}var s=Array.from(e).sort(function(p,v){return p.zoom-v.zoom}),u=Ye(s),f;try{for(u.s();!(f=u.n()).done;){var l=f.value;if(l.isVisible=Boolean(l.state&is),l.children&&(l.isVisible||l.state&M1)){var c=Ye(l.children),h;try{for(c.s();!(h=c.n()).done;){var d=h.value;d.state=M1}}catch(p){c.e(p)}finally{c.f()}}else l.isSelected&&Cc(l)}}catch(p){u.e(p)}finally{u.f()}}function P1(e){for(var r=e;r;){if(r.isLoaded||r.content)return r.state|=is,!0;r=r.parent}return!1}function Cc(e){var r=Ye(e.children),t;try{for(r.s();!(t=r.n()).done;){var n=t.value;n.isLoaded||n.content?n.state|=is:Cc(n)}}catch(a){r.e(a)}finally{r.f()}}function R1(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function wc(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?R1(Object(t),!0).forEach(function(n){(0,os.default)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):R1(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function IP(e,r){var t=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=PP(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(f){throw f},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,o=!1,s;return{s:function(){t=t.call(e)},n:function(){var f=t.next();return i=f.done,f},e:function(f){o=!0,s=f},f:function(){try{!i&&t.return!=null&&t.return()}finally{if(o)throw s}}}}function PP(e,r){if(e){if(typeof e=="string")return F1(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return F1(e,r)}}function F1(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function RP(e){var r=FP();return function(){var n=(0,Bc.default)(e),a;if(r){var i=(0,Bc.default)(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return(0,G1.default)(this,a)}}function FP(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var LP={TilesetClass:Ai,data:{type:"data",value:[]},dataComparator:Ir.equal,renderSubLayers:{type:"function",value:function(r){return new N1.GeoJsonLayer(r)}},getTileData:{type:"function",optional:!0,value:null},onViewportLoad:{type:"function",optional:!0,value:null},onTileLoad:{type:"function",value:function(r){}},onTileUnload:{type:"function",value:function(r){}},onTileError:{type:"function",value:function(r){return console.error(r)}},extent:{type:"array",optional:!0,value:null,compare:!0},tileSize:512,maxZoom:null,minZoom:0,maxCacheSize:null,maxCacheByteSize:null,refinementStrategy:yi,zRange:null,maxRequests:6,zoomOffset:0},ir=function(e){(0,D1.default)(t,e);var r=RP(t);function t(){return(0,L1.default)(this,t),r.apply(this,arguments)}return(0,k1.default)(t,[{key:"initializeState",value:function(){this.state={tileset:null,isLoaded:!1}}},{key:"finalizeState",value:function(){var a,i;(a=this.state)===null||a===void 0||(i=a.tileset)===null||i===void 0||i.finalize()}},{key:"isLoaded",get:function(){var a,i;return(a=this.state)===null||a===void 0||(i=a.tileset)===null||i===void 0?void 0:i.selectedTiles.every(function(o){return o.isLoaded&&o.layers&&o.layers.every(function(s){return s.isLoaded})})}},{key:"shouldUpdateState",value:function(a){var i=a.changeFlags;return i.somethingChanged}},{key:"updateState",value:function(a){var i=a.changeFlags,o=this.state.tileset,s=i.propsOrDataChanged||i.updateTriggersChanged,u=i.dataChanged||i.updateTriggersChanged&&(i.updateTriggersChanged.all||i.updateTriggersChanged.getTileData);o?s&&(o.setOptions(this._getTilesetOptions()),u?o.reloadAll():this.state.tileset.tiles.forEach(function(f){f.layers=null})):(o=new this.props.TilesetClass(this._getTilesetOptions()),this.setState({tileset:o})),this._updateTileset()}},{key:"_getTilesetOptions",value:function(){var a=this.props,i=a.tileSize,o=a.maxCacheSize,s=a.maxCacheByteSize,u=a.refinementStrategy,f=a.extent,l=a.maxZoom,c=a.minZoom,h=a.maxRequests,d=a.zoomOffset;return{maxCacheSize:o,maxCacheByteSize:s,maxZoom:l,minZoom:c,tileSize:i,refinementStrategy:u,extent:f,maxRequests:h,zoomOffset:d,getTileData:this.getTileData.bind(this),onTileLoad:this._onTileLoad.bind(this),onTileError:this._onTileError.bind(this),onTileUnload:this._onTileUnload.bind(this)}}},{key:"_updateTileset",value:function(){var a=this.state.tileset,i=this.props,o=i.zRange,s=i.modelMatrix,u=a.update(this.context.viewport,{zRange:o,modelMatrix:s}),f=a.isLoaded,l=this.state.isLoaded!==f,c=this.state.frameNumber!==u;f&&(l||c)&&this._onViewportLoad(),c&&this.setState({frameNumber:u}),this.state.isLoaded=f}},{key:"_onViewportLoad",value:function(){var a=this.state.tileset,i=this.props.onViewportLoad;i&&i(a.selectedTiles)}},{key:"_onTileLoad",value:function(a){this.props.onTileLoad(a),a.layers=null,this.setNeedsUpdate()}},{key:"_onTileError",value:function(a,i){this.props.onTileError(a),i.layers=null,this.setNeedsUpdate()}},{key:"_onTileUnload",value:function(a){this.props.onTileUnload(a)}},{key:"getTileData",value:function(a){var i=this.props,o=i.data,s=i.getTileData,u=i.fetch,f=a.signal;return a.url=typeof o=="string"||Array.isArray(o)?Wt(o,a):null,s?s(a):u&&a.url?u(a.url,{propName:"data",layer:this,signal:f}):null}},{key:"renderSubLayers",value:function(a){return this.props.renderSubLayers(a)}},{key:"getSubLayerPropsByTile",value:function(a){return null}},{key:"getPickingInfo",value:function(a){var i=a.info,o=a.sourceLayer,s=o.props.tile;return i.picked&&(i.tile=s),i.sourceTile=s,i}},{key:"_updateAutoHighlight",value:function(a){var i=a.sourceTile;if(i&&i.layers){var o=IP(i.layers),s;try{for(o.s();!(s=o.n()).done;){var u=s.value;u.updateAutoHighlight(a)}}catch(f){o.e(f)}finally{o.f()}}}},{key:"renderLayers",value:function(){var a=this;return this.state.tileset.tiles.map(function(i){var o=a.getSubLayerPropsByTile(i);if(!(!i.isLoaded&&!i.content))if(i.layers)o&&i.layers[0]&&Object.keys(o).some(function(u){return i.layers[0].props[u]!==o[u]})&&(i.layers=i.layers.map(function(u){return u.clone(o)}));else{var s=a.renderSubLayers(wc(wc({},a.props),{},{id:"".concat(a.id,"-").concat(i.id),data:i.content,_offset:0,tile:i}));i.layers=(0,ss._flatten)(s,Boolean).map(function(u){return u.clone(wc({tile:i},o))})}return i.layers})}},{key:"filterSubLayer",value:function(a){var i=a.layer,o=a.cullRect,s=i.props.tile;return this.state.tileset.isTileVisible(s,o)}}]),t}(ss.CompositeLayer);(0,os.default)(ir,"defaultProps",LP);(0,os.default)(ir,"layerName","TileLayer");var z1=m(H()),W1=m(z()),ls=m(fa()),J1=m(Te()),q1=m(xe()),la=m(ye()),cs=m(W()),X1=m(It());function H1(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function V1(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?H1(Object(t),!0).forEach(function(n){(0,cs.default)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):H1(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function NP(e){var r=UP();return function(){var n=(0,la.default)(e),a;if(r){var i=(0,la.default)(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return(0,q1.default)(this,a)}}function UP(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var jP={fadeTrail:!0,trailLength:{type:"number",value:120,min:0},currentTime:{type:"number",value:0,min:0},getTimestamps:{type:"accessor",value:function(r){return r.timestamps}}},hs=function(e){(0,J1.default)(t,e);var r=NP(t);function t(){return(0,z1.default)(this,t),r.apply(this,arguments)}return(0,W1.default)(t,[{key:"getShaders",value:function(){var a=(0,ls.default)((0,la.default)(t.prototype),"getShaders",this).call(this);return a.inject={"vs:#decl":`uniform float trailLength;
attribute float instanceTimestamps;
attribute float instanceNextTimestamps;
varying float vTime;
`,"vs:#main-end":`vTime = instanceTimestamps + (instanceNextTimestamps - instanceTimestamps) * vPathPosition.y / vPathLength;
`,"fs:#decl":`uniform bool fadeTrail;
uniform float trailLength;
uniform float currentTime;
varying float vTime;
`,"fs:#main-start":`if(vTime > currentTime || (fadeTrail && (vTime < currentTime - trailLength))) {
  discard;
}
`,"fs:DECKGL_FILTER_COLOR":`if(fadeTrail) {
  color.a *= 1.0 - (currentTime - vTime) / trailLength;
}
`},a}},{key:"initializeState",value:function(){(0,ls.default)((0,la.default)(t.prototype),"initializeState",this).call(this);var a=this.getAttributeManager();a.addInstanced({timestamps:{size:1,accessor:"getTimestamps",shaderAttributes:{instanceTimestamps:{vertexOffset:0},instanceNextTimestamps:{vertexOffset:1}}}})}},{key:"draw",value:function(a){var i=this.props,o=i.fadeTrail,s=i.trailLength,u=i.currentTime;a.uniforms=V1(V1({},a.uniforms),{},{fadeTrail:o,trailLength:s,currentTime:u}),(0,ls.default)((0,la.default)(t.prototype),"draw",this).call(this,a)}}]),t}(X1.PathLayer);(0,cs.default)(hs,"layerName","TripsLayer");(0,cs.default)(hs,"defaultProps",jP);var uA=m(H()),fA=m(z()),lA=m(Te()),cA=m(xe()),Pc=m(ye()),Rc=m(W()),hA=m(Mc()),dA=m(Pt());var $1=m(H()),eA=m(z()),tA=m(nt()),rA=m(Te()),nA=m(xe()),Oc=m(ye()),ca=m(W()),aA=m(Xe()),_i=m(ce()),et=m(Mc());var ps=m(Pt()),bi=m(It());function HP(e){var r=VP();return function(){var n=(0,Oc.default)(e),a;if(r){var i=(0,Oc.default)(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return(0,nA.default)(this,a)}}function VP(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function K1(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function ds(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?K1(Object(t),!0).forEach(function(n){(0,ca.default)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):K1(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function Ic(e,r){var t=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=zP(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(f){throw f},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,o=!1,s;return{s:function(){t=t.call(e)},n:function(){var f=t.next();return i=f.done,f},e:function(f){o=!0,s=f},f:function(){try{!i&&t.return!=null&&t.return()}finally{if(o)throw s}}}}function zP(e,r){if(e){if(typeof e=="string")return Q1(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Q1(e,r)}}function Q1(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var WP=10;function iA(e,r){r=r===void 0?e[0][0]:r;var t=Ic(e),n;try{for(t.s();!(n=t.n()).done;){var a=n.value,i=a[0]-r;i>180?a[0]-=360:i<-180&&(a[0]+=360)}}catch(o){t.e(o)}finally{t.f()}}function JP(e,r,t){var n=(0,et.h3ToGeo)(e),a=(0,_i.default)(n,2),i=a[0],o=a[1],s=r.length;iA(r,o);for(var u=r[0]===r[s-1]?s-1:s,f=0;f<u;f++)r[f][0]=Sr(o,r[f][0],t),r[f][1]=Sr(i,r[f][1],t)}function qP(e,r,t){var n=e(r,t),a=(0,et.h3ToGeo)(n),i=(0,_i.default)(a,2),o=i[0],s=i[1];return[s,o]}function Z1(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,t=(0,et.h3ToGeoBoundary)(e,!0);return r!==1?JP(e,t,r):iA(t),t}function XP(e){var r=new Float64Array(e.length*2),t=0,n=Ic(e),a;try{for(n.s();!(a=n.n()).done;){var i=a.value;r[t++]=i[0],r[t++]=i[1]}}catch(o){n.e(o)}finally{n.f()}return r}function YP(e,r){var t;return e==null?t=r:(0,aA.default)(e)==="object"?t=ds(ds({},e),{},{coverage:r}):t={getHexagon:e,coverage:r},t}var KP=ds(ds({},bi.PolygonLayer.defaultProps),{},{highPrecision:"auto",coverage:{type:"number",min:0,max:1,value:1},centerHexagon:null,getHexagon:{type:"accessor",value:function(r){return r.hexagon}},extruded:!0}),vn=function(e){(0,rA.default)(t,e);var r=HP(t);function t(){var n;(0,$1.default)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return n=r.call.apply(r,[this].concat(i)),(0,ca.default)((0,tA.default)(n),"state",void 0),n}return(0,eA.default)(t,[{key:"initializeState",value:function(){t._checkH3Lib(),this.state={edgeLengthKM:0,resolution:-1}}},{key:"shouldUpdateState",value:function(a){var i=a.changeFlags;return this._shouldUseHighPrecision()?i.propsOrDataChanged:i.somethingChanged}},{key:"updateState",value:function(a){var i=a.props,o=a.changeFlags;if(i.highPrecision!==!0&&(o.dataChanged||o.updateTriggersChanged&&o.updateTriggersChanged.getHexagon)){var s=this._calculateH3DataProps();this.setState(s)}this._updateVertices(this.context.viewport)}},{key:"_calculateH3DataProps",value:function(){var a=-1,i=!1,o=!1,s=(0,ps.createIterable)(this.props.data),u=s.iterable,f=s.objectInfo,l=Ic(u),c;try{for(l.s();!(c=l.n()).done;){var h=c.value;f.index++;var d=this.props.getHexagon(h,f),p=(0,et.h3GetResolution)(d);if(a<0){if(a=p,!this.props.highPrecision)break}else if(a!==p){o=!0;break}if((0,et.h3IsPentagon)(d)){i=!0;break}}}catch(v){l.e(v)}finally{l.f()}return{resolution:a,edgeLengthKM:a>=0?(0,et.edgeLength)(a,"km"):0,hasMultipleRes:o,hasPentagon:i}}},{key:"_shouldUseHighPrecision",value:function(){if(this.props.highPrecision==="auto"){var a=this.state,i=a.resolution,o=a.hasPentagon,s=a.hasMultipleRes,u=this.context.viewport;return Boolean(u?.resolution)||s||o||i>=0&&i<=5}return this.props.highPrecision}},{key:"_updateVertices",value:function(a){if(!this._shouldUseHighPrecision()){var i=this.state,o=i.resolution,s=i.edgeLengthKM,u=i.centerHex;if(!(o<0)){var f=this.props.centerHexagon||(0,et.geoToH3)(a.latitude,a.longitude,o);if(u!==f){if(u){var l=(0,et.h3Distance)(u,f);if(l>=0&&l*s<WP)return}var c=a.distanceScales.unitsPerMeter,h=Z1(f),d=(0,et.h3ToGeo)(f),p=(0,_i.default)(d,2),v=p[0],g=p[1],y=a.projectFlat([g,v]),b=(0,_i.default)(y,2),E=b[0],T=b[1];h=h.map(function(S){var I=a.projectFlat(S);return[(I[0]-E)/c[0],(I[1]-T)/c[1]]}),this.setState({centerHex:f,vertices:h})}}}}},{key:"renderLayers",value:function(){return this._shouldUseHighPrecision()?this._renderPolygonLayer():this._renderColumnLayer()}},{key:"_getForwardProps",value:function(){var a=this.props,i=a.elevationScale,o=a.material,s=a.coverage,u=a.extruded,f=a.wireframe,l=a.stroked,c=a.filled,h=a.lineWidthUnits,d=a.lineWidthScale,p=a.lineWidthMinPixels,v=a.lineWidthMaxPixels,g=a.getFillColor,y=a.getElevation,b=a.getLineColor,E=a.getLineWidth,T=a.transitions,S=a.updateTriggers;return{elevationScale:i,extruded:u,coverage:s,wireframe:f,stroked:l,filled:c,lineWidthUnits:h,lineWidthScale:d,lineWidthMinPixels:p,lineWidthMaxPixels:v,material:o,getElevation:y,getFillColor:g,getLineColor:b,getLineWidth:E,transitions:T,updateTriggers:{getFillColor:S.getFillColor,getElevation:S.getElevation,getLineColor:S.getLineColor,getLineWidth:S.getLineWidth}}}},{key:"_renderPolygonLayer",value:function(){var a=this.props,i=a.data,o=a.getHexagon,s=a.updateTriggers,u=a.coverage,f=this.getSubLayerClass("hexagon-cell-hifi",bi.PolygonLayer),l=this._getForwardProps();return l.updateTriggers.getPolygon=YP(s.getHexagon,u),new f(l,this.getSubLayerProps({id:"hexagon-cell-hifi",updateTriggers:l.updateTriggers}),{data:i,_normalize:!1,_windingOrder:"CCW",positionFormat:"XY",getPolygon:function(h,d){var p=o(h,d);return XP(Z1(p,u))}})}},{key:"_renderColumnLayer",value:function(){var a=this.props,i=a.data,o=a.getHexagon,s=a.updateTriggers,u=this.getSubLayerClass("hexagon-cell",bi.ColumnLayer),f=this._getForwardProps();return f.updateTriggers.getPosition=s.getHexagon,new u(f,this.getSubLayerProps({id:"hexagon-cell",flatShading:!0,updateTriggers:f.updateTriggers}),{data:i,diskResolution:6,radius:1,vertices:this.state.vertices,getPosition:qP.bind(null,o)})}}]),t}(ps.CompositeLayer);(0,ca.default)(vn,"defaultProps",KP);(0,ca.default)(vn,"layerName","H3HexagonLayer");(0,ca.default)(vn,"_checkH3Lib",function(){});function oA(e,r){var t=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=QP(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(f){throw f},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,o=!1,s;return{s:function(){t=t.call(e)},n:function(){var f=t.next();return i=f.done,f},e:function(f){o=!0,s=f},f:function(){try{!i&&t.return!=null&&t.return()}finally{if(o)throw s}}}}function QP(e,r){if(e){if(typeof e=="string")return sA(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return sA(e,r)}}function sA(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function ZP(e){var r=$P();return function(){var n=(0,Pc.default)(e),a;if(r){var i=(0,Pc.default)(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return(0,cA.default)(this,a)}}function $P(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var e3={getHexagons:{type:"accessor",value:function(r){return r.hexagons}}},ms=function(e){(0,lA.default)(t,e);var r=ZP(t);function t(){return(0,uA.default)(this,t),r.apply(this,arguments)}return(0,fA.default)(t,[{key:"initializeState",value:function(){vn._checkH3Lib()}},{key:"updateState",value:function(a){var i=a.props,o=a.changeFlags;if(o.dataChanged||o.updateTriggersChanged&&o.updateTriggersChanged.getHexagons){var s=i.data,u=i.getHexagons,f=[],l=(0,dA.createIterable)(s),c=l.iterable,h=l.objectInfo,d=oA(c),p;try{for(d.s();!(p=d.n()).done;){var v=p.value;h.index++;var g=u(v,h),y=(0,hA.h3SetToMultiPolygon)(g,!0),b=oA(y),E;try{for(b.s();!(E=b.n()).done;){var T=E.value;f.push(this.getSubLayerRow({polygon:T},v,h.index))}}catch(S){b.e(S)}finally{b.f()}}}catch(S){d.e(S)}finally{d.f()}this.setState({polygons:f})}}},{key:"indexToBounds",value:function(){var a=this.props,i=a.getElevation,o=a.getFillColor,s=a.getLineColor,u=a.getLineWidth;return{data:this.state.polygons,getPolygon:function(l){return l.polygon},getElevation:this.getSubLayerAccessor(i),getFillColor:this.getSubLayerAccessor(o),getLineColor:this.getSubLayerAccessor(s),getLineWidth:this.getSubLayerAccessor(u)}}}]),t}(St);(0,Rc.default)(ms,"layerName","H3ClusterLayer");(0,Rc.default)(ms,"defaultProps",e3);var yC=m(X()),AC=m(H()),_C=m(z()),bC=m(nt()),TC=m(Te()),xC=m(xe()),Wp=m(ye()),Yi=m(W()),Jp=m(Y()),EC=m(Fc()),Wr=m(Pt()),SC=m(It()),CC=m(vs());var db=m(H()),pb=m(z()),Aa=m(fa()),mb=m(Te()),vb=m(xe()),Gr=m(ye()),Ds=m(W());var bs=m(Xe()),Ti=m(Et()),OA=m(W()),IA=m(H()),PA=m(z());var vA=m(Xe());var gs=m(Xe());function Lc(e){if(typeof window<"u"&&(0,gs.default)(window.process)==="object"&&window.process.type==="renderer"||typeof process<"u"&&(0,gs.default)(process.versions)==="object"&&Boolean(process.versions.electron))return!0;var r=(typeof navigator>"u"?"undefined":(0,gs.default)(navigator))==="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent,t=e||r;return!!(t&&t.indexOf("Electron")>=0)}function ut(){var e=(typeof process>"u"?"undefined":(0,vA.default)(process))==="object"&&String(process)==="[object process]"&&!process.browser;return!e||Lc()}var gA=m(Xe()),Pr={self:typeof self<"u"&&self,window:typeof window<"u"&&window,global:typeof global<"u"&&global,document:typeof document<"u"&&document,process:(typeof process>"u"?"undefined":(0,gA.default)(process))==="object"&&process};var t3=Pr.self||Pr.window||Pr.global,ha=Pr.window||Pr.self||Pr.global,r3=Pr.document||{},gn=Pr.process||{};var ys="8.9.7",Mz=ut();var yA=m(H()),AA=m(z());function n3(e){try{var r=window[e],t="__storage_test__";return r.setItem(t,t),r.removeItem(t),r}catch{return null}}var _A=function(){function e(r){(0,yA.default)(this,e);var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"sessionStorage";A(this,"storage",void 0),A(this,"id",void 0),A(this,"config",{}),this.storage=n3(n),this.id=r,this.config={},Object.assign(this.config,t),this._loadConfiguration()}return(0,AA.default)(e,[{key:"getConfiguration",value:function(){return this.config}},{key:"setConfiguration",value:function(t){return this.config={},this.updateConfiguration(t)}},{key:"updateConfiguration",value:function(t){if(Object.assign(this.config,t),this.storage){var n=JSON.stringify(this.config);this.storage.setItem(this.id,n)}return this}},{key:"_loadConfiguration",value:function(){var t={};if(this.storage){var n=this.storage.getItem(this.id);t=n?JSON.parse(n):{}}return Object.assign(this.config,t),this}}]),e}();function bA(e){var r;return e<10?r="".concat(e.toFixed(2),"ms"):e<100?r="".concat(e.toFixed(1),"ms"):e<1e3?r="".concat(e.toFixed(0),"ms"):r="".concat((e/1e3).toFixed(2),"s"),r}function TA(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:8,t=Math.max(r-e.length,0);return"".concat(" ".repeat(t)).concat(e)}function As(e,r,t){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:600,a=e.src.replace(/\(/g,"%28").replace(/\)/g,"%29");e.width>n&&(t=Math.min(t,n/e.width));var i=e.width*t,o=e.height*t,s=["font-size:1px;","padding:".concat(Math.floor(o/2),"px ").concat(Math.floor(i/2),"px;"),"line-height:".concat(o,"px;"),"background:url(".concat(a,");"),"background-size:".concat(i,"px ").concat(o,"px;"),"color:transparent;"].join("");return["".concat(r," %c+"),s]}var _s;(function(e){e[e.BLACK=30]="BLACK",e[e.RED=31]="RED",e[e.GREEN=32]="GREEN",e[e.YELLOW=33]="YELLOW",e[e.BLUE=34]="BLUE",e[e.MAGENTA=35]="MAGENTA",e[e.CYAN=36]="CYAN",e[e.WHITE=37]="WHITE",e[e.BRIGHT_BLACK=90]="BRIGHT_BLACK",e[e.BRIGHT_RED=91]="BRIGHT_RED",e[e.BRIGHT_GREEN=92]="BRIGHT_GREEN",e[e.BRIGHT_YELLOW=93]="BRIGHT_YELLOW",e[e.BRIGHT_BLUE=94]="BRIGHT_BLUE",e[e.BRIGHT_MAGENTA=95]="BRIGHT_MAGENTA",e[e.BRIGHT_CYAN=96]="BRIGHT_CYAN",e[e.BRIGHT_WHITE=97]="BRIGHT_WHITE"})(_s||(_s={}));function xA(e){return typeof e=="string"?_s[e.toUpperCase()]||_s.WHITE:e}function EA(e,r,t){return!ut&&typeof e=="string"&&(r&&(r=xA(r),e="\x1B[".concat(r,"m").concat(e,"\x1B[39m")),t&&(r=xA(t),e="\x1B[".concat(t+10,"m").concat(e,"\x1B[49m"))),e}function a3(e,r){var t=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=i3(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(f){throw f},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,o=!1,s;return{s:function(){t=t.call(e)},n:function(){var f=t.next();return i=f.done,f},e:function(f){o=!0,s=f},f:function(){try{!i&&t.return!=null&&t.return()}finally{if(o)throw s}}}}function i3(e,r){if(e){if(typeof e=="string")return SA(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return SA(e,r)}}function SA(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function CA(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:["constructor"],t=Object.getPrototypeOf(e),n=Object.getOwnPropertyNames(t),a=a3(n),i;try{var o=function(){var u=i.value;typeof e[u]=="function"&&(r.find(function(f){return u===f})||(e[u]=e[u].bind(e)))};for(a.s();!(i=a.n()).done;)o()}catch(s){a.e(s)}finally{a.f()}}function da(e,r){if(!e)throw new Error(r||"Assertion failed")}function yn(){var e;if(ut&&"performance"in ha){var r,t;e=ha===null||ha===void 0||(r=ha.performance)===null||r===void 0||(t=r.now)===null||t===void 0?void 0:t.call(r)}else if("hrtime"in gn){var n,a=gn===null||gn===void 0||(n=gn.hrtime)===null||n===void 0?void 0:n.call(gn);e=a[0]*1e3+a[1]/1e6}else e=Date.now();return e}var pa={debug:ut&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},o3={enabled:!0,level:0};function Ct(){}var wA={},BA={once:!0},ma=function(){function e(){(0,IA.default)(this,e);var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{id:""},t=r.id;A(this,"id",void 0),A(this,"VERSION",ys),A(this,"_startTs",yn()),A(this,"_deltaTs",yn()),A(this,"_storage",void 0),A(this,"userData",{}),A(this,"LOG_THROTTLE_TIMEOUT",0),this.id=t,this._storage=new _A("__probe-".concat(this.id,"__"),o3),this.userData={},this.timeStamp("".concat(this.id," started")),CA(this),Object.seal(this)}return(0,PA.default)(e,[{key:"level",get:function(){return this.getLevel()},set:function(t){this.setLevel(t)}},{key:"isEnabled",value:function(){return this._storage.config.enabled}},{key:"getLevel",value:function(){return this._storage.config.level}},{key:"getTotal",value:function(){return Number((yn()-this._startTs).toPrecision(10))}},{key:"getDelta",value:function(){return Number((yn()-this._deltaTs).toPrecision(10))}},{key:"priority",get:function(){return this.level},set:function(t){this.level=t}},{key:"getPriority",value:function(){return this.level}},{key:"enable",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return this._storage.updateConfiguration({enabled:t}),this}},{key:"setLevel",value:function(t){return this._storage.updateConfiguration({level:t}),this}},{key:"get",value:function(t){return this._storage.config[t]}},{key:"set",value:function(t,n){this._storage.updateConfiguration((0,OA.default)({},t,n))}},{key:"settings",value:function(){console.table?console.table(this._storage.config):console.log(this._storage.config)}},{key:"assert",value:function(t,n){da(t,n)}},{key:"warn",value:function(t){return this._getLogFunction(0,t,pa.warn,arguments,BA)}},{key:"error",value:function(t){return this._getLogFunction(0,t,pa.error,arguments)}},{key:"deprecated",value:function(t,n){return this.warn("`".concat(t,"` is deprecated and will be removed in a later version. Use `").concat(n,"` instead"))}},{key:"removed",value:function(t,n){return this.error("`".concat(t,"` has been removed. Use `").concat(n,"` instead"))}},{key:"probe",value:function(t,n){return this._getLogFunction(t,n,pa.log,arguments,{time:!0,once:!0})}},{key:"log",value:function(t,n){return this._getLogFunction(t,n,pa.debug,arguments)}},{key:"info",value:function(t,n){return this._getLogFunction(t,n,console.info,arguments)}},{key:"once",value:function(t,n){for(var a=arguments.length,i=new Array(a>2?a-2:0),o=2;o<a;o++)i[o-2]=arguments[o];return this._getLogFunction(t,n,pa.debug||pa.info,arguments,BA)}},{key:"table",value:function(t,n,a){return n?this._getLogFunction(t,n,console.table||Ct,a&&[a],{tag:l3(n)}):Ct}},{key:"image",value:function(t){var n=t.logLevel,a=t.priority,i=t.image,o=t.message,s=o===void 0?"":o,u=t.scale,f=u===void 0?1:u;return this._shouldLog(n||a)?ut?f3({image:i,message:s,scale:f}):u3({image:i,message:s,scale:f}):Ct}},{key:"time",value:function(t,n){return this._getLogFunction(t,n,console.time?console.time:console.info)}},{key:"timeEnd",value:function(t,n){return this._getLogFunction(t,n,console.timeEnd?console.timeEnd:console.info)}},{key:"timeStamp",value:function(t,n){return this._getLogFunction(t,n,console.timeStamp||Ct)}},{key:"group",value:function(t,n){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{collapsed:!1},i=MA({logLevel:t,message:n,opts:a}),o=a.collapsed;return i.method=(o?console.groupCollapsed:console.group)||console.info,this._getLogFunction(i)}},{key:"groupCollapsed",value:function(t,n){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.group(t,n,Object.assign({},a,{collapsed:!0}))}},{key:"groupEnd",value:function(t){return this._getLogFunction(t,"",console.groupEnd||Ct)}},{key:"withGroup",value:function(t,n,a){this.group(t,n)();try{a()}finally{this.groupEnd(t)()}}},{key:"trace",value:function(){console.trace&&console.trace()}},{key:"_shouldLog",value:function(t){return this.isEnabled()&&this.getLevel()>=RA(t)}},{key:"_getLogFunction",value:function(t,n,a,i,o){if(this._shouldLog(t)){var s;o=MA({logLevel:t,message:n,args:i,opts:o}),a=a||o.method,da(a),o.total=this.getTotal(),o.delta=this.getDelta(),this._deltaTs=yn();var u=o.tag||o.message;if(o.once)if(!wA[u])wA[u]=yn();else return Ct;return n=s3(this.id,o.message,o),(s=a).bind.apply(s,[console,n].concat((0,Ti.default)(o.args)))}return Ct}}]),e}();A(ma,"VERSION",ys);function RA(e){if(!e)return 0;var r;switch((0,bs.default)(e)){case"number":r=e;break;case"object":r=e.logLevel||e.priority||0;break;default:return 0}return da(Number.isFinite(r)&&r>=0),r}function MA(e){var r=e.logLevel,t=e.message;e.logLevel=RA(r);for(var n=e.args?Array.from(e.args):[];n.length&&n.shift()!==t;);switch((0,bs.default)(r)){case"string":case"function":t!==void 0&&n.unshift(t),e.message=r;break;case"object":Object.assign(e,r);break;default:}typeof e.message=="function"&&(e.message=e.message());var a=(0,bs.default)(e.message);return da(a==="string"||a==="object"),Object.assign(e,{args:n},e.opts)}function s3(e,r,t){if(typeof r=="string"){var n=t.time?TA(bA(t.total)):"";r=t.time?"".concat(e,": ").concat(n,"  ").concat(r):"".concat(e,": ").concat(r),r=EA(r,t.color,t.background)}return r}function u3(e){var r=e.image,t=e.message,n=t===void 0?"":t,a=e.scale,i=a===void 0?1:a,o=null;try{o=module.require("asciify-image")}catch{}return o?function(){return o(r,{fit:"box",width:"".concat(Math.round(80*i),"%")}).then(function(s){return console.log(s)})}:Ct}function f3(e){var r=e.image,t=e.message,n=t===void 0?"":t,a=e.scale,i=a===void 0?1:a;if(typeof r=="string"){var o=new Image;return o.onload=function(){var l,c=As(o,n,i);(l=console).log.apply(l,(0,Ti.default)(c))},o.src=r,Ct}var s=r.nodeName||"";if(s.toLowerCase()==="img"){var u;return(u=console).log.apply(u,(0,Ti.default)(As(r,n,i))),Ct}if(s.toLowerCase()==="canvas"){var f=new Image;return f.onload=function(){var l;return(l=console).log.apply(l,(0,Ti.default)(As(f,n,i)))},f.src=r.toDataURL(),Ct}return Ct}function l3(e){for(var r in e)for(var t in e[r])return t||"untitled";return"empty"}var nW=new ma({id:"@probe.gl/log"});var oe=new ma({id:"luma.gl"});function Ne(e,r){if(!e)throw new Error(r||"luma.gl: assertion failed.")}var c3="Invalid WebGLRenderingContext";var h3="Requires WebGL2";function Ts(e){return typeof WebGLRenderingContext<"u"&&e instanceof WebGLRenderingContext||typeof WebGL2RenderingContext<"u"&&e instanceof WebGL2RenderingContext?!0:Boolean(e&&Number.isFinite(e._version))}function he(e){return typeof WebGL2RenderingContext<"u"&&e instanceof WebGL2RenderingContext?!0:Boolean(e&&e._version===2)}function kc(e){return he(e)?e:null}function xi(e){return Ne(Ts(e),c3),e}function Ke(e){return Ne(he(e),h3),e}var Ei={};function d3(e){globalThis.console&&globalThis.console.error&&globalThis.console.error(e)}function p3(e){globalThis.console&&globalThis.console.log&&globalThis.console.log(e)}function m3(e,r){Ei[e]=!0,r!==void 0&&d3(r)}function v3(e){var r=e.getError;e.getError=function(){var n;do n=r.apply(e),n!==0&&(Ei[n]=!0);while(n!==0);for(n in Ei)if(Ei[n])return delete Ei[n],parseInt(n,10);return 0}}var Si=function e(r){var t=r.gl;this.ext=r,this.isAlive=!0,this.hasBeenBound=!1,this.elementArrayBuffer=null,this.attribs=new Array(r.maxVertexAttribs);for(var n=0;n<this.attribs.length;n++){var a=new e.VertexAttrib(t);this.attribs[n]=a}this.maxAttrib=0};Si.VertexAttrib=function(r){this.enabled=!1,this.buffer=null,this.size=4,this.type=5126,this.normalized=!1,this.stride=16,this.offset=0,this.cached="",this.recache()};Si.VertexAttrib.prototype.recache=function(){this.cached=[this.size,this.type,this.normalized,this.stride,this.offset].join(":")};var An=function(r){var t=this;this.gl=r,v3(r);var n=this.original={getParameter:r.getParameter,enableVertexAttribArray:r.enableVertexAttribArray,disableVertexAttribArray:r.disableVertexAttribArray,bindBuffer:r.bindBuffer,getVertexAttrib:r.getVertexAttrib,vertexAttribPointer:r.vertexAttribPointer};r.getParameter=function(i){return i===t.VERTEX_ARRAY_BINDING_OES?t.currentVertexArrayObject===t.defaultVertexArrayObject?null:t.currentVertexArrayObject:n.getParameter.apply(this,arguments)},r.enableVertexAttribArray=function(i){var o=t.currentVertexArrayObject;o.maxAttrib=Math.max(o.maxAttrib,i);var s=o.attribs[i];return s.enabled=!0,n.enableVertexAttribArray.apply(this,arguments)},r.disableVertexAttribArray=function(i){var o=t.currentVertexArrayObject;o.maxAttrib=Math.max(o.maxAttrib,i);var s=o.attribs[i];return s.enabled=!1,n.disableVertexAttribArray.apply(this,arguments)},r.bindBuffer=function(i,o){switch(i){case 34962:t.currentArrayBuffer=o;break;case 34963:t.currentVertexArrayObject.elementArrayBuffer=o;break;default:}return n.bindBuffer.apply(this,arguments)},r.getVertexAttrib=function(i,o){var s=t.currentVertexArrayObject,u=s.attribs[i];switch(o){case 34975:return u.buffer;case 34338:return u.enabled;case 34339:return u.size;case 34340:return u.stride;case 34341:return u.type;case 34922:return u.normalized;default:return n.getVertexAttrib.apply(this,arguments)}},r.vertexAttribPointer=function(i,o,s,u,f,l){var c=t.currentVertexArrayObject;c.maxAttrib=Math.max(c.maxAttrib,i);var h=c.attribs[i];return h.buffer=t.currentArrayBuffer,h.size=o,h.type=s,h.normalized=u,h.stride=f,h.offset=l,h.recache(),n.vertexAttribPointer.apply(this,arguments)},r.instrumentExtension&&r.instrumentExtension(this,"OES_vertex_array_object"),r.canvas&&r.canvas.addEventListener("webglcontextrestored",function(){p3("OESVertexArrayObject emulation library context restored"),t.reset_()},!0),this.reset_()};An.prototype.VERTEX_ARRAY_BINDING_OES=34229;An.prototype.reset_=function(){var r=this.vertexArrayObjects!==void 0;if(r)for(var t=0;t<this.vertexArrayObjects.length;++t)this.vertexArrayObjects.isAlive=!1;var n=this.gl;this.maxVertexAttribs=n.getParameter(34921),this.defaultVertexArrayObject=new Si(this),this.currentVertexArrayObject=null,this.currentArrayBuffer=null,this.vertexArrayObjects=[this.defaultVertexArrayObject],this.bindVertexArrayOES(null)};An.prototype.createVertexArrayOES=function(){var r=new Si(this);return this.vertexArrayObjects.push(r),r};An.prototype.deleteVertexArrayOES=function(r){r.isAlive=!1,this.vertexArrayObjects.splice(this.vertexArrayObjects.indexOf(r),1),this.currentVertexArrayObject===r&&this.bindVertexArrayOES(null)};An.prototype.isVertexArrayOES=function(r){return!!(r&&r instanceof Si&&r.hasBeenBound&&r.ext===this)};An.prototype.bindVertexArrayOES=function(r){var t=this.gl;if(r&&!r.isAlive){m3(1282,"bindVertexArrayOES: attempt to bind deleted arrayObject");return}var n=this.original,a=this.currentVertexArrayObject;this.currentVertexArrayObject=r||this.defaultVertexArrayObject,this.currentVertexArrayObject.hasBeenBound=!0;var i=this.currentVertexArrayObject;if(a!==i){(!a||i.elementArrayBuffer!==a.elementArrayBuffer)&&n.bindBuffer.call(t,34963,i.elementArrayBuffer);for(var o=this.currentArrayBuffer,s=Math.max(a?a.maxAttrib:0,i.maxAttrib),u=0;u<=s;u++){var f=i.attribs[u],l=a?a.attribs[u]:null;if((!a||f.enabled!==l.enabled)&&(f.enabled?n.enableVertexAttribArray.call(t,u):n.disableVertexAttribArray.call(t,u)),f.enabled){var c=!1;(!a||f.buffer!==l.buffer)&&(o!==f.buffer&&(n.bindBuffer.call(t,34962,f.buffer),o=f.buffer),c=!0),(c||f.cached!==l.cached)&&n.vertexAttribPointer.call(t,u,f.size,f.type,f.normalized,f.stride,f.offset)}}this.currentArrayBuffer!==o&&n.bindBuffer.call(t,34962,this.currentArrayBuffer)}};function FA(e){if(typeof e.createVertexArray!="function"){var r=e.getSupportedExtensions;e.getSupportedExtensions=function(){var a=r.call(this)||[];return a.indexOf("OES_vertex_array_object")<0&&a.push("OES_vertex_array_object"),a};var t=e.getExtension;e.getExtension=function(a){var i=t.call(this,a);return i||(a!=="OES_vertex_array_object"?null:(e.__OESVertexArrayObject||(this.__OESVertexArrayObject=new An(this)),this.__OESVertexArrayObject))}}}var Ci=m(W());var ae=m(W());var re,LA="OES_element_index",kA="WEBGL_draw_buffers",g3="EXT_disjoint_timer_query",y3="EXT_disjoint_timer_query_webgl2",A3="EXT_texture_filter_anisotropic",DA="WEBGL_debug_renderer_info",_3=35723,b3=4352,T3=36795,x3=34047,E3=37445,S3=37446,Se=function(r){return he(r)?void 0:0},C3=(re={},(0,ae.default)(re,3074,function(r){return he(r)?void 0:36064}),(0,ae.default)(re,_3,function(e){return he(e)?void 0:b3}),(0,ae.default)(re,35977,Se),(0,ae.default)(re,32937,Se),(0,ae.default)(re,T3,function(e,r){var t=he(e)?e.getExtension(y3):e.getExtension(g3);return t&&t.GPU_DISJOINT_EXT?r(t.GPU_DISJOINT_EXT):0}),(0,ae.default)(re,E3,function(e,r){var t=e.getExtension(DA);return r(t&&t.UNMASKED_VENDOR_WEBGL||7936)}),(0,ae.default)(re,S3,function(e,r){var t=e.getExtension(DA);return r(t&&t.UNMASKED_RENDERER_WEBGL||7937)}),(0,ae.default)(re,x3,function(e,r){var t=e.luma.extensions[A3];return t?r(t.MAX_TEXTURE_MAX_ANISOTROPY_EXT):1}),(0,ae.default)(re,32883,Se),(0,ae.default)(re,35071,Se),(0,ae.default)(re,37447,Se),(0,ae.default)(re,36063,function(r,t){if(!he(r)){var n=r.getExtension(kA);return n?t(n.MAX_COLOR_ATTACHMENTS_WEBGL):0}}),(0,ae.default)(re,35379,Se),(0,ae.default)(re,35374,Se),(0,ae.default)(re,35377,Se),(0,ae.default)(re,34852,function(r){if(!he(r)){var t=r.getExtension(kA);return t?t.MAX_DRAW_BUFFERS_WEBGL:0}}),(0,ae.default)(re,36203,function(r){return r.getExtension(LA)?2147483647:65535}),(0,ae.default)(re,33001,function(r){return r.getExtension(LA)?16777216:65535}),(0,ae.default)(re,33e3,function(r){return 16777216}),(0,ae.default)(re,37157,Se),(0,ae.default)(re,35373,Se),(0,ae.default)(re,35657,Se),(0,ae.default)(re,36183,Se),(0,ae.default)(re,37137,Se),(0,ae.default)(re,34045,Se),(0,ae.default)(re,35978,Se),(0,ae.default)(re,35979,Se),(0,ae.default)(re,35968,Se),(0,ae.default)(re,35376,Se),(0,ae.default)(re,35375,Se),(0,ae.default)(re,35659,Se),(0,ae.default)(re,37154,Se),(0,ae.default)(re,35371,Se),(0,ae.default)(re,35658,Se),(0,ae.default)(re,35076,Se),(0,ae.default)(re,35077,Se),(0,ae.default)(re,35380,Se),re);function GA(e,r,t){var n=C3[t],a=typeof n=="function"?n(e,r,t):n,i=a!==void 0?a:r(t);return i}var va,w3="OES_vertex_array_object",NA="ANGLE_instanced_arrays",B3="WEBGL_draw_buffers",M3="EXT_disjoint_timer_query",O3="EXT_texture_filter_anisotropic",I3="VertexArray requires WebGL2 or OES_vertex_array_object extension";function P3(e,r){return{webgl2:he(e),ext:e.getExtension(r)}}var Dc=(va={},(0,Ci.default)(va,w3,{meta:{suffix:"OES"},createVertexArray:function(){Ne(!1,I3)},deleteVertexArray:function(){},bindVertexArray:function(){},isVertexArray:function(){return!1}}),(0,Ci.default)(va,NA,{meta:{suffix:"ANGLE"},vertexAttribDivisor:function(r,t){Ne(t===0,"WebGL instanced rendering not supported")},drawElementsInstanced:function(){},drawArraysInstanced:function(){}}),(0,Ci.default)(va,B3,{meta:{suffix:"WEBGL"},drawBuffers:function(){Ne(!1)}}),(0,Ci.default)(va,M3,{meta:{suffix:"EXT"},createQuery:function(){Ne(!1)},deleteQuery:function(){Ne(!1)},beginQuery:function(){Ne(!1)},endQuery:function(){},getQuery:function(r,t){return this.getQueryObject(r,t)},getQueryParameter:function(r,t){return this.getQueryObject(r,t)},getQueryObject:function(){}}),va),xs={readBuffer:function(r,t,n){he(r)&&t(n)},getVertexAttrib:function(r,t,n,a){var i=P3(r,NA),o=i.webgl2,s=i.ext,u;switch(a){case 35069:u=o?void 0:!1;break;case 35070:u=!o&&!s?0:void 0;break;default:}return u!==void 0?u:t(n,a)},getProgramParameter:function(r,t,n,a){if(!he(r))switch(a){case 35967:return 35981;case 35971:return 0;case 35382:return 0;default:}return t(n,a)},getInternalformatParameter:function(r,t,n,a,i){if(!he(r))switch(i){case 32937:return new Int32Array([0]);default:}return r.getInternalformatParameter(n,a,i)},getTexParameter:function(r,t,n,a){switch(a){case 34046:var i=r.luma.extensions,o=i[O3];a=o&&o.TEXTURE_MAX_ANISOTROPY_EXT||34046;break;default:}return t(n,a)},getParameter:GA,hint:function(r,t,n,a){return t(n,a)}};function jA(e,r){var t=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=R3(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(f){throw f},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,o=!1,s;return{s:function(){t=t.call(e)},n:function(){var f=t.next();return i=f.done,f},e:function(f){o=!0,s=f},f:function(){try{!i&&t.return!=null&&t.return()}finally{if(o)throw s}}}}function R3(e,r){if(e){if(typeof e=="string")return UA(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return UA(e,r)}}function UA(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function HA(e){e.luma=e.luma||{};var r=e.luma;return r.polyfilled||(FA(e),F3(e),k3(e,Dc),L3(e,{target:r,target2:e}),r.polyfilled=!0),e}globalThis.polyfillContext=HA;function F3(e){e.luma.extensions={};var r=e.getSupportedExtensions()||[],t=jA(r),n;try{for(t.s();!(n=t.n()).done;){var a=n.value;e.luma[a]=e.getExtension(a)}}catch(i){t.e(i)}finally{t.f()}}function L3(e,r){var t=r.target,n=r.target2;Object.keys(xs).forEach(function(a){if(typeof xs[a]=="function"){var i=e[a]?e[a].bind(e):function(){},o=xs[a].bind(null,e,i);t[a]=o,n[a]=o}})}function k3(e,r){var t=jA(Object.getOwnPropertyNames(r)),n;try{for(t.s();!(n=t.n()).done;){var a=n.value;a!=="overrides"&&D3(e,{extension:a,target:e.luma,target2:e})}}catch(i){t.e(i)}finally{t.f()}}function D3(e,r){var t=r.extension,n=r.target,a=r.target2,i=Dc[t];Ne(i);for(var o=i.meta,s=o===void 0?{}:o,u=s.suffix,f=u===void 0?"":u,l=e.getExtension(t),c=function(){var v=d[h],g="".concat(v).concat(f),y=null;v==="meta"||typeof e[v]=="function"||(l&&typeof l[g]=="function"?y=function(){return l[g].apply(l,arguments)}:typeof i[v]=="function"&&(y=i[v].bind(n))),y&&(n[v]=y,a[v]=y)},h=0,d=Object.keys(i);h<d.length;h++)c()}var Es=m(ce()),Ie=m(Et()),x=m(W());var V,N,wt,Ss=(V={},(0,x.default)(V,3042,!1),(0,x.default)(V,32773,new Float32Array([0,0,0,0])),(0,x.default)(V,32777,32774),(0,x.default)(V,34877,32774),(0,x.default)(V,32969,1),(0,x.default)(V,32968,0),(0,x.default)(V,32971,1),(0,x.default)(V,32970,0),(0,x.default)(V,3106,new Float32Array([0,0,0,0])),(0,x.default)(V,3107,[!0,!0,!0,!0]),(0,x.default)(V,2884,!1),(0,x.default)(V,2885,1029),(0,x.default)(V,2929,!1),(0,x.default)(V,2931,1),(0,x.default)(V,2932,513),(0,x.default)(V,2928,new Float32Array([0,1])),(0,x.default)(V,2930,!0),(0,x.default)(V,3024,!0),(0,x.default)(V,36006,null),(0,x.default)(V,2886,2305),(0,x.default)(V,33170,4352),(0,x.default)(V,2849,1),(0,x.default)(V,32823,!1),(0,x.default)(V,32824,0),(0,x.default)(V,10752,0),(0,x.default)(V,32938,1),(0,x.default)(V,32939,!1),(0,x.default)(V,3089,!1),(0,x.default)(V,3088,new Int32Array([0,0,1024,1024])),(0,x.default)(V,2960,!1),(0,x.default)(V,2961,0),(0,x.default)(V,2968,4294967295),(0,x.default)(V,36005,4294967295),(0,x.default)(V,2962,519),(0,x.default)(V,2967,0),(0,x.default)(V,2963,4294967295),(0,x.default)(V,34816,519),(0,x.default)(V,36003,0),(0,x.default)(V,36004,4294967295),(0,x.default)(V,2964,7680),(0,x.default)(V,2965,7680),(0,x.default)(V,2966,7680),(0,x.default)(V,34817,7680),(0,x.default)(V,34818,7680),(0,x.default)(V,34819,7680),(0,x.default)(V,2978,[0,0,1024,1024]),(0,x.default)(V,3333,4),(0,x.default)(V,3317,4),(0,x.default)(V,37440,!1),(0,x.default)(V,37441,!1),(0,x.default)(V,37443,37444),(0,x.default)(V,35723,4352),(0,x.default)(V,36010,null),(0,x.default)(V,35977,!1),(0,x.default)(V,3330,0),(0,x.default)(V,3332,0),(0,x.default)(V,3331,0),(0,x.default)(V,3314,0),(0,x.default)(V,32878,0),(0,x.default)(V,3316,0),(0,x.default)(V,3315,0),(0,x.default)(V,32877,0),V),Rr=function(r,t,n){return t?r.enable(n):r.disable(n)},VA=function(r,t,n){return r.hint(n,t)},_t=function(r,t,n){return r.pixelStorei(n,t)},G3=function(r,t){var n=he(r)?36009:36160;return r.bindFramebuffer(n,t)},N3=function(r,t){return r.bindFramebuffer(36008,t)};function wi(e){return Array.isArray(e)||ArrayBuffer.isView(e)}var zA=(N={},(0,x.default)(N,3042,Rr),(0,x.default)(N,32773,function(r,t){return r.blendColor.apply(r,(0,Ie.default)(t))}),(0,x.default)(N,32777,"blendEquation"),(0,x.default)(N,34877,"blendEquation"),(0,x.default)(N,32969,"blendFunc"),(0,x.default)(N,32968,"blendFunc"),(0,x.default)(N,32971,"blendFunc"),(0,x.default)(N,32970,"blendFunc"),(0,x.default)(N,3106,function(r,t){return r.clearColor.apply(r,(0,Ie.default)(t))}),(0,x.default)(N,3107,function(r,t){return r.colorMask.apply(r,(0,Ie.default)(t))}),(0,x.default)(N,2884,Rr),(0,x.default)(N,2885,function(r,t){return r.cullFace(t)}),(0,x.default)(N,2929,Rr),(0,x.default)(N,2931,function(r,t){return r.clearDepth(t)}),(0,x.default)(N,2932,function(r,t){return r.depthFunc(t)}),(0,x.default)(N,2928,function(r,t){return r.depthRange.apply(r,(0,Ie.default)(t))}),(0,x.default)(N,2930,function(r,t){return r.depthMask(t)}),(0,x.default)(N,3024,Rr),(0,x.default)(N,35723,VA),(0,x.default)(N,36006,G3),(0,x.default)(N,2886,function(r,t){return r.frontFace(t)}),(0,x.default)(N,33170,VA),(0,x.default)(N,2849,function(r,t){return r.lineWidth(t)}),(0,x.default)(N,32823,Rr),(0,x.default)(N,32824,"polygonOffset"),(0,x.default)(N,10752,"polygonOffset"),(0,x.default)(N,35977,Rr),(0,x.default)(N,32938,"sampleCoverage"),(0,x.default)(N,32939,"sampleCoverage"),(0,x.default)(N,3089,Rr),(0,x.default)(N,3088,function(r,t){return r.scissor.apply(r,(0,Ie.default)(t))}),(0,x.default)(N,2960,Rr),(0,x.default)(N,2961,function(r,t){return r.clearStencil(t)}),(0,x.default)(N,2968,function(r,t){return r.stencilMaskSeparate(1028,t)}),(0,x.default)(N,36005,function(r,t){return r.stencilMaskSeparate(1029,t)}),(0,x.default)(N,2962,"stencilFuncFront"),(0,x.default)(N,2967,"stencilFuncFront"),(0,x.default)(N,2963,"stencilFuncFront"),(0,x.default)(N,34816,"stencilFuncBack"),(0,x.default)(N,36003,"stencilFuncBack"),(0,x.default)(N,36004,"stencilFuncBack"),(0,x.default)(N,2964,"stencilOpFront"),(0,x.default)(N,2965,"stencilOpFront"),(0,x.default)(N,2966,"stencilOpFront"),(0,x.default)(N,34817,"stencilOpBack"),(0,x.default)(N,34818,"stencilOpBack"),(0,x.default)(N,34819,"stencilOpBack"),(0,x.default)(N,2978,function(r,t){return r.viewport.apply(r,(0,Ie.default)(t))}),(0,x.default)(N,3333,_t),(0,x.default)(N,3317,_t),(0,x.default)(N,37440,_t),(0,x.default)(N,37441,_t),(0,x.default)(N,37443,_t),(0,x.default)(N,3330,_t),(0,x.default)(N,3332,_t),(0,x.default)(N,3331,_t),(0,x.default)(N,36010,N3),(0,x.default)(N,3314,_t),(0,x.default)(N,32878,_t),(0,x.default)(N,3316,_t),(0,x.default)(N,3315,_t),(0,x.default)(N,32877,_t),(0,x.default)(N,"framebuffer",function(r,t){var n=t&&"handle"in t?t.handle:t;return r.bindFramebuffer(36160,n)}),(0,x.default)(N,"blend",function(r,t){return t?r.enable(3042):r.disable(3042)}),(0,x.default)(N,"blendColor",function(r,t){return r.blendColor.apply(r,(0,Ie.default)(t))}),(0,x.default)(N,"blendEquation",function(r,t){t=wi(t)?t:[t,t],r.blendEquationSeparate.apply(r,(0,Ie.default)(t))}),(0,x.default)(N,"blendFunc",function(r,t){t=wi(t)&&t.length===2?[].concat((0,Ie.default)(t),(0,Ie.default)(t)):t,r.blendFuncSeparate.apply(r,(0,Ie.default)(t))}),(0,x.default)(N,"clearColor",function(r,t){return r.clearColor.apply(r,(0,Ie.default)(t))}),(0,x.default)(N,"clearDepth",function(r,t){return r.clearDepth(t)}),(0,x.default)(N,"clearStencil",function(r,t){return r.clearStencil(t)}),(0,x.default)(N,"colorMask",function(r,t){return r.colorMask.apply(r,(0,Ie.default)(t))}),(0,x.default)(N,"cull",function(r,t){return t?r.enable(2884):r.disable(2884)}),(0,x.default)(N,"cullFace",function(r,t){return r.cullFace(t)}),(0,x.default)(N,"depthTest",function(r,t){return t?r.enable(2929):r.disable(2929)}),(0,x.default)(N,"depthFunc",function(r,t){return r.depthFunc(t)}),(0,x.default)(N,"depthMask",function(r,t){return r.depthMask(t)}),(0,x.default)(N,"depthRange",function(r,t){return r.depthRange.apply(r,(0,Ie.default)(t))}),(0,x.default)(N,"dither",function(r,t){return t?r.enable(3024):r.disable(3024)}),(0,x.default)(N,"derivativeHint",function(r,t){r.hint(35723,t)}),(0,x.default)(N,"frontFace",function(r,t){return r.frontFace(t)}),(0,x.default)(N,"mipmapHint",function(r,t){return r.hint(33170,t)}),(0,x.default)(N,"lineWidth",function(r,t){return r.lineWidth(t)}),(0,x.default)(N,"polygonOffsetFill",function(r,t){return t?r.enable(32823):r.disable(32823)}),(0,x.default)(N,"polygonOffset",function(r,t){return r.polygonOffset.apply(r,(0,Ie.default)(t))}),(0,x.default)(N,"sampleCoverage",function(r,t){return r.sampleCoverage.apply(r,(0,Ie.default)(t))}),(0,x.default)(N,"scissorTest",function(r,t){return t?r.enable(3089):r.disable(3089)}),(0,x.default)(N,"scissor",function(r,t){return r.scissor.apply(r,(0,Ie.default)(t))}),(0,x.default)(N,"stencilTest",function(r,t){return t?r.enable(2960):r.disable(2960)}),(0,x.default)(N,"stencilMask",function(r,t){t=wi(t)?t:[t,t];var n=t,a=(0,Es.default)(n,2),i=a[0],o=a[1];r.stencilMaskSeparate(1028,i),r.stencilMaskSeparate(1029,o)}),(0,x.default)(N,"stencilFunc",function(r,t){t=wi(t)&&t.length===3?[].concat((0,Ie.default)(t),(0,Ie.default)(t)):t;var n=t,a=(0,Es.default)(n,6),i=a[0],o=a[1],s=a[2],u=a[3],f=a[4],l=a[5];r.stencilFuncSeparate(1028,i,o,s),r.stencilFuncSeparate(1029,u,f,l)}),(0,x.default)(N,"stencilOp",function(r,t){t=wi(t)&&t.length===3?[].concat((0,Ie.default)(t),(0,Ie.default)(t)):t;var n=t,a=(0,Es.default)(n,6),i=a[0],o=a[1],s=a[2],u=a[3],f=a[4],l=a[5];r.stencilOpSeparate(1028,i,o,s),r.stencilOpSeparate(1029,u,f,l)}),(0,x.default)(N,"viewport",function(r,t){return r.viewport.apply(r,(0,Ie.default)(t))}),N);function Fe(e,r,t){return r[e]!==void 0?r[e]:t[e]}var WA={blendEquation:function(r,t,n){return r.blendEquationSeparate(Fe(32777,t,n),Fe(34877,t,n))},blendFunc:function(r,t,n){return r.blendFuncSeparate(Fe(32969,t,n),Fe(32968,t,n),Fe(32971,t,n),Fe(32970,t,n))},polygonOffset:function(r,t,n){return r.polygonOffset(Fe(32824,t,n),Fe(10752,t,n))},sampleCoverage:function(r,t,n){return r.sampleCoverage(Fe(32938,t,n),Fe(32939,t,n))},stencilFuncFront:function(r,t,n){return r.stencilFuncSeparate(1028,Fe(2962,t,n),Fe(2967,t,n),Fe(2963,t,n))},stencilFuncBack:function(r,t,n){return r.stencilFuncSeparate(1029,Fe(34816,t,n),Fe(36003,t,n),Fe(36004,t,n))},stencilOpFront:function(r,t,n){return r.stencilOpSeparate(1028,Fe(2964,t,n),Fe(2965,t,n),Fe(2966,t,n))},stencilOpBack:function(r,t,n){return r.stencilOpSeparate(1029,Fe(34817,t,n),Fe(34818,t,n),Fe(34819,t,n))}},Gc={enable:function(r,t){return r((0,x.default)({},t,!0))},disable:function(r,t){return r((0,x.default)({},t,!1))},pixelStorei:function(r,t,n){return r((0,x.default)({},t,n))},hint:function(r,t,n){return r((0,x.default)({},t,n))},bindFramebuffer:function(r,t,n){var a;switch(t){case 36160:return r((a={},(0,x.default)(a,36006,n),(0,x.default)(a,36010,n),a));case 36009:return r((0,x.default)({},36006,n));case 36008:return r((0,x.default)({},36010,n));default:return null}},blendColor:function(r,t,n,a,i){return r((0,x.default)({},32773,new Float32Array([t,n,a,i])))},blendEquation:function(r,t){var n;return r((n={},(0,x.default)(n,32777,t),(0,x.default)(n,34877,t),n))},blendEquationSeparate:function(r,t,n){var a;return r((a={},(0,x.default)(a,32777,t),(0,x.default)(a,34877,n),a))},blendFunc:function(r,t,n){var a;return r((a={},(0,x.default)(a,32969,t),(0,x.default)(a,32968,n),(0,x.default)(a,32971,t),(0,x.default)(a,32970,n),a))},blendFuncSeparate:function(r,t,n,a,i){var o;return r((o={},(0,x.default)(o,32969,t),(0,x.default)(o,32968,n),(0,x.default)(o,32971,a),(0,x.default)(o,32970,i),o))},clearColor:function(r,t,n,a,i){return r((0,x.default)({},3106,new Float32Array([t,n,a,i])))},clearDepth:function(r,t){return r((0,x.default)({},2931,t))},clearStencil:function(r,t){return r((0,x.default)({},2961,t))},colorMask:function(r,t,n,a,i){return r((0,x.default)({},3107,[t,n,a,i]))},cullFace:function(r,t){return r((0,x.default)({},2885,t))},depthFunc:function(r,t){return r((0,x.default)({},2932,t))},depthRange:function(r,t,n){return r((0,x.default)({},2928,new Float32Array([t,n])))},depthMask:function(r,t){return r((0,x.default)({},2930,t))},frontFace:function(r,t){return r((0,x.default)({},2886,t))},lineWidth:function(r,t){return r((0,x.default)({},2849,t))},polygonOffset:function(r,t,n){var a;return r((a={},(0,x.default)(a,32824,t),(0,x.default)(a,10752,n),a))},sampleCoverage:function(r,t,n){var a;return r((a={},(0,x.default)(a,32938,t),(0,x.default)(a,32939,n),a))},scissor:function(r,t,n,a,i){return r((0,x.default)({},3088,new Int32Array([t,n,a,i])))},stencilMask:function(r,t){var n;return r((n={},(0,x.default)(n,2968,t),(0,x.default)(n,36005,t),n))},stencilMaskSeparate:function(r,t,n){return r((0,x.default)({},t===1028?2968:36005,n))},stencilFunc:function(r,t,n,a){var i;return r((i={},(0,x.default)(i,2962,t),(0,x.default)(i,2967,n),(0,x.default)(i,2963,a),(0,x.default)(i,34816,t),(0,x.default)(i,36003,n),(0,x.default)(i,36004,a),i))},stencilFuncSeparate:function(r,t,n,a,i){var o;return r((o={},(0,x.default)(o,t===1028?2962:34816,n),(0,x.default)(o,t===1028?2967:36003,a),(0,x.default)(o,t===1028?2963:36004,i),o))},stencilOp:function(r,t,n,a){var i;return r((i={},(0,x.default)(i,2964,t),(0,x.default)(i,2965,n),(0,x.default)(i,2966,a),(0,x.default)(i,34817,t),(0,x.default)(i,34818,n),(0,x.default)(i,34819,a),i))},stencilOpSeparate:function(r,t,n,a,i){var o;return r((o={},(0,x.default)(o,t===1028?2964:34817,n),(0,x.default)(o,t===1028?2965:34818,a),(0,x.default)(o,t===1028?2966:34819,i),o))},viewport:function(r,t,n,a,i){return r((0,x.default)({},2978,[t,n,a,i]))}},Jt=function(r,t){return r.isEnabled(t)},Nc=(wt={},(0,x.default)(wt,3042,Jt),(0,x.default)(wt,2884,Jt),(0,x.default)(wt,2929,Jt),(0,x.default)(wt,3024,Jt),(0,x.default)(wt,32823,Jt),(0,x.default)(wt,32926,Jt),(0,x.default)(wt,32928,Jt),(0,x.default)(wt,3089,Jt),(0,x.default)(wt,2960,Jt),(0,x.default)(wt,35977,Jt),wt);var XA=m(H()),YA=m(z());function Uc(e){for(var r in e)return!1;return!0}function JA(e,r){if(e===r)return!0;var t=Array.isArray(e)||ArrayBuffer.isView(e),n=Array.isArray(r)||ArrayBuffer.isView(r);if(t&&n&&e.length===r.length){for(var a=0;a<e.length;++a)if(e[a]!==r[a])return!1;return!0}return!1}function qA(e,r){var t=e[r].bind(e);e[r]=function(){var a=arguments.length<=0?void 0:arguments[0];return a in e.state.cache&&e.state.enable?e.state.cache[a]:t.apply(void 0,arguments)},Object.defineProperty(e[r],"name",{value:"".concat(r,"-from-cache"),configurable:!1})}function U3(e,r,t){var n=e[r].bind(e);e[r]=function(){for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];var u=t.apply(void 0,[e.state._updateCache].concat(o)),f=u.valueChanged,l=u.oldValue;return f&&n.apply(void 0,o),l},Object.defineProperty(e[r],"name",{value:"".concat(r,"-to-cache"),configurable:!1})}function j3(e){var r=e.useProgram.bind(e);e.useProgram=function(n){e.state.program!==n&&(r(n),e.state.program=n)}}var H3=function(){function e(r){(0,XA.default)(this,e);var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.copyState,a=n===void 0?!1:n,i=t.log,o=i===void 0?function(){}:i;this.gl=r,this.program=null,this.stateStack=[],this.enable=!0,this.cache=a?Vc(r):Object.assign({},Ss),this.log=o,this._updateCache=this._updateCache.bind(this),Object.seal(this)}return(0,YA.default)(e,[{key:"push",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.stateStack.push({})}},{key:"pop",value:function(){Ne(this.stateStack.length>0);var t=this.stateStack[this.stateStack.length-1];ws(this.gl,t),this.stateStack.pop()}},{key:"_updateCache",value:function(t){var n=!1,a,i=this.stateStack.length>0&&this.stateStack[this.stateStack.length-1];for(var o in t){Ne(o!==void 0);var s=t[o],u=this.cache[o];JA(s,u)||(n=!0,a=u,i&&!(o in i)&&(i[o]=u),this.cache[o]=s)}return{valueChanged:n,oldValue:a}}}]),e}();function jc(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=r.enable,n=t===void 0?!0:t,a=r.copyState;if(Ne(a!==void 0),!e.state){var i=globalThis.polyfillContext;i&&i(e),e.state=new H3(e,{copyState:a}),j3(e);for(var o in Gc){var s=Gc[o];U3(e,o,s)}qA(e,"getParameter"),qA(e,"isEnabled")}return e.state.enable=n,e}function Hc(e){e.state||jc(e,{copyState:!1}),e.state.push()}function Cs(e){Ne(e.state),e.state.pop()}function V3(e,r){var t=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=z3(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(f){throw f},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,o=!1,s;return{s:function(){t=t.call(e)},n:function(){var f=t.next();return i=f.done,f},e:function(f){o=!0,s=f},f:function(){try{!i&&t.return!=null&&t.return()}finally{if(o)throw s}}}}function z3(e,r){if(e){if(typeof e=="string")return KA(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return KA(e,r)}}function KA(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function ws(e,r){if(Ne(Ts(e),"setParameters requires a WebGL context"),!Uc(r)){var t={};for(var n in r){var a=Number(n),i=zA[n];i&&(typeof i=="string"?t[i]=!0:i(e,r[n],a))}var o=e.state&&e.state.cache;if(o)for(var s in t){var u=WA[s];u(e,r,o)}}}function Vc(e,r){if(r=r||Ss,typeof r=="number"){var t=r,n=Nc[t];return n?n(e,t):e.getParameter(t)}var a=Array.isArray(r)?r:Object.keys(r),i={},o=V3(a),s;try{for(o.s();!(s=o.n()).done;){var u=s.value,f=Nc[u];i[u]=f?f(e,Number(u)):e.getParameter(Number(u))}}catch(l){o.e(l)}finally{o.f()}return i}function or(e,r,t){if(Uc(r))return t(e);var n=r.nocatch,a=n===void 0?!0:n;Hc(e),ws(e,r);var i;if(a)i=t(e),Cs(e);else try{i=t(e)}finally{Cs(e)}return i}var zW=ut();var QA=m(H()),ZA=m(z());var Bi="8.5.16",W3="set luma.log.level=1 (or higher) to trace rendering",zc=function(){function e(){(0,QA.default)(this,e),this.stats=new Map}return(0,ZA.default)(e,[{key:"get",value:function(t){return this.stats.has(t)||this.stats.set(t,new rn({id:t})),this.stats.get(t)}}]),e}(),ga=new zc;if(globalThis.luma&&globalThis.luma.VERSION!==Bi)throw new Error("luma.gl - multiple VERSIONs detected: ".concat(globalThis.luma.VERSION," vs ").concat(Bi));globalThis.luma||(ut()&&oe.log(1,"luma.gl ".concat(Bi," - ").concat(W3))(),globalThis.luma=globalThis.luma||{VERSION:Bi,version:Bi,log:oe,stats:ga,globals:{modules:{},nodeIO:{}}});var lJ=globalThis.luma;var ob=m(W());var B_=m(H()),M_=m(z()),O_=m(nt()),I_=m(Te()),P_=m(xe()),Qc=m(ye());var T_=m(ce()),x_=m(H()),E_=m(z()),S_=m(Te()),C_=m(xe()),Yc=m(ye());var t_=m(H()),r_=m(z());function Q(e,r){if(!e)throw new Error(r||"luma.gl: assertion failed.")}function Bs(e,r){if(typeof r!="string")return r;var t=Number(r);if(!isNaN(t))return t;r=r.replace(/^.*\./,"");var n=e[r];return Q(n!==void 0,"Accessing undefined constant GL.".concat(r)),n}function _n(e,r){r=Number(r);for(var t in e)if(e[t]===r)return"GL.".concat(t);return String(r)}var Wc={};function Ms(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"id";Wc[e]=Wc[e]||1;var r=Wc[e]++;return"".concat(e,"-").concat(r)}function Jc(e){return Q(typeof e=="number","Input must be a number"),e&&(e&e-1)===0}function $A(e,r,t,n){var a="See luma.gl ".concat(t," Upgrade Guide at https://luma.gl/docs/upgrade-guide"),i=Object.getPrototypeOf(e);n.forEach(function(o){i.methodName||(i[o]=function(){throw oe.removed("Calling removed method ".concat(r,".").concat(o,": "),a)(),new Error(o)})})}function J3(e,r){var t=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=q3(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(f){throw f},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,o=!1,s;return{s:function(){t=t.call(e)},n:function(){var f=t.next();return i=f.done,f},e:function(f){o=!0,s=f},f:function(){try{!i&&t.return!=null&&t.return()}finally{if(o)throw s}}}}function q3(e,r){if(e){if(typeof e=="string")return e_(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return e_(e,r)}}function e_(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var ya="Resource subclass must define virtual methods",Fr=function(e){function r(t){(0,t_.default)(this,r);var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};xi(t);var a=n.id,i=n.userData,o=i===void 0?{}:i;this.gl=t,this.gl2=t,this.id=a||Ms(this[Symbol.toStringTag]),this.userData=o,this._bound=!1,this._handle=n.handle,this._handle===void 0&&(this._handle=this._createHandle()),this.byteLength=0,this._initStats(),this._addStats()}return(0,r_.default)(r,[{key:e,get:function(){return"Resource"}},{key:"toString",value:function(){return"".concat(this[Symbol.toStringTag]||this.constructor.name,"(").concat(this.id,")")}},{key:"handle",get:function(){return this._handle}},{key:"delete",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=n.deleteChildren,i=a===void 0?!1:a,o=this._handle&&this._deleteHandle(this._handle);return this._handle&&this._removeStats(),this._handle=null,o&&i&&o.filter(Boolean).forEach(function(s){return s.delete()}),this}},{key:"bind",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.handle;if(typeof n!="function")return this._bindHandle(n),this;var a;return this._bound?a=n():(this._bindHandle(this.handle),this._bound=!0,a=n(),this._bound=!1,this._bindHandle(null)),a}},{key:"unbind",value:function(){this.bind(null)}},{key:"getParameter",value:function(n){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};n=Bs(this.gl,n),Q(n);var i=this.constructor.PARAMETERS||{},o=i[n];if(o){var s=he(this.gl),u=(!("webgl2"in o)||s)&&(!("extension"in o)||this.gl.getExtension(o.extension));if(!u){var f=o.webgl1,l="webgl2"in o?o.webgl2:o.webgl1,c=s?l:f;return c}}return this._getParameter(n,a)}},{key:"getParameters",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=n.parameters,i=n.keys,o=this.constructor.PARAMETERS||{},s=he(this.gl),u={},f=a||Object.keys(o),l=J3(f),c;try{for(l.s();!(c=l.n()).done;){var h=c.value,d=o[h],p=d&&(!("webgl2"in d)||s)&&(!("extension"in d)||this.gl.getExtension(d.extension));if(p){var v=i?_n(this.gl,h):h;u[v]=this.getParameter(h,n),i&&d.type==="GLenum"&&(u[v]=_n(this.gl,u[v]))}}}catch(g){l.e(g)}finally{l.f()}return u}},{key:"setParameter",value:function(n,a){n=Bs(this.gl,n),Q(n);var i=this.constructor.PARAMETERS||{},o=i[n];if(o){var s=he(this.gl),u=(!("webgl2"in o)||s)&&(!("extension"in o)||this.gl.getExtension(o.extension));if(!u)throw new Error("Parameter not available on this platform");o.type==="GLenum"&&(a=Bs(a))}return this._setParameter(n,a),this}},{key:"setParameters",value:function(n){for(var a in n)this.setParameter(a,n[a]);return this}},{key:"stubRemovedMethods",value:function(n,a,i){return $A(this,n,a,i)}},{key:"initialize",value:function(n){}},{key:"_createHandle",value:function(){throw new Error(ya)}},{key:"_deleteHandle",value:function(){throw new Error(ya)}},{key:"_bindHandle",value:function(n){throw new Error(ya)}},{key:"_getOptsFromHandle",value:function(){throw new Error(ya)}},{key:"_getParameter",value:function(n,a){throw new Error(ya)}},{key:"_setParameter",value:function(n,a){throw new Error(ya)}},{key:"_context",value:function(){return this.gl.luma=this.gl.luma||{},this.gl.luma}},{key:"_initStats",value:function(){this.gl.stats=this.gl.stats||new zc}},{key:"_addStats",value:function(){var n=this[Symbol.toStringTag],a=ga.get("Resource Counts");a.get("Resources Created").incrementCount(),a.get("".concat(n,"s Created")).incrementCount(),a.get("".concat(n,"s Active")).incrementCount()}},{key:"_removeStats",value:function(){var n=this[Symbol.toStringTag],a=ga.get("Resource Counts");a.get("".concat(n,"s Active")).decrementCount()}},{key:"_trackAllocatedMemory",value:function(n){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this[Symbol.toStringTag];this._doTrackAllocatedMemory(n,a),this._doTrackAllocatedMemory(n,a,this.gl.stats.get("Memory Usage"))}},{key:"_doTrackAllocatedMemory",value:function(n){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this[Symbol.toStringTag],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:ga.get("Memory Usage");i.get("GPU Memory").addCount(n),i.get("".concat(a," Memory")).addCount(n),this.byteLength=n}},{key:"_trackDeallocatedMemory",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this[Symbol.toStringTag];this._doTrackDeallocatedMemory(n),this._doTrackDeallocatedMemory(n,this.gl.stats.get("Memory Usage"))}},{key:"_doTrackDeallocatedMemory",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this[Symbol.toStringTag],a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ga.get("Memory Usage");a.get("GPU Memory").subtractCount(this.byteLength),a.get("".concat(n," Memory")).subtractCount(this.byteLength),this.byteLength=0}}]),r}(Symbol.toStringTag);var l_=m(H()),c_=m(z()),h_=m(nt()),d_=m(Te()),p_=m(xe()),qc=m(ye());var o_=m(n_()),s_=m(H()),u_=m(z());var K3="Failed to deduce GL constant from typed array";function Mi(e){var r=ArrayBuffer.isView(e)?e.constructor:e;switch(r){case Float32Array:return 5126;case Uint16Array:return 5123;case Uint32Array:return 5125;case Uint8Array:return 5121;case Uint8ClampedArray:return 5121;case Int8Array:return 5120;case Int16Array:return 5122;case Int32Array:return 5124;default:throw new Error(K3)}}function Lr(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=r.clamped,n=t===void 0?!0:t;switch(e){case 5126:return Float32Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return n?Uint8ClampedArray:Uint8Array;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Failed to deduce typed array type from GL constant")}}function a_(e){var r=e.data,t=e.width,n=e.height,a=e.bytesPerPixel,i=a===void 0?4:a,o=e.temp,s=t*i;o=o||new Uint8Array(s);for(var u=0;u<n/2;++u){var f=u*s,l=(n-u-1)*s;o.set(r.subarray(f,f+s)),r.copyWithin(f,l,l+s),r.set(o,l)}}function i_(e){for(var r=e.data,t=e.width,n=e.height,a=Math.round(t/2),i=Math.round(n/2),o=new Uint8Array(a*i*4),s=0;s<i;s++)for(var u=0;u<a;u++)for(var f=0;f<4;f++)o[(s*a+u)*4+f]=r[(s*2*t+u*2)*4+f];return{data:o,width:a,height:i}}function Oi(e,r,t){var n=t.removedProps,a=n===void 0?{}:n,i=t.deprecatedProps,o=i===void 0?{}:i,s=t.replacedProps,u=s===void 0?{}:s;for(var f in a)if(f in r){var l=a[f],c=l?"".concat(e,".").concat(a[f]):"N/A";oe.removed("".concat(e,".").concat(f),c)()}for(var h in o)if(h in r){var d=o[h];oe.deprecated("".concat(e,".").concat(h),"".concat(e,".").concat(d))()}var p=null;for(var v in u)if(v in r){var g=u[v];oe.deprecated("".concat(e,".").concat(v),"".concat(e,".").concat(g))(),p=p||Object.assign({},r),p[g]=r[v],delete p[v]}return p||r}var Q3={offset:0,stride:0,type:5126,size:1,divisor:0,normalized:!1,integer:!1},Z3={deprecatedProps:{instanced:"divisor",isInstanced:"divisor"}},bn=function(){function e(){var r=this;(0,s_.default)(this,e);for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];n.forEach(function(i){return r._assign(i)}),Object.freeze(this)}return(0,u_.default)(e,[{key:"toString",value:function(){return JSON.stringify(this)}},{key:"BYTES_PER_ELEMENT",get:function(){return e.getBytesPerElement(this)}},{key:"BYTES_PER_VERTEX",get:function(){return e.getBytesPerVertex(this)}},{key:"_assign",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return t=Oi("Accessor",t,Z3),t.type!==void 0&&(this.type=t.type,(t.type===5124||t.type===5125)&&(this.integer=!0)),t.size!==void 0&&(this.size=t.size),t.offset!==void 0&&(this.offset=t.offset),t.stride!==void 0&&(this.stride=t.stride),t.normalized!==void 0&&(this.normalized=t.normalized),t.integer!==void 0&&(this.integer=t.integer),t.divisor!==void 0&&(this.divisor=t.divisor),t.buffer!==void 0&&(this.buffer=t.buffer),t.index!==void 0&&(typeof t.index=="boolean"?this.index=t.index?1:0:this.index=t.index),t.instanced!==void 0&&(this.divisor=t.instanced?1:0),t.isInstanced!==void 0&&(this.divisor=t.isInstanced?1:0),this}}],[{key:"getBytesPerElement",value:function(t){var n=Lr(t.type||5126);return n.BYTES_PER_ELEMENT}},{key:"getBytesPerVertex",value:function(t){Q(t.size);var n=Lr(t.type||5126);return n.BYTES_PER_ELEMENT*t.size}},{key:"resolve",value:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return(0,o_.default)(e,[Q3].concat(n))}}]),e}();function $3(e){var r=eR();return function(){var n=(0,qc.default)(e),a;if(r){var i=(0,qc.default)(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return(0,p_.default)(this,a)}}function eR(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var f_=10,m_={offset:"accessor.offset",stride:"accessor.stride",type:"accessor.type",size:"accessor.size",divisor:"accessor.divisor",normalized:"accessor.normalized",integer:"accessor.integer",instanced:"accessor.divisor",isInstanced:"accessor.divisor"},tR={removedProps:{},replacedProps:{bytes:"byteLength"},deprecatedProps:m_},rR={removedProps:m_},Xc=function(e,r){(0,d_.default)(n,e);var t=$3(n);function n(a){var i;(0,l_.default)(this,n);var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return i=t.call(this,a,o),i.stubRemovedMethods("Buffer","v6.0",["layout","setLayout","getIndexedParameter"]),i.target=o.target||(i.gl.webgl2?36662:34962),i.initialize(o),Object.seal((0,h_.default)(i)),i}return(0,c_.default)(n,[{key:r,get:function(){return"Buffer"}},{key:"getElementCount",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.accessor;return Math.round(this.byteLength/bn.getBytesPerElement(i))}},{key:"getVertexCount",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.accessor;return Math.round(this.byteLength/bn.getBytesPerVertex(i))}},{key:"initialize",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return ArrayBuffer.isView(i)&&(i={data:i}),Number.isFinite(i)&&(i={byteLength:i}),i=Oi("Buffer",i,tR),this.usage=i.usage||35044,this.debugData=null,this.setAccessor(Object.assign({},i,i.accessor)),i.data?this._setData(i.data,i.offset,i.byteLength):this._setByteLength(i.byteLength||0),this}},{key:"setProps",value:function(i){return i=Oi("Buffer",i,rR),"accessor"in i&&this.setAccessor(i.accessor),this}},{key:"setAccessor",value:function(i){return i=Object.assign({},i),delete i.buffer,this.accessor=new bn(i),this}},{key:"reallocate",value:function(i){return i>this.byteLength?(this._setByteLength(i),!0):(this.bytesUsed=i,!1)}},{key:"setData",value:function(i){return this.initialize(i)}},{key:"subData",value:function(i){ArrayBuffer.isView(i)&&(i={data:i});var o=i,s=o.data,u=o.offset,f=u===void 0?0:u,l=o.srcOffset,c=l===void 0?0:l,h=i.byteLength||i.length;Q(s);var d=this.gl.webgl2?36663:this.target;return this.gl.bindBuffer(d,this.handle),c!==0||h!==void 0?(Ke(this.gl),this.gl.bufferSubData(this.target,f,s,c,h)):this.gl.bufferSubData(d,f,s),this.gl.bindBuffer(d,null),this.debugData=null,this._inferType(s),this}},{key:"copyData",value:function(i){var o=i.sourceBuffer,s=i.readOffset,u=s===void 0?0:s,f=i.writeOffset,l=f===void 0?0:f,c=i.size,h=this.gl;return Ke(h),h.bindBuffer(36662,o.handle),h.bindBuffer(36663,this.handle),h.copyBufferSubData(36662,36663,u,l,c),h.bindBuffer(36662,null),h.bindBuffer(36663,null),this.debugData=null,this}},{key:"getData",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=i.dstData,s=o===void 0?null:o,u=i.srcByteOffset,f=u===void 0?0:u,l=i.dstOffset,c=l===void 0?0:l,h=i.length,d=h===void 0?0:h;Ke(this.gl);var p=Lr(this.accessor.type||5126,{clamped:!1}),v=this._getAvailableElementCount(f),g=c,y,b;s?(b=s.length,y=b-g):(y=Math.min(v,d||v),b=g+y);var E=Math.min(v,y);return d=d||E,Q(d<=E),s=s||new p(b),this.gl.bindBuffer(36662,this.handle),this.gl.getBufferSubData(36662,f,s,c,d),this.gl.bindBuffer(36662,null),s}},{key:"bind",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=i.target,s=o===void 0?this.target:o,u=i.index,f=u===void 0?this.accessor&&this.accessor.index:u,l=i.offset,c=l===void 0?0:l,h=i.size;return s===35345||s===35982?h!==void 0?this.gl.bindBufferRange(s,f,this.handle,c,h):(Q(c===0),this.gl.bindBufferBase(s,f,this.handle)):this.gl.bindBuffer(s,this.handle),this}},{key:"unbind",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=i.target,s=o===void 0?this.target:o,u=i.index,f=u===void 0?this.accessor&&this.accessor.index:u,l=s===35345||s===35982;return l?this.gl.bindBufferBase(s,f,null):this.gl.bindBuffer(s,null),this}},{key:"getDebugData",value:function(){return this.debugData?{data:this.debugData,changed:!1}:(this.debugData=this.getData({length:Math.min(f_,this.byteLength)}),{data:this.debugData,changed:!0})}},{key:"invalidateDebugData",value:function(){this.debugData=null}},{key:"_setData",value:function(i){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:i.byteLength+o;Q(ArrayBuffer.isView(i)),this._trackDeallocatedMemory();var u=this._getTarget();this.gl.bindBuffer(u,this.handle),this.gl.bufferData(u,s,this.usage),this.gl.bufferSubData(u,o,i),this.gl.bindBuffer(u,null),this.debugData=i.slice(0,f_),this.bytesUsed=s,this._trackAllocatedMemory(s);var f=Mi(i);return Q(f),this.setAccessor(new bn(this.accessor,{type:f})),this}},{key:"_setByteLength",value:function(i){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.usage;Q(i>=0),this._trackDeallocatedMemory();var s=i;i===0&&(s=new Float32Array(0));var u=this._getTarget();return this.gl.bindBuffer(u,this.handle),this.gl.bufferData(u,s,o),this.gl.bindBuffer(u,null),this.usage=o,this.debugData=null,this.bytesUsed=i,this._trackAllocatedMemory(i),this}},{key:"_getTarget",value:function(){return this.gl.webgl2?36663:this.target}},{key:"_getAvailableElementCount",value:function(i){var o=Lr(this.accessor.type||5126,{clamped:!1}),s=i/o.BYTES_PER_ELEMENT;return this.getElementCount()-s}},{key:"_inferType",value:function(i){this.accessor.type||this.setAccessor(new bn(this.accessor,{type:Mi(i)}))}},{key:"_createHandle",value:function(){return this.gl.createBuffer()}},{key:"_deleteHandle",value:function(){this.gl.deleteBuffer(this.handle),this._trackDeallocatedMemory()}},{key:"_getParameter",value:function(i){this.gl.bindBuffer(this.target,this.handle);var o=this.gl.getBufferParameter(this.target,i);return this.gl.bindBuffer(this.target,null),o}},{key:"type",get:function(){return oe.deprecated("Buffer.type","Buffer.accessor.type")(),this.accessor.type}},{key:"bytes",get:function(){return oe.deprecated("Buffer.bytes","Buffer.byteLength")(),this.byteLength}},{key:"setByteLength",value:function(i){return oe.deprecated("setByteLength","reallocate")(),this.reallocate(i)}},{key:"updateAccessor",value:function(i){return oe.deprecated("updateAccessor(...)","setAccessor(new Accessor(buffer.accessor, ...)")(),this.accessor=new bn(this.accessor,i),this}}]),n}(Fr,Symbol.toStringTag);var pe=m(W());var Lt,ft,qt,Ps=(Lt={},(0,pe.default)(Lt,6407,{dataFormat:6407,types:[5121,33635]}),(0,pe.default)(Lt,6408,{dataFormat:6408,types:[5121,32819,32820]}),(0,pe.default)(Lt,6406,{dataFormat:6406,types:[5121]}),(0,pe.default)(Lt,6409,{dataFormat:6409,types:[5121]}),(0,pe.default)(Lt,6410,{dataFormat:6410,types:[5121]}),(0,pe.default)(Lt,33326,{dataFormat:6403,types:[5126],gl2:!0}),(0,pe.default)(Lt,33328,{dataFormat:33319,types:[5126],gl2:!0}),(0,pe.default)(Lt,34837,{dataFormat:6407,types:[5126],gl2:!0}),(0,pe.default)(Lt,34836,{dataFormat:6408,types:[5126],gl2:!0}),Lt),v_=(ft={},(0,pe.default)(ft,6403,1),(0,pe.default)(ft,36244,1),(0,pe.default)(ft,33319,2),(0,pe.default)(ft,33320,2),(0,pe.default)(ft,6407,3),(0,pe.default)(ft,36248,3),(0,pe.default)(ft,6408,4),(0,pe.default)(ft,36249,4),(0,pe.default)(ft,6402,1),(0,pe.default)(ft,34041,1),(0,pe.default)(ft,6406,1),(0,pe.default)(ft,6409,1),(0,pe.default)(ft,6410,2),ft),g_=(qt={},(0,pe.default)(qt,5126,4),(0,pe.default)(qt,5125,4),(0,pe.default)(qt,5124,4),(0,pe.default)(qt,5123,2),(0,pe.default)(qt,5122,2),(0,pe.default)(qt,5131,2),(0,pe.default)(qt,5120,1),(0,pe.default)(qt,5121,1),qt);function y_(e,r){var t=Ps[r];if(!t)return!1;if(t.gl1===void 0&&t.gl2===void 0)return!0;var n=he(e)&&t.gl2||t.gl1;return typeof n=="string"?e.getExtension(n):n}function A_(e,r){var t=Ps[r];switch(t&&t.types[0]){case 5126:return e.getExtension("OES_texture_float_linear");case 5131:return e.getExtension("OES_texture_half_float_linear");default:return!0}}function nR(e,r){var t=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=aR(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(f){throw f},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,o=!1,s;return{s:function(){t=t.call(e)},n:function(){var f=t.next();return i=f.done,f},e:function(f){o=!0,s=f},f:function(){try{!i&&t.return!=null&&t.return()}finally{if(o)throw s}}}}function aR(e,r){if(e){if(typeof e=="string")return __(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return __(e,r)}}function __(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function iR(e){var r=oR();return function(){var n=(0,Yc.default)(e),a;if(r){var i=(0,Yc.default)(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return(0,C_.default)(this,a)}}function oR(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var sR=[9729,9728],b_=globalThis.WebGLBuffer||function(){},Kc=function(e,r){(0,S_.default)(n,e);var t=iR(n);function n(a,i){var o;(0,x_.default)(this,n);var s=i.id,u=s===void 0?Ms("texture"):s,f=i.handle,l=i.target;return o=t.call(this,a,{id:u,handle:f}),o.target=l,o.textureUnit=void 0,o.loaded=!1,o.width=void 0,o.height=void 0,o.depth=void 0,o.format=void 0,o.type=void 0,o.dataFormat=void 0,o.border=void 0,o.textureUnit=void 0,o.mipmaps=void 0,o}return(0,E_.default)(n,[{key:r,get:function(){return"Texture"}},{key:"toString",value:function(){return"Texture(".concat(this.id,",").concat(this.width,"x").concat(this.height,")")}},{key:"initialize",value:function(){var i=this,o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=o.data;if(s instanceof Promise)return s.then(function(U){return i.initialize(Object.assign({},o,{pixels:U,data:U}))}),this;var u=typeof HTMLVideoElement<"u"&&s instanceof HTMLVideoElement;if(u&&s.readyState<HTMLVideoElement.HAVE_METADATA)return this._video=null,s.addEventListener("loadeddata",function(){return i.initialize(o)}),this;var f=o.pixels,l=f===void 0?null:f,c=o.format,h=c===void 0?6408:c,d=o.border,p=d===void 0?0:d,v=o.recreate,g=v===void 0?!1:v,y=o.parameters,b=y===void 0?{}:y,E=o.pixelStore,T=E===void 0?{}:E,S=o.textureUnit,I=S===void 0?void 0:S;s||(s=l);var L=o.width,B=o.height,C=o.dataFormat,_=o.type,R=o.compressed,F=R===void 0?!1:R,D=o.mipmaps,k=D===void 0?!0:D,M=o.depth,O=M===void 0?0:M,P=this._deduceParameters({format:h,type:_,dataFormat:C,compressed:F,data:s,width:L,height:B});return L=P.width,B=P.height,F=P.compressed,C=P.dataFormat,_=P.type,this.width=L,this.height=B,this.depth=O,this.format=h,this.type=_,this.dataFormat=C,this.border=p,this.textureUnit=I,Number.isFinite(this.textureUnit)&&(this.gl.activeTexture(33984+this.textureUnit),this.gl.bindTexture(this.target,this.handle)),k&&this._isNPOT()&&(oe.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),k=!1,this._updateForNPOT(b)),this.mipmaps=k,this.setImageData({data:s,width:L,height:B,depth:O,format:h,type:_,dataFormat:C,border:p,mipmaps:k,parameters:T,compressed:F}),k&&this.generateMipmap(),this.setParameters(b),g&&(this.data=s),u&&(this._video={video:s,parameters:b,lastTime:s.readyState>=HTMLVideoElement.HAVE_CURRENT_DATA?s.currentTime:-1}),this}},{key:"update",value:function(){if(this._video){var i=this._video,o=i.video,s=i.parameters,u=i.lastTime;if(u===o.currentTime||o.readyState<HTMLVideoElement.HAVE_CURRENT_DATA)return;this.setSubImageData({data:o,parameters:s}),this.mipmaps&&this.generateMipmap(),this._video.lastTime=o.currentTime}}},{key:"resize",value:function(i){var o=i.height,s=i.width,u=i.mipmaps,f=u===void 0?!1:u;return s!==this.width||o!==this.height?this.initialize({width:s,height:o,format:this.format,type:this.type,dataFormat:this.dataFormat,border:this.border,mipmaps:f}):this}},{key:"generateMipmap",value:function(){var i=this,o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this._isNPOT()?(oe.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),this):(this.mipmaps=!0,this.gl.bindTexture(this.target,this.handle),or(this.gl,o,function(){i.gl.generateMipmap(i.target)}),this.gl.bindTexture(this.target,null),this)}},{key:"setImageData",value:function(i){this._trackDeallocatedMemory("Texture");var o=i.target,s=o===void 0?this.target:o,u=i.pixels,f=u===void 0?null:u,l=i.level,c=l===void 0?0:l,h=i.format,d=h===void 0?this.format:h,p=i.border,v=p===void 0?this.border:p,g=i.offset,y=g===void 0?0:g,b=i.parameters,E=b===void 0?{}:b,T=i.data,S=T===void 0?null:T,I=i.type,L=I===void 0?this.type:I,B=i.width,C=B===void 0?this.width:B,_=i.height,R=_===void 0?this.height:_,F=i.dataFormat,D=F===void 0?this.dataFormat:F,k=i.compressed,M=k===void 0?!1:k;S||(S=f);var O=this._deduceParameters({format:d,type:L,dataFormat:D,compressed:M,data:S,width:C,height:R});L=O.type,D=O.dataFormat,M=O.compressed,C=O.width,R=O.height;var P=this.gl;P.bindTexture(this.target,this.handle);var U=null,G=this._getDataType({data:S,compressed:M});S=G.data,U=G.dataType;var j,q=0;if(or(this.gl,E,function(){switch(U){case"null":P.texImage2D(s,c,d,C,R,v,D,L,S);break;case"typed-array":P.texImage2D(s,c,d,C,R,v,D,L,S,y);break;case"buffer":j=Ke(P),j.bindBuffer(35052,S.handle||S),j.texImage2D(s,c,d,C,R,v,D,L,y),j.bindBuffer(35052,null);break;case"browser-object":he(P)?P.texImage2D(s,c,d,C,R,v,D,L,S):P.texImage2D(s,c,d,D,L,S);break;case"compressed":var we=nR(S.entries()),rt;try{for(we.s();!(rt=we.n()).done;){var Ue=(0,T_.default)(rt.value,2),Ar=Ue[0],xt=Ue[1];P.compressedTexImage2D(s,Ar,xt.format,xt.width,xt.height,v,xt.data),q+=xt.levelSize}}catch(zn){we.e(zn)}finally{we.f()}break;default:Q(!1,"Unknown image data type")}}),U==="compressed")this._trackAllocatedMemory(q,"Texture");else if(S&&S.byteLength)this._trackAllocatedMemory(S.byteLength,"Texture");else{var ne=v_[this.dataFormat]||4,Re=g_[this.type]||1;this._trackAllocatedMemory(this.width*this.height*ne*Re,"Texture")}return this.loaded=!0,this}},{key:"setSubImageData",value:function(i){var o=this,s=i.target,u=s===void 0?this.target:s,f=i.pixels,l=f===void 0?null:f,c=i.data,h=c===void 0?null:c,d=i.x,p=d===void 0?0:d,v=i.y,g=v===void 0?0:v,y=i.width,b=y===void 0?this.width:y,E=i.height,T=E===void 0?this.height:E,S=i.level,I=S===void 0?0:S,L=i.format,B=L===void 0?this.format:L,C=i.type,_=C===void 0?this.type:C,R=i.dataFormat,F=R===void 0?this.dataFormat:R,D=i.compressed,k=D===void 0?!1:D,M=i.offset,O=M===void 0?0:M,P=i.border,U=P===void 0?this.border:P,G=i.parameters,j=G===void 0?{}:G,q=this._deduceParameters({format:B,type:_,dataFormat:F,compressed:k,data:h,width:b,height:T});if(_=q.type,F=q.dataFormat,k=q.compressed,b=q.width,T=q.height,Q(this.depth===0,"texSubImage not supported for 3D textures"),h||(h=l),h&&h.data){var ne=h;h=ne.data,b=ne.shape[0],T=ne.shape[1]}h instanceof Xc&&(h=h.handle),this.gl.bindTexture(this.target,this.handle),or(this.gl,j,function(){if(k)o.gl.compressedTexSubImage2D(u,I,p,g,b,T,B,h);else if(h===null)o.gl.texSubImage2D(u,I,p,g,b,T,F,_,null);else if(ArrayBuffer.isView(h))o.gl.texSubImage2D(u,I,p,g,b,T,F,_,h,O);else if(h instanceof b_){var Re=Ke(o.gl);Re.bindBuffer(35052,h),Re.texSubImage2D(u,I,p,g,b,T,F,_,O),Re.bindBuffer(35052,null)}else if(he(o.gl)){var we=Ke(o.gl);we.texSubImage2D(u,I,p,g,b,T,F,_,h)}else o.gl.texSubImage2D(u,I,p,g,F,_,h)}),this.gl.bindTexture(this.target,null)}},{key:"copyFramebuffer",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return oe.error("Texture.copyFramebuffer({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}},{key:"getActiveUnit",value:function(){return this.gl.getParameter(34016)-33984}},{key:"bind",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.textureUnit,o=this.gl;return i!==void 0&&(this.textureUnit=i,o.activeTexture(33984+i)),o.bindTexture(this.target,this.handle),i}},{key:"unbind",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.textureUnit,o=this.gl;return i!==void 0&&(this.textureUnit=i,o.activeTexture(33984+i)),o.bindTexture(this.target,null),i}},{key:"_getDataType",value:function(i){var o=i.data,s=i.compressed,u=s===void 0?!1:s;return u?{data:o,dataType:"compressed"}:o===null?{data:o,dataType:"null"}:ArrayBuffer.isView(o)?{data:o,dataType:"typed-array"}:o instanceof Xc?{data:o.handle,dataType:"buffer"}:o instanceof b_?{data:o,dataType:"buffer"}:{data:o,dataType:"browser-object"}}},{key:"_deduceParameters",value:function(i){var o=i.format,s=i.data,u=i.width,f=i.height,l=i.dataFormat,c=i.type,h=i.compressed,d=Ps[o];l=l||d&&d.dataFormat,c=c||d&&d.types[0],h=h||d&&d.compressed;var p=this._deduceImageSize(s,u,f);return u=p.width,f=p.height,{dataFormat:l,type:c,compressed:h,width:u,height:f,format:o,data:s}}},{key:"_deduceImageSize",value:function(i,o,s){var u;return typeof ImageData<"u"&&i instanceof ImageData?u={width:i.width,height:i.height}:typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement?u={width:i.naturalWidth,height:i.naturalHeight}:typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement?u={width:i.width,height:i.height}:typeof ImageBitmap<"u"&&i instanceof ImageBitmap?u={width:i.width,height:i.height}:typeof HTMLVideoElement<"u"&&i instanceof HTMLVideoElement?u={width:i.videoWidth,height:i.videoHeight}:i?u={width:o,height:s}:u={width:o>=0?o:1,height:s>=0?s:1},Q(u,"Could not deduced texture size"),Q(o===void 0||u.width===o,"Deduced texture width does not match supplied width"),Q(s===void 0||u.height===s,"Deduced texture height does not match supplied height"),u}},{key:"_createHandle",value:function(){return this.gl.createTexture()}},{key:"_deleteHandle",value:function(){this.gl.deleteTexture(this.handle),this._trackDeallocatedMemory("Texture")}},{key:"_getParameter",value:function(i){switch(i){case 4096:return this.width;case 4097:return this.height;default:this.gl.bindTexture(this.target,this.handle);var o=this.gl.getTexParameter(this.target,i);return this.gl.bindTexture(this.target,null),o}}},{key:"_setParameter",value:function(i,o){switch(this.gl.bindTexture(this.target,this.handle),o=this._getNPOTParam(i,o),i){case 33082:case 33083:this.gl.texParameterf(this.handle,i,o);break;case 4096:case 4097:Q(!1);break;default:this.gl.texParameteri(this.target,i,o);break}return this.gl.bindTexture(this.target,null),this}},{key:"_isNPOT",value:function(){return he(this.gl)||!this.width||!this.height?!1:!Jc(this.width)||!Jc(this.height)}},{key:"_updateForNPOT",value:function(i){i[this.gl.TEXTURE_MIN_FILTER]===void 0&&(i[this.gl.TEXTURE_MIN_FILTER]=this.gl.LINEAR),i[this.gl.TEXTURE_WRAP_S]===void 0&&(i[this.gl.TEXTURE_WRAP_S]=this.gl.CLAMP_TO_EDGE),i[this.gl.TEXTURE_WRAP_T]===void 0&&(i[this.gl.TEXTURE_WRAP_T]=this.gl.CLAMP_TO_EDGE)}},{key:"_getNPOTParam",value:function(i,o){if(this._isNPOT())switch(i){case 10241:sR.indexOf(o)===-1&&(o=9729);break;case 10242:case 10243:o!==33071&&(o=33071);break;default:break}return o}}],[{key:"isSupported",value:function(i){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=o.format,u=o.linearFiltering,f=!0;return s&&(f=f&&y_(i,s),f=f&&(!u||A_(i,s))),f}}]),n}(Fr,Symbol.toStringTag);var uR="";function w_(e,r){return Q(typeof e=="string"),e=uR+e,new Promise(function(t,n){try{var a=new Image;a.onload=function(){return t(a)},a.onerror=function(){return n(new Error("Could not load image ".concat(e,".")))},a.crossOrigin=r&&r.crossOrigin||"anonymous",a.src=e}catch(i){n(i)}})}function fR(e){var r=lR();return function(){var n=(0,Qc.default)(e),a;if(r){var i=(0,Qc.default)(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return(0,P_.default)(this,a)}}function lR(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Tn=function(e,r){(0,I_.default)(n,e);var t=fR(n);function n(a){var i;(0,B_.default)(this,n);var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return xi(a),(o instanceof Promise||typeof o=="string")&&(o={data:o}),typeof o.data=="string"&&(o=Object.assign({},o,{data:w_(o.data)})),i=t.call(this,a,Object.assign({},o,{target:3553})),i.initialize(o),Object.seal((0,O_.default)(i)),i}return(0,M_.default)(n,[{key:r,get:function(){return"Texture2D"}}],[{key:"isSupported",value:function(i,o){return Kc.isSupported(i,o)}}]),n}(Kc,Symbol.toStringTag);var Pi=m(W()),$_=m(ce()),eb=m(H()),tb=m(z()),rb=m(nt()),nb=m(fa()),ab=m(Te()),ib=m(xe()),Ls=m(ye());var R_=m(H()),F_=m(z()),L_=m(nt()),k_=m(Te()),D_=m(xe()),$c=m(ye());var ee=m(W()),Z,xn="EXT_color_buffer_float",Zc=(Z={},(0,ee.default)(Z,33189,{bpp:2}),(0,ee.default)(Z,33190,{gl2:!0,bpp:3}),(0,ee.default)(Z,36012,{gl2:!0,bpp:4}),(0,ee.default)(Z,36168,{bpp:1}),(0,ee.default)(Z,34041,{bpp:4}),(0,ee.default)(Z,35056,{gl2:!0,bpp:4}),(0,ee.default)(Z,36013,{gl2:!0,bpp:5}),(0,ee.default)(Z,32854,{bpp:2}),(0,ee.default)(Z,36194,{bpp:2}),(0,ee.default)(Z,32855,{bpp:2}),(0,ee.default)(Z,33321,{gl2:!0,bpp:1}),(0,ee.default)(Z,33330,{gl2:!0,bpp:1}),(0,ee.default)(Z,33329,{gl2:!0,bpp:1}),(0,ee.default)(Z,33332,{gl2:!0,bpp:2}),(0,ee.default)(Z,33331,{gl2:!0,bpp:2}),(0,ee.default)(Z,33334,{gl2:!0,bpp:4}),(0,ee.default)(Z,33333,{gl2:!0,bpp:4}),(0,ee.default)(Z,33323,{gl2:!0,bpp:2}),(0,ee.default)(Z,33336,{gl2:!0,bpp:2}),(0,ee.default)(Z,33335,{gl2:!0,bpp:2}),(0,ee.default)(Z,33338,{gl2:!0,bpp:4}),(0,ee.default)(Z,33337,{gl2:!0,bpp:4}),(0,ee.default)(Z,33340,{gl2:!0,bpp:8}),(0,ee.default)(Z,33339,{gl2:!0,bpp:8}),(0,ee.default)(Z,32849,{gl2:!0,bpp:3}),(0,ee.default)(Z,32856,{gl2:!0,bpp:4}),(0,ee.default)(Z,32857,{gl2:!0,bpp:4}),(0,ee.default)(Z,36220,{gl2:!0,bpp:4}),(0,ee.default)(Z,36238,{gl2:!0,bpp:4}),(0,ee.default)(Z,36975,{gl2:!0,bpp:4}),(0,ee.default)(Z,36214,{gl2:!0,bpp:8}),(0,ee.default)(Z,36232,{gl2:!0,bpp:8}),(0,ee.default)(Z,36226,{gl2:!0,bpp:16}),(0,ee.default)(Z,36208,{gl2:!0,bpp:16}),(0,ee.default)(Z,33325,{gl2:xn,bpp:2}),(0,ee.default)(Z,33327,{gl2:xn,bpp:4}),(0,ee.default)(Z,34842,{gl2:xn,bpp:8}),(0,ee.default)(Z,33326,{gl2:xn,bpp:4}),(0,ee.default)(Z,33328,{gl2:xn,bpp:8}),(0,ee.default)(Z,34836,{gl2:xn,bpp:16}),(0,ee.default)(Z,35898,{gl2:xn,bpp:4}),Z);function cR(e){var r=hR();return function(){var n=(0,$c.default)(e),a;if(r){var i=(0,$c.default)(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return(0,D_.default)(this,a)}}function hR(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function dR(e,r,t){var n=t[r];if(!n)return!1;var a=he(e)&&n.gl2||n.gl1;return typeof a=="string"?e.getExtension(a):a}var Ii=function(e,r){(0,k_.default)(n,e);var t=cR(n);function n(a){var i;(0,R_.default)(this,n);var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return i=t.call(this,a,o),i.initialize(o),Object.seal((0,L_.default)(i)),i}return(0,F_.default)(n,[{key:r,get:function(){return"Renderbuffer"}},{key:"initialize",value:function(i){var o=i.format,s=i.width,u=s===void 0?1:s,f=i.height,l=f===void 0?1:f,c=i.samples,h=c===void 0?0:c;return Q(o,"Needs format"),this._trackDeallocatedMemory(),this.gl.bindRenderbuffer(36161,this.handle),h!==0&&he(this.gl)?this.gl.renderbufferStorageMultisample(36161,h,o,u,l):this.gl.renderbufferStorage(36161,o,u,l),this.format=o,this.width=u,this.height=l,this.samples=h,this._trackAllocatedMemory(this.width*this.height*(this.samples||1)*Zc[this.format].bpp),this}},{key:"resize",value:function(i){var o=i.width,s=i.height;return o!==this.width||s!==this.height?this.initialize({width:o,height:s,format:this.format,samples:this.samples}):this}},{key:"_createHandle",value:function(){return this.gl.createRenderbuffer()}},{key:"_deleteHandle",value:function(){this.gl.deleteRenderbuffer(this.handle),this._trackDeallocatedMemory()}},{key:"_bindHandle",value:function(i){this.gl.bindRenderbuffer(36161,i)}},{key:"_syncHandle",value:function(i){this.format=this.getParameter(36164),this.width=this.getParameter(36162),this.height=this.getParameter(36163),this.samples=this.getParameter(36011)}},{key:"_getParameter",value:function(i){this.gl.bindRenderbuffer(36161,this.handle);var o=this.gl.getRenderbufferParameter(36161,i);return o}}],[{key:"isSupported",value:function(i){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{format:null},s=o.format;return!s||dR(i,s,Zc)}},{key:"getSamplesForFormat",value:function(i,o){var s=o.format;return i.getInternalformatParameter(36161,s,32937)}}]),n}(Fr,Symbol.toStringTag);var H_=m(ce());var pR=256,mR=1024,vR=16384,G_=6144,N_=6145,U_=6146,j_=34041,V_="clear: bad arguments";function z_(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=r.framebuffer,n=t===void 0?null:t,a=r.color,i=a===void 0?null:a,o=r.depth,s=o===void 0?null:o,u=r.stencil,f=u===void 0?null:u,l={};n&&(l.framebuffer=n);var c=0;i&&(c|=vR,i!==!0&&(l.clearColor=i)),s&&(c|=pR,s!==!0&&(l.clearDepth=s)),f&&(c|=mR,s!==!0&&(l.clearStencil=s)),Q(c!==0,V_),or(e,l,function(){e.clear(c)})}function W_(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=r.framebuffer,n=t===void 0?null:t,a=r.buffer,i=a===void 0?G_:a,o=r.drawBuffer,s=o===void 0?0:o,u=r.value,f=u===void 0?[0,0,0,0]:u;Ke(e),or(e,{framebuffer:n},function(){switch(i){case G_:switch(f.constructor){case Int32Array:e.clearBufferiv(i,s,f);break;case Uint32Array:e.clearBufferuiv(i,s,f);break;case Float32Array:default:e.clearBufferfv(i,s,f)}break;case N_:e.clearBufferfv(N_,0,[f]);break;case U_:e.clearBufferiv(U_,0,[f]);break;case j_:var l=(0,H_.default)(f,2),c=l[0],h=l[1];e.clearBufferfi(j_,0,c,h);break;default:Q(!1,V_)}})}function J_(e){switch(e){case 6406:case 33326:case 6403:return 1;case 33328:case 33319:return 2;case 6407:case 34837:return 3;case 6408:case 34836:return 4;default:return Q(!1),0}}function gR(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=r.sourceX,n=t===void 0?0:t,a=r.sourceY,i=a===void 0?0:a,o=r.sourceFormat,s=o===void 0?6408:o,u=r.sourceAttachment,f=u===void 0?36064:u,l=r.target,c=l===void 0?null:l,h=r.sourceWidth,d=r.sourceHeight,p=r.sourceType,v=yR(e),g=v.framebuffer,y=v.deleteFramebuffer;Q(g);var b=g.gl,E=g.handle,T=g.attachments;h=h||g.width,d=d||g.height,f===36064&&E===null&&(f=1028),Q(T[f]),p=p||T[f].type,c=AR(c,p,s,h,d),p=p||Mi(c);var S=b.bindFramebuffer(36160,E);return b.readPixels(n,i,h,d,s,p,c),b.bindFramebuffer(36160,S||null),y&&g.delete(),c}function eh(e){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=r.sourceAttachment,n=t===void 0?36064:t,a=r.targetMaxHeight,i=a===void 0?Number.MAX_SAFE_INTEGER:a,o=gR(e,{sourceAttachment:n}),s=e.width,u=e.height;u>i;){var f=i_({data:o,width:s,height:u});o=f.data,s=f.width,u=f.height}a_({data:o,width:s,height:u});var l=document.createElement("canvas");l.width=s,l.height=u;var c=l.getContext("2d"),h=c.createImageData(s,u);return h.data.set(o),c.putImageData(h,0,0),l.toDataURL()}function yR(e){return e instanceof kr?{framebuffer:e,deleteFramebuffer:!1}:{framebuffer:q_(e),deleteFramebuffer:!0}}function AR(e,r,t,n,a){if(e)return e;r=r||5121;var i=Lr(r,{clamped:!1}),o=J_(t);return new i(n*a*o)}var Me=m(W());var Be,Ce={WEBGL2:"WEBGL2",VERTEX_ARRAY_OBJECT:"VERTEX_ARRAY_OBJECT",TIMER_QUERY:"TIMER_QUERY",INSTANCED_RENDERING:"INSTANCED_RENDERING",MULTIPLE_RENDER_TARGETS:"MULTIPLE_RENDER_TARGETS",ELEMENT_INDEX_UINT32:"ELEMENT_INDEX_UINT32",BLEND_EQUATION_MINMAX:"BLEND_EQUATION_MINMAX",FLOAT_BLEND:"FLOAT_BLEND",COLOR_ENCODING_SRGB:"COLOR_ENCODING_SRGB",TEXTURE_DEPTH:"TEXTURE_DEPTH",TEXTURE_FLOAT:"TEXTURE_FLOAT",TEXTURE_HALF_FLOAT:"TEXTURE_HALF_FLOAT",TEXTURE_FILTER_LINEAR_FLOAT:"TEXTURE_FILTER_LINEAR_FLOAT",TEXTURE_FILTER_LINEAR_HALF_FLOAT:"TEXTURE_FILTER_LINEAR_HALF_FLOAT",TEXTURE_FILTER_ANISOTROPIC:"TEXTURE_FILTER_ANISOTROPIC",COLOR_ATTACHMENT_RGBA32F:"COLOR_ATTACHMENT_RGBA32F",COLOR_ATTACHMENT_FLOAT:"COLOR_ATTACHMENT_FLOAT",COLOR_ATTACHMENT_HALF_FLOAT:"COLOR_ATTACHMENT_HALF_FLOAT",GLSL_FRAG_DATA:"GLSL_FRAG_DATA",GLSL_FRAG_DEPTH:"GLSL_FRAG_DEPTH",GLSL_DERIVATIVES:"GLSL_DERIVATIVES",GLSL_TEXTURE_LOD:"GLSL_TEXTURE_LOD"};function _R(e){var r=new Tn(e,{format:6408,type:5126,dataFormat:6408}),t=new kr(e,{id:"test-framebuffer",check:!1,attachments:(0,Me.default)({},36064,r)}),n=t.getStatus();return r.delete(),t.delete(),n===36053}var th=(Be={},(0,Me.default)(Be,Ce.WEBGL2,[!1,!0]),(0,Me.default)(Be,Ce.VERTEX_ARRAY_OBJECT,["OES_vertex_array_object",!0]),(0,Me.default)(Be,Ce.TIMER_QUERY,["EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2"]),(0,Me.default)(Be,Ce.INSTANCED_RENDERING,["ANGLE_instanced_arrays",!0]),(0,Me.default)(Be,Ce.MULTIPLE_RENDER_TARGETS,["WEBGL_draw_buffers",!0]),(0,Me.default)(Be,Ce.ELEMENT_INDEX_UINT32,["OES_element_index_uint",!0]),(0,Me.default)(Be,Ce.BLEND_EQUATION_MINMAX,["EXT_blend_minmax",!0]),(0,Me.default)(Be,Ce.FLOAT_BLEND,["EXT_float_blend"]),(0,Me.default)(Be,Ce.COLOR_ENCODING_SRGB,["EXT_sRGB",!0]),(0,Me.default)(Be,Ce.TEXTURE_DEPTH,["WEBGL_depth_texture",!0]),(0,Me.default)(Be,Ce.TEXTURE_FLOAT,["OES_texture_float",!0]),(0,Me.default)(Be,Ce.TEXTURE_HALF_FLOAT,["OES_texture_half_float",!0]),(0,Me.default)(Be,Ce.TEXTURE_FILTER_LINEAR_FLOAT,["OES_texture_float_linear"]),(0,Me.default)(Be,Ce.TEXTURE_FILTER_LINEAR_HALF_FLOAT,["OES_texture_half_float_linear"]),(0,Me.default)(Be,Ce.TEXTURE_FILTER_ANISOTROPIC,["EXT_texture_filter_anisotropic"]),(0,Me.default)(Be,Ce.COLOR_ATTACHMENT_RGBA32F,[_R,"EXT_color_buffer_float"]),(0,Me.default)(Be,Ce.COLOR_ATTACHMENT_FLOAT,[!1,"EXT_color_buffer_float"]),(0,Me.default)(Be,Ce.COLOR_ATTACHMENT_HALF_FLOAT,["EXT_color_buffer_half_float"]),(0,Me.default)(Be,Ce.GLSL_FRAG_DATA,["WEBGL_draw_buffers",!0]),(0,Me.default)(Be,Ce.GLSL_FRAG_DEPTH,["EXT_frag_depth",!0]),(0,Me.default)(Be,Ce.GLSL_DERIVATIVES,["OES_standard_derivatives",!0]),(0,Me.default)(Be,Ce.GLSL_TEXTURE_LOD,["EXT_shader_texture_lod",!0]),Be);function bR(e,r){var t=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=TR(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(f){throw f},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,o=!1,s;return{s:function(){t=t.call(e)},n:function(){var f=t.next();return i=f.done,f},e:function(f){o=!0,s=f},f:function(){try{!i&&t.return!=null&&t.return()}finally{if(o)throw s}}}}function TR(e,r){if(e){if(typeof e=="string")return X_(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return X_(e,r)}}function X_(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var xR=2;function Rs(e,r){return rh(e,r)}function rh(e,r){return r=Array.isArray(r)?r:[r],r.every(function(t){return Y_(e,t)})}function Fs(e){e.luma=e.luma||{},e.luma.caps=e.luma.caps||{};for(var r in th)e.luma.caps[r]===void 0&&(e.luma.caps[r]=Y_(e,r));return e.luma.caps}function Y_(e,r){return e.luma=e.luma||{},e.luma.caps=e.luma.caps||{},e.luma.caps[r]===void 0&&(e.luma.caps[r]=ER(e,r)),e.luma.caps[r]||oe.log(xR,"Feature: ".concat(r," not supported"))(),e.luma.caps[r]}function ER(e,r){var t=th[r];Q(t,r);var n,a=he(e)&&t[1]||t[0];if(typeof a=="function")n=a(e);else if(Array.isArray(a)){n=!0;var i=bR(a),o;try{for(i.s();!(o=i.n()).done;){var s=o.value;n=n&&Boolean(e.getExtension(s))}}catch(u){i.e(u)}finally{i.f()}}else typeof a=="string"?n=Boolean(e.getExtension(a)):typeof a=="boolean"?n=a:Q(!1);return n}function K_(e,r){var t=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=SR(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(f){throw f},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,o=!1,s;return{s:function(){t=t.call(e)},n:function(){var f=t.next();return i=f.done,f},e:function(f){o=!0,s=f},f:function(){try{!i&&t.return!=null&&t.return()}finally{if(o)throw s}}}}function SR(e,r){if(e){if(typeof e=="string")return Q_(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Q_(e,r)}}function Q_(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function CR(e){var r=wR();return function(){var n=(0,Ls.default)(e),a;if(r){var i=(0,Ls.default)(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return(0,ib.default)(this,a)}}function wR(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Z_="Multiple render targets not supported",kr=function(e,r){(0,ab.default)(n,e);var t=CR(n);function n(a){var i;(0,eb.default)(this,n);var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return i=t.call(this,a,o),i.width=null,i.height=null,i.attachments={},i.readBuffer=36064,i.drawBuffers=[36064],i.ownResources=[],i.initialize(o),Object.seal((0,rb.default)(i)),i}return(0,tb.default)(n,[{key:r,get:function(){return"Framebuffer"}},{key:"MAX_COLOR_ATTACHMENTS",get:function(){var i=Ke(this.gl);return i.getParameter(i.MAX_COLOR_ATTACHMENTS)}},{key:"MAX_DRAW_BUFFERS",get:function(){var i=Ke(this.gl);return i.getParameter(i.MAX_DRAW_BUFFERS)}},{key:"color",get:function(){return this.attachments[36064]||null}},{key:"texture",get:function(){return this.attachments[36064]||null}},{key:"depth",get:function(){return this.attachments[36096]||this.attachments[33306]||null}},{key:"stencil",get:function(){return this.attachments[36128]||this.attachments[33306]||null}},{key:"initialize",value:function(i){var o=i.width,s=o===void 0?1:o,u=i.height,f=u===void 0?1:u,l=i.attachments,c=l===void 0?null:l,h=i.color,d=h===void 0?!0:h,p=i.depth,v=p===void 0?!0:p,g=i.stencil,y=g===void 0?!1:g,b=i.check,E=b===void 0?!0:b,T=i.readBuffer,S=T===void 0?void 0:T,I=i.drawBuffers,L=I===void 0?void 0:I;if(Q(s>=0&&f>=0,"Width and height need to be integers"),this.width=s,this.height=f,c)for(var B in c){var C=c[B],_=Array.isArray(C)?C[0]:C;_.resize({width:s,height:f})}else c=this._createDefaultAttachments(d,v,y,s,f);this.update({clearAttachments:!0,attachments:c,readBuffer:S,drawBuffers:L}),c&&E&&this.checkStatus()}},{key:"delete",value:function(){var i=K_(this.ownResources),o;try{for(i.s();!(o=i.n()).done;){var s=o.value;s.delete()}}catch(u){i.e(u)}finally{i.f()}return(0,nb.default)((0,Ls.default)(n.prototype),"delete",this).call(this),this}},{key:"update",value:function(i){var o=i.attachments,s=o===void 0?{}:o,u=i.readBuffer,f=i.drawBuffers,l=i.clearAttachments,c=l===void 0?!1:l,h=i.resizeAttachments,d=h===void 0?!0:h;this.attach(s,{clearAttachments:c,resizeAttachments:d});var p=this.gl,v=p.bindFramebuffer(36160,this.handle);return u&&this._setReadBuffer(u),f&&this._setDrawBuffers(f),p.bindFramebuffer(36160,v||null),this}},{key:"resize",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=i.width,s=i.height;if(this.handle===null)return Q(o===void 0&&s===void 0),this.width=this.gl.drawingBufferWidth,this.height=this.gl.drawingBufferHeight,this;o===void 0&&(o=this.gl.drawingBufferWidth),s===void 0&&(s=this.gl.drawingBufferHeight),o!==this.width&&s!==this.height&&oe.log(2,"Resizing framebuffer ".concat(this.id," to ").concat(o,"x").concat(s))();for(var u in this.attachments)this.attachments[u].resize({width:o,height:s});return this.width=o,this.height=s,this}},{key:"attach",value:function(i){var o=this,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},u=s.clearAttachments,f=u===void 0?!1:u,l=s.resizeAttachments,c=l===void 0?!0:l,h={};f&&Object.keys(this.attachments).forEach(function(B){h[B]=null}),Object.assign(h,i);var d=this.gl.bindFramebuffer(36160,this.handle);for(var p in h){Q(p!==void 0,"Misspelled framebuffer binding point?");var v=Number(p),g=h[v],y=g;if(!y)this._unattach(v);else if(y instanceof Ii)this._attachRenderbuffer({attachment:v,renderbuffer:y});else if(Array.isArray(g)){var b=(0,$_.default)(g,3),E=b[0],T=b[1],S=T===void 0?0:T,I=b[2],L=I===void 0?0:I;y=E,this._attachTexture({attachment:v,texture:E,layer:S,level:L})}else this._attachTexture({attachment:v,texture:y,layer:0,level:0});c&&y&&y.resize({width:this.width,height:this.height})}this.gl.bindFramebuffer(36160,d||null),Object.assign(this.attachments,i),Object.keys(this.attachments).filter(function(B){return!o.attachments[B]}).forEach(function(B){delete o.attachments[B]})}},{key:"checkStatus",value:function(){var i=this.gl,o=this.getStatus();if(o!==36053)throw new Error(MR(o));return this}},{key:"getStatus",value:function(){var i=this.gl,o=i.bindFramebuffer(36160,this.handle),s=i.checkFramebufferStatus(36160);return i.bindFramebuffer(36160,o||null),s}},{key:"clear",value:function(){var i=this,o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=o.color,u=o.depth,f=o.stencil,l=o.drawBuffers,c=l===void 0?[]:l,h=this.gl.bindFramebuffer(36160,this.handle);return(s||u||f)&&z_(this.gl,{color:s,depth:u,stencil:f}),c.forEach(function(d,p){W_(i.gl,{drawBuffer:p,value:d})}),this.gl.bindFramebuffer(36160,h||null),this}},{key:"readPixels",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return oe.error("Framebuffer.readPixels() is no logner supported, use readPixelsToArray(framebuffer)")(),null}},{key:"readPixelsToBuffer",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return oe.error("Framebuffer.readPixelsToBuffer()is no logner supported, use readPixelsToBuffer(framebuffer)")(),null}},{key:"copyToDataUrl",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return oe.error("Framebuffer.copyToDataUrl() is no logner supported, use copyToDataUrl(framebuffer)")(),null}},{key:"copyToImage",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return oe.error("Framebuffer.copyToImage() is no logner supported, use copyToImage(framebuffer)")(),null}},{key:"copyToTexture",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return oe.error("Framebuffer.copyToTexture({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}},{key:"blit",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return oe.error("Framebuffer.blit({...}) is no logner supported, use blit(source, target, opts)")(),null}},{key:"invalidate",value:function(i){var o=i.attachments,s=o===void 0?[]:o,u=i.x,f=u===void 0?0:u,l=i.y,c=l===void 0?0:l,h=i.width,d=i.height,p=Ke(this.gl),v=p.bindFramebuffer(36008,this.handle),g=f===0&&c===0&&h===void 0&&d===void 0;return g?p.invalidateFramebuffer(36008,s):p.invalidateFramebuffer(36008,s,f,c,h,d),p.bindFramebuffer(36008,v),this}},{key:"getAttachmentParameter",value:function(i,o,s){var u=this._getAttachmentParameterFallback(o);return u===null&&(this.gl.bindFramebuffer(36160,this.handle),u=this.gl.getFramebufferAttachmentParameter(36160,i,o),this.gl.bindFramebuffer(36160,null)),s&&u>1e3&&(u=_n(this.gl,u)),u}},{key:"getAttachmentParameters",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:36064,o=arguments.length>1?arguments[1]:void 0,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.constructor.ATTACHMENT_PARAMETERS||[],u={},f=K_(s),l;try{for(f.s();!(l=f.n()).done;){var c=l.value,h=o?_n(this.gl,c):c;u[h]=this.getAttachmentParameter(i,c,o)}}catch(d){f.e(d)}finally{f.f()}return u}},{key:"getParameters",value:function(){for(var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,o=Object.keys(this.attachments),s={},u=0,f=o;u<f.length;u++){var l=f[u],c=Number(l),h=i?_n(this.gl,c):c;s[h]=this.getAttachmentParameters(c,i)}return s}},{key:"show",value:function(){return typeof window<"u"&&window.open(eh(this),"luma-debug-texture"),this}},{key:"log",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if(i>oe.level||typeof window>"u")return this;o=o||"Framebuffer ".concat(this.id);var s=eh(this,{targetMaxHeight:100});return oe.image({logLevel:i,message:o,image:s},o)(),this}},{key:"bind",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=i.target,s=o===void 0?36160:o;return this.gl.bindFramebuffer(s,this.handle),this}},{key:"unbind",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=i.target,s=o===void 0?36160:o;return this.gl.bindFramebuffer(s,null),this}},{key:"_createDefaultAttachments",value:function(i,o,s,u,f){var l=null;if(i){var c;l=l||{},l[36064]=new Tn(this.gl,{id:"".concat(this.id,"-color0"),pixels:null,format:6408,type:5121,width:u,height:f,mipmaps:!1,parameters:(c={},(0,Pi.default)(c,10241,9729),(0,Pi.default)(c,10240,9729),(0,Pi.default)(c,10242,33071),(0,Pi.default)(c,10243,33071),c)}),this.ownResources.push(l[36064])}return o&&s?(l=l||{},l[33306]=new Ii(this.gl,{id:"".concat(this.id,"-depth-stencil"),format:35056,width:u,height:111}),this.ownResources.push(l[33306])):o?(l=l||{},l[36096]=new Ii(this.gl,{id:"".concat(this.id,"-depth"),format:33189,width:u,height:f}),this.ownResources.push(l[36096])):s&&Q(!1),l}},{key:"_unattach",value:function(i){var o=this.attachments[i];o&&(o instanceof Ii?this.gl.framebufferRenderbuffer(36160,i,36161,null):this.gl.framebufferTexture2D(36160,i,3553,null,0),delete this.attachments[i])}},{key:"_attachRenderbuffer",value:function(i){var o=i.attachment,s=o===void 0?36064:o,u=i.renderbuffer,f=this.gl;f.framebufferRenderbuffer(36160,s,36161,u.handle),this.attachments[s]=u}},{key:"_attachTexture",value:function(i){var o=i.attachment,s=o===void 0?36064:o,u=i.texture,f=i.layer,l=i.level,c=this.gl;switch(c.bindTexture(u.target,u.handle),u.target){case 35866:case 32879:var h=Ke(c);h.framebufferTextureLayer(36160,s,u.target,l,f);break;case 34067:var d=BR(f);c.framebufferTexture2D(36160,s,d,u.handle,l);break;case 3553:c.framebufferTexture2D(36160,s,3553,u.handle,l);break;default:Q(!1,"Illegal texture type")}c.bindTexture(u.target,null),this.attachments[s]=u}},{key:"_setReadBuffer",value:function(i){var o=kc(this.gl);o?o.readBuffer(i):Q(i===36064||i===1029,Z_),this.readBuffer=i}},{key:"_setDrawBuffers",value:function(i){var o=this.gl,s=Ke(o);if(s)s.drawBuffers(i);else{var u=o.getExtension("WEBGL_draw_buffers");u?u.drawBuffersWEBGL(i):Q(i.length===1&&(i[0]===36064||i[0]===1029),Z_)}this.drawBuffers=i}},{key:"_getAttachmentParameterFallback",value:function(i){var o=Fs(this.gl);switch(i){case 36052:return o.WEBGL2?null:0;case 33298:case 33299:case 33300:case 33301:case 33302:case 33303:return o.WEBGL2?null:8;case 33297:return o.WEBGL2?null:5125;case 33296:return!o.WEBGL2&&!o.EXT_sRGB?9729:null;default:return null}}},{key:"_createHandle",value:function(){return this.gl.createFramebuffer()}},{key:"_deleteHandle",value:function(){this.gl.deleteFramebuffer(this.handle)}},{key:"_bindHandle",value:function(i){return this.gl.bindFramebuffer(36160,i)}}],[{key:"isSupported",value:function(i){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=o.colorBufferFloat,u=o.colorBufferHalfFloat,f=!0;return s&&(f=Boolean(i.getExtension("EXT_color_buffer_float")||i.getExtension("WEBGL_color_buffer_float")||i.getExtension("OES_texture_float"))),u&&(f=f&&Boolean(i.getExtension("EXT_color_buffer_float")||i.getExtension("EXT_color_buffer_half_float"))),f}},{key:"getDefaultFramebuffer",value:function(i){return i.luma=i.luma||{},i.luma.defaultFramebuffer=i.luma.defaultFramebuffer||new n(i,{id:"default-framebuffer",handle:null,attachments:{}}),i.luma.defaultFramebuffer}}]),n}(Fr,Symbol.toStringTag);function BR(e){return e<34069?e+34069:e}function MR(e){var r=kr.STATUS||{};return r[e]||"Framebuffer error ".concat(e)}var OR=[36049,36048,33296,33298,33299,33300,33301,33302,33303];kr.ATTACHMENT_PARAMETERS=OR;function q_(e,r){var t=e.gl,n=e.width,a=e.height,i=e.id,o=new kr(t,Object.assign({},r,{id:"framebuffer-for-".concat(i),width:n,height:a,attachments:(0,ob.default)({},36064,e)}));return o}var ks=m(W()),ub=m(H()),fb=m(z());function sb(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function nh(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?sb(Object(t),!0).forEach(function(n){(0,ks.default)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):sb(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var ah=function(){function e(r,t){(0,ub.default)(this,e);var n=t.attributes,a=t.material,i=t.pbrDebug,o=t.imageBasedLightingEnvironment,s=t.lights,u=t.useTangents;this.gl=r,this.defines={MANUAL_SRGB:1,SRGB_FAST_APPROXIMATION:1},Rs(r,Ce.GLSL_TEXTURE_LOD)&&(this.defines.USE_TEX_LOD=1),this.uniforms={u_Camera:[0,0,0],u_MetallicRoughnessValues:[1,1]},this.parameters={},this.generatedTextures=[],o&&(this.uniforms.u_DiffuseEnvSampler=o.getDiffuseEnvSampler(),this.uniforms.u_SpecularEnvSampler=o.getSpecularEnvSampler(),this.uniforms.u_brdfLUT=o.getBrdfTexture(),this.uniforms.u_ScaleIBLAmbient=[1,1]),i&&(this.uniforms.u_ScaleDiffBaseMR=[0,0,0,0],this.uniforms.u_ScaleFGDSpec=[0,0,0,0]),this.defineIfPresent(n.NORMAL,"HAS_NORMALS"),this.defineIfPresent(n.TANGENT&&u,"HAS_TANGENTS"),this.defineIfPresent(n.TEXCOORD_0,"HAS_UV"),this.defineIfPresent(o,"USE_IBL"),this.defineIfPresent(s,"USE_LIGHTS"),this.defineIfPresent(i,"PBR_DEBUG"),a&&this.parseMaterial(a)}return(0,fb.default)(e,[{key:"defineIfPresent",value:function(t,n){t&&(this.defines[n]=1)}},{key:"parseTexture",value:function(t,n){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,i=t.texture&&t.texture.sampler&&t.texture.sampler.parameters||{},o=t.texture.source.image,s,u={};o.compressed?(s=o,u=(0,ks.default)({},this.gl.TEXTURE_MIN_FILTER,o.data.length>1?this.gl.LINEAR_MIPMAP_NEAREST:this.gl.LINEAR)):s={data:o};var f=new Tn(this.gl,nh({id:t.name||t.id,parameters:nh(nh({},i),u),pixelStore:(0,ks.default)({},this.gl.UNPACK_FLIP_Y_WEBGL,!1)},s));this.uniforms[n]=f,this.defineIfPresent(a,a),this.generatedTextures.push(f)}},{key:"parsePbrMetallicRoughness",value:function(t){t.baseColorTexture&&this.parseTexture(t.baseColorTexture,"u_BaseColorSampler","HAS_BASECOLORMAP"),this.uniforms.u_BaseColorFactor=t.baseColorFactor||[1,1,1,1],t.metallicRoughnessTexture&&this.parseTexture(t.metallicRoughnessTexture,"u_MetallicRoughnessSampler","HAS_METALROUGHNESSMAP");var n=t.metallicFactor,a=n===void 0?1:n,i=t.roughnessFactor,o=i===void 0?1:i;this.uniforms.u_MetallicRoughnessValues=[a,o]}},{key:"parseMaterial",value:function(t){if(this.uniforms.pbr_uUnlit=Boolean(t.unlit),t.pbrMetallicRoughness&&this.parsePbrMetallicRoughness(t.pbrMetallicRoughness),t.normalTexture){this.parseTexture(t.normalTexture,"u_NormalSampler","HAS_NORMALMAP");var n=t.normalTexture.scale,a=n===void 0?1:n;this.uniforms.u_NormalScale=a}if(t.occlusionTexture){this.parseTexture(t.occlusionTexture,"u_OcclusionSampler","HAS_OCCLUSIONMAP");var i=t.occlusionTexture.strength,o=i===void 0?1:i;this.uniforms.u_OcclusionStrength=o}if(t.emissiveTexture&&(this.parseTexture(t.emissiveTexture,"u_EmissiveSampler","HAS_EMISSIVEMAP"),this.uniforms.u_EmissiveFactor=t.emissiveFactor||[0,0,0]),t.alphaMode==="MASK"){var s=t.alphaCutoff,u=s===void 0?.5:s;this.defines.ALPHA_CUTOFF=1,this.uniforms.u_AlphaCutoff=u}else t.alphaMode==="BLEND"&&(oe.warn("BLEND alphaMode might not work well because it requires mesh sorting")(),Object.assign(this.parameters,{blend:!0,blendEquation:this.gl.FUNC_ADD,blendFunc:[this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA,this.gl.ONE,this.gl.ONE_MINUS_SRC_ALPHA]}))}},{key:"delete",value:function(){this.generatedTextures.forEach(function(t){return t.delete()})}}]),e}();var Gs=m(Fc()),gb=m(vs());var lb=`#version 300 es
#define SHADER_NAME simple-mesh-layer-vs
uniform float sizeScale;
uniform bool composeModelMatrix;
uniform bool pickFeatureIds;
in vec3 positions;
in vec3 normals;
in vec3 colors;
in vec2 texCoords;
in vec4 uvRegions;
in vec3 featureIdsPickingColors;
in vec4 instanceColors;
in vec3 instancePickingColors;
in mat3 instanceModelMatrix;
out vec2 vTexCoord;
out vec3 cameraPosition;
out vec3 normals_commonspace;
out vec4 position_commonspace;
out vec4 vColor;

vec2 applyUVRegion(vec2 uv) {
  #ifdef HAS_UV_REGIONS
    return fract(uv) * (uvRegions.zw - uvRegions.xy) + uvRegions.xy;
  #else
    return uv;
  #endif
}

void main(void) {
  vec2 uv = applyUVRegion(texCoords);
  geometry.uv = uv;

  if (pickFeatureIds) {
    geometry.pickingColor = featureIdsPickingColors;
  } else {
    geometry.pickingColor = instancePickingColors;
  }

  vTexCoord = uv;
  cameraPosition = project_uCameraPosition;
  vColor = vec4(colors * instanceColors.rgb, instanceColors.a);

  vec3 pos = (instanceModelMatrix * positions) * sizeScale;
  vec3 projectedPosition = project_position(positions);
  position_commonspace = vec4(projectedPosition, 1.0);
  gl_Position = project_common_position_to_clipspace(position_commonspace);

  geometry.position = position_commonspace;
  normals_commonspace = project_normal(instanceModelMatrix * normals);
  geometry.normal = normals_commonspace;

  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);

  #ifdef MODULE_PBR
    pbr_vPosition = geometry.position.xyz;
    #ifdef HAS_NORMALS
      pbr_vNormal = geometry.normal;
    #endif

    #ifdef HAS_UV
      pbr_vUV = uv;
    #else
      pbr_vUV = vec2(0., 0.);
    #endif
    geometry.uv = pbr_vUV;
  #endif

  DECKGL_FILTER_COLOR(vColor, geometry);
}
`;var cb=`#version 300 es
#define SHADER_NAME simple-mesh-layer-fs

precision highp float;

uniform bool hasTexture;
uniform sampler2D sampler;
uniform bool flatShading;
uniform float opacity;

in vec2 vTexCoord;
in vec3 cameraPosition;
in vec3 normals_commonspace;
in vec4 position_commonspace;
in vec4 vColor;

out vec4 fragColor;

void main(void) {
  
#ifdef MODULE_PBR

  fragColor = vColor * pbr_filterColor(vec4(0));
  geometry.uv = pbr_vUV;
  fragColor.a *= opacity;

#else

  geometry.uv = vTexCoord;

  vec3 normal;
  if (flatShading) {
#ifdef DERIVATIVES_AVAILABLE
    normal = normalize(cross(dFdx(position_commonspace.xyz), dFdy(position_commonspace.xyz)));
#else
    normal = vec3(0.0, 0.0, 1.0);
#endif
  } else {
    normal = normals_commonspace;
  }

  vec4 color = hasTexture ? texture(sampler, vTexCoord) : vColor;
  vec3 lightColor = lighting_getLightColor(color.rgb, cameraPosition, position_commonspace.xyz, normal);
  fragColor = vec4(lightColor, color.a * opacity);

#endif

  DECKGL_FILTER_COLOR(fragColor, geometry);
}
`;function hb(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function Dr(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?hb(Object(t),!0).forEach(function(n){(0,Ds.default)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):hb(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function IR(e){var r=PR();return function(){var n=(0,Gr.default)(e),a;if(r){var i=(0,Gr.default)(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return(0,vb.default)(this,a)}}function PR(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function RR(e){var r=e.COLOR_0||e.colors;r||(e.colors={constant:!0,value:new Float32Array([1,1,1])})}var FR={pbrMaterial:{type:"object",value:null},featureIds:{type:"array",value:null,optional:!0}},Ns=function(e){(0,mb.default)(t,e);var r=IR(t);function t(){return(0,db.default)(this,t),r.apply(this,arguments)}return(0,pb.default)(t,[{key:"getShaders",value:function(){var a=(0,Aa.default)((0,Gr.default)(t.prototype),"getShaders",this).call(this),i=a.modules;return i.push(Gs.pbr),Dr(Dr({},a),{},{vs:lb,fs:cb})}},{key:"initializeState",value:function(){var a=this.props.featureIds;(0,Aa.default)((0,Gr.default)(t.prototype),"initializeState",this).call(this);var i=this.getAttributeManager();a&&i.add({featureIdsPickingColors:{type:5121,size:3,noAlloc:!0,update:this.calculateFeatureIdsPickingColors}})}},{key:"updateState",value:function(a){(0,Aa.default)((0,Gr.default)(t.prototype),"updateState",this).call(this,a);var i=a.props,o=a.oldProps;i.pbrMaterial!==o.pbrMaterial&&this.updatePbrMaterialUniforms(i.pbrMaterial)}},{key:"draw",value:function(a){var i=this.props.featureIds;this.state.model&&(this.state.model.setUniforms({u_Camera:this.state.model.getUniforms().project_uCameraPosition,pickFeatureIds:Boolean(i)}),(0,Aa.default)((0,Gr.default)(t.prototype),"draw",this).call(this,a))}},{key:"getModel",value:function(a){var i=this.props,o=i.id,s=i.pbrMaterial,u=this.parseMaterial(s,a);this.setState({materialParser:u});var f=this.getShaders();RR(a.attributes);var l=new Gs.Model(this.context.gl,Dr(Dr({},this.getShaders()),{},{id:o,geometry:a,defines:Dr(Dr(Dr({},f.defines),u?.defines),{},{HAS_UV_REGIONS:a.attributes.uvRegions}),parameters:u?.parameters,isInstanced:!0}));return l}},{key:"updatePbrMaterialUniforms",value:function(a){var i=this.state.model;if(i){var o=this.props.mesh,s=this.parseMaterial(a,o);this.setState({materialParser:s}),i.setUniforms(s.uniforms)}}},{key:"parseMaterial",value:function(a,i){var o,s=Boolean(a.pbrMetallicRoughness&&a.pbrMetallicRoughness.baseColorTexture);return(o=this.state.materialParser)===null||o===void 0||o.delete(),new ah(this.context.gl,{attributes:{NORMAL:i.attributes.normals,TEXCOORD_0:i.attributes.texCoords},material:Dr({unlit:s},a),pbrDebug:!1,imageBasedLightingEnvironment:null,lights:!0,useTangents:!1})}},{key:"calculateFeatureIdsPickingColors",value:function(a){for(var i=this.props.featureIds,o=new Uint8ClampedArray(i.length*a.size),s=[],u=0;u<i.length;u++)this.encodePickingColor(i[u],s),o[u*3]=s[0],o[u*3+1]=s[1],o[u*3+2]=s[2];a.value=o}},{key:"finalizeState",value:function(a){var i;(0,Aa.default)((0,Gr.default)(t.prototype),"finalizeState",this).call(this,a),(i=this.state.materialParser)===null||i===void 0||i.delete(),this.setState({materialParser:null})}}]),t}(gb.SimpleMeshLayer);(0,Ds.default)(Ns,"layerName","MeshLayer");(0,Ds.default)(Ns,"defaultProps",FR);var wC=m(_a());var Ph=m(ce()),Zs=m(X()),zT=m(W()),WT=m(H()),JT=m(z()),Cn=m(Y());function ih(e){if(Array.isArray(e))return e}function oh(e,r){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var n=[],a=!0,i=!1,o,s;try{for(t=t.call(e);!(a=(o=t.next()).done)&&(n.push(o.value),!(r&&n.length===r));a=!0);}catch(u){i=!0,s=u}finally{try{!a&&t.return!=null&&t.return()}finally{if(i)throw s}}return n}}function Us(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function sh(e,r){if(e){if(typeof e=="string")return Us(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Us(e,r)}}function uh(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fh(e,r){return ih(e)||oh(e,r)||sh(e,r)||uh()}function lh(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function Ab(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ch(e,r,t){return r&&Ab(e.prototype,r),t&&Ab(e,t),e}function Bt(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var sr=6378137,ur=6378137,fr=6356752314245179e-9,LR={radii:[sr,ur,fr],radiiSquared:[sr*sr,ur*ur,fr*fr],oneOverRadii:[1/sr,1/ur,1/fr],oneOverRadiiSquared:[1/(sr*sr),1/(ur*ur),1/(fr*fr)],maximumRadius:Math.max(sr,ur,fr),centerToleranceSquared:.1};function js(e){return e}var TX=new w;function kR(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:js;return"longitude"in e?(r[0]=t(e.longitude),r[1]=t(e.latitude),r[2]=e.height):"x"in e?(r[0]=t(e.x),r[1]=t(e.y),r[2]=e.z):(r[0]=t(e[0]),r[1]=t(e[1]),r[2]=e[2]),r}function _b(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return kR(e,r,_e._cartographicRadians?js:Xl)}function DR(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:js;return"longitude"in r?(r.longitude=t(e[0]),r.latitude=t(e[1]),r.height=e[2]):"x"in r?(r.x=t(e[0]),r.y=t(e[1]),r.z=e[2]):(r[0]=t(e[0]),r[1]=t(e[1]),r[2]=e[2]),r}function bb(e,r){return DR(e,r,_e._cartographicRadians?js:Yl)}var ba=new w,GR=new w,NR=new w;function hh(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],n=r.oneOverRadii,a=r.oneOverRadiiSquared,i=r.centerToleranceSquared;ba.from(e);var o=ba.x,s=ba.y,u=ba.z,f=n.x,l=n.y,c=n.z,h=o*o*f*f,d=s*s*l*l,p=u*u*c*c,v=h+d+p,g=Math.sqrt(1/v);if(Number.isFinite(g)){var y=GR;if(y.copy(e).scale(g),v<i)return y.to(t);var b=a.x,E=a.y,T=a.z,S=NR;S.set(y.x*b*2,y.y*E*2,y.z*T*2);var I=(1-g)*ba.len()/(.5*S.len()),L=0,B,C,_,R;do{I-=L,B=1/(1+I*b),C=1/(1+I*E),_=1/(1+I*T);var F=B*B,D=C*C,k=_*_,M=F*B,O=D*C,P=k*_;R=h*F+d*D+p*k-1;var U=h*M*b+d*O*E+p*P*T,G=-2*U;L=R/G}while(Math.abs(R)>Vt.EPSILON12);return ba.scale([B,C,_]).to(t)}}var Tb=1e-14,UR=new w,xb={up:{south:"east",north:"west",west:"south",east:"north"},down:{south:"west",north:"east",west:"north",east:"south"},south:{up:"west",down:"east",west:"down",east:"up"},north:{up:"east",down:"west",west:"up",east:"down"},west:{up:"north",down:"south",north:"down",south:"up"},east:{up:"south",down:"north",north:"up",south:"down"}},dh={north:[-1,0,0],east:[0,1,0],up:[0,0,1],south:[1,0,0],west:[0,-1,0],down:[0,0,-1]},lr={east:new w,north:new w,up:new w,west:new w,south:new w,down:new w},jR=new w,HR=new w,VR=new w;function Hs(e,r,t,n,a,i){var o=xb[r]&&xb[r][t];ue(o&&(!n||n===o));var s,u,f,l=UR.copy(a),c=We(l.x,0,Tb)&&We(l.y,0,Tb);if(c){var h=Math.sign(l.z);s=jR.fromArray(dh[r]),r!=="east"&&r!=="west"&&s.scale(h),u=HR.fromArray(dh[t]),t!=="east"&&t!=="west"&&u.scale(h),f=VR.fromArray(dh[n]),n!=="east"&&n!=="west"&&f.scale(h)}else{var d=lr.up,p=lr.east,v=lr.north;p.set(-l.y,l.x,0).normalize(),e.geodeticSurfaceNormal(l,d),v.copy(d).cross(p);var g=lr.down,y=lr.west,b=lr.south;g.copy(d).scale(-1),y.copy(p).scale(-1),b.copy(v).scale(-1),s=lr[r],u=lr[t],f=lr[n]}return i[0]=s.x,i[1]=s.y,i[2]=s.z,i[3]=0,i[4]=u.x,i[5]=u.y,i[6]=u.z,i[7]=0,i[8]=f.x,i[9]=f.y,i[10]=f.z,i[11]=0,i[12]=l.x,i[13]=l.y,i[14]=l.z,i[15]=1,i}var Vs=new w,Eb=new w,zR=new w,kt=new w,WR=new w,zs=new w;var be=function(){function e(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;lh(this,e),Bt(this,"radii",void 0),Bt(this,"radiiSquared",void 0),Bt(this,"radiiToTheFourth",void 0),Bt(this,"oneOverRadii",void 0),Bt(this,"oneOverRadiiSquared",void 0),Bt(this,"minimumRadius",void 0),Bt(this,"maximumRadius",void 0),Bt(this,"centerToleranceSquared",Vt.EPSILON1),Bt(this,"squaredXOverSquaredZ",void 0),ue(r>=0),ue(t>=0),ue(n>=0),this.radii=new w(r,t,n),this.radiiSquared=new w(r*r,t*t,n*n),this.radiiToTheFourth=new w(r*r*r*r,t*t*t*t,n*n*n*n),this.oneOverRadii=new w(r===0?0:1/r,t===0?0:1/t,n===0?0:1/n),this.oneOverRadiiSquared=new w(r===0?0:1/(r*r),t===0?0:1/(t*t),n===0?0:1/(n*n)),this.minimumRadius=Math.min(r,t,n),this.maximumRadius=Math.max(r,t,n),this.radiiSquared.z!==0&&(this.squaredXOverSquaredZ=this.radiiSquared.x/this.radiiSquared.z),Object.freeze(this)}return ch(e,[{key:"equals",value:function(t){return this===t||Boolean(t&&this.radii.equals(t.radii))}},{key:"toString",value:function(){return this.radii.toString()}},{key:"cartographicToCartesian",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0,0,0],a=Eb,i=zR,o=fh(t,3),s=o[2];this.geodeticSurfaceNormalCartographic(t,a),i.copy(this.radiiSquared).scale(a);var u=Math.sqrt(a.dot(i));return i.scale(1/u),a.scale(s),i.add(a),i.to(n)}},{key:"cartesianToCartographic",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0,0,0];zs.from(t);var a=this.scaleToGeodeticSurface(zs,kt);if(a){var i=this.geodeticSurfaceNormal(a,Eb),o=WR;o.copy(zs).subtract(a);var s=Math.atan2(i.y,i.x),u=Math.asin(i.z),f=Math.sign(si(o,zs))*El(o);return bb([s,u,f],n)}}},{key:"eastNorthUpToFixedFrame",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:new $;return Hs(this,"east","north","up",t,n)}},{key:"localFrameToFixedFrame",value:function(t,n,a,i){var o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:new $;return Hs(this,t,n,a,i,o)}},{key:"geocentricSurfaceNormal",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0,0,0];return Vs.from(t).normalize().to(n)}},{key:"geodeticSurfaceNormalCartographic",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0,0,0],a=_b(t),i=a[0],o=a[1],s=Math.cos(o);return Vs.set(s*Math.cos(i),s*Math.sin(i),Math.sin(o)).normalize(),Vs.to(n)}},{key:"geodeticSurfaceNormal",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0,0,0];return Vs.from(t).scale(this.oneOverRadiiSquared).normalize().to(n)}},{key:"scaleToGeodeticSurface",value:function(t,n){return hh(t,this,n)}},{key:"scaleToGeocentricSurface",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0,0,0];kt.from(t);var a=kt.x,i=kt.y,o=kt.z,s=this.oneOverRadiiSquared,u=1/Math.sqrt(a*a*s.x+i*i*s.y+o*o*s.z);return kt.multiplyScalar(u).to(n)}},{key:"transformPositionToScaledSpace",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0,0,0];return kt.from(t).scale(this.oneOverRadii).to(n)}},{key:"transformPositionFromScaledSpace",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0,0,0];return kt.from(t).scale(this.radii).to(n)}},{key:"getSurfaceNormalIntersectionWithZAxis",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[0,0,0];ue(We(this.radii.x,this.radii.y,Vt.EPSILON15)),ue(this.radii.z>0),kt.from(t);var i=kt.z*(1-this.squaredXOverSquaredZ);if(!(Math.abs(i)>=this.radii.z-n))return kt.set(0,0,i).to(a)}}]),e}();Bt(be,"WGS84",new be(sr,ur,fr));var Ob=m(H()),Ib=m(z());var wb=m(H()),Bb=m(z());var Sb=m(H());var Cb=function e(r,t,n){(0,Sb.default)(this,e),A(this,"item",void 0),A(this,"previous",void 0),A(this,"next",void 0),this.item=r,this.previous=t,this.next=n};var Mb=function(){function e(){(0,wb.default)(this,e),A(this,"head",null),A(this,"tail",null),A(this,"_length",0)}return(0,Bb.default)(e,[{key:"length",get:function(){return this._length}},{key:"add",value:function(t){var n=new Cb(t,this.tail,null);return this.tail?(this.tail.next=n,this.tail=n):(this.head=n,this.tail=n),++this._length,n}},{key:"remove",value:function(t){t&&(t.previous&&t.next?(t.previous.next=t.next,t.next.previous=t.previous):t.previous?(t.previous.next=null,this.tail=t.previous):t.next?(t.next.previous=null,this.head=t.next):(this.head=null,this.tail=null),t.next=null,t.previous=null,--this._length)}},{key:"splice",value:function(t,n){t!==n&&(this.remove(n),this._insert(t,n))}},{key:"_insert",value:function(t,n){var a=t.next;t.next=n,this.tail===t?this.tail=n:a.previous=n,n.next=a,n.previous=t,++this._length}}]),e}();function ph(e){return e!=null}var Pb=function(){function e(){(0,Ob.default)(this,e),A(this,"_list",void 0),A(this,"_sentinel",void 0),A(this,"_trimTiles",void 0),this._list=new Mb,this._sentinel=this._list.add("sentinel"),this._trimTiles=!1}return(0,Ib.default)(e,[{key:"reset",value:function(){this._list.splice(this._list.tail,this._sentinel)}},{key:"touch",value:function(t){var n=t._cacheNode;ph(n)&&this._list.splice(this._sentinel,n)}},{key:"add",value:function(t,n,a){ph(n._cacheNode)||(n._cacheNode=this._list.add(n),a&&a(t,n))}},{key:"unloadTile",value:function(t,n,a){var i=n._cacheNode;ph(i)&&(this._list.remove(i),n._cacheNode=void 0,a&&a(t,n))}},{key:"unloadTiles",value:function(t,n){var a=this._trimTiles;this._trimTiles=!1;for(var i=this._list,o=t.maximumMemoryUsage*1024*1024,s=this._sentinel,u=i.head;u!==s&&(t.gpuMemoryUsageInBytes>o||a);){var f=u.item;u=u.next,this.unloadTile(t,f,n)}}},{key:"trim",value:function(){this._trimTiles=!0}}]),e}();function Rb(e,r){te(e),te(r);var t=r.rtcCenter,n=r.gltfUpAxis,a=e.computedTransform,i=e.boundingVolume.center,o=new $(a);switch(t&&o.translate(t),n){case"Z":break;case"Y":var s=new $().rotateX(Math.PI/2);o=o.multiplyRight(s);break;case"X":var u=new $().rotateY(-Math.PI/2);o=o.multiplyRight(u);break;default:break}r.isQuantized&&o.translate(r.quantizedVolumeOffset).scale(r.quantizedVolumeScale);var f=new w(i);r.cartesianModelMatrix=o,r.cartesianOrigin=f;var l=be.WGS84.cartesianToCartographic(f,new w),c=be.WGS84.eastNorthUpToFixedFrame(f),h=c.invert();r.cartographicModelMatrix=h.multiplyRight(o),r.cartographicOrigin=l,r.coordinateSystem||(r.modelMatrix=r.cartographicModelMatrix)}var vh=m(ce());function JR(e,r){var t=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=qR(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(f){throw f},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,o=!1,s;return{s:function(){t=t.call(e)},n:function(){var f=t.next();return i=f.done,f},e:function(f){o=!0,s=f},f:function(){try{!i&&t.return!=null&&t.return()}finally{if(o)throw s}}}}function qR(e,r){if(e){if(typeof e=="string")return Fb(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Fb(e,r)}}function Fb(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var Lb=new w,mh=new w,gh=new dt([new ke,new ke,new ke,new ke,new ke,new ke]);function Db(e,r){var t=e.cameraDirection,n=e.cameraUp,a=e.height,i=e.distanceScales.metersPerUnit,o=Ws(e,e.center),s=be.WGS84.eastNorthUpToFixedFrame(o),u=e.unprojectPosition(e.cameraPosition),f=be.WGS84.cartographicToCartesian(u,new w),l=new w(s.transformAsVector(new w(t).scale(i))).normalize(),c=new w(s.transformAsVector(new w(n).scale(i))).normalize();XR(e);var h=e.constructor,d=e.longitude,p=e.latitude,v=e.width,g=e.bearing,y=e.zoom,b=new h({longitude:d,latitude:p,height:a,width:v,bearing:g,zoom:y,pitch:0});return{camera:{position:f,direction:l,up:c},viewport:e,topDownViewport:b,height:a,cullingVolume:gh,frameNumber:r,sseDenominator:1.15}}function Gb(e,r,t){if(t===0||e.length<=t)return[e,[]];var n=[],a=r.viewport,i=a.longitude,o=a.latitude,s=JR(e.entries()),u;try{for(s.s();!(u=s.n()).done;){var f=(0,vh.default)(u.value,2),l=f[0],c=f[1],h=(0,vh.default)(c.header.mbs,2),d=h[0],p=h[1],v=Math.abs(i-d),g=Math.abs(o-p),y=Math.sqrt(g*g+v*v);n.push([l,y])}}catch(L){s.e(L)}finally{s.f()}for(var b=n.sort(function(L,B){return L[1]-B[1]}),E=[],T=0;T<t;T++)E.push(e[b[T][0]]);for(var S=[],I=t;I<b.length;I++)S.push(e[b[I][0]]);return[E,S]}function XR(e){var r=e.getFrustumPlanes(),t=kb(r.near,e.cameraPosition),n=Ws(e,t),a=Ws(e,e.cameraPosition,mh),i=0;gh.planes[i++].fromPointNormal(n,Lb.copy(n).subtract(a));for(var o in r)if(o!=="near"){var s=r[o],u=kb(s,t,mh),f=Ws(e,u,mh);gh.planes[i++].fromPointNormal(f,Lb.copy(n).subtract(f))}}function kb(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:new w,n=e.normal.dot(r);return t.copy(e.normal).scale(e.distance-n).add(r),t}function Ws(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:new w,n=e.unprojectPosition(r);return be.WGS84.cartographicToCartesian(n,t)}var Ub=m(ce());var YR=6378137,KR=6378137,yh=6356752314245179e-9,Nb=new w;function jb(e,r){if(e instanceof dn){var t=e.halfAxes,n=QR(t);return Math.log2(yh/(n+r[2]))}else if(e instanceof Br){var a=e.radius;return Math.log2(yh/(a+r[2]))}else if(e.width&&e.height){var i=e.width,o=e.height,s=Math.log2(YR/i),u=Math.log2(KR/o);return(s+u)/2}return 1}function Ah(e,r,t){var n=be.WGS84.cartographicToCartesian([e.xmax,e.ymax,e.zmax],new w),a=Math.sqrt(Math.pow(n[0]-t[0],2)+Math.pow(n[1]-t[1],2)+Math.pow(n[2]-t[2],2));return Math.log2(yh/(a+r[2]))}function Hb(e,r,t){var n=(0,Ub.default)(e,4),a=n[0],i=n[1],o=n[2],s=n[3];return Ah({xmin:a,xmax:o,ymin:i,ymax:s,zmin:0,zmax:0},r,t)}function QR(e){e.getColumn(0,Nb);var r=e.getColumn(1),t=e.getColumn(2),n=Nb.add(r).add(t),a=n.len();return a}var Sh=m(W()),fT=m(X()),lT=m(H()),cT=m(z()),Eh=m(Y());var hT=m(_a());var lt={UNLOADED:0,LOADING:1,PROCESSING:2,READY:3,EXPIRED:4,FAILED:5},pt={ADD:1,REPLACE:2},cr={EMPTY:"empty",SCENEGRAPH:"scenegraph",POINTCLOUD:"pointcloud",MESH:"mesh"},tt={I3S:"I3S",TILES3D:"TILES3D"},En={GEOMETRIC_ERROR:"geometricError",MAX_SCREEN_THRESHOLD:"maxScreenThreshold"},Vb={NOT_COMPUTED:-1,USE_OPTIMIZATION:1,SKIP_OPTIMIZATION:0};var Sn=m(Et()),Wb=m(ce());function Jb(e){return e!=null}var ZR=new w,$R=new w,eF=new w;function Js(e,r,t){if(te(e,"3D Tile: boundingVolume must be defined"),e.box)return tF(e.box,r,t);if(e.region){var n=(0,Wb.default)(e.region,6),a=n[0],i=n[1],o=n[2],s=n[3],u=n[4],f=n[5],l=be.WGS84.cartographicToCartesian([cn(a),cn(s),u],$R),c=be.WGS84.cartographicToCartesian([cn(o),cn(i),f],eF),h=new w().addVectors(l,c).multiplyScalar(.5),d=new w().subVectors(l,c).len()/2;return zb([h[0],h[1],h[2],d],new $)}if(e.sphere)return zb(e.sphere,r,t);throw new Error("3D Tile: boundingVolume must contain a sphere, region, or box")}function tF(e,r,t){var n=new w(e[0],e[1],e[2]);r.transform(n,n);var a=[];if(e.length===10){var i=e.slice(3,6),o=new wr;o.fromArray(e,6);var s=new w([1,0,0]),u=new w([0,1,0]),f=new w([0,0,1]);s.transformByQuaternion(o),s.scale(i[0]),u.transformByQuaternion(o),u.scale(i[1]),f.transformByQuaternion(o),f.scale(i[2]),a=[].concat((0,Sn.default)(s.toArray()),(0,Sn.default)(u.toArray()),(0,Sn.default)(f.toArray()))}else a=[].concat((0,Sn.default)(e.slice(3,6)),(0,Sn.default)(e.slice(6,9)),(0,Sn.default)(e.slice(9,12)));var l=r.transformAsVector(a.slice(0,3)),c=r.transformAsVector(a.slice(3,6)),h=r.transformAsVector(a.slice(6,9)),d=new ge([l[0],l[1],l[2],c[0],c[1],c[2],h[0],h[1],h[2]]);return Jb(t)?(t.center=n,t.halfAxes=d,t):new dn(n,d)}function zb(e,r,t){var n=new w(e[0],e[1],e[2]);r.transform(n,n);var a=r.getScale(ZR),i=Math.max(Math.max(a[0],a[1]),a[2]),o=e[3]*i;return Jb(t)?(t.center=n,t.radius=o,t):new Br(n,o)}var m7=new w,v7=new w,g7=new $,y7=new w,A7=new w,_7=new w;function rF(e,r){var t=e*r;return 1-Math.exp(-(t*t))}function nF(e,r){if(e.dynamicScreenSpaceError&&e.dynamicScreenSpaceErrorComputedDensity){var t=e.dynamicScreenSpaceErrorComputedDensity,n=e.dynamicScreenSpaceErrorFactor,a=rF(r,t)*n;return a}return 0}function qb(e,r,t){var n=e.tileset,a=e.parent&&e.parent.lodMetricValue||e.lodMetricValue,i=t?a:e.lodMetricValue;if(i===0)return 0;var o=Math.max(e._distanceToCamera,1e-7),s=r.height,u=r.sseDenominator,f=n.options.viewDistanceScale,l=i*s*(f||1)/(o*u);return l-=nF(n,o),l}var Qb=m(Et());var _h=new w,Xb=new w,Nr=new w,Yb=new w,aF=new w,bh=new $,Kb=new $;function Zb(e,r){if(e.lodMetricValue===0||isNaN(e.lodMetricValue))return"DIG";var t=2*Th(e,r);return t<2?"OUT":!e.header.children||t<=e.lodMetricValue?"DRAW":e.header.children?"DIG":"OUT"}function Th(e,r){var t=r.topDownViewport,n=e.header.mbs[1],a=e.header.mbs[0],i=e.header.mbs[2],o=e.header.mbs[3],s=(0,Qb.default)(e.boundingVolume.center),u=t.unprojectPosition(t.cameraPosition);be.WGS84.cartographicToCartesian(u,_h),Xb.copy(_h).subtract(s).normalize(),be.WGS84.eastNorthUpToFixedFrame(s,bh),Kb.copy(bh).invert(),Nr.copy(_h).transform(Kb);var f=Math.sqrt(Nr[0]*Nr[0]+Nr[1]*Nr[1]),l=f*f/Nr[2];Yb.copy([Nr[0],Nr[1],l]);var c=Yb.transform(bh),h=c.subtract(s).normalize(),d=Xb.cross(h).normalize().scale(o),p=d.add(s),v=be.WGS84.cartesianToCartographic(p),g=t.project([a,n,i]),y=t.project(v),b=aF.copy(g).subtract(y).magnitude();return b}function $b(e){return{assetGltfUpAxis:e.asset&&e.asset.gltfUpAxis||"Y"}}var aT=m(W()),iT=m(H()),oT=m(z());var eT=m(H()),tT=m(z());var xh=function(){function e(){(0,eT.default)(this,e);var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;A(this,"_map",new Map),A(this,"_array",void 0),A(this,"_length",void 0),this._array=new Array(r),this._length=r}return(0,tT.default)(e,[{key:"length",get:function(){return this._length},set:function(t){this._length=t,t>this._array.length&&(this._array.length=t)}},{key:"values",get:function(){return this._array}},{key:"get",value:function(t){return te(t<this._array.length),this._array[t]}},{key:"set",value:function(t,n){te(t>=0),t>=this.length&&(this.length=t+1),this._map.has(this._array[t])&&this._map.delete(this._array[t]),this._array[t]=n,this._map.set(n,t)}},{key:"delete",value:function(t){var n=this._map.get(t);n>=0&&(this._array.splice(n,1),this._map.delete(t),this.length--)}},{key:"peek",value:function(){return this._array[this._length-1]}},{key:"push",value:function(t){if(!this._map.has(t)){var n=this.length++;this._array[n]=t,this._map.set(t,n)}}},{key:"pop",value:function(){var t=this._array[--this.length];return this._map.delete(t),t}},{key:"reserve",value:function(t){te(t>=0),t>this._array.length&&(this._array.length=t)}},{key:"resize",value:function(t){te(t>=0),this.length=t}},{key:"trim",value:function(t){t==null&&(t=this.length),this._array.length=t}},{key:"reset",value:function(){this._array=[],this._map=new Map,this._length=0}},{key:"find",value:function(t){return this._map.has(t)}}]),e}();function qs(e,r){var t=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=iF(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(f){throw f},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,o=!1,s;return{s:function(){t=t.call(e)},n:function(){var f=t.next();return i=f.done,f},e:function(f){o=!0,s=f},f:function(){try{!i&&t.return!=null&&t.return()}finally{if(o)throw s}}}}function iF(e,r){if(e){if(typeof e=="string")return rT(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return rT(e,r)}}function rT(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function nT(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function Xs(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?nT(Object(t),!0).forEach(function(n){(0,aT.default)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):nT(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var oF={loadSiblings:!1,skipLevelOfDetail:!1,maximumScreenSpaceError:2,updateTransforms:!0,onTraversalEnd:function(){},viewportTraversersMap:{},basePath:""},Ur=function(){function e(r){(0,iT.default)(this,e),A(this,"options",void 0),A(this,"root",void 0),A(this,"requestedTiles",void 0),A(this,"selectedTiles",void 0),A(this,"emptyTiles",void 0),A(this,"lastUpdate",new Date().getTime()),A(this,"updateDebounceTime",1e3),A(this,"_traversalStack",void 0),A(this,"_emptyTraversalStack",void 0),A(this,"_frameNumber",void 0),this.options=Xs(Xs({},oF),r),this._traversalStack=new xh,this._emptyTraversalStack=new xh,this._frameNumber=null,this.root=null,this.selectedTiles={},this.requestedTiles={},this.emptyTiles={}}return(0,oT.default)(e,[{key:"traversalFinished",value:function(t){return!0}},{key:"traverse",value:function(t,n,a){this.root=t,this.options=Xs(Xs({},this.options),a),this.reset(),this.updateTile(t,n),this._frameNumber=n.frameNumber,this.executeTraversal(t,n)}},{key:"reset",value:function(){this.requestedTiles={},this.selectedTiles={},this.emptyTiles={},this._traversalStack.reset(),this._emptyTraversalStack.reset()}},{key:"executeTraversal",value:function(t,n){var a=this._traversalStack;for(t._selectionDepth=1,a.push(t);a.length>0;){var i=a.pop(),o=!1;this.canTraverse(i,n)&&(this.updateChildTiles(i,n),o=this.updateAndPushChildren(i,n,a,i.hasRenderContent?i._selectionDepth+1:i._selectionDepth));var s=i.parent,u=Boolean(!s||s._shouldRefine),f=!o;i.hasRenderContent?i.refine===pt.ADD?(this.loadTile(i,n),this.selectTile(i,n)):i.refine===pt.REPLACE&&(this.loadTile(i,n),f&&this.selectTile(i,n)):(this.emptyTiles[i.id]=i,this.loadTile(i,n),f&&this.selectTile(i,n)),this.touchTile(i,n),i._shouldRefine=o&&u}var l=new Date().getTime();(this.traversalFinished(n)||l-this.lastUpdate>this.updateDebounceTime)&&(this.lastUpdate=l,this.options.onTraversalEnd(n))}},{key:"updateChildTiles",value:function(t,n){var a=t.children,i=qs(a),o;try{for(i.s();!(o=i.n()).done;){var s=o.value;this.updateTile(s,n)}}catch(u){i.e(u)}finally{i.f()}return!0}},{key:"updateAndPushChildren",value:function(t,n,a,i){var o=this.options,s=o.loadSiblings,u=o.skipLevelOfDetail,f=t.children;f.sort(this.compareDistanceToCamera.bind(this));var l=t.refine===pt.REPLACE&&t.hasRenderContent&&!u,c=!1,h=!0,d=qs(f),p;try{for(d.s();!(p=d.n()).done;){var v=p.value;if(v._selectionDepth=i,v.isVisibleAndInRequestVolume?(a.find(v)&&a.delete(v),a.push(v),c=!0):(l||s)&&(this.loadTile(v,n),this.touchTile(v,n)),l){var g=void 0;if(v._inRequestVolume?v.hasRenderContent?g=v.contentAvailable:g=this.executeEmptyTraversal(v,n):g=!1,h=h&&g,!h)return!1}}}catch(y){d.e(y)}finally{d.f()}return c||(h=!1),h}},{key:"updateTile",value:function(t,n){this.updateTileVisibility(t,n)}},{key:"selectTile",value:function(t,n){this.shouldSelectTile(t)&&(t._selectedFrame=n.frameNumber,this.selectedTiles[t.id]=t)}},{key:"loadTile",value:function(t,n){this.shouldLoadTile(t)&&(t._requestedFrame=n.frameNumber,t._priority=t._getPriority(),this.requestedTiles[t.id]=t)}},{key:"touchTile",value:function(t,n){t.tileset._cache.touch(t),t._touchedFrame=n.frameNumber}},{key:"canTraverse",value:function(t,n){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;return t.hasChildren?t.hasTilesetContent?!t.contentExpired:!i&&!t.isVisibleAndInRequestVolume?!1:this.shouldRefine(t,n,a):!1}},{key:"shouldLoadTile",value:function(t){return t.hasUnloadedContent||t.contentExpired}},{key:"shouldSelectTile",value:function(t){return t.contentAvailable&&!this.options.skipLevelOfDetail}},{key:"shouldRefine",value:function(t,n,a){var i=t._screenSpaceError;return a&&(i=t.getScreenSpaceError(n,!0)),i>this.options.maximumScreenSpaceError}},{key:"updateTileVisibility",value:function(t,n){var a=[];if(this.options.viewportTraversersMap)for(var i in this.options.viewportTraversersMap){var o=this.options.viewportTraversersMap[i];o===n.viewport.id&&a.push(i)}else a.push(n.viewport.id);t.updateVisibility(n,a)}},{key:"compareDistanceToCamera",value:function(t,n){return t._distanceToCamera-n._distanceToCamera}},{key:"anyChildrenVisible",value:function(t,n){var a=!1,i=qs(t.children),o;try{for(i.s();!(o=i.n()).done;){var s=o.value;s.updateVisibility(n),a=a||s.isVisibleAndInRequestVolume}}catch(u){i.e(u)}finally{i.f()}return a}},{key:"executeEmptyTraversal",value:function(t,n){var a=!0,i=this._emptyTraversalStack;for(i.push(t);i.length>0&&a;){var o=i.pop();this.updateTile(o,n),o.isVisibleAndInRequestVolume||this.loadTile(o,n),this.touchTile(o,n);var s=!o.hasRenderContent&&this.canTraverse(o,n,!1,!0);if(s){var u=o.children,f=qs(u),l;try{for(f.s();!(l=f.n()).done;){var c=l.value;i.find(c)&&i.delete(c),i.push(c)}}catch(h){f.e(h)}finally{f.f()}}else o.contentAvailable||(a=!1)}return a}}]),e}();function sT(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function Ta(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?sT(Object(t),!0).forEach(function(n){(0,Sh.default)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):sT(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var uT=new w;function sF(e){return e!=null}var Ri=function(){function e(r,t,n){(0,lT.default)(this,e);var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"";A(this,"tileset",void 0),A(this,"header",void 0),A(this,"id",void 0),A(this,"url",void 0),A(this,"parent",void 0),A(this,"refine",void 0),A(this,"type",void 0),A(this,"contentUrl",void 0),A(this,"lodMetricType",void 0),A(this,"lodMetricValue",void 0),A(this,"boundingVolume",void 0),A(this,"content",void 0),A(this,"contentState",void 0),A(this,"gpuMemoryUsageInBytes",void 0),A(this,"children",void 0),A(this,"depth",void 0),A(this,"viewportIds",void 0),A(this,"transform",void 0),A(this,"extensions",void 0),A(this,"implicitTiling",void 0),A(this,"userData",void 0),A(this,"computedTransform",void 0),A(this,"hasEmptyContent",void 0),A(this,"hasTilesetContent",void 0),A(this,"traverser",void 0),A(this,"_cacheNode",void 0),A(this,"_frameNumber",void 0),A(this,"_lodJudge",void 0),A(this,"_expireDate",void 0),A(this,"_expiredContent",void 0),A(this,"_shouldRefine",void 0),A(this,"_distanceToCamera",void 0),A(this,"_centerZDepth",void 0),A(this,"_screenSpaceError",void 0),A(this,"_visibilityPlaneMask",void 0),A(this,"_visible",void 0),A(this,"_inRequestVolume",void 0),A(this,"_stackLength",void 0),A(this,"_selectionDepth",void 0),A(this,"_touchedFrame",void 0),A(this,"_visitedFrame",void 0),A(this,"_selectedFrame",void 0),A(this,"_requestedFrame",void 0),A(this,"_priority",void 0),A(this,"_contentBoundingVolume",void 0),A(this,"_viewerRequestVolume",void 0),A(this,"_initialTransform",void 0),this.header=t,this.tileset=r,this.id=a||t.id,this.url=t.url,this.parent=n,this.refine=this._getRefine(t.refine),this.type=t.type,this.contentUrl=t.contentUrl,this.lodMetricType="geometricError",this.lodMetricValue=0,this.boundingVolume=null,this.content=null,this.contentState=lt.UNLOADED,this.gpuMemoryUsageInBytes=0,this.children=[],this.hasEmptyContent=!1,this.hasTilesetContent=!1,this.depth=0,this.viewportIds=[],this.userData={},this.extensions=null,this._priority=0,this._touchedFrame=0,this._visitedFrame=0,this._selectedFrame=0,this._requestedFrame=0,this._screenSpaceError=0,this._cacheNode=null,this._frameNumber=null,this._cacheNode=null,this.traverser=new Ur({}),this._shouldRefine=!1,this._distanceToCamera=0,this._centerZDepth=0,this._visible=void 0,this._inRequestVolume=!1,this._stackLength=0,this._selectionDepth=0,this._initialTransform=new $,this.transform=new $,this._initializeLodMetric(t),this._initializeTransforms(t),this._initializeBoundingVolumes(t),this._initializeContent(t),this._initializeRenderingState(t),this._lodJudge=null,this._expireDate=null,this._expiredContent=null,this.implicitTiling=null,Object.seal(this)}return(0,cT.default)(e,[{key:"destroy",value:function(){this.header=null}},{key:"isDestroyed",value:function(){return this.header===null}},{key:"selected",get:function(){return this._selectedFrame===this.tileset._frameNumber}},{key:"isVisible",get:function(){return this._visible}},{key:"isVisibleAndInRequestVolume",get:function(){return this._visible&&this._inRequestVolume}},{key:"hasRenderContent",get:function(){return!this.hasEmptyContent&&!this.hasTilesetContent}},{key:"hasChildren",get:function(){return this.children.length>0||this.header.children&&this.header.children.length>0}},{key:"contentReady",get:function(){return this.contentState===lt.READY||this.hasEmptyContent}},{key:"contentAvailable",get:function(){return Boolean(this.contentReady&&this.hasRenderContent||this._expiredContent&&!this.contentFailed)}},{key:"hasUnloadedContent",get:function(){return this.hasRenderContent&&this.contentUnloaded}},{key:"contentUnloaded",get:function(){return this.contentState===lt.UNLOADED}},{key:"contentExpired",get:function(){return this.contentState===lt.EXPIRED}},{key:"contentFailed",get:function(){return this.contentState===lt.FAILED}},{key:"distanceToCamera",get:function(){return this._distanceToCamera}},{key:"screenSpaceError",get:function(){return this._screenSpaceError}},{key:"getScreenSpaceError",value:function(t,n){switch(this.tileset.type){case tt.I3S:return Th(this,t);case tt.TILES3D:return qb(this,t,n);default:throw new Error("Unsupported tileset type")}}},{key:"unselect",value:function(){this._selectedFrame=0}},{key:"_getPriority",value:function(){var t=this.tileset._traverser,n=t.options.skipLevelOfDetail,a=this.refine===pt.ADD||n;if(a&&!this.isVisible&&this._visible!==void 0||this.tileset._frameNumber-this._touchedFrame>=1||this.contentState===lt.UNLOADED)return-1;var i=this.parent,o=i&&(!a||this._screenSpaceError===0||i.hasTilesetContent),s=o?i._screenSpaceError:this._screenSpaceError,u=t.root?t.root._screenSpaceError:0;return Math.max(u-s,0)}},{key:"loadContent",value:function(){var r=(0,fT.default)(Eh.default.mark(function n(){var a,i,o,s,u;return Eh.default.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(!this.hasEmptyContent){l.next=2;break}return l.abrupt("return",!1);case 2:if(!this.content){l.next=4;break}return l.abrupt("return",!0);case 4:return a=this.contentExpired,a&&(this._expireDate=null),this.contentState=lt.LOADING,l.next=9,this.tileset._requestScheduler.scheduleRequest(this.id,this._getPriority.bind(this));case 9:if(i=l.sent,i){l.next=13;break}return this.contentState=lt.UNLOADED,l.abrupt("return",!1);case 13:return l.prev=13,o=this.tileset.getTileUrl(this.contentUrl),s=this.tileset.loader,u=Ta(Ta({},this.tileset.loadOptions),{},(0,Sh.default)({},s.id,Ta(Ta({},this.tileset.loadOptions[s.id]),{},{isTileset:this.type==="json"},this._getLoaderSpecificOptions(s.id)))),l.next=19,(0,hT.load)(o,s,u);case 19:if(this.content=l.sent,!this.tileset.options.contentLoader){l.next=23;break}return l.next=23,this.tileset.options.contentLoader(this);case 23:return this._isTileset()&&this.tileset._initializeTileHeaders(this.content,this),this.contentState=lt.READY,this._onContentLoaded(),l.abrupt("return",!0);case 29:throw l.prev=29,l.t0=l.catch(13),this.contentState=lt.FAILED,l.t0;case 33:return l.prev=33,i.done(),l.finish(33);case 36:case"end":return l.stop()}},n,this,[[13,29,33,36]])}));function t(){return r.apply(this,arguments)}return t}()},{key:"unloadContent",value:function(){return this.content&&this.content.destroy&&this.content.destroy(),this.content=null,this.header.content&&this.header.content.destroy&&this.header.content.destroy(),this.header.content=null,this.contentState=lt.UNLOADED,!0}},{key:"updateVisibility",value:function(t,n){if(this._frameNumber!==t.frameNumber){var a=this.parent,i=a?a._visibilityPlaneMask:dt.MASK_INDETERMINATE;if(this.tileset._traverser.options.updateTransforms){var o=a?a.computedTransform:this.tileset.modelMatrix;this._updateTransform(o)}this._distanceToCamera=this.distanceToTile(t),this._screenSpaceError=this.getScreenSpaceError(t,!1),this._visibilityPlaneMask=this.visibility(t,i),this._visible=this._visibilityPlaneMask!==dt.MASK_OUTSIDE,this._inRequestVolume=this.insideViewerRequestVolume(t),this._frameNumber=t.frameNumber,this.viewportIds=n}}},{key:"visibility",value:function(t,n){var a=t.cullingVolume,i=this.boundingVolume;return a.computeVisibilityWithPlaneMask(i,n)}},{key:"contentVisibility",value:function(){return!0}},{key:"distanceToTile",value:function(t){var n=this.boundingVolume;return Math.sqrt(Math.max(n.distanceSquaredTo(t.camera.position),0))}},{key:"cameraSpaceZDepth",value:function(t){var n=t.camera,a=this.boundingVolume;return uT.subVectors(a.center,n.position),n.direction.dot(uT)}},{key:"insideViewerRequestVolume",value:function(t){var n=this._viewerRequestVolume;return!n||n.distanceSquaredTo(t.camera.position)<=0}},{key:"updateExpiration",value:function(){if(sF(this._expireDate)&&this.contentReady&&!this.hasEmptyContent){var t=Date.now();Date.lessThan(this._expireDate,t)&&(this.contentState=lt.EXPIRED,this._expiredContent=this.content)}}},{key:"extras",get:function(){return this.header.extras}},{key:"_initializeLodMetric",value:function(t){"lodMetricType"in t?this.lodMetricType=t.lodMetricType:(this.lodMetricType=this.parent&&this.parent.lodMetricType||this.tileset.lodMetricType,console.warn("3D Tile: Required prop lodMetricType is undefined. Using parent lodMetricType")),"lodMetricValue"in t?this.lodMetricValue=t.lodMetricValue:(this.lodMetricValue=this.parent&&this.parent.lodMetricValue||this.tileset.lodMetricValue,console.warn("3D Tile: Required prop lodMetricValue is undefined. Using parent lodMetricValue"))}},{key:"_initializeTransforms",value:function(t){this.transform=t.transform?new $(t.transform):new $;var n=this.parent,a=this.tileset,i=n&&n.computedTransform?n.computedTransform.clone():a.modelMatrix.clone();this.computedTransform=new $(i).multiplyRight(this.transform);var o=n&&n._initialTransform?n._initialTransform.clone():new $;this._initialTransform=new $(o).multiplyRight(this.transform)}},{key:"_initializeBoundingVolumes",value:function(t){this._contentBoundingVolume=null,this._viewerRequestVolume=null,this._updateBoundingVolume(t)}},{key:"_initializeContent",value:function(t){this.content={_tileset:this.tileset,_tile:this},this.hasEmptyContent=!0,this.contentState=lt.UNLOADED,this.hasTilesetContent=!1,t.contentUrl&&(this.content=null,this.hasEmptyContent=!1)}},{key:"_initializeRenderingState",value:function(t){this.depth=t.level||(this.parent?this.parent.depth+1:0),this._shouldRefine=!1,this._distanceToCamera=0,this._centerZDepth=0,this._screenSpaceError=0,this._visibilityPlaneMask=dt.MASK_INDETERMINATE,this._visible=void 0,this._inRequestVolume=!1,this._stackLength=0,this._selectionDepth=0,this._frameNumber=0,this._touchedFrame=0,this._visitedFrame=0,this._selectedFrame=0,this._requestedFrame=0,this._priority=0}},{key:"_getRefine",value:function(t){return t||this.parent&&this.parent.refine||pt.REPLACE}},{key:"_isTileset",value:function(){return this.contentUrl.indexOf(".json")!==-1}},{key:"_onContentLoaded",value:function(){switch(this.content&&this.content.type){case"vctr":case"geom":this.tileset._traverser.disableSkipLevelOfDetail=!0;break;default:}this._isTileset()&&(this.hasTilesetContent=!0)}},{key:"_updateBoundingVolume",value:function(t){this.boundingVolume=Js(t.boundingVolume,this.computedTransform,this.boundingVolume);var n=t.content;n&&(n.boundingVolume&&(this._contentBoundingVolume=Js(n.boundingVolume,this.computedTransform,this._contentBoundingVolume)),t.viewerRequestVolume&&(this._viewerRequestVolume=Js(t.viewerRequestVolume,this.computedTransform,this._viewerRequestVolume)))}},{key:"_updateTransform",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new $,n=t.clone().multiplyRight(this.transform),a=!n.equals(this.computedTransform);a&&(this.computedTransform=n,this._updateBoundingVolume(this.header))}},{key:"_getLoaderSpecificOptions",value:function(t){switch(t){case"i3s":return Ta(Ta({},this.tileset.options.i3s),{},{_tileOptions:{attributeUrls:this.header.attributeUrls,textureUrl:this.header.textureUrl,textureFormat:this.header.textureFormat,textureLoaderOptions:this.header.textureLoaderOptions,materialDefinition:this.header.materialDefinition,isDracoGeometry:this.header.isDracoGeometry,mbs:this.header.mbs},_tilesetOptions:{store:this.tileset.tileset.store,attributeStorageInfo:this.tileset.tileset.attributeStorageInfo,fields:this.tileset.tileset.fields},isTileHeader:!1});case"3d-tiles":case"cesium-ion":default:return $b(this.tileset.tileset)}}}]),e}();var dT=m(H()),pT=m(z()),mT=m(fa()),vT=m(Te()),gT=m(xe()),Ys=m(ye());function uF(e){var r=fF();return function(){var n=(0,Ys.default)(e),a;if(r){var i=(0,Ys.default)(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return(0,gT.default)(this,a)}}function fF(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var yT=function(e){(0,vT.default)(t,e);var r=uF(t);function t(){return(0,dT.default)(this,t),r.apply(this,arguments)}return(0,pT.default)(t,[{key:"compareDistanceToCamera",value:function(a,i){return i._distanceToCamera===0&&a._distanceToCamera===0?i._centerZDepth-a._centerZDepth:i._distanceToCamera-a._distanceToCamera}},{key:"updateTileVisibility",value:function(a,i){if((0,mT.default)((0,Ys.default)(t.prototype),"updateTileVisibility",this).call(this,a,i),!!a.isVisibleAndInRequestVolume){var o=a.children.length>0;if(a.hasTilesetContent&&o){var s=a.children[0];this.updateTileVisibility(s,i),a._visible=s._visible;return}if(this.meetsScreenSpaceErrorEarly(a,i)){a._visible=!1;return}var u=a.refine===pt.REPLACE,f=a._optimChildrenWithinParent===Vb.USE_OPTIMIZATION;if(u&&f&&o&&!this.anyChildrenVisible(a,i)){a._visible=!1;return}}}},{key:"meetsScreenSpaceErrorEarly",value:function(a,i){var o=a.parent;return!o||o.hasTilesetContent||o.refine!==pt.ADD?!1:!this.shouldRefine(a,i,!0)}}]),t}(Ur);var wT=m(W()),BT=m(X()),MT=m(H()),OT=m(z()),IT=m(nt()),PT=m(Te()),RT=m(xe()),wh=m(ye()),Bh=m(Y());var FT=m(_a());var TT=m(H()),xT=m(z());var AT=m(H()),_T=m(z());var bT=function(){function e(){(0,AT.default)(this,e),A(this,"frameNumberMap",new Map)}return(0,_T.default)(e,[{key:"register",value:function(t,n){var a=this.frameNumberMap.get(t)||new Map,i=a.get(n)||0;a.set(n,i+1),this.frameNumberMap.set(t,a)}},{key:"deregister",value:function(t,n){var a=this.frameNumberMap.get(t);if(a){var i=a.get(n)||1;a.set(n,i-1)}}},{key:"isZero",value:function(t,n){var a,i=((a=this.frameNumberMap.get(t))===null||a===void 0?void 0:a.get(n))||0;return i===0}}]),e}();var Ch={REQUESTED:"REQUESTED",COMPLETED:"COMPLETED",ERROR:"ERROR"},ET=function(){function e(){(0,TT.default)(this,e),A(this,"_statusMap",void 0),A(this,"pendingTilesRegister",new bT),this._statusMap={}}return(0,xT.default)(e,[{key:"add",value:function(t,n,a,i){var o=this;if(!this._statusMap[n]){var s=i.frameNumber,u=i.viewport.id;this._statusMap[n]={request:t,callback:a,key:n,frameState:i,status:Ch.REQUESTED},this.pendingTilesRegister.register(u,s),t().then(function(f){o._statusMap[n].status=Ch.COMPLETED;var l=o._statusMap[n].frameState,c=l.frameNumber,h=l.viewport.id;o.pendingTilesRegister.deregister(h,c),o._statusMap[n].callback(f,i)}).catch(function(f){o._statusMap[n].status=Ch.ERROR;var l=o._statusMap[n].frameState,c=l.frameNumber,h=l.viewport.id;o.pendingTilesRegister.deregister(h,c),a(f)})}}},{key:"update",value:function(t,n){if(this._statusMap[t]){var a=this._statusMap[t].frameState,i=a.frameNumber,o=a.viewport.id;this.pendingTilesRegister.deregister(o,i);var s=n.frameNumber,u=n.viewport.id;this.pendingTilesRegister.register(u,s),this._statusMap[t].frameState=n}}},{key:"find",value:function(t){return this._statusMap[t]}},{key:"hasPendingTiles",value:function(t,n){return!this.pendingTilesRegister.isZero(t,n)}}]),e}();function ST(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function Ks(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?ST(Object(t),!0).forEach(function(n){(0,wT.default)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ST(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function lF(e,r){var t=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=cF(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(f){throw f},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,o=!1,s;return{s:function(){t=t.call(e)},n:function(){var f=t.next();return i=f.done,f},e:function(f){o=!0,s=f},f:function(){try{!i&&t.return!=null&&t.return()}finally{if(o)throw s}}}}function cF(e,r){if(e){if(typeof e=="string")return CT(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return CT(e,r)}}function CT(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function hF(e){var r=dF();return function(){var n=(0,wh.default)(e),a;if(r){var i=(0,wh.default)(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return(0,RT.default)(this,a)}}function dF(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var LT=function(e){(0,PT.default)(t,e);var r=hF(t);function t(n){var a;return(0,MT.default)(this,t),a=r.call(this,n),A((0,IT.default)(a),"_tileManager",void 0),a._tileManager=new ET,a}return(0,OT.default)(t,[{key:"traversalFinished",value:function(a){return!this._tileManager.hasPendingTiles(a.viewport.id,this._frameNumber||0)}},{key:"shouldRefine",value:function(a,i){return a._lodJudge=Zb(a,i),a._lodJudge==="DIG"}},{key:"updateChildTiles",value:function(a,i){var o=this,s=a.header.children||[],u=a.children,f=a.tileset,l=lF(s),c;try{var h=function(){var p=c.value,v="".concat(p.id,"-").concat(i.viewport.id),g=u&&u.find(function(E){return E.id===v});if(g)g&&o.updateTile(g,i);else{var y=function(){return o._loadTile(p.id,f)},b=o._tileManager.find(v);b?o._tileManager.update(v,i):(f.tileset.nodePages&&(y=function(){return f.tileset.nodePagesTile.formTileFromNodePages(p.id)}),o._tileManager.add(y,v,function(E){return o._onTileLoad(E,a,v)},i))}};for(l.s();!(c=l.n()).done;)h()}catch(d){l.e(d)}finally{l.f()}return!1}},{key:"_loadTile",value:function(){var n=(0,BT.default)(Bh.default.mark(function i(o,s){var u,f,l;return Bh.default.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return u=s.loader,f=s.getTileUrl("".concat(s.url,"/nodes/").concat(o)),l=Ks(Ks({},s.loadOptions),{},{i3s:Ks(Ks({},s.loadOptions.i3s),{},{isTileHeader:!0})}),h.next=5,(0,FT.load)(f,u,l);case 5:return h.abrupt("return",h.sent);case 6:case"end":return h.stop()}},i)}));function a(i,o){return n.apply(this,arguments)}return a}()},{key:"_onTileLoad",value:function(a,i,o){var s=new Ri(i.tileset,a,i,o);i.children.push(s);var u=this._tileManager.find(s.id).frameState;this.updateTile(s,u),this._frameNumber===u.frameNumber&&(this.traversalFinished(u)||new Date().getTime()-this.lastUpdate>this.updateDebounceTime)&&this.executeTraversal(s,u)}}]),t}(Ur);function hr(e,r){var t=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=pF(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(f){throw f},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,o=!1,s;return{s:function(){t=t.call(e)},n:function(){var f=t.next();return i=f.done,f},e:function(f){o=!0,s=f},f:function(){try{!i&&t.return!=null&&t.return()}finally{if(o)throw s}}}}function pF(e,r){if(e){if(typeof e=="string")return kT(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return kT(e,r)}}function kT(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function DT(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function xa(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?DT(Object(t),!0).forEach(function(n){(0,zT.default)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):DT(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var mF={description:"",ellipsoid:be.WGS84,modelMatrix:new $,throttleRequests:!0,maxRequests:64,maximumMemoryUsage:32,maximumTilesSelected:0,debounceTime:0,onTileLoad:function(){},onTileUnload:function(){},onTileError:function(){},onTraversalComplete:function(r){return r},contentLoader:void 0,viewDistanceScale:1,maximumScreenSpaceError:8,loadTiles:!0,updateTransforms:!0,viewportTraversersMap:null,loadOptions:{fetch:{}},attributions:[],basePath:"",i3s:{}},Qs="Tiles In Tileset(s)",Mh="Tiles In Memory",GT="Tiles In View",NT="Tiles To Render",UT="Tiles Loaded",Oh="Tiles Loading",jT="Tiles Unloaded",HT="Failed Tile Loads",VT="Points/Vertices",Ih="Tile Memory Use",Rh=function(){function e(r,t){(0,WT.default)(this,e),A(this,"options",void 0),A(this,"loadOptions",void 0),A(this,"type",void 0),A(this,"tileset",void 0),A(this,"loader",void 0),A(this,"url",void 0),A(this,"basePath",void 0),A(this,"modelMatrix",void 0),A(this,"ellipsoid",void 0),A(this,"lodMetricType",void 0),A(this,"lodMetricValue",void 0),A(this,"refine",void 0),A(this,"root",void 0),A(this,"roots",void 0),A(this,"asset",void 0),A(this,"description",void 0),A(this,"properties",void 0),A(this,"extras",void 0),A(this,"attributions",void 0),A(this,"credits",void 0),A(this,"stats",void 0),A(this,"contentFormats",{draco:!1,meshopt:!1,dds:!1,ktx2:!1}),A(this,"traverseCounter",void 0),A(this,"geometricError",void 0),A(this,"selectedTiles",void 0),A(this,"updatePromise",null),A(this,"tilesetInitializationPromise",void 0),A(this,"cartographicCenter",void 0),A(this,"cartesianCenter",void 0),A(this,"zoom",void 0),A(this,"boundingVolume",void 0),A(this,"gpuMemoryUsageInBytes",void 0),A(this,"dynamicScreenSpaceErrorComputedDensity",void 0),A(this,"_traverser",void 0),A(this,"_cache",void 0),A(this,"_requestScheduler",void 0),A(this,"_frameNumber",void 0),A(this,"_queryParamsString",void 0),A(this,"_queryParams",void 0),A(this,"_extensionsUsed",void 0),A(this,"_tiles",void 0),A(this,"_pendingCount",void 0),A(this,"lastUpdatedVieports",void 0),A(this,"_requestedTiles",void 0),A(this,"_emptyTiles",void 0),A(this,"frameStateData",void 0),A(this,"maximumMemoryUsage",void 0),te(r),this.options=xa(xa({},mF),t),this.tileset=r,this.loader=r.loader,this.type=r.type,this.url=r.url,this.basePath=r.basePath||Jn.dirname(this.url),this.modelMatrix=this.options.modelMatrix,this.ellipsoid=this.options.ellipsoid,this.lodMetricType=r.lodMetricType,this.lodMetricValue=r.lodMetricValue,this.refine=r.root.refine,this.loadOptions=this.options.loadOptions||{},this.root=null,this.roots={},this.cartographicCenter=null,this.cartesianCenter=null,this.zoom=1,this.boundingVolume=null,this.traverseCounter=0,this.geometricError=0,this._traverser=this._initializeTraverser(),this._cache=new Pb,this._requestScheduler=new qa({throttleRequests:this.options.throttleRequests,maxRequests:this.options.maxRequests}),this._frameNumber=0,this._pendingCount=0,this._tiles={},this.selectedTiles=[],this._emptyTiles=[],this._requestedTiles=[],this.frameStateData={},this.lastUpdatedVieports=null,this._queryParams={},this._queryParamsString="",this.maximumMemoryUsage=this.options.maximumMemoryUsage||32,this.gpuMemoryUsageInBytes=0,this.stats=new rn({id:this.url}),this._initializeStats(),this._extensionsUsed=void 0,this.dynamicScreenSpaceErrorComputedDensity=0,this.extras=null,this.asset={},this.credits={},this.description=this.options.description||"",this.tilesetInitializationPromise=this._initializeTileSet(r)}return(0,JT.default)(e,[{key:"destroy",value:function(){this._destroy()}},{key:"isLoaded",value:function(){return this._pendingCount===0&&this._frameNumber!==0&&this._requestedTiles.length===0}},{key:"tiles",get:function(){return Object.values(this._tiles)}},{key:"frameNumber",get:function(){return this._frameNumber}},{key:"queryParams",get:function(){return this._queryParamsString||(this._queryParamsString=vF(this._queryParams)),this._queryParamsString}},{key:"setProps",value:function(t){this.options=xa(xa({},this.options),t)}},{key:"setOptions",value:function(t){this.options=xa(xa({},this.options),t)}},{key:"getTileUrl",value:function(t){var n=t.startsWith("data:");return n?t:"".concat(t).concat(this.queryParams)}},{key:"hasExtension",value:function(t){return Boolean(this._extensionsUsed&&this._extensionsUsed.indexOf(t)>-1)}},{key:"update",value:function(){var t=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;this.tilesetInitializationPromise.then(function(){!n&&t.lastUpdatedVieports?n=t.lastUpdatedVieports:t.lastUpdatedVieports=n,n&&t.doUpdate(n)})}},{key:"selectTiles",value:function(){var r=(0,Zs.default)(Cn.default.mark(function n(){var a=this,i,o=arguments;return Cn.default.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return i=o.length>0&&o[0]!==void 0?o[0]:null,u.next=3,this.tilesetInitializationPromise;case 3:return i&&(this.lastUpdatedVieports=i),this.updatePromise||(this.updatePromise=new Promise(function(f){setTimeout(function(){a.lastUpdatedVieports&&a.doUpdate(a.lastUpdatedVieports),f(a._frameNumber),a.updatePromise=null},a.options.debounceTime)})),u.abrupt("return",this.updatePromise);case 6:case"end":return u.stop()}},n,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"doUpdate",value:function(t){if(!("loadTiles"in this.options&&!this.options.loadTiles)&&!(this.traverseCounter>0)){var n=t instanceof Array?t:[t];this._cache.reset(),this._frameNumber++,this.traverseCounter=n.length;var a=[],i=hr(n),o;try{for(i.s();!(o=i.n()).done;){var s=o.value,u=s.id;this._needTraverse(u)?a.push(u):this.traverseCounter--}}catch(p){i.e(p)}finally{i.f()}var f=hr(n),l;try{for(f.s();!(l=f.n()).done;){var c=l.value,h=c.id;if(this.roots[h]||(this.roots[h]=this._initializeTileHeaders(this.tileset,null)),!!a.includes(h)){var d=Db(c,this._frameNumber);this._traverser.traverse(this.roots[h],d,this.options)}}}catch(p){f.e(p)}finally{f.f()}}}},{key:"_needTraverse",value:function(t){var n=t;return this.options.viewportTraversersMap&&(n=this.options.viewportTraversersMap[t]),n===t}},{key:"_onTraversalEnd",value:function(t){var n=t.viewport.id;this.frameStateData[n]||(this.frameStateData[n]={selectedTiles:[],_requestedTiles:[],_emptyTiles:[]});var a=this.frameStateData[n],i=Object.values(this._traverser.selectedTiles),o=Gb(i,t,this.options.maximumTilesSelected),s=(0,Ph.default)(o,2),u=s[0],f=s[1];a.selectedTiles=u;var l=hr(f),c;try{for(l.s();!(c=l.n()).done;){var h=c.value;h.unselect()}}catch(d){l.e(d)}finally{l.f()}a._requestedTiles=Object.values(this._traverser.requestedTiles),a._emptyTiles=Object.values(this._traverser.emptyTiles),this.traverseCounter--,!(this.traverseCounter>0)&&this._updateTiles()}},{key:"_updateTiles",value:function(){this.selectedTiles=[],this._requestedTiles=[],this._emptyTiles=[];for(var t in this.frameStateData){var n=this.frameStateData[t];this.selectedTiles=this.selectedTiles.concat(n.selectedTiles),this._requestedTiles=this._requestedTiles.concat(n._requestedTiles),this._emptyTiles=this._emptyTiles.concat(n._emptyTiles)}this.selectedTiles=this.options.onTraversalComplete(this.selectedTiles);var a=hr(this.selectedTiles),i;try{for(a.s();!(i=a.n()).done;){var o=i.value;this._tiles[o.id]=o}}catch(s){a.e(s)}finally{a.f()}this._loadTiles(),this._unloadTiles(),this._updateStats()}},{key:"_tilesChanged",value:function(t,n){if(t.length!==n.length)return!0;var a=new Set(t.map(function(s){return s.id})),i=new Set(n.map(function(s){return s.id})),o=t.filter(function(s){return!i.has(s.id)}).length>0;return o=o||n.filter(function(s){return!a.has(s.id)}).length>0,o}},{key:"_loadTiles",value:function(){var t=hr(this._requestedTiles),n;try{for(t.s();!(n=t.n()).done;){var a=n.value;a.contentUnloaded&&this._loadTile(a)}}catch(i){t.e(i)}finally{t.f()}}},{key:"_unloadTiles",value:function(){this._cache.unloadTiles(this,function(t,n){return t._unloadTile(n)})}},{key:"_updateStats",value:function(){var t=0,n=0,a=hr(this.selectedTiles),i;try{for(a.s();!(i=a.n()).done;){var o=i.value;o.contentAvailable&&o.content&&(t++,o.content.pointCount?n+=o.content.pointCount:n+=o.content.vertexCount)}}catch(s){a.e(s)}finally{a.f()}this.stats.get(GT).count=this.selectedTiles.length,this.stats.get(NT).count=t,this.stats.get(VT).count=n}},{key:"_initializeTileSet",value:function(){var r=(0,Zs.default)(Cn.default.mark(function n(a){return Cn.default.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(this.type!==tt.I3S){o.next=5;break}return this.calculateViewPropsI3S(),o.next=4,a.root;case 4:a.root=o.sent;case 5:this.root=this._initializeTileHeaders(a,null),this.type===tt.TILES3D&&(this._initializeTiles3DTileset(a),this.calculateViewPropsTiles3D()),this.type===tt.I3S&&this._initializeI3STileset();case 8:case"end":return o.stop()}},n,this)}));function t(n){return r.apply(this,arguments)}return t}()},{key:"calculateViewPropsI3S",value:function(){var t,n=this.tileset.fullExtent;if(n){var a=n.xmin,i=n.xmax,o=n.ymin,s=n.ymax,u=n.zmin,f=n.zmax;this.cartographicCenter=new w(a+(i-a)/2,o+(s-o)/2,u+(f-u)/2),this.cartesianCenter=be.WGS84.cartographicToCartesian(this.cartographicCenter,new w),this.zoom=Ah(n,this.cartographicCenter,this.cartesianCenter);return}var l=(t=this.tileset.store)===null||t===void 0?void 0:t.extent;if(l){var c=(0,Ph.default)(l,4),h=c[0],d=c[1],p=c[2],v=c[3];this.cartographicCenter=new w(h+(p-h)/2,d+(v-d)/2,0),this.cartesianCenter=be.WGS84.cartographicToCartesian(this.cartographicCenter,new w),this.zoom=Hb(l,this.cartographicCenter,this.cartesianCenter);return}console.warn("Extent is not defined in the tileset header"),this.cartographicCenter=new w,this.zoom=1}},{key:"calculateViewPropsTiles3D",value:function(){var t=this.root;te(t);var n=t.boundingVolume.center;if(!n){console.warn("center was not pre-calculated for the root tile"),this.cartographicCenter=new w,this.zoom=1;return}n[0]!==0||n[1]!==0||n[2]!==0?this.cartographicCenter=be.WGS84.cartesianToCartographic(n,new w):this.cartographicCenter=new w(0,0,-be.WGS84.radii[0]),this.cartesianCenter=n,this.zoom=jb(t.boundingVolume,this.cartographicCenter)}},{key:"_initializeStats",value:function(){this.stats.get(Qs),this.stats.get(Oh),this.stats.get(Mh),this.stats.get(GT),this.stats.get(NT),this.stats.get(UT),this.stats.get(jT),this.stats.get(HT),this.stats.get(VT),this.stats.get(Ih,"memory")}},{key:"_initializeTileHeaders",value:function(t,n){var a=new Ri(this,t.root,n);if(n&&(n.children.push(a),a.depth=n.depth+1),this.type===tt.TILES3D){var i=[];for(i.push(a);i.length>0;){var o=i.pop();this.stats.get(Qs).incrementCount();var s=o.header.children||[],u=hr(s),f;try{for(u.s();!(f=u.n()).done;){var l=f.value,c=new Ri(this,l,o);o.children.push(c),c.depth=o.depth+1,i.push(c)}}catch(h){u.e(h)}finally{u.f()}}}return a}},{key:"_initializeTraverser",value:function(){var t,n=this.type;switch(n){case tt.TILES3D:t=yT;break;case tt.I3S:t=LT;break;default:t=Ur}return new t({basePath:this.basePath,onTraversalEnd:this._onTraversalEnd.bind(this)})}},{key:"_destroyTileHeaders",value:function(t){this._destroySubtree(t)}},{key:"_loadTile",value:function(){var r=(0,Zs.default)(Cn.default.mark(function n(a){var i;return Cn.default.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,this._onStartTileLoading(),s.next=4,a.loadContent();case 4:i=s.sent,s.next=10;break;case 7:s.prev=7,s.t0=s.catch(0),this._onTileLoadError(a,s.t0);case 10:return s.prev=10,this._onEndTileLoading(),this._onTileLoad(a,i),s.finish(10);case 14:case"end":return s.stop()}},n,this,[[0,7,10,14]])}));function t(n){return r.apply(this,arguments)}return t}()},{key:"_onTileLoadError",value:function(t,n){this.stats.get(HT).incrementCount();var a=n.message||n.toString(),i=t.url;console.error("A 3D tile failed to load: ".concat(t.url," ").concat(a)),this.options.onTileError(t,a,i)}},{key:"_onTileLoad",value:function(t,n){if(n){if(this.type===tt.I3S){var a,i,o=((a=this.tileset)===null||a===void 0||(i=a.nodePagesTile)===null||i===void 0?void 0:i.nodesInNodePages)||0;this.stats.get(Qs).reset(),this.stats.get(Qs).addCount(o)}t&&t.content&&Rb(t,t.content),this.updateContentTypes(t),this._addTileToCache(t),this.options.onTileLoad(t)}}},{key:"updateContentTypes",value:function(t){if(this.type===tt.I3S)switch(t.header.isDracoGeometry&&(this.contentFormats.draco=!0),t.header.textureFormat){case"dds":this.contentFormats.dds=!0;break;case"ktx2":this.contentFormats.ktx2=!0;break;default:}else if(this.type===tt.TILES3D){var n,a=((n=t.content)===null||n===void 0?void 0:n.gltf)||{},i=a.extensionsRemoved,o=i===void 0?[]:i;o.includes("KHR_draco_mesh_compression")&&(this.contentFormats.draco=!0),o.includes("EXT_meshopt_compression")&&(this.contentFormats.meshopt=!0),o.includes("KHR_texture_basisu")&&(this.contentFormats.ktx2=!0)}}},{key:"_onStartTileLoading",value:function(){this._pendingCount++,this.stats.get(Oh).incrementCount()}},{key:"_onEndTileLoading",value:function(){this._pendingCount--,this.stats.get(Oh).decrementCount()}},{key:"_addTileToCache",value:function(t){this._cache.add(this,t,function(n){return n._updateCacheStats(t)})}},{key:"_updateCacheStats",value:function(t){this.stats.get(UT).incrementCount(),this.stats.get(Mh).incrementCount(),this.gpuMemoryUsageInBytes+=t.content.byteLength||0,this.stats.get(Ih).count=this.gpuMemoryUsageInBytes}},{key:"_unloadTile",value:function(t){this.gpuMemoryUsageInBytes-=t.content&&t.content.byteLength||0,this.stats.get(Mh).decrementCount(),this.stats.get(jT).incrementCount(),this.stats.get(Ih).count=this.gpuMemoryUsageInBytes,this.options.onTileUnload(t),t.unloadContent()}},{key:"_destroy",value:function(){var t=[];for(this.root&&t.push(this.root);t.length>0;){var n=t.pop(),a=hr(n.children),i;try{for(a.s();!(i=a.n()).done;){var o=i.value;t.push(o)}}catch(s){a.e(s)}finally{a.f()}this._destroyTile(n)}this.root=null}},{key:"_destroySubtree",value:function(t){var n=t,a=[];for(a.push(n);a.length>0;){t=a.pop();var i=hr(t.children),o;try{for(i.s();!(o=i.n()).done;){var s=o.value;a.push(s)}}catch(u){i.e(u)}finally{i.f()}t!==n&&this._destroyTile(t)}n.children=[]}},{key:"_destroyTile",value:function(t){this._cache.unloadTile(this,t),this._unloadTile(t),t.destroy()}},{key:"_initializeTiles3DTileset",value:function(t){if(this.asset=t.asset,!this.asset)throw new Error("Tileset must have an asset property.");if(this.asset.version!=="0.0"&&this.asset.version!=="1.0")throw new Error("The tileset must be 3D Tiles version 0.0 or 1.0.");"tilesetVersion"in this.asset&&(this._queryParams.v=this.asset.tilesetVersion),this.credits={attributions:this.options.attributions||[]},this.description=this.options.description||"",this.properties=t.properties,this.geometricError=t.geometricError,this._extensionsUsed=t.extensionsUsed,this.extras=t.extras}},{key:"_initializeI3STileset",value:function(){this.loadOptions.i3s&&"token"in this.loadOptions.i3s&&(this._queryParams.token=this.loadOptions.i3s.token)}}]),e}();function vF(e){for(var r=[],t=0,n=Object.keys(e);t<n.length;t++){var a=n[t];r.push("".concat(a,"=").concat(e[a]))}switch(r.length){case 0:return"";case 1:return"?".concat(r[0]);default:return"?".concat(r.join("&"))}}var Iu=m(X()),Nn=m(Y());var $s="3.3.1";var iC=m(X()),Ep=m(Y());var wn={COMPOSITE:"cmpt",POINT_CLOUD:"pnts",BATCHED_3D_MODEL:"b3dm",INSTANCED_3D_MODEL:"i3dm",GEOMETRY:"geom",VECTOR:"vect",GLTF:"glTF"},TY=Object.keys(wn);function Fh(e,r,t){te(e instanceof ArrayBuffer);var n=new TextDecoder("utf8"),a=new Uint8Array(e,r,t),i=n.decode(a);return i}function qT(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=new DataView(e);return"".concat(String.fromCharCode(t.getUint8(r+0))).concat(String.fromCharCode(t.getUint8(r+1))).concat(String.fromCharCode(t.getUint8(r+2))).concat(String.fromCharCode(t.getUint8(r+3)))}var AE=m(W()),mu=m(X()),On=m(Y());var Zx=m(X()),$x=m(W()),qh=m(Y());var YT=m(Xe());var XT="3.3.1";var gF={draco:{decoderType:(typeof WebAssembly>"u"?"undefined":(0,YT.default)(WebAssembly))==="object"?"wasm":"js",libraryPath:"libs/",extraAttributes:{},attributeNameEntry:void 0}},KT={name:"Draco",id:er?"draco":"draco-nodejs",module:"draco",shapes:["mesh"],version:XT,worker:!0,extensions:["drc"],mimeTypes:["application/octet-stream"],binary:!0,tests:["DRACO"],options:gF};var Hh=m(Et()),Ux=m(ce()),jx=m(W()),Hx=m(H()),Vx=m(z());function Bn(e){for(var r=1/0,t=1/0,n=1/0,a=-1/0,i=-1/0,o=-1/0,s=e.POSITION?e.POSITION.value:[],u=s&&s.length,f=0;f<u;f+=3){var l=s[f],c=s[f+1],h=s[f+2];r=l<r?l:r,t=c<t?c:t,n=h<n?h:n,a=l>a?l:a,i=c>i?c:i,o=h>o?h:o}return[[r,t,n],[a,i,o]]}var Lh=m(Et()),ex=m(H()),tx=m(z());function QT(e,r){if(!e)throw new Error(r||"loader assertion failed.")}function kh(e,r){var t=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=yF(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(f){throw f},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,o=!1,s;return{s:function(){t=t.call(e)},n:function(){var f=t.next();return i=f.done,f},e:function(f){o=!0,s=f},f:function(){try{!i&&t.return!=null&&t.return()}finally{if(o)throw s}}}}function yF(e,r){if(e){if(typeof e=="string")return ZT(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return ZT(e,r)}}function ZT(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var Fi=function(){function e(r,t){(0,ex.default)(this,e),A(this,"fields",void 0),A(this,"metadata",void 0),QT(Array.isArray(r)),AF(r),this.fields=r,this.metadata=t||new Map}return(0,tx.default)(e,[{key:"compareTo",value:function(t){if(this.metadata!==t.metadata||this.fields.length!==t.fields.length)return!1;for(var n=0;n<this.fields.length;++n)if(!this.fields[n].compareTo(t.fields[n]))return!1;return!0}},{key:"select",value:function(){for(var t=Object.create(null),n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];for(var o=0,s=a;o<s.length;o++){var u=s[o];t[u]=!0}var f=this.fields.filter(function(l){return t[l.name]});return new e(f,this.metadata)}},{key:"selectAt",value:function(){for(var t=this,n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];var o=a.map(function(s){return t.fields[s]}).filter(Boolean);return new e(o,this.metadata)}},{key:"assign",value:function(t){var n,a=this.metadata;if(t instanceof e){var i=t;n=i.fields,a=$T($T(new Map,this.metadata),i.metadata)}else n=t;var o=Object.create(null),s=kh(this.fields),u;try{for(s.s();!(u=s.n()).done;){var f=u.value;o[f.name]=f}}catch(p){s.e(p)}finally{s.f()}var l=kh(n),c;try{for(l.s();!(c=l.n()).done;){var h=c.value;o[h.name]=h}}catch(p){l.e(p)}finally{l.f()}var d=Object.values(o);return new e(d,a)}}]),e}();function AF(e){var r={},t=kh(e),n;try{for(t.s();!(n=t.n()).done;){var a=n.value;r[a.name]&&console.warn("Schema: duplicated field name",a.name,a),r[a.name]=!0}}catch(i){t.e(i)}finally{t.f()}}function $T(e,r){return new Map([].concat((0,Lh.default)(e||new Map),(0,Lh.default)(r||new Map)))}var rx=m(H()),nx=m(z());var Li=function(){function e(r,t){(0,rx.default)(this,e);var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:new Map;A(this,"name",void 0),A(this,"type",void 0),A(this,"nullable",void 0),A(this,"metadata",void 0),this.name=r,this.type=t,this.nullable=n,this.metadata=a}return(0,nx.default)(e,[{key:"typeId",get:function(){return this.type&&this.type.typeId}},{key:"clone",value:function(){return new e(this.name,this.type,this.nullable,this.metadata)}},{key:"compareTo",value:function(t){return this.name===t.name&&this.type===t.type&&this.nullable===t.nullable&&this.metadata===t.metadata}},{key:"toString",value:function(){return"".concat(this.type).concat(this.nullable?", nullable":"").concat(this.metadata?", metadata: ".concat(this.metadata):"")}}]),e}();var bt=m(nt()),le=m(Te()),ax=m(xe()),Dh=m(ye()),se=m(H()),mt=m(z());var fe;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.Float=3]="Float",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct=13]="Struct",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Dictionary=-1]="Dictionary",e[e.Int8=-2]="Int8",e[e.Int16=-3]="Int16",e[e.Int32=-4]="Int32",e[e.Int64=-5]="Int64",e[e.Uint8=-6]="Uint8",e[e.Uint16=-7]="Uint16",e[e.Uint32=-8]="Uint32",e[e.Uint64=-9]="Uint64",e[e.Float16=-10]="Float16",e[e.Float32=-11]="Float32",e[e.Float64=-12]="Float64",e[e.DateDay=-13]="DateDay",e[e.DateMillisecond=-14]="DateMillisecond",e[e.TimestampSecond=-15]="TimestampSecond",e[e.TimestampMillisecond=-16]="TimestampMillisecond",e[e.TimestampMicrosecond=-17]="TimestampMicrosecond",e[e.TimestampNanosecond=-18]="TimestampNanosecond",e[e.TimeSecond=-19]="TimeSecond",e[e.TimeMillisecond=-20]="TimeMillisecond",e[e.TimeMicrosecond=-21]="TimeMicrosecond",e[e.TimeNanosecond=-22]="TimeNanosecond",e[e.DenseUnion=-23]="DenseUnion",e[e.SparseUnion=-24]="SparseUnion",e[e.IntervalDayTime=-25]="IntervalDayTime",e[e.IntervalYearMonth=-26]="IntervalYearMonth"})(fe||(fe={}));function de(e){var r=_F();return function(){var n=(0,Dh.default)(e),a;if(r){var i=(0,Dh.default)(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return(0,ax.default)(this,a)}}function _F(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var ix,ox,sx,ux,fx,lx,cx,hx,vt=function(){function e(){(0,se.default)(this,e)}return(0,mt.default)(e,[{key:"typeId",get:function(){return fe.NONE}},{key:"compareTo",value:function(t){return this===t}}],[{key:"isNull",value:function(t){return t&&t.typeId===fe.Null}},{key:"isInt",value:function(t){return t&&t.typeId===fe.Int}},{key:"isFloat",value:function(t){return t&&t.typeId===fe.Float}},{key:"isBinary",value:function(t){return t&&t.typeId===fe.Binary}},{key:"isUtf8",value:function(t){return t&&t.typeId===fe.Utf8}},{key:"isBool",value:function(t){return t&&t.typeId===fe.Bool}},{key:"isDecimal",value:function(t){return t&&t.typeId===fe.Decimal}},{key:"isDate",value:function(t){return t&&t.typeId===fe.Date}},{key:"isTime",value:function(t){return t&&t.typeId===fe.Time}},{key:"isTimestamp",value:function(t){return t&&t.typeId===fe.Timestamp}},{key:"isInterval",value:function(t){return t&&t.typeId===fe.Interval}},{key:"isList",value:function(t){return t&&t.typeId===fe.List}},{key:"isStruct",value:function(t){return t&&t.typeId===fe.Struct}},{key:"isUnion",value:function(t){return t&&t.typeId===fe.Union}},{key:"isFixedSizeBinary",value:function(t){return t&&t.typeId===fe.FixedSizeBinary}},{key:"isFixedSizeList",value:function(t){return t&&t.typeId===fe.FixedSizeList}},{key:"isMap",value:function(t){return t&&t.typeId===fe.Map}},{key:"isDictionary",value:function(t){return t&&t.typeId===fe.Dictionary}}]),e}(),dx=function(e,r){(0,le.default)(n,e);var t=de(n);function n(){return(0,se.default)(this,n),t.apply(this,arguments)}return(0,mt.default)(n,[{key:"typeId",get:function(){return fe.Null}},{key:r,get:function(){return"Null"}},{key:"toString",value:function(){return"Null"}}]),n}(vt,Symbol.toStringTag),px=function(e,r){(0,le.default)(n,e);var t=de(n);function n(){return(0,se.default)(this,n),t.apply(this,arguments)}return(0,mt.default)(n,[{key:"typeId",get:function(){return fe.Bool}},{key:r,get:function(){return"Bool"}},{key:"toString",value:function(){return"Bool"}}]),n}(vt,Symbol.toStringTag);ix=Symbol.toStringTag;var Xt=function(e,r){(0,le.default)(n,e);var t=de(n);function n(a,i){var o;return(0,se.default)(this,n),o=t.call(this),A((0,bt.default)(o),"isSigned",void 0),A((0,bt.default)(o),"bitWidth",void 0),o.isSigned=a,o.bitWidth=i,o}return(0,mt.default)(n,[{key:"typeId",get:function(){return fe.Int}},{key:r,get:function(){return"Int"}},{key:"toString",value:function(){return"".concat(this.isSigned?"I":"Ui","nt").concat(this.bitWidth)}}]),n}(vt,ix),eu=function(e){(0,le.default)(t,e);var r=de(t);function t(){return(0,se.default)(this,t),r.call(this,!0,8)}return t}(Xt),tu=function(e){(0,le.default)(t,e);var r=de(t);function t(){return(0,se.default)(this,t),r.call(this,!0,16)}return t}(Xt),ru=function(e){(0,le.default)(t,e);var r=de(t);function t(){return(0,se.default)(this,t),r.call(this,!0,32)}return t}(Xt),mx=function(e){(0,le.default)(t,e);var r=de(t);function t(){return(0,se.default)(this,t),r.call(this,!0,64)}return t}(Xt),nu=function(e){(0,le.default)(t,e);var r=de(t);function t(){return(0,se.default)(this,t),r.call(this,!1,8)}return t}(Xt),au=function(e){(0,le.default)(t,e);var r=de(t);function t(){return(0,se.default)(this,t),r.call(this,!1,16)}return t}(Xt),iu=function(e){(0,le.default)(t,e);var r=de(t);function t(){return(0,se.default)(this,t),r.call(this,!1,32)}return t}(Xt),vx=function(e){(0,le.default)(t,e);var r=de(t);function t(){return(0,se.default)(this,t),r.call(this,!1,64)}return t}(Xt),Gh={HALF:16,SINGLE:32,DOUBLE:64};ox=Symbol.toStringTag;var ki=function(e,r){(0,le.default)(n,e);var t=de(n);function n(a){var i;return(0,se.default)(this,n),i=t.call(this),A((0,bt.default)(i),"precision",void 0),i.precision=a,i}return(0,mt.default)(n,[{key:"typeId",get:function(){return fe.Float}},{key:r,get:function(){return"Float"}},{key:"toString",value:function(){return"Float".concat(this.precision)}}]),n}(vt,ox),gx=function(e){(0,le.default)(t,e);var r=de(t);function t(){return(0,se.default)(this,t),r.call(this,Gh.HALF)}return t}(ki),ou=function(e){(0,le.default)(t,e);var r=de(t);function t(){return(0,se.default)(this,t),r.call(this,Gh.SINGLE)}return t}(ki),su=function(e){(0,le.default)(t,e);var r=de(t);function t(){return(0,se.default)(this,t),r.call(this,Gh.DOUBLE)}return t}(ki),yx=function(e,r){(0,le.default)(n,e);var t=de(n);function n(){return(0,se.default)(this,n),t.call(this)}return(0,mt.default)(n,[{key:"typeId",get:function(){return fe.Binary}},{key:"toString",value:function(){return"Binary"}},{key:r,get:function(){return"Binary"}}]),n}(vt,Symbol.toStringTag),Ax=function(e,r){(0,le.default)(n,e);var t=de(n);function n(){return(0,se.default)(this,n),t.apply(this,arguments)}return(0,mt.default)(n,[{key:"typeId",get:function(){return fe.Utf8}},{key:r,get:function(){return"Utf8"}},{key:"toString",value:function(){return"Utf8"}}]),n}(vt,Symbol.toStringTag),Nh={DAY:0,MILLISECOND:1};sx=Symbol.toStringTag;var uu=function(e,r){(0,le.default)(n,e);var t=de(n);function n(a){var i;return(0,se.default)(this,n),i=t.call(this),A((0,bt.default)(i),"unit",void 0),i.unit=a,i}return(0,mt.default)(n,[{key:"typeId",get:function(){return fe.Date}},{key:r,get:function(){return"Date"}},{key:"toString",value:function(){return"Date".concat((this.unit+1)*32,"<").concat(Nh[this.unit],">")}}]),n}(vt,sx),_x=function(e){(0,le.default)(t,e);var r=de(t);function t(){return(0,se.default)(this,t),r.call(this,Nh.DAY)}return t}(uu),bx=function(e){(0,le.default)(t,e);var r=de(t);function t(){return(0,se.default)(this,t),r.call(this,Nh.MILLISECOND)}return t}(uu),jr={SECOND:1,MILLISECOND:1e3,MICROSECOND:1e6,NANOSECOND:1e9};ux=Symbol.toStringTag;var fu=function(e,r){(0,le.default)(n,e);var t=de(n);function n(a,i){var o;return(0,se.default)(this,n),o=t.call(this),A((0,bt.default)(o),"unit",void 0),A((0,bt.default)(o),"bitWidth",void 0),o.unit=a,o.bitWidth=i,o}return(0,mt.default)(n,[{key:"typeId",get:function(){return fe.Time}},{key:"toString",value:function(){return"Time".concat(this.bitWidth,"<").concat(jr[this.unit],">")}},{key:r,get:function(){return"Time"}}]),n}(vt,ux),Tx=function(e){(0,le.default)(t,e);var r=de(t);function t(){return(0,se.default)(this,t),r.call(this,jr.SECOND,32)}return t}(fu),xx=function(e){(0,le.default)(t,e);var r=de(t);function t(){return(0,se.default)(this,t),r.call(this,jr.MILLISECOND,32)}return t}(fu);fx=Symbol.toStringTag;var Ea=function(e,r){(0,le.default)(n,e);var t=de(n);function n(a){var i;(0,se.default)(this,n);var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return i=t.call(this),A((0,bt.default)(i),"unit",void 0),A((0,bt.default)(i),"timezone",void 0),i.unit=a,i.timezone=o,i}return(0,mt.default)(n,[{key:"typeId",get:function(){return fe.Timestamp}},{key:r,get:function(){return"Timestamp"}},{key:"toString",value:function(){return"Timestamp<".concat(jr[this.unit]).concat(this.timezone?", ".concat(this.timezone):"",">")}}]),n}(vt,fx),Ex=function(e){(0,le.default)(t,e);var r=de(t);function t(){(0,se.default)(this,t);var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return r.call(this,jr.SECOND,n)}return t}(Ea),Sx=function(e){(0,le.default)(t,e);var r=de(t);function t(){(0,se.default)(this,t);var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return r.call(this,jr.MILLISECOND,n)}return t}(Ea),Cx=function(e){(0,le.default)(t,e);var r=de(t);function t(){(0,se.default)(this,t);var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return r.call(this,jr.MICROSECOND,n)}return t}(Ea),wx=function(e){(0,le.default)(t,e);var r=de(t);function t(){(0,se.default)(this,t);var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return r.call(this,jr.NANOSECOND,n)}return t}(Ea),Uh={DAY_TIME:0,YEAR_MONTH:1};lx=Symbol.toStringTag;var lu=function(e,r){(0,le.default)(n,e);var t=de(n);function n(a){var i;return(0,se.default)(this,n),i=t.call(this),A((0,bt.default)(i),"unit",void 0),i.unit=a,i}return(0,mt.default)(n,[{key:"typeId",get:function(){return fe.Interval}},{key:r,get:function(){return"Interval"}},{key:"toString",value:function(){return"Interval<".concat(Uh[this.unit],">")}}]),n}(vt,lx),Bx=function(e){(0,le.default)(t,e);var r=de(t);function t(){return(0,se.default)(this,t),r.call(this,Uh.DAY_TIME)}return t}(lu),Mx=function(e){(0,le.default)(t,e);var r=de(t);function t(){return(0,se.default)(this,t),r.call(this,Uh.YEAR_MONTH)}return t}(lu);cx=Symbol.toStringTag;var cu=function(e,r){(0,le.default)(n,e);var t=de(n);function n(a,i){var o;return(0,se.default)(this,n),o=t.call(this),A((0,bt.default)(o),"listSize",void 0),A((0,bt.default)(o),"children",void 0),o.listSize=a,o.children=[i],o}return(0,mt.default)(n,[{key:"typeId",get:function(){return fe.FixedSizeList}},{key:"valueType",get:function(){return this.children[0].type}},{key:"valueField",get:function(){return this.children[0]}},{key:r,get:function(){return"FixedSizeList"}},{key:"toString",value:function(){return"FixedSizeList[".concat(this.listSize,"]<").concat(this.valueType,">")}}]),n}(vt,cx);hx=Symbol.toStringTag;var Ox=function(e,r){(0,le.default)(n,e);var t=de(n);function n(a){var i;return(0,se.default)(this,n),i=t.call(this),A((0,bt.default)(i),"children",void 0),i.children=a,i}return(0,mt.default)(n,[{key:"typeId",get:function(){return fe.Struct}},{key:"toString",value:function(){return"Struct<{".concat(this.children.map(function(i){return"".concat(i.name,":").concat(i.type)}).join(", "),"}>")}},{key:r,get:function(){return"Struct"}}]),n}(vt,hx);function Ix(e){switch(e.constructor){case Int8Array:return new eu;case Uint8Array:return new nu;case Int16Array:return new tu;case Uint16Array:return new au;case Int32Array:return new ru;case Uint32Array:return new iu;case Float32Array:return new ou;case Float64Array:return new su;default:throw new Error("array type not supported")}}function jh(e,r,t){var n=Ix(r.value),a=t||Px(r),i=new Li(e,new cu(r.size,new Li("value",n)),!1,a);return i}function Px(e){var r=new Map;return"byteOffset"in e&&r.set("byteOffset",e.byteOffset.toString(10)),"byteStride"in e&&r.set("byteStride",e.byteStride.toString(10)),"normalized"in e&&r.set("normalized",e.normalized.toString()),r}function Fx(e,r,t){var n=Lx(r.metadata),a=[],i=bF(r.attributes);for(var o in e){var s=e[o],u=Rx(o,s,i[o]);a.push(u)}if(t){var f=Rx("indices",t);a.push(f)}return new Fi(a,n)}function bF(e){var r={};for(var t in e){var n=e[t];r[n.name||"undefined"]=n}return r}function Rx(e,r,t){var n=t?Lx(t.metadata):void 0,a=jh(e,r,n);return a}function Lx(e){var r=new Map;for(var t in e)r.set("".concat(t,".string"),JSON.stringify(e[t]));return r}function TF(e,r){var t=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=xF(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(f){throw f},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,o=!1,s;return{s:function(){t=t.call(e)},n:function(){var f=t.next();return i=f.done,f},e:function(f){o=!0,s=f},f:function(){try{!i&&t.return!=null&&t.return()}finally{if(o)throw s}}}}function xF(e,r){if(e){if(typeof e=="string")return kx(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return kx(e,r)}}function kx(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function Dx(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function Gx(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?Dx(Object(t),!0).forEach(function(n){(0,jx.default)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Dx(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var Nx={POSITION:"POSITION",NORMAL:"NORMAL",COLOR:"COLOR_0",TEX_COORD:"TEXCOORD_0"},EF={1:Int8Array,2:Uint8Array,3:Int16Array,4:Uint16Array,5:Int32Array,6:Uint32Array,9:Float32Array},SF=4,zx=function(){function e(r){(0,Hx.default)(this,e),A(this,"draco",void 0),A(this,"decoder",void 0),A(this,"metadataQuerier",void 0),this.draco=r,this.decoder=new this.draco.Decoder,this.metadataQuerier=new this.draco.MetadataQuerier}return(0,Vx.default)(e,[{key:"destroy",value:function(){this.draco.destroy(this.decoder),this.draco.destroy(this.metadataQuerier)}},{key:"parseSync",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=new this.draco.DecoderBuffer;a.Init(new Int8Array(t),t.byteLength),this._disableAttributeTransforms(n);var i=this.decoder.GetEncodedGeometryType(a),o=i===this.draco.TRIANGULAR_MESH?new this.draco.Mesh:new this.draco.PointCloud;try{var s;switch(i){case this.draco.TRIANGULAR_MESH:s=this.decoder.DecodeBufferToMesh(a,o);break;case this.draco.POINT_CLOUD:s=this.decoder.DecodeBufferToPointCloud(a,o);break;default:throw new Error("DRACO: Unknown geometry type.")}if(!s.ok()||!o.ptr){var u="DRACO decompression failed: ".concat(s.error_msg());throw new Error(u)}var f=this._getDracoLoaderData(o,i,n),l=this._getMeshData(o,f,n),c=Bn(l.attributes),h=Fx(l.attributes,f,l.indices),d=Gx(Gx({loader:"draco",loaderData:f,header:{vertexCount:o.num_points(),boundingBox:c}},l),{},{schema:h});return d}finally{this.draco.destroy(a),o&&this.draco.destroy(o)}}},{key:"_getDracoLoaderData",value:function(t,n,a){var i=this._getTopLevelMetadata(t),o=this._getDracoAttributes(t,a);return{geometry_type:n,num_attributes:t.num_attributes(),num_points:t.num_points(),num_faces:t instanceof this.draco.Mesh?t.num_faces():0,metadata:i,attributes:o}}},{key:"_getDracoAttributes",value:function(t,n){for(var a={},i=0;i<t.num_attributes();i++){var o=this.decoder.GetAttribute(t,i),s=this._getAttributeMetadata(t,i);a[o.unique_id()]={unique_id:o.unique_id(),attribute_type:o.attribute_type(),data_type:o.data_type(),num_components:o.num_components(),byte_offset:o.byte_offset(),byte_stride:o.byte_stride(),normalized:o.normalized(),attribute_index:i,metadata:s};var u=this._getQuantizationTransform(o,n);u&&(a[o.unique_id()].quantization_transform=u);var f=this._getOctahedronTransform(o,n);f&&(a[o.unique_id()].octahedron_transform=f)}return a}},{key:"_getMeshData",value:function(t,n,a){var i=this._getMeshAttributes(n,t,a),o=i.POSITION;if(!o)throw new Error("DRACO: No position attribute found.");if(t instanceof this.draco.Mesh)switch(a.topology){case"triangle-strip":return{topology:"triangle-strip",mode:4,attributes:i,indices:{value:this._getTriangleStripIndices(t),size:1}};case"triangle-list":default:return{topology:"triangle-list",mode:5,attributes:i,indices:{value:this._getTriangleListIndices(t),size:1}}}return{topology:"point-list",mode:0,attributes:i}}},{key:"_getMeshAttributes",value:function(t,n,a){for(var i={},o=0,s=Object.values(t.attributes);o<s.length;o++){var u=s[o],f=this._deduceAttributeName(u,a);u.name=f;var l=this._getAttributeValues(n,u),c=l.value,h=l.size;i[f]={value:c,size:h,byteOffset:u.byte_offset,byteStride:u.byte_stride,normalized:u.normalized}}return i}},{key:"_getTriangleListIndices",value:function(t){var n=t.num_faces(),a=n*3,i=a*SF,o=this.draco._malloc(i);try{return this.decoder.GetTrianglesUInt32Array(t,i,o),new Uint32Array(this.draco.HEAPF32.buffer,o,a).slice()}finally{this.draco._free(o)}}},{key:"_getTriangleStripIndices",value:function(t){var n=new this.draco.DracoInt32Array;try{return this.decoder.GetTriangleStripsFromMesh(t,n),BF(n)}finally{this.draco.destroy(n)}}},{key:"_getAttributeValues",value:function(t,n){var a=EF[n.data_type],i=n.num_components,o=t.num_points(),s=o*i,u=s*a.BYTES_PER_ELEMENT,f=CF(this.draco,a),l,c=this.draco._malloc(u);try{var h=this.decoder.GetAttribute(t,n.attribute_index);this.decoder.GetAttributeDataArrayForAllPoints(t,h,f,u,c),l=new a(this.draco.HEAPF32.buffer,c,s).slice()}finally{this.draco._free(c)}return{value:l,size:i}}},{key:"_deduceAttributeName",value:function(t,n){for(var a=t.unique_id,i=0,o=Object.entries(n.extraAttributes||{});i<o.length;i++){var s=(0,Ux.default)(o[i],2),u=s[0],f=s[1];if(f===a)return u}var l=t.attribute_type;for(var c in Nx){var h=this.draco[c];if(h===l)return Nx[c]}var d=n.attributeNameEntry||"name";return t.metadata[d]?t.metadata[d].string:"CUSTOM_ATTRIBUTE_".concat(a)}},{key:"_getTopLevelMetadata",value:function(t){var n=this.decoder.GetMetadata(t);return this._getDracoMetadata(n)}},{key:"_getAttributeMetadata",value:function(t,n){var a=this.decoder.GetAttributeMetadata(t,n);return this._getDracoMetadata(a)}},{key:"_getDracoMetadata",value:function(t){if(!t||!t.ptr)return{};for(var n={},a=this.metadataQuerier.NumEntries(t),i=0;i<a;i++){var o=this.metadataQuerier.GetEntryName(t,i);n[o]=this._getDracoMetadataField(t,o)}return n}},{key:"_getDracoMetadataField",value:function(t,n){var a=new this.draco.DracoInt32Array;try{this.metadataQuerier.GetIntEntryArray(t,n,a);var i=wF(a);return{int:this.metadataQuerier.GetIntEntry(t,n),string:this.metadataQuerier.GetStringEntry(t,n),double:this.metadataQuerier.GetDoubleEntry(t,n),intArray:i}}finally{this.draco.destroy(a)}}},{key:"_disableAttributeTransforms",value:function(t){var n=t.quantizedAttributes,a=n===void 0?[]:n,i=t.octahedronAttributes,o=i===void 0?[]:i,s=[].concat((0,Hh.default)(a),(0,Hh.default)(o)),u=TF(s),f;try{for(u.s();!(f=u.n()).done;){var l=f.value;this.decoder.SkipAttributeTransform(this.draco[l])}}catch(c){u.e(c)}finally{u.f()}}},{key:"_getQuantizationTransform",value:function(t,n){var a=this,i=n.quantizedAttributes,o=i===void 0?[]:i,s=t.attribute_type(),u=o.map(function(l){return a.decoder[l]}).includes(s);if(u){var f=new this.draco.AttributeQuantizationTransform;try{if(f.InitFromAttribute(t))return{quantization_bits:f.quantization_bits(),range:f.range(),min_values:new Float32Array([1,2,3]).map(function(l){return f.min_value(l)})}}finally{this.draco.destroy(f)}}return null}},{key:"_getOctahedronTransform",value:function(t,n){var a=this,i=n.octahedronAttributes,o=i===void 0?[]:i,s=t.attribute_type(),u=o.map(function(l){return a.decoder[l]}).includes(s);if(u){var f=new this.draco.AttributeQuantizationTransform;try{if(f.InitFromAttribute(t))return{quantization_bits:f.quantization_bits()}}finally{this.draco.destroy(f)}}return null}}]),e}();function CF(e,r){switch(r){case Float32Array:return e.DT_FLOAT32;case Int8Array:return e.DT_INT8;case Int16Array:return e.DT_INT16;case Int32Array:return e.DT_INT32;case Uint8Array:return e.DT_UINT8;case Uint16Array:return e.DT_UINT16;case Uint32Array:return e.DT_UINT32;default:return e.DT_INVALID}}function wF(e){for(var r=e.size(),t=new Int32Array(r),n=0;n<r;n++)t[n]=e.GetValue(n);return t}function BF(e){for(var r=e.size(),t=new Int32Array(r),n=0;n<r;n++)t[n]=e.GetValue(n);return t}var qx=m(ce()),Xx=m(W()),Wh=m(X()),Gi=m(Y());function Wx(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function Jx(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?Wx(Object(t),!0).forEach(function(n){(0,Xx.default)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Wx(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var MF="1.5.5",OF="1.4.1",Jh="https://www.gstatic.com/draco/versioned/decoders/".concat(MF),IF="".concat(Jh,"/draco_decoder.js"),PF="".concat(Jh,"/draco_wasm_wrapper.js"),RF="".concat(Jh,"/draco_decoder.wasm"),lK="https://raw.githubusercontent.com/google/draco/".concat(OF,"/javascript/draco_encoder.js"),Di;function Yx(e){return Vh.apply(this,arguments)}function Vh(){return Vh=(0,Wh.default)(Gi.default.mark(function e(r){var t;return Gi.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t=r.modules||{},t.draco3d?Di=Di||t.draco3d.createDecoderModule({}).then(function(i){return{draco:i}}):Di=Di||FF(r),a.next=4,Di;case 4:return a.abrupt("return",a.sent);case 5:case"end":return a.stop()}},e)})),Vh.apply(this,arguments)}function FF(e){return zh.apply(this,arguments)}function zh(){return zh=(0,Wh.default)(Gi.default.mark(function e(r){var t,n,a,i;return Gi.default.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:s.t0=r.draco&&r.draco.decoderType,s.next=s.t0==="js"?3:(s.t0==="wasm",7);break;case 3:return s.next=5,Ut(IF,"draco",r);case 5:return t=s.sent,s.abrupt("break",21);case 7:return s.t1=Promise,s.next=10,Ut(PF,"draco",r);case 10:return s.t2=s.sent,s.next=13,Ut(RF,"draco",r);case 13:return s.t3=s.sent,s.t4=[s.t2,s.t3],s.next=17,s.t1.all.call(s.t1,s.t4);case 17:a=s.sent,i=(0,qx.default)(a,2),t=i[0],n=i[1];case 21:return t=t||globalThis.DracoDecoderModule,s.next=24,LF(t,n);case 24:return s.abrupt("return",s.sent);case 25:case"end":return s.stop()}},e)})),zh.apply(this,arguments)}function LF(e,r){var t={};return r&&(t.wasmBinary=r),new Promise(function(n){e(Jx(Jx({},t),{},{onModuleLoaded:function(i){return n({draco:i})}}))})}function Kx(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function Qx(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?Kx(Object(t),!0).forEach(function(n){(0,$x.default)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Kx(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var hu=Qx(Qx({},KT),{},{parse:kF});function kF(e,r){return Xh.apply(this,arguments)}function Xh(){return Xh=(0,Zx.default)(qh.default.mark(function e(r,t){var n,a,i;return qh.default.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,Yx(t);case 2:return n=s.sent,a=n.draco,i=new zx(a),s.prev=5,s.abrupt("return",i.parseSync(r,t?.draco));case 7:return s.prev=7,i.destroy(),s.finish(7);case 10:case"end":return s.stop()}},e,null,[[5,,7,10]])})),Xh.apply(this,arguments)}var eE=m(H()),tE=m(z()),dr=m(W());var Yt,Yh=(Yt={},(0,dr.default)(Yt,5130,Float64Array),(0,dr.default)(Yt,5126,Float32Array),(0,dr.default)(Yt,5123,Uint16Array),(0,dr.default)(Yt,5125,Uint32Array),(0,dr.default)(Yt,5121,Uint8Array),(0,dr.default)(Yt,5120,Int8Array),(0,dr.default)(Yt,5122,Int16Array),(0,dr.default)(Yt,5124,Int32Array),Yt),DF={DOUBLE:5130,FLOAT:5126,UNSIGNED_SHORT:5123,UNSIGNED_INT:5125,UNSIGNED_BYTE:5121,BYTE:5120,SHORT:5122,INT:5124},Kh="Failed to convert GL type",Hr=function(){function e(){(0,eE.default)(this,e)}return(0,tE.default)(e,null,[{key:"fromTypedArray",value:function(t){t=ArrayBuffer.isView(t)?t.constructor:t;for(var n in Yh){var a=Yh[n];if(a===t)return n}throw new Error(Kh)}},{key:"fromName",value:function(t){var n=DF[t];if(!n)throw new Error(Kh);return n}},{key:"getArrayType",value:function(t){switch(t){case 33635:case 32819:case 32820:return Uint16Array;default:var n=Yh[t];if(!n)throw new Error(Kh);return n}}},{key:"getByteSize",value:function(t){var n=e.getArrayType(t);return n.BYTES_PER_ELEMENT}},{key:"validate",value:function(t){return Boolean(e.getArrayType(t))}},{key:"createTypedArray",value:function(t,n){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3?arguments[3]:void 0;i===void 0&&(i=(n.byteLength-a)/e.getByteSize(t));var o=e.getArrayType(t);return new o(n,a,i)}}]),e}();function rE(e,r){if(!e)throw new Error("math.gl assertion failed. ".concat(r))}function Qh(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0,0,0],t=e>>11&31,n=e>>5&63,a=e&31;return r[0]=t<<3,r[1]=n<<2,r[2]=a<<3,r}var bK=1/256;var TK=new hn,xK=new w,EK=new hn,SK=new hn,CK=new Uint8Array(1);function nE(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:255;return jo(e,0,r)/r*2-1}function aE(e){return e<0?-1:1}function iE(e,r,t,n){if(rE(n),e<0||e>t||r<0||r>t)throw new Error("x and y must be unsigned normalized integers between 0 and ".concat(t));if(n.x=nE(e,t),n.y=nE(r,t),n.z=1-(Math.abs(n.x)+Math.abs(n.y)),n.z<0){var a=n.x;n.x=(1-Math.abs(n.y))*aE(a),n.y=(1-Math.abs(a))*aE(n.y)}return n.normalize()}function Zh(e,r,t){return iE(e,r,255,t)}var oE=m(H()),sE=m(z());var Sa=function(){function e(r,t){(0,oE.default)(this,e),A(this,"json",void 0),A(this,"buffer",void 0),A(this,"featuresLength",0),A(this,"_cachedTypedArrays",{}),this.json=r,this.buffer=t}return(0,sE.default)(e,[{key:"getExtension",value:function(t){return this.json.extensions&&this.json.extensions[t]}},{key:"hasProperty",value:function(t){return Boolean(this.json[t])}},{key:"getGlobalProperty",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:5125,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,i=this.json[t];return i&&Number.isFinite(i.byteOffset)?this._getTypedArrayFromBinary(t,n,a,1,i.byteOffset):i}},{key:"getPropertyArray",value:function(t,n,a){var i=this.json[t];return i&&Number.isFinite(i.byteOffset)?("componentType"in i&&(n=Hr.fromName(i.componentType)),this._getTypedArrayFromBinary(t,n,a,this.featuresLength,i.byteOffset)):this._getTypedArrayFromArray(t,n,i)}},{key:"getProperty",value:function(t,n,a,i,o){var s=this.json[t];if(!s)return s;var u=this.getPropertyArray(t,n,a);if(a===1)return u[i];for(var f=0;f<a;++f)o[f]=u[a*i+f];return o}},{key:"_getTypedArrayFromBinary",value:function(t,n,a,i,o){var s=this._cachedTypedArrays,u=s[t];return u||(u=Hr.createTypedArray(n,this.buffer.buffer,this.buffer.byteOffset+o,i*a),s[t]=u),u}},{key:"_getTypedArrayFromArray",value:function(t,n,a){var i=this._cachedTypedArrays,o=i[t];return o||(o=Hr.createTypedArray(n,a),i[t]=o),o}}]),e}();var cE=m(Et()),hE=m(H()),dE=m(z());var GF={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},NF={SCALAR:function(r,t){return r[t]},VEC2:function(r,t){return[r[2*t+0],r[2*t+1]]},VEC3:function(r,t){return[r[3*t+0],r[3*t+1],r[3*t+2]]},VEC4:function(r,t){return[r[4*t+0],r[4*t+1],r[4*t+2],r[4*t+3]]},MAT2:function(r,t){return[r[4*t+0],r[4*t+1],r[4*t+2],r[4*t+3]]},MAT3:function(r,t){return[r[9*t+0],r[9*t+1],r[9*t+2],r[9*t+3],r[9*t+4],r[9*t+5],r[9*t+6],r[9*t+7],r[9*t+8]]},MAT4:function(r,t){return[r[16*t+0],r[16*t+1],r[16*t+2],r[16*t+3],r[16*t+4],r[16*t+5],r[16*t+6],r[16*t+7],r[16*t+8],r[16*t+9],r[16*t+10],r[16*t+11],r[16*t+12],r[16*t+13],r[16*t+14],r[16*t+15]]}},UF={SCALAR:function(r,t,n){t[n]=r},VEC2:function(r,t,n){t[2*n+0]=r[0],t[2*n+1]=r[1]},VEC3:function(r,t,n){t[3*n+0]=r[0],t[3*n+1]=r[1],t[3*n+2]=r[2]},VEC4:function(r,t,n){t[4*n+0]=r[0],t[4*n+1]=r[1],t[4*n+2]=r[2],t[4*n+3]=r[3]},MAT2:function(r,t,n){t[4*n+0]=r[0],t[4*n+1]=r[1],t[4*n+2]=r[2],t[4*n+3]=r[3]},MAT3:function(r,t,n){t[9*n+0]=r[0],t[9*n+1]=r[1],t[9*n+2]=r[2],t[9*n+3]=r[3],t[9*n+4]=r[4],t[9*n+5]=r[5],t[9*n+6]=r[6],t[9*n+7]=r[7],t[9*n+8]=r[8],t[9*n+9]=r[9]},MAT4:function(r,t,n){t[16*n+0]=r[0],t[16*n+1]=r[1],t[16*n+2]=r[2],t[16*n+3]=r[3],t[16*n+4]=r[4],t[16*n+5]=r[5],t[16*n+6]=r[6],t[16*n+7]=r[7],t[16*n+8]=r[8],t[16*n+9]=r[9],t[16*n+10]=r[10],t[16*n+11]=r[11],t[16*n+12]=r[12],t[16*n+13]=r[13],t[16*n+14]=r[14],t[16*n+15]=r[15]}};function uE(e,r,t,n){var a=e.componentType;te(e.componentType);var i=typeof a=="string"?Hr.fromName(a):a,o=GF[e.type],s=NF[e.type],u=UF[e.type];t+=e.byteOffset;var f=Hr.createTypedArray(i,r,t,o*n);return{values:f,type:i,size:o,unpacker:s,packer:u}}var Kt=function(r){return r!==void 0};function fE(e,r,t){if(!r)return null;var n=e.getExtension("3DTILES_batch_table_hierarchy"),a=r.HIERARCHY;return a&&(console.warn("3D Tile Parser: HIERARCHY is deprecated. Use 3DTILES_batch_table_hierarchy."),r.extensions=r.extensions||{},r.extensions["3DTILES_batch_table_hierarchy"]=a,n=a),n?jF(n,t):null}function jF(e,r){var t,n,a,i=e.instancesLength,o=e.classes,s=e.classIds,u=e.parentCounts,f=e.parentIds,l=i;Kt(s.byteOffset)&&(s.componentType=defaultValue(s.componentType,5123),s.type=AttributeType.SCALAR,a=getBinaryAccessor(s),s=a.createArrayBufferView(r.buffer,r.byteOffset+s.byteOffset,i));var c;if(Kt(u))for(Kt(u.byteOffset)&&(u.componentType=defaultValue(u.componentType,5123),u.type=AttributeType.SCALAR,a=getBinaryAccessor(u),u=a.createArrayBufferView(r.buffer,r.byteOffset+u.byteOffset,i)),c=new Uint16Array(i),l=0,t=0;t<i;++t)c[t]=l,l+=u[t];Kt(f)&&Kt(f.byteOffset)&&(f.componentType=defaultValue(f.componentType,5123),f.type=AttributeType.SCALAR,a=getBinaryAccessor(f),f=a.createArrayBufferView(r.buffer,r.byteOffset+f.byteOffset,l));var h=o.length;for(t=0;t<h;++t){var d=o[t].length,p=o[t].instances,v=getBinaryProperties(d,p,r);o[t].instances=combine(v,p)}var g=new Array(h).fill(0),y=new Uint16Array(i);for(t=0;t<i;++t)n=s[t],y[t]=g[n],++g[n];var b={classes:o,classIds:s,classIndexes:y,parentCounts:u,parentIndexes:c,parentIds:f};return zF(b),b}function Ca(e,r,t){if(e){var n=e.parentCounts,a=e.parentIds;return a?t(e,r):n>0?HF(e,r,t):VF(e,r,t)}}function HF(e,r,t){var n=e.classIds,a=e.parentCounts,i=e.parentIds,o=e.parentIndexes,s=n.length,u=scratchVisited;u.length=Math.max(u.length,s);var f=++marker,l=scratchStack;for(l.length=0,l.push(r);l.length>0;)if(r=l.pop(),u[r]!==f){u[r]=f;var c=t(e,r);if(Kt(c))return c;for(var h=a[r],d=o[r],p=0;p<h;++p){var v=i[d+p];v!==r&&l.push(v)}}return null}function VF(e,r,t){for(var n=!0;n;){var a=t(e,r);if(Kt(a))return a;var i=e.parentIds[r];n=i!==r,r=i}throw new Error("traverseHierarchySingleParent")}function zF(e){for(var r=[],t=e.classIds,n=t.length,a=0;a<n;++a)lE(e,a,stack)}function lE(e,r,t){var n=e.parentCounts,a=e.parentIds,i=e.parentIndexes,o=e.classIds,s=o.length;if(Kt(a)){assert(r<s,"Parent index ".concat(r," exceeds the total number of instances: ").concat(s)),assert(t.indexOf(r)===-1,"Circular dependency detected in the batch table hierarchy."),t.push(r);for(var u=Kt(n)?n[r]:1,f=Kt(n)?i[r]:r,l=0;l<u;++l){var c=a[f+l];c!==r&&lE(e,c,t)}t.pop(r)}}function gt(e){return e!=null}var du=function(r,t){return r},WF={HIERARCHY:!0,extensions:!0,extras:!0},pu=function(){function e(r,t,n){(0,hE.default)(this,e);var a,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};A(this,"json",void 0),A(this,"binary",void 0),A(this,"featureCount",void 0),A(this,"_extensions",void 0),A(this,"_properties",void 0),A(this,"_binaryProperties",void 0),A(this,"_hierarchy",void 0),te(n>=0),this.json=r||{},this.binary=t,this.featureCount=n,this._extensions=((a=this.json)===null||a===void 0?void 0:a.extensions)||{},this._properties={};for(var o in this.json)WF[o]||(this._properties[o]=this.json[o]);this._binaryProperties=this._initializeBinaryProperties(),i["3DTILES_batch_table_hierarchy"]&&(this._hierarchy=fE(this,this.json,this.binary))}return(0,dE.default)(e,[{key:"getExtension",value:function(t){return this.json&&this.json.extensions&&this.json.extensions[t]}},{key:"memorySizeInBytes",value:function(){return 0}},{key:"isClass",value:function(t,n){if(this._checkBatchId(t),te(typeof n=="string",n),this._hierarchy){var a=Ca(this._hierarchy,t,function(i,o){var s=i.classIds[o],u=i.classes[s];return u.name===n});return gt(a)}return!1}},{key:"isExactClass",value:function(t,n){return te(typeof n=="string",n),this.getExactClassName(t)===n}},{key:"getExactClassName",value:function(t){if(this._checkBatchId(t),this._hierarchy){var n=this._hierarchy.classIds[t],a=this._hierarchy.classes[n];return a.name}}},{key:"hasProperty",value:function(t,n){return this._checkBatchId(t),te(typeof n=="string",n),gt(this._properties[n])||this._hasPropertyInHierarchy(t,n)}},{key:"getPropertyNames",value:function(t,n){var a;this._checkBatchId(t),n=gt(n)?n:[],n.length=0;var i=Object.keys(this._properties);return(a=n).push.apply(a,(0,cE.default)(i)),this._hierarchy&&this._getPropertyNamesInHierarchy(t,n),n}},{key:"getProperty",value:function(t,n){if(this._checkBatchId(t),te(typeof n=="string",n),this._binaryProperties){var a=this._binaryProperties[n];if(gt(a))return this._getBinaryProperty(a,t)}var i=this._properties[n];if(gt(i))return du(i[t],!0);if(this._hierarchy){var o=this._getHierarchyProperty(t,n);if(gt(o))return o}}},{key:"setProperty",value:function(t,n,a){var i=this.featureCount;if(this._checkBatchId(t),te(typeof n=="string",n),this._binaryProperties){var o=this._binaryProperties[n];if(o){this._setBinaryProperty(o,t,a);return}}if(!(this._hierarchy&&this._setHierarchyProperty(this,t,n,a))){var s=this._properties[n];gt(s)||(this._properties[n]=new Array(i),s=this._properties[n]),s[t]=du(a,!0)}}},{key:"_checkBatchId",value:function(t){var n=t>=0&&t<this.featureCount;if(!n)throw new Error("batchId not in range [0, featureCount - 1].")}},{key:"_getBinaryProperty",value:function(t,n){return t.unpack(t.typedArray,n)}},{key:"_setBinaryProperty",value:function(t,n,a){t.pack(a,t.typedArray,n)}},{key:"_initializeBinaryProperties",value:function(){var t=null;for(var n in this._properties){var a=this._properties[n],i=this._initializeBinaryProperty(n,a);i&&(t=t||{},t[n]=i)}return t}},{key:"_initializeBinaryProperty",value:function(t,n){if("byteOffset"in n){var a=n;te(this.binary,"Property ".concat(t," requires a batch table binary.")),te(a.type,"Property ".concat(t," requires a type."));var i=uE(a,this.binary.buffer,this.binary.byteOffset|0,this.featureCount);return{typedArray:i.values,componentCount:i.size,unpack:i.unpacker,pack:i.packer}}return null}},{key:"_hasPropertyInHierarchy",value:function(t,n){if(!this._hierarchy)return!1;var a=Ca(this._hierarchy,t,function(i,o){var s=i.classIds[o],u=i.classes[s].instances;return gt(u[n])});return gt(a)}},{key:"_getPropertyNamesInHierarchy",value:function(t,n){Ca(this._hierarchy,t,function(a,i){var o=a.classIds[i],s=a.classes[o].instances;for(var u in s)s.hasOwnProperty(u)&&n.indexOf(u)===-1&&n.push(u)})}},{key:"_getHierarchyProperty",value:function(t,n){var a=this;return Ca(this._hierarchy,t,function(i,o){var s=i.classIds[o],u=i.classes[s],f=i.classIndexes[o],l=u.instances[n];return gt(l)?gt(l.typedArray)?a._getBinaryProperty(l,f):du(l[f],!0):null})}},{key:"_setHierarchyProperty",value:function(t,n,a,i){var o=this,s=Ca(this._hierarchy,n,function(u,f){var l=u.classIds[f],c=u.classes[l],h=u.classIndexes[f],d=c.instances[a];return gt(d)?(te(f===n,'Inherited property "'.concat(a,'" is read-only.')),gt(d.typedArray)?o._setBinaryProperty(d,h,i):d[h]=du(i,!0),!0):!1});return gt(s)}}]),e}();var $h=4;function Vr(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,n=new DataView(r);if(e.magic=n.getUint32(t,!0),t+=$h,e.version=n.getUint32(t,!0),t+=$h,e.byteLength=n.getUint32(t,!0),t+=$h,e.version!==1)throw new Error("3D Tile Version ".concat(e.version," not supported"));return t}var wa=4,pE="b3dm tile in legacy format.";function Ba(e,r,t){var n=new DataView(r),a;e.header=e.header||{};var i=n.getUint32(t,!0);t+=wa;var o=n.getUint32(t,!0);t+=wa;var s=n.getUint32(t,!0);t+=wa;var u=n.getUint32(t,!0);return t+=wa,s>=570425344?(t-=wa*2,a=i,s=o,u=0,i=0,o=0,console.warn(pE)):u>=570425344&&(t-=wa,a=s,s=i,u=o,i=0,o=0,console.warn(pE)),e.header.featureTableJsonByteLength=i,e.header.featureTableBinaryByteLength=o,e.header.batchTableJsonByteLength=s,e.header.batchTableBinaryByteLength=u,e.header.batchLength=a,t}function Ma(e,r,t,n){return t=JF(e,r,t,n),t=qF(e,r,t,n),t}function JF(e,r,t,n){var a=e.header,i=a.featureTableJsonByteLength,o=a.featureTableBinaryByteLength,s=a.batchLength;if(e.featureTableJson={BATCH_LENGTH:s||0},i>0){var u=Fh(r,t,i);e.featureTableJson=JSON.parse(u)}return t+=i,e.featureTableBinary=new Uint8Array(r,t,o),t+=o,t}function qF(e,r,t,n){var a=e.header,i=a.batchTableJsonByteLength,o=a.batchTableBinaryByteLength;if(i>0){var s=Fh(r,t,i);e.batchTableJson=JSON.parse(s),t+=i,o>0&&(e.batchTableBinary=new Uint8Array(r,t,o),e.batchTableBinary=new Uint8Array(e.batchTableBinary),t+=o)}return t}function ed(e,r,t){if(!r&&(!e||!e.batchIds||!t))return null;var n=e.batchIds,a=e.isRGB565,i=e.pointCount;if(n&&t){for(var o=new Uint8ClampedArray(i*3),s=0;s<i;s++){var u=n[s],f=t.getProperty(u,"dimensions"),l=f.map(function(p){return p*255});o[s*3]=l[0],o[s*3+1]=l[1],o[s*3+2]=l[2]}return{type:5121,value:o,size:3,normalized:!0}}if(a){for(var c=new Uint8ClampedArray(i*3),h=0;h<i;h++){var d=Qh(r[h]);c[h*3]=d[0],c[h*3+1]=d[1],c[h*3+2]=d[2]}return{type:5121,value:c,size:3,normalized:!0}}return r&&r.length===i*3?{type:5121,value:r,size:3,normalized:!0}:{type:5121,value:r,size:4,normalized:!0}}var mE=new w;function vE(e,r){if(!r)return null;if(e.isOctEncoded16P){for(var t=new Float32Array(e.pointsLength*3),n=0;n<e.pointsLength;n++)Zh(r[n*2],r[n*2+1],mE),mE.toArray(t,n*3);return{type:5126,size:2,value:t}}return{type:5126,size:2,value:r}}function gE(e,r,t){return e.isQuantized?t["3d-tiles"]&&t["3d-tiles"].decodeQuantizedPositions?(e.isQuantized=!1,XF(e,r)):{type:5123,value:r,size:3,normalized:!0}:r}function XF(e,r){for(var t=new w,n=new Float32Array(e.pointCount*3),a=0;a<e.pointCount;a++)t.set(r[a*3],r[a*3+1],r[a*3+2]).scale(1/e.quantizedRange).multiply(e.quantizedVolumeScale).add(e.quantizedVolumeOffset).toArray(n,a*3);return n}function yE(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function Mn(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?yE(Object(t),!0).forEach(function(n){(0,AE.default)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):yE(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function _E(e,r,t,n,a){return td.apply(this,arguments)}function td(){return td=(0,mu.default)(On.default.mark(function e(r,t,n,a,i){var o,s,u;return On.default.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return n=Vr(r,t,n),n=Ba(r,t,n),n=Ma(r,t,n,a),YF(r),o=KF(r),s=o.featureTable,u=o.batchTable,l.next=7,tL(r,s,u,a,i);case 7:return QF(r,s,a),ZF(r,s,u),$F(r,s),l.abrupt("return",n);case 11:case"end":return l.stop()}},e)})),td.apply(this,arguments)}function YF(e){e.attributes={positions:null,colors:null,normals:null,batchIds:null},e.isQuantized=!1,e.isTranslucent=!1,e.isRGB565=!1,e.isOctEncoded16P=!1}function KF(e){var r=new Sa(e.featureTableJson,e.featureTableBinary),t=r.getGlobalProperty("POINTS_LENGTH");if(!Number.isFinite(t))throw new Error("POINTS_LENGTH must be defined");r.featuresLength=t,e.featuresLength=t,e.pointsLength=t,e.pointCount=t,e.rtcCenter=r.getGlobalProperty("RTC_CENTER",5126,3);var n=eL(e,r);return{featureTable:r,batchTable:n}}function QF(e,r,t){if(!e.attributes.positions){if(r.hasProperty("POSITION"))e.attributes.positions=r.getPropertyArray("POSITION",5126,3);else if(r.hasProperty("POSITION_QUANTIZED")){var n=r.getPropertyArray("POSITION_QUANTIZED",5123,3);if(e.isQuantized=!0,e.quantizedRange=(1<<16)-1,e.quantizedVolumeScale=r.getGlobalProperty("QUANTIZED_VOLUME_SCALE",5126,3),!e.quantizedVolumeScale)throw new Error("QUANTIZED_VOLUME_SCALE must be defined for quantized positions.");if(e.quantizedVolumeOffset=r.getGlobalProperty("QUANTIZED_VOLUME_OFFSET",5126,3),!e.quantizedVolumeOffset)throw new Error("QUANTIZED_VOLUME_OFFSET must be defined for quantized positions.");e.attributes.positions=gE(e,n,t)}}if(!e.attributes.positions)throw new Error("Either POSITION or POSITION_QUANTIZED must be defined.")}function ZF(e,r,t){if(!e.attributes.colors){var n=null;r.hasProperty("RGBA")?(n=r.getPropertyArray("RGBA",5121,4),e.isTranslucent=!0):r.hasProperty("RGB")?n=r.getPropertyArray("RGB",5121,3):r.hasProperty("RGB565")&&(n=r.getPropertyArray("RGB565",5123,1),e.isRGB565=!0),e.attributes.colors=ed(e,n,t)}r.hasProperty("CONSTANT_RGBA")&&(e.constantRGBA=r.getGlobalProperty("CONSTANT_RGBA",5121,4))}function $F(e,r){if(!e.attributes.normals){var t=null;r.hasProperty("NORMAL")?t=r.getPropertyArray("NORMAL",5126,3):r.hasProperty("NORMAL_OCT16P")&&(t=r.getPropertyArray("NORMAL_OCT16P",5121,2),e.isOctEncoded16P=!0),e.attributes.normals=vE(e,t)}}function eL(e,r){var t=null;if(!e.batchIds&&r.hasProperty("BATCH_ID")&&(e.batchIds=r.getPropertyArray("BATCH_ID",5123,1),e.batchIds)){var n=r.getGlobalProperty("BATCH_LENGTH");if(!n)throw new Error("Global property: BATCH_LENGTH must be defined when BATCH_ID is defined.");var a=e.batchTableJson,i=e.batchTableBinary;t=new pu(a,i,n)}return t}function tL(e,r,t,n,a){return rd.apply(this,arguments)}function rd(){return rd=(0,mu.default)(On.default.mark(function e(r,t,n,a,i){var o,s,u,f,l,c,h,d;return On.default.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(f=r.batchTableJson&&r.batchTableJson.extensions&&r.batchTableJson.extensions["3DTILES_draco_point_compression"],f&&(u=f.properties),l=t.getExtension("3DTILES_draco_point_compression"),!l){v.next=15;break}if(s=l.properties,c=l.byteOffset,h=l.byteLength,!(!s||!Number.isFinite(c)||!h)){v.next=9;break}throw new Error("Draco properties, byteOffset, and byteLength must be defined");case 9:o=r.featureTableBinary.slice(c,c+h),r.hasPositions=Number.isFinite(s.POSITION),r.hasColors=Number.isFinite(s.RGB)||Number.isFinite(s.RGBA),r.hasNormals=Number.isFinite(s.NORMAL),r.hasBatchIds=Number.isFinite(s.BATCH_ID),r.isTranslucent=Number.isFinite(s.RGBA);case 15:if(o){v.next=17;break}return v.abrupt("return",!0);case 17:return d={buffer:o,properties:Mn(Mn({},s),u),featureTableProperties:s,batchTableProperties:u,dequantizeInShader:!1},v.next=20,rL(r,d,a,i);case 20:return v.abrupt("return",v.sent);case 21:case"end":return v.stop()}},e)})),rd.apply(this,arguments)}function rL(e,r,t,n){return nd.apply(this,arguments)}function nd(){return nd=(0,mu.default)(On.default.mark(function e(r,t,n,a){var i,o,s,u,f,l,c,h,d,p,v,g,y,b,E;return On.default.wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return i=a.parse,o=Mn(Mn({},n),{},{draco:Mn(Mn({},n.draco),{},{extraAttributes:t.batchTableProperties||{}})}),delete o["3d-tiles"],S.next=5,i(t.buffer,hu,o);case 5:if(s=S.sent,u=s.attributes.POSITION&&s.attributes.POSITION.value,f=s.attributes.COLOR_0&&s.attributes.COLOR_0.value,l=s.attributes.NORMAL&&s.attributes.NORMAL.value,c=s.attributes.BATCH_ID&&s.attributes.BATCH_ID.value,h=u&&s.attributes.POSITION.value.quantization,d=l&&s.attributes.NORMAL.value.quantization,h&&(p=s.POSITION.data.quantization,v=p.range,r.quantizedVolumeScale=new w(v,v,v),r.quantizedVolumeOffset=new w(p.minValues),r.quantizedRange=(1<<p.quantizationBits)-1,r.isQuantizedDraco=!0),d&&(r.octEncodedRange=(1<<s.NORMAL.data.quantization.quantizationBits)-1,r.isOctEncodedDraco=!0),g={},t.batchTableProperties)for(y=0,b=Object.keys(t.batchTableProperties);y<b.length;y++)E=b[y],s.attributes[E]&&s.attributes[E].value&&(g[E.toLowerCase()]=s.attributes[E].value);r.attributes=Mn({positions:u,colors:ed(r,f,void 0),normals:l,batchIds:c},g);case 17:case"end":return S.stop()}},e)})),nd.apply(this,arguments)}var QS=m(X()),vp=m(Y());var KS=m(X()),pp=m(Y());var XS=m(W()),YS=m(X()),hp=m(Y());var bE="3.3.1";var qi=m(X()),vr=m(Y());var TE="3.3.1";var HE=m(W());var DE=m(Xe()),GE=m(X()),pd=m(Y());var ld=m(ce()),Ni=m(X()),pr=m(Y());var xE="3.3.1",nL="https://unpkg.com/@loaders.gl/textures@".concat(xE,"/dist/libs/basis_encoder.wasm"),aL="https://unpkg.com/@loaders.gl/textures@".concat(xE,"/dist/libs/basis_encoder.js"),ad;function cd(e){return od.apply(this,arguments)}function od(){return od=(0,Ni.default)(pr.default.mark(function e(r){var t;return pr.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(t=r.modules||{},!t.basis){a.next=3;break}return a.abrupt("return",t.basis);case 3:return ad=ad||iL(r),a.next=6,ad;case 6:return a.abrupt("return",a.sent);case 7:case"end":return a.stop()}},e)})),od.apply(this,arguments)}function iL(e){return sd.apply(this,arguments)}function sd(){return sd=(0,Ni.default)(pr.default.mark(function e(r){var t,n,a,i;return pr.default.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return t=null,n=null,s.t0=Promise,s.next=5,Ut("basis_transcoder.js","textures",r);case 5:return s.t1=s.sent,s.next=8,Ut("basis_transcoder.wasm","textures",r);case 8:return s.t2=s.sent,s.t3=[s.t1,s.t2],s.next=12,s.t0.all.call(s.t0,s.t3);case 12:return a=s.sent,i=(0,ld.default)(a,2),t=i[0],n=i[1],t=t||globalThis.BASIS,s.next=19,oL(t,n);case 19:return s.abrupt("return",s.sent);case 20:case"end":return s.stop()}},e)})),sd.apply(this,arguments)}function oL(e,r){var t={};return r&&(t.wasmBinary=r),new Promise(function(n){e(t).then(function(a){var i=a.BasisFile,o=a.initializeBasis;o(),n({BasisFile:i})})})}var id;function hd(e){return ud.apply(this,arguments)}function ud(){return ud=(0,Ni.default)(pr.default.mark(function e(r){var t;return pr.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(t=r.modules||{},!t.basisEncoder){a.next=3;break}return a.abrupt("return",t.basisEncoder);case 3:return id=id||sL(r),a.next=6,id;case 6:return a.abrupt("return",a.sent);case 7:case"end":return a.stop()}},e)})),ud.apply(this,arguments)}function sL(e){return fd.apply(this,arguments)}function fd(){return fd=(0,Ni.default)(pr.default.mark(function e(r){var t,n,a,i;return pr.default.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return t=null,n=null,s.t0=Promise,s.next=5,Ut(aL,"textures",r);case 5:return s.t1=s.sent,s.next=8,Ut(nL,"textures",r);case 8:return s.t2=s.sent,s.t3=[s.t1,s.t2],s.next=12,s.t0.all.call(s.t0,s.t3);case 12:return a=s.sent,i=(0,ld.default)(a,2),t=i[0],n=i[1],t=t||globalThis.BASIS,s.next=19,uL(t,n);case 19:return s.abrupt("return",s.sent);case 20:case"end":return s.stop()}},e)})),fd.apply(this,arguments)}function uL(e,r){var t={};return r&&(t.wasmBinary=r),new Promise(function(n){e(t).then(function(a){var i=a.BasisFile,o=a.KTX2File,s=a.initializeBasis,u=a.BasisEncoder;s(),n({BasisFile:i,KTX2File:o,BasisEncoder:u})})})}var In={COMPRESSED_RGB_S3TC_DXT1_EXT:33776,COMPRESSED_RGBA_S3TC_DXT1_EXT:33777,COMPRESSED_RGBA_S3TC_DXT3_EXT:33778,COMPRESSED_RGBA_S3TC_DXT5_EXT:33779,COMPRESSED_R11_EAC:37488,COMPRESSED_SIGNED_R11_EAC:37489,COMPRESSED_RG11_EAC:37490,COMPRESSED_SIGNED_RG11_EAC:37491,COMPRESSED_RGB8_ETC2:37492,COMPRESSED_RGBA8_ETC2_EAC:37493,COMPRESSED_SRGB8_ETC2:37494,COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:37495,COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:37496,COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:37497,COMPRESSED_RGB_PVRTC_4BPPV1_IMG:35840,COMPRESSED_RGBA_PVRTC_4BPPV1_IMG:35842,COMPRESSED_RGB_PVRTC_2BPPV1_IMG:35841,COMPRESSED_RGBA_PVRTC_2BPPV1_IMG:35843,COMPRESSED_RGB_ETC1_WEBGL:36196,COMPRESSED_RGB_ATC_WEBGL:35986,COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL:35987,COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL:34798,COMPRESSED_RGBA_ASTC_4X4_KHR:37808,COMPRESSED_RGBA_ASTC_5X4_KHR:37809,COMPRESSED_RGBA_ASTC_5X5_KHR:37810,COMPRESSED_RGBA_ASTC_6X5_KHR:37811,COMPRESSED_RGBA_ASTC_6X6_KHR:37812,COMPRESSED_RGBA_ASTC_8X5_KHR:37813,COMPRESSED_RGBA_ASTC_8X6_KHR:37814,COMPRESSED_RGBA_ASTC_8X8_KHR:37815,COMPRESSED_RGBA_ASTC_10X5_KHR:37816,COMPRESSED_RGBA_ASTC_10X6_KHR:37817,COMPRESSED_RGBA_ASTC_10X8_KHR:37818,COMPRESSED_RGBA_ASTC_10X10_KHR:37819,COMPRESSED_RGBA_ASTC_12X10_KHR:37820,COMPRESSED_RGBA_ASTC_12X12_KHR:37821,COMPRESSED_SRGB8_ALPHA8_ASTC_4X4_KHR:37840,COMPRESSED_SRGB8_ALPHA8_ASTC_5X4_KHR:37841,COMPRESSED_SRGB8_ALPHA8_ASTC_5X5_KHR:37842,COMPRESSED_SRGB8_ALPHA8_ASTC_6X5_KHR:37843,COMPRESSED_SRGB8_ALPHA8_ASTC_6X6_KHR:37844,COMPRESSED_SRGB8_ALPHA8_ASTC_8X5_KHR:37845,COMPRESSED_SRGB8_ALPHA8_ASTC_8X6_KHR:37846,COMPRESSED_SRGB8_ALPHA8_ASTC_8X8_KHR:37847,COMPRESSED_SRGB8_ALPHA8_ASTC_10X5_KHR:37848,COMPRESSED_SRGB8_ALPHA8_ASTC_10X6_KHR:37849,COMPRESSED_SRGB8_ALPHA8_ASTC_10X8_KHR:37850,COMPRESSED_SRGB8_ALPHA8_ASTC_10X10_KHR:37851,COMPRESSED_SRGB8_ALPHA8_ASTC_12X10_KHR:37852,COMPRESSED_SRGB8_ALPHA8_ASTC_12X12_KHR:37853,COMPRESSED_RED_RGTC1_EXT:36283,COMPRESSED_SIGNED_RED_RGTC1_EXT:36284,COMPRESSED_RED_GREEN_RGTC2_EXT:36285,COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT:36286,COMPRESSED_SRGB_S3TC_DXT1_EXT:35916,COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT:35917,COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT:35918,COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT:35919};function fL(e,r){var t=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=lL(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(f){throw f},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,o=!1,s;return{s:function(){t=t.call(e)},n:function(){var f=t.next();return i=f.done,f},e:function(f){o=!0,s=f},f:function(){try{!i&&t.return!=null&&t.return()}finally{if(o)throw s}}}}function lL(e,r){if(e){if(typeof e=="string")return EE(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return EE(e,r)}}function EE(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var cL=["","WEBKIT_","MOZ_"],SE={WEBGL_compressed_texture_s3tc:"dxt",WEBGL_compressed_texture_s3tc_srgb:"dxt-srgb",WEBGL_compressed_texture_etc1:"etc1",WEBGL_compressed_texture_etc:"etc2",WEBGL_compressed_texture_pvrtc:"pvrtc",WEBGL_compressed_texture_atc:"atc",WEBGL_compressed_texture_astc:"astc",EXT_texture_compression_rgtc:"rgtc"},vu=null;function CE(e){if(!vu){e=e||hL()||void 0,vu=new Set;var r=fL(cL),t;try{for(r.s();!(t=r.n()).done;){var n=t.value;for(var a in SE)if(e&&e.getExtension("".concat(n).concat(a))){var i=SE[a];vu.add(i)}}}catch(o){r.e(o)}finally{r.f()}}return vu}function hL(){try{var e=document.createElement("canvas");return e.getContext("webgl")}catch{return null}}var PQ=new Uint8Array([0]);var wE,BE,ME,OE,IE,PE,RE,FE;(function(e){e[e.NONE=0]="NONE",e[e.BASISLZ=1]="BASISLZ",e[e.ZSTD=2]="ZSTD",e[e.ZLIB=3]="ZLIB"})(wE||(wE={})),function(e){e[e.BASICFORMAT=0]="BASICFORMAT"}(BE||(BE={})),function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.ETC1S=163]="ETC1S",e[e.UASTC=166]="UASTC"}(ME||(ME={})),function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.SRGB=1]="SRGB"}(OE||(OE={})),function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.LINEAR=1]="LINEAR",e[e.SRGB=2]="SRGB",e[e.ITU=3]="ITU",e[e.NTSC=4]="NTSC",e[e.SLOG=5]="SLOG",e[e.SLOG2=6]="SLOG2"}(IE||(IE={})),function(e){e[e.ALPHA_STRAIGHT=0]="ALPHA_STRAIGHT",e[e.ALPHA_PREMULTIPLIED=1]="ALPHA_PREMULTIPLIED"}(PE||(PE={})),function(e){e[e.RGB=0]="RGB",e[e.RRR=3]="RRR",e[e.GGG=4]="GGG",e[e.AAA=15]="AAA"}(RE||(RE={})),function(e){e[e.RGB=0]="RGB",e[e.RGBA=3]="RGBA",e[e.RRR=4]="RRR",e[e.RRRG=5]="RRRG"}(FE||(FE={}));var Tt=[171,75,84,88,32,50,48,187,13,10,26,10];function LE(e){var r=new Uint8Array(e),t=r.byteLength<Tt.length||r[0]!==Tt[0]||r[1]!==Tt[1]||r[2]!==Tt[2]||r[3]!==Tt[3]||r[4]!==Tt[4]||r[5]!==Tt[5]||r[6]!==Tt[6]||r[7]!==Tt[7]||r[8]!==Tt[8]||r[9]!==Tt[9]||r[10]!==Tt[10]||r[11]!==Tt[11];return!t}var dL={etc1:{basisFormat:0,compressed:!0,format:In.COMPRESSED_RGB_ETC1_WEBGL},etc2:{basisFormat:1,compressed:!0},bc1:{basisFormat:2,compressed:!0,format:In.COMPRESSED_RGB_S3TC_DXT1_EXT},bc3:{basisFormat:3,compressed:!0,format:In.COMPRESSED_RGBA_S3TC_DXT5_EXT},bc4:{basisFormat:4,compressed:!0},bc5:{basisFormat:5,compressed:!0},"bc7-m6-opaque-only":{basisFormat:6,compressed:!0},"bc7-m5":{basisFormat:7,compressed:!0},"pvrtc1-4-rgb":{basisFormat:8,compressed:!0,format:In.COMPRESSED_RGB_PVRTC_4BPPV1_IMG},"pvrtc1-4-rgba":{basisFormat:9,compressed:!0,format:In.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG},"astc-4x4":{basisFormat:10,compressed:!0,format:In.COMPRESSED_RGBA_ASTC_4X4_KHR},"atc-rgb":{basisFormat:11,compressed:!0},"atc-rgba-interpolated-alpha":{basisFormat:12,compressed:!0},rgba32:{basisFormat:13,compressed:!1},rgb565:{basisFormat:14,compressed:!1},bgr565:{basisFormat:15,compressed:!1},rgba4444:{basisFormat:16,compressed:!1}};function vd(e,r){return md.apply(this,arguments)}function md(){return md=(0,GE.default)(pd.default.mark(function e(r,t){var n,a,i,o,s,u;return pd.default.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(t.basis.containerFormat!=="auto"){l.next=11;break}if(!LE(r)){l.next=6;break}return l.next=4,hd(t);case 4:return n=l.sent,l.abrupt("return",kE(n.KTX2File,r,t));case 6:return l.next=8,cd(t);case 8:return a=l.sent,i=a.BasisFile,l.abrupt("return",dd(i,r,t));case 11:l.t0=t.basis.module,l.next=l.t0==="encoder"?14:(l.t0==="transcoder",22);break;case 14:return l.next=16,hd(t);case 16:o=l.sent,l.t1=t.basis.containerFormat,l.next=l.t1==="ktx2"?20:(l.t1==="basis",21);break;case 20:return l.abrupt("return",kE(o.KTX2File,r,t));case 21:return l.abrupt("return",dd(o.BasisFile,r,t));case 22:return l.next=24,cd(t);case 24:return s=l.sent,u=s.BasisFile,l.abrupt("return",dd(u,r,t));case 27:case"end":return l.stop()}},e)})),md.apply(this,arguments)}function dd(e,r,t){var n=new e(new Uint8Array(r));try{if(!n.startTranscoding())throw new Error("Failed to start basis transcoding");for(var a=n.getNumImages(),i=[],o=0;o<a;o++){for(var s=n.getNumLevels(o),u=[],f=0;f<s;f++)u.push(pL(n,o,f,t));i.push(u)}return i}finally{n.close(),n.delete()}}function pL(e,r,t,n){var a=e.getImageWidth(r,t),i=e.getImageHeight(r,t),o=e.getHasAlpha(),s=NE(n,o),u=s.compressed,f=s.format,l=s.basisFormat,c=e.getImageTranscodedSizeInBytes(r,t,l),h=new Uint8Array(c);if(!e.transcodeImage(h,r,t,l,0,0))throw new Error("failed to start Basis transcoding");return{width:a,height:i,data:h,compressed:u,format:f,hasAlpha:o}}function kE(e,r,t){var n=new e(new Uint8Array(r));try{if(!n.startTranscoding())throw new Error("failed to start KTX2 transcoding");for(var a=n.getLevels(),i=[],o=0;o<a;o++){i.push(mL(n,o,t));break}return[i]}finally{n.close(),n.delete()}}function mL(e,r,t){var n=e.getImageLevelInfo(r,0,0),a=n.alphaFlag,i=n.height,o=n.width,s=NE(t,a),u=s.compressed,f=s.format,l=s.basisFormat,c=e.getImageTranscodedSizeInBytes(r,0,0,l),h=new Uint8Array(c);if(!e.transcodeImage(h,r,0,0,l,0,-1,-1))throw new Error("Failed to transcode KTX2 image");return{width:o,height:i,data:h,compressed:u,levelSize:c,hasAlpha:a,format:f}}function NE(e,r){var t=e&&e.basis&&e.basis.format;return t==="auto"&&(t=gu()),(0,DE.default)(t)==="object"&&(t=r?t.alpha:t.noAlpha),t=t.toLowerCase(),dL[t]}function gu(){var e=CE();return e.has("astc")?"astc-4x4":e.has("dxt")?{alpha:"bc3",noAlpha:"bc1"}:e.has("pvrtc")?{alpha:"pvrtc1-4-rgba",noAlpha:"pvrtc1-4-rgb"}:e.has("etc1")?"etc1":e.has("etc2")?"etc2":"rgb565"}function UE(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function jE(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?UE(Object(t),!0).forEach(function(n){(0,HE.default)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):UE(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var VE={name:"Basis",id:er?"basis":"basis-nodejs",module:"textures",version:TE,worker:!0,extensions:["basis","ktx2"],mimeTypes:["application/octet-stream","image/ktx2"],tests:["sB"],binary:!0,options:{basis:{format:"auto",libraryPath:"libs/",containerFormat:"auto",module:"transcoder"}}},gd=jE(jE({},VE),{},{parse:vd});function qe(e,r){if(!e)throw new Error(r||"assert failed: gltf")}function yd(e,r){var t=e.startsWith("data:")||e.startsWith("http:")||e.startsWith("https:");if(t)return e;var n=r.baseUri||r.uri;if(!n)throw new Error("'baseUri' must be provided to resolve relative url ".concat(e));return n.substr(0,n.lastIndexOf("/")+1)+e}function zE(e,r,t){var n=e.bufferViews[t];qe(n);var a=n.buffer,i=r[a];qe(i);var o=(n.byteOffset||0)+i.byteOffset;return new Uint8Array(i.arrayBuffer,o,n.byteLength)}var ES=m(X()),tp=m(Y());var wd={};Ot(wd,{decode:()=>DL,name:()=>kL});var Sd=m(X()),Ui=m(Y());var YE=m(Xe()),KE=m(W()),QE=m(H()),ZE=m(z());var WE=["SCALAR","VEC2","VEC3","VEC4"],vL=[[Int8Array,5120],[Uint8Array,5121],[Int16Array,5122],[Uint16Array,5123],[Uint32Array,5125],[Float32Array,5126],[Float64Array,5130]],gL=new Map(vL),yL={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},AL={5120:1,5121:1,5122:2,5123:2,5125:4,5126:4},_L={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array};function yu(e){var r=WE[e-1];return r||WE[0]}function Au(e){var r=gL.get(e.constructor);if(!r)throw new Error("Illegal typed array");return r}function Oa(e,r){var t=_L[e.componentType],n=yL[e.type],a=AL[e.componentType],i=e.count*n,o=e.count*n*a;return qe(o>=0&&o<=r.byteLength),{ArrayType:t,length:i,byteLength:o}}function JE(e,r){var t=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=bL(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(f){throw f},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,o=!1,s;return{s:function(){t=t.call(e)},n:function(){var f=t.next();return i=f.done,f},e:function(f){o=!0,s=f},f:function(){try{!i&&t.return!=null&&t.return()}finally{if(o)throw s}}}}function bL(e,r){if(e){if(typeof e=="string")return qE(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return qE(e,r)}}function qE(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function XE(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function TL(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?XE(Object(t),!0).forEach(function(n){(0,KE.default)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):XE(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var xL={asset:{version:"2.0",generator:"loaders.gl"},buffers:[]},Oe=function(){function e(r){(0,QE.default)(this,e),A(this,"gltf",void 0),A(this,"sourceBuffers",void 0),A(this,"byteLength",void 0),this.gltf=r||{json:TL({},xL),buffers:[]},this.sourceBuffers=[],this.byteLength=0,this.gltf.buffers&&this.gltf.buffers[0]&&(this.byteLength=this.gltf.buffers[0].byteLength,this.sourceBuffers=[this.gltf.buffers[0]])}return(0,ZE.default)(e,[{key:"json",get:function(){return this.gltf.json}},{key:"getApplicationData",value:function(t){var n=this.json[t];return n}},{key:"getExtraData",value:function(t){var n=this.json.extras||{};return n[t]}},{key:"getExtension",value:function(t){var n=this.getUsedExtensions().find(function(i){return i===t}),a=this.json.extensions||{};return n?a[t]||!0:null}},{key:"getRequiredExtension",value:function(t){var n=this.getRequiredExtensions().find(function(a){return a===t});return n?this.getExtension(t):null}},{key:"getRequiredExtensions",value:function(){return this.json.extensionsRequired||[]}},{key:"getUsedExtensions",value:function(){return this.json.extensionsUsed||[]}},{key:"getRemovedExtensions",value:function(){return this.json.extensionsRemoved||[]}},{key:"getObjectExtension",value:function(t,n){var a=t.extensions||{};return a[n]}},{key:"getScene",value:function(t){return this.getObject("scenes",t)}},{key:"getNode",value:function(t){return this.getObject("nodes",t)}},{key:"getSkin",value:function(t){return this.getObject("skins",t)}},{key:"getMesh",value:function(t){return this.getObject("meshes",t)}},{key:"getMaterial",value:function(t){return this.getObject("materials",t)}},{key:"getAccessor",value:function(t){return this.getObject("accessors",t)}},{key:"getTexture",value:function(t){return this.getObject("textures",t)}},{key:"getSampler",value:function(t){return this.getObject("samplers",t)}},{key:"getImage",value:function(t){return this.getObject("images",t)}},{key:"getBufferView",value:function(t){return this.getObject("bufferViews",t)}},{key:"getBuffer",value:function(t){return this.getObject("buffers",t)}},{key:"getObject",value:function(t,n){if((0,YE.default)(n)==="object")return n;var a=this.json[t]&&this.json[t][n];if(!a)throw new Error("glTF file error: Could not find ".concat(t,"[").concat(n,"]"));return a}},{key:"getTypedArrayForBufferView",value:function(t){t=this.getBufferView(t);var n=t.buffer,a=this.gltf.buffers[n];qe(a);var i=(t.byteOffset||0)+a.byteOffset;return new Uint8Array(a.arrayBuffer,i,t.byteLength)}},{key:"getTypedArrayForAccessor",value:function(t){t=this.getAccessor(t);var n=this.getBufferView(t.bufferView),a=this.getBuffer(n.buffer),i=a.data,o=Oa(t,n),s=o.ArrayType,u=o.length,f=n.byteOffset+t.byteOffset;return new s(i,f,u)}},{key:"getTypedArrayForImageData",value:function(t){t=this.getAccessor(t);var n=this.getBufferView(t.bufferView),a=this.getBuffer(n.buffer),i=a.data,o=n.byteOffset||0;return new Uint8Array(i,o,n.byteLength)}},{key:"addApplicationData",value:function(t,n){return this.json[t]=n,this}},{key:"addExtraData",value:function(t,n){return this.json.extras=this.json.extras||{},this.json.extras[t]=n,this}},{key:"addObjectExtension",value:function(t,n,a){return t.extensions=t.extensions||{},t.extensions[n]=a,this.registerUsedExtension(n),this}},{key:"setObjectExtension",value:function(t,n,a){var i=t.extensions||{};i[n]=a}},{key:"removeObjectExtension",value:function(t,n){var a=t.extensions||{},i=a[n];return delete a[n],i}},{key:"addExtension",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return qe(n),this.json.extensions=this.json.extensions||{},this.json.extensions[t]=n,this.registerUsedExtension(t),n}},{key:"addRequiredExtension",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return qe(n),this.addExtension(t,n),this.registerRequiredExtension(t),n}},{key:"registerUsedExtension",value:function(t){this.json.extensionsUsed=this.json.extensionsUsed||[],this.json.extensionsUsed.find(function(n){return n===t})||this.json.extensionsUsed.push(t)}},{key:"registerRequiredExtension",value:function(t){this.registerUsedExtension(t),this.json.extensionsRequired=this.json.extensionsRequired||[],this.json.extensionsRequired.find(function(n){return n===t})||this.json.extensionsRequired.push(t)}},{key:"removeExtension",value:function(t){if(this.getExtension(t)){this.json.extensionsRequired&&this._removeStringFromArray(this.json.extensionsRequired,t),this.json.extensionsUsed&&this._removeStringFromArray(this.json.extensionsUsed,t),this.json.extensions&&delete this.json.extensions[t],Array.isArray(this.json.extensionsRemoved)||(this.json.extensionsRemoved=[]);var n=this.json.extensionsRemoved;n.includes(t)||n.push(t)}}},{key:"setDefaultScene",value:function(t){this.json.scene=t}},{key:"addScene",value:function(t){var n=t.nodeIndices;return this.json.scenes=this.json.scenes||[],this.json.scenes.push({nodes:n}),this.json.scenes.length-1}},{key:"addNode",value:function(t){var n=t.meshIndex,a=t.matrix;this.json.nodes=this.json.nodes||[];var i={mesh:n};return a&&(i.matrix=a),this.json.nodes.push(i),this.json.nodes.length-1}},{key:"addMesh",value:function(t){var n=t.attributes,a=t.indices,i=t.material,o=t.mode,s=o===void 0?4:o,u=this._addAttributes(n),f={primitives:[{attributes:u,mode:s}]};if(a){var l=this._addIndices(a);f.primitives[0].indices=l}return Number.isFinite(i)&&(f.primitives[0].material=i),this.json.meshes=this.json.meshes||[],this.json.meshes.push(f),this.json.meshes.length-1}},{key:"addPointCloud",value:function(t){var n=this._addAttributes(t),a={primitives:[{attributes:n,mode:0}]};return this.json.meshes=this.json.meshes||[],this.json.meshes.push(a),this.json.meshes.length-1}},{key:"addImage",value:function(t,n){var a=nn(t),i=n||a?.mimeType,o=this.addBufferView(t),s={bufferView:o,mimeType:i};return this.json.images=this.json.images||[],this.json.images.push(s),this.json.images.length-1}},{key:"addBufferView",value:function(t){var n=t.byteLength;qe(Number.isFinite(n)),this.sourceBuffers=this.sourceBuffers||[],this.sourceBuffers.push(t);var a={buffer:0,byteOffset:this.byteLength,byteLength:n};return this.byteLength+=Tr(n,4),this.json.bufferViews=this.json.bufferViews||[],this.json.bufferViews.push(a),this.json.bufferViews.length-1}},{key:"addAccessor",value:function(t,n){var a={bufferView:t,type:yu(n.size),componentType:n.componentType,count:n.count,max:n.max,min:n.min};return this.json.accessors=this.json.accessors||[],this.json.accessors.push(a),this.json.accessors.length-1}},{key:"addBinaryBuffer",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{size:3},a=this.addBufferView(t),i={min:n.min,max:n.max};(!i.min||!i.max)&&(i=this._getAccessorMinMax(t,n.size));var o={size:n.size,componentType:Au(t),count:Math.round(t.length/n.size),min:i.min,max:i.max};return this.addAccessor(a,Object.assign(o,n))}},{key:"addTexture",value:function(t){var n=t.imageIndex,a={source:n};return this.json.textures=this.json.textures||[],this.json.textures.push(a),this.json.textures.length-1}},{key:"addMaterial",value:function(t){return this.json.materials=this.json.materials||[],this.json.materials.push(t),this.json.materials.length-1}},{key:"createBinaryChunk",value:function(){var t,n;this.gltf.buffers=[];var a=this.byteLength,i=new ArrayBuffer(a),o=new Uint8Array(i),s=0,u=JE(this.sourceBuffers||[]),f;try{for(u.s();!(f=u.n()).done;){var l=f.value;s=Rf(l,o,s)}}catch(c){u.e(c)}finally{u.f()}(t=this.json)!==null&&t!==void 0&&(n=t.buffers)!==null&&n!==void 0&&n[0]?this.json.buffers[0].byteLength=a:this.json.buffers=[{byteLength:a}],this.gltf.binary=i,this.sourceBuffers=[i]}},{key:"_removeStringFromArray",value:function(t,n){for(var a=!0;a;){var i=t.indexOf(n);i>-1?t.splice(i,1):a=!1}}},{key:"_addAttributes",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n={};for(var a in t){var i=t[a],o=this._getGltfAttributeName(a),s=this.addBinaryBuffer(i.value,i);n[o]=s}return n}},{key:"_addIndices",value:function(t){return this.addBinaryBuffer(t,{size:1})}},{key:"_getGltfAttributeName",value:function(t){switch(t.toLowerCase()){case"position":case"positions":case"vertices":return"POSITION";case"normal":case"normals":return"NORMAL";case"color":case"colors":return"COLOR_0";case"texcoord":case"texcoords":return"TEXCOORD_0";default:return t}}},{key:"_getAccessorMinMax",value:function(t,n){var a={min:null,max:null};if(t.length<n)return a;a.min=[],a.max=[];var i=t.subarray(0,n),o=JE(i),s;try{for(o.s();!(s=o.n()).done;){var u=s.value;a.min.push(u),a.max.push(u)}}catch(c){o.e(c)}finally{o.f()}for(var f=n;f<t.length;f+=n)for(var l=0;l<n;l++)a.min[0+l]=Math.min(a.min[0+l],t[f+l]),a.max[0+l]=Math.max(a.max[0+l],t[f+l]);return a}}]),e}();var _u=m(X()),$E=m(Xe()),Pn=m(Y()),sZ=(typeof WebAssembly>"u"?"undefined":(0,$E.default)(WebAssembly))!=="object",EL="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",SL="B9h9z9tFBBBF8dL9gBB9gLaaaaaFa9gEaaaB9gGaaB9gFaFaEQSBBFBFFGEGEGIILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBNn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBcI9z9iqlBMc/j9JSIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMkRIbaG97FaK978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAnDeBJAeCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAnDeBJAeCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAnDeBJAeCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAnDeBJAeCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAnDeBJAeCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAnDeBJAeCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAnDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAnDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAnDeBJAeCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAnDeBJAeCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBRnCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBHiCFD9tAiAPD9OD9hD9RHiDQBTFtGmEYIPLdKeOnH8ZAIAQJDBIBHpCFD9tApAPD9OD9hD9RHpAIASJDBIBHyCFD9tAyAPD9OD9hD9RHyDQBTFtGmEYIPLdKeOnH8cDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAnD9uHnDyBjGBAEAGJHIAnAPAPDQILKOILKOILKOILKOD9uHnDyBjGBAIAGJHIAnAPAPDQNVcMNVcMNVcMNVcMD9uHnDyBjGBAIAGJHIAnAPAPDQSQfbSQfbSQfbSQfbD9uHnDyBjGBAIAGJHIAnA8ZA8cDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHnDyBjGBAIAGJHIAnAPAPDQILKOILKOILKOILKOD9uHnDyBjGBAIAGJHIAnAPAPDQNVcMNVcMNVcMNVcMD9uHnDyBjGBAIAGJHIAnAPAPDQSQfbSQfbSQfbSQfbD9uHnDyBjGBAIAGJHIAnAdAiDQNiV8ZcpMyS8cQ8df8eb8fHdApAyDQNiV8ZcpMyS8cQ8df8eb8fHiDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHnDyBjGBAIAGJHIAnAPAPDQILKOILKOILKOILKOD9uHnDyBjGBAIAGJHIAnAPAPDQNVcMNVcMNVcMNVcMD9uHnDyBjGBAIAGJHIAnAPAPDQSQfbSQfbSQfbSQfbD9uHnDyBjGBAIAGJHIAnAdAiDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHnDyBjGBAIAGJHIAnAPAPDQILKOILKOILKOILKOD9uHnDyBjGBAIAGJHIAnAPAPDQNVcMNVcMNVcMNVcMD9uHnDyBjGBAIAGJHIAnAPAPDQSQfbSQfbSQfbSQfbD9uHnDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/xLGEaK978jUUUUBCAlHE8kUUUUBGXGXAGCI9HQBGXAFC98ZHI9FQBABRGCBRLEXAGAGDBBBHKCiD+rFCiD+sFD/6FHOAKCND+rFCiD+sFD/6FAOD/gFAKCTD+rFCiD+sFD/6FHND/gFD/kFD/lFHVCBDtD+2FHcAOCUUUU94DtHMD9OD9RD/kFHO9DBB/+hDYAOAOD/mFAVAVD/mFANAcANAMD9OD9RD/kFHOAOD/mFD/kFD/kFD/jFD/nFHND/mF9DBBX9LDYHcD/kFCgFDtD9OAKCUUU94DtD9OD9QAOAND/mFAcD/kFCND+rFCU/+EDtD9OD9QAVAND/mFAcD/kFCTD+rFCUU/8ODtD9OD9QDMBBAGCTJRGALCIJHLAI9JQBMMAIAF9PQFAEAFCEZHLCGWHGqCBCTAGl/8MBAEABAICGWJHIAG/8cBBGXAL9FQBAEAEDBIBHKCiD+rFCiD+sFD/6FHOAKCND+rFCiD+sFD/6FAOD/gFAKCTD+rFCiD+sFD/6FHND/gFD/kFD/lFHVCBDtD+2FHcAOCUUUU94DtHMD9OD9RD/kFHO9DBB/+hDYAOAOD/mFAVAVD/mFANAcANAMD9OD9RD/kFHOAOD/mFD/kFD/kFD/jFD/nFHND/mF9DBBX9LDYHcD/kFCgFDtD9OAKCUUU94DtD9OD9QAOAND/mFAcD/kFCND+rFCU/+EDtD9OD9QAVAND/mFAcD/kFCTD+rFCUU/8ODtD9OD9QDMIBMAIAEAG/8cBBSFMABAFC98ZHGT+HUUUBAGAF9PQBAEAFCEZHICEWHLJCBCAALl/8MBAEABAGCEWJHGAL/8cBBAEAIT+HUUUBAGAEAL/8cBBMAECAJ8kUUUUBM+yEGGaO97GXAF9FQBCBRGEXABCTJHEAEDBBBHICBDtHLCUU98D8cFCUU98D8cEHKD9OABDBBBHOAIDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAOAIDQBFGENVcMTtmYi8ZpyHICTD+sFD/6FHND/gFAICTD+rFCTD+sFD/6FHVD/gFD/kFD/lFHI9DB/+g6DYAVAIALD+2FHLAVCUUUU94DtHcD9OD9RD/kFHVAVD/mFAIAID/mFANALANAcD9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHND/mF9DBBX9LDYHLD/kFCTD+rFAVAND/mFALD/kFCggEDtD9OD9QHVAIAND/mFALD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHIDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAOAKD9OAVAIDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM94FEa8jUUUUBCAlHE8kUUUUBABAFC98ZHIT+JUUUBGXAIAF9PQBAEAFCEZHLCEWHFJCBCAAFl/8MBAEABAICEWJHBAF/8cBBAEALT+JUUUBABAEAF/8cBBMAECAJ8kUUUUBM/hEIGaF97FaL978jUUUUBCTlRGGXAF9FQBCBREEXAGABDBBBHIABCTJHLDBBBHKDQILKOSQfbPden8c8d8e8fHOCTD+sFHNCID+rFDMIBAB9DBBU8/DY9D/zI818/DYANCEDtD9QD/6FD/nFHNAIAKDQBFGENVcMTtmYi8ZpyHICTD+rFCTD+sFD/6FD/mFHKAKD/mFANAICTD+sFD/6FD/mFHVAVD/mFANAOCTD+rFCTD+sFD/6FD/mFHOAOD/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHND/mF9DBBX9LDYHID/kFCggEDtHcD9OAVAND/mFAID/kFCTD+rFD9QHVAOAND/mFAID/kFCTD+rFAKAND/mFAID/kFAcD9OD9QHNDQBFTtGEmYILPdKOenHID8dBAGDBIBDyB+t+J83EBABCNJAID8dFAGDBIBDyF+t+J83EBALAVANDQNVi8ZcMpySQ8c8dfb8e8fHND8dBAGDBIBDyG+t+J83EBABCiJAND8dFAGDBIBDyE+t+J83EBABCAJRBAECIJHEAF9JQBMMM/3FGEaF978jUUUUBCoBlREGXAGCGrAF9sHIC98ZHL9FQBCBRGABRFEXAFAFDBBBHKCND+rFCND+sFD/6FAKCiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBAFCTJRFAGCIJHGAL9JQBMMGXALAI9PQBAEAICEZHGCGWHFqCBCoBAFl/8MBAEABALCGWJHLAF/8cBBGXAG9FQBAEAEDBIBHKCND+rFCND+sFD/6FAKCiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMIBMALAEAF/8cBBMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",CL=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),wL=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]),BL={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},ML={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};function eS(e,r,t,n,a){return _d.apply(this,arguments)}function _d(){return _d=(0,_u.default)(Pn.default.mark(function e(r,t,n,a,i){var o,s,u=arguments;return Pn.default.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return o=u.length>5&&u[5]!==void 0?u[5]:"NONE",l.next=3,OL();case 3:s=l.sent,RL(s,s.exports[ML[i]],r,t,n,a,s.exports[BL[o||"NONE"]]);case 5:case"end":return l.stop()}},e)})),_d.apply(this,arguments)}var Ad;function OL(){return bd.apply(this,arguments)}function bd(){return bd=(0,_u.default)(Pn.default.mark(function e(){return Pn.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return Ad||(Ad=IL()),t.abrupt("return",Ad);case 2:case"end":return t.stop()}},e)})),bd.apply(this,arguments)}function IL(){return Td.apply(this,arguments)}function Td(){return Td=(0,_u.default)(Pn.default.mark(function e(){var r,t;return Pn.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return r=EL,WebAssembly.validate(CL)&&(r=SL,console.log("Warning: meshopt_decoder is using experimental SIMD support")),a.next=4,WebAssembly.instantiate(PL(r),{});case 4:return t=a.sent,a.next=7,t.instance.exports.__wasm_call_ctors();case 7:return a.abrupt("return",t.instance);case 8:case"end":return a.stop()}},e)})),Td.apply(this,arguments)}function PL(e){for(var r=new Uint8Array(e.length),t=0;t<e.length;++t){var n=e.charCodeAt(t);r[t]=n>96?n-71:n>64?n-65:n>47?n+4:n>46?63:62}for(var a=0,i=0;i<e.length;++i)r[a++]=r[i]<60?wL[r[i]]:(r[i]-60)*64+r[++i];return r.buffer.slice(0,a)}function RL(e,r,t,n,a,i,o){var s=e.exports.sbrk,u=n+3&-4,f=s(u*a),l=s(i.length),c=new Uint8Array(e.exports.memory.buffer);c.set(i,l);var h=r(f,n,a,l,i.length);if(h===0&&o&&o(f,u,a),t.set(c.subarray(f,f+n*a)),s(f-s(0)),h!==0)throw new Error("Malformed buffer data: ".concat(h))}function FL(e,r){var t=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=LL(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(f){throw f},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,o=!1,s;return{s:function(){t=t.call(e)},n:function(){var f=t.next();return i=f.done,f},e:function(f){o=!0,s=f},f:function(){try{!i&&t.return!=null&&t.return()}finally{if(o)throw s}}}}function LL(e,r){if(e){if(typeof e=="string")return tS(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return tS(e,r)}}function tS(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var Cd="EXT_meshopt_compression",kL=Cd;function DL(e,r){return xd.apply(this,arguments)}function xd(){return xd=(0,Sd.default)(Ui.default.mark(function e(r,t){var n,a,i,o,s,u;return Ui.default.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(a=new Oe(r),t!=null&&(n=t.gltf)!==null&&n!==void 0&&n.decompressMeshes){l.next=3;break}return l.abrupt("return");case 3:i=[],o=FL(r.json.bufferViews||[]);try{for(o.s();!(s=o.n()).done;)u=s.value,i.push(GL(a,u))}catch(c){o.e(c)}finally{o.f()}return l.next=8,Promise.all(i);case 8:a.removeExtension(Cd);case 9:case"end":return l.stop()}},e)})),xd.apply(this,arguments)}function GL(e,r){return Ed.apply(this,arguments)}function Ed(){return Ed=(0,Sd.default)(Ui.default.mark(function e(r,t){var n,a,i,o,s,u,f,l,c,h,d,p,v,g;return Ui.default.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(n=r.getObjectExtension(t,Cd),!n){b.next=9;break}return a=n.byteOffset,i=a===void 0?0:a,o=n.byteLength,s=o===void 0?0:o,u=n.byteStride,f=n.count,l=n.mode,c=n.filter,h=c===void 0?"NONE":c,d=n.buffer,p=r.gltf.buffers[d],v=new Uint8Array(p.arrayBuffer,p.byteOffset+i,s),g=new Uint8Array(r.gltf.buffers[t.buffer].arrayBuffer,t.byteOffset,t.byteLength),b.next=8,eS(g,f,u,v,l,h);case 8:return b.abrupt("return",g);case 9:return b.abrupt("return",null);case 10:case"end":return b.stop()}},e)})),Ed.apply(this,arguments)}var Bd={};Ot(Bd,{name:()=>jL,preprocess:()=>HL});function NL(e,r){var t=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=UL(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(f){throw f},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,o=!1,s;return{s:function(){t=t.call(e)},n:function(){var f=t.next();return i=f.done,f},e:function(f){o=!0,s=f},f:function(){try{!i&&t.return!=null&&t.return()}finally{if(o)throw s}}}}function UL(e,r){if(e){if(typeof e=="string")return rS(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return rS(e,r)}}function rS(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var Ia="EXT_texture_webp",jL=Ia;function HL(e,r){var t=new Oe(e);if(!Zf("image/webp")){if(t.getRequiredExtensions().includes(Ia))throw new Error("gltf: Required extension ".concat(Ia," not supported by browser"));return}var n=t.json,a=NL(n.textures||[]),i;try{for(a.s();!(i=a.n()).done;){var o=i.value,s=t.getObjectExtension(o,Ia);s&&(o.source=s.source),t.removeObjectExtension(o,Ia)}}catch(u){a.e(u)}finally{a.f()}t.removeExtension(Ia)}var Md={};Ot(Md,{name:()=>WL,preprocess:()=>JL});function VL(e,r){var t=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=zL(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(f){throw f},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,o=!1,s;return{s:function(){t=t.call(e)},n:function(){var f=t.next();return i=f.done,f},e:function(f){o=!0,s=f},f:function(){try{!i&&t.return!=null&&t.return()}finally{if(o)throw s}}}}function zL(e,r){if(e){if(typeof e=="string")return nS(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return nS(e,r)}}function nS(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var bu="KHR_texture_basisu",WL=bu;function JL(e,r){var t=new Oe(e),n=t.json,a=VL(n.textures||[]),i;try{for(a.s();!(i=a.n()).done;){var o=i.value,s=t.getObjectExtension(o,bu);s&&(o.source=s.source),t.removeObjectExtension(o,bu)}}catch(u){a.e(u)}finally{a.f()}t.removeExtension(bu)}var kd={};Ot(kd,{decode:()=>ek,encode:()=>tk,name:()=>ZL,preprocess:()=>$L});var sS=m(ce()),Rd=m(W()),Fd=m(X()),Rn=m(Y());function aS(e){var r={};for(var t in e){var n=e[t];if(t!=="indices"){var a=Od(n);r[t]=a}}return r}function Od(e){var r=qL(e),t=r.buffer,n=r.size,a=r.count,i={value:t,size:n,byteOffset:0,count:a,type:yu(n),componentType:Au(t)};return i}function qL(e){var r=e,t=1,n=0;return e&&e.value&&(r=e.value,t=e.size||1),r&&(ArrayBuffer.isView(r)||(r=XL(r,Float32Array)),n=r.length/t),{buffer:r,size:t,count:n}}function XL(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return e?Array.isArray(e)?new r(e):t&&!(e instanceof r)?new r(e):e:null}function iS(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function YL(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?iS(Object(t),!0).forEach(function(n){(0,Rd.default)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):iS(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var KL=Rn.default.mark(Ld);function ji(e,r){var t=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=QL(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(f){throw f},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,o=!1,s;return{s:function(){t=t.call(e)},n:function(){var f=t.next();return i=f.done,f},e:function(f){o=!0,s=f},f:function(){try{!i&&t.return!=null&&t.return()}finally{if(o)throw s}}}}function QL(e,r){if(e){if(typeof e=="string")return oS(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return oS(e,r)}}function oS(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var Fn="KHR_draco_mesh_compression",ZL=Fn;function $L(e,r,t){var n=new Oe(e),a=ji(Ld(n)),i;try{for(a.s();!(i=a.n()).done;){var o=i.value;n.getObjectExtension(o,Fn)}}catch(s){a.e(s)}finally{a.f()}}function ek(e,r,t){return Id.apply(this,arguments)}function Id(){return Id=(0,Fd.default)(Rn.default.mark(function e(r,t,n){var a,i,o,s,u,f;return Rn.default.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(t!=null&&(a=t.gltf)!==null&&a!==void 0&&a.decompressMeshes){c.next=2;break}return c.abrupt("return");case 2:i=new Oe(r),o=[],s=ji(Ld(i));try{for(s.s();!(u=s.n()).done;)f=u.value,i.getObjectExtension(f,Fn)&&o.push(rk(i,f,t,n))}catch(h){s.e(h)}finally{s.f()}return c.next=8,Promise.all(o);case 8:i.removeExtension(Fn);case 9:case"end":return c.stop()}},e)})),Id.apply(this,arguments)}function tk(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=new Oe(e),n=ji(t.json.meshes||[]),a;try{for(n.s();!(a=n.n()).done;){var i=a.value;nk(i,r),t.addRequiredExtension(Fn)}}catch(o){n.e(o)}finally{n.f()}}function rk(e,r,t,n){return Pd.apply(this,arguments)}function Pd(){return Pd=(0,Fd.default)(Rn.default.mark(function e(r,t,n,a){var i,o,s,u,f,l,c,h,d,p,v,g,y,b;return Rn.default.wrap(function(T){for(;;)switch(T.prev=T.next){case 0:if(i=r.getObjectExtension(t,Fn),i){T.next=3;break}return T.abrupt("return");case 3:return o=r.getTypedArrayForBufferView(i.bufferView),s=tn(o.buffer,o.byteOffset),u=a.parse,f=YL({},n),delete f["3d-tiles"],T.next=10,u(s,hu,f,a);case 10:for(l=T.sent,c=aS(l.attributes),h=0,d=Object.entries(c);h<d.length;h++)p=(0,sS.default)(d[h],2),v=p[0],g=p[1],v in t.attributes&&(y=t.attributes[v],b=r.getAccessor(y),b!=null&&b.min&&b!==null&&b!==void 0&&b.max&&(g.min=b.min,g.max=b.max));t.attributes=c,l.indices&&(t.indices=Od(l.indices)),ak(t);case 16:case"end":return T.stop()}},e)})),Pd.apply(this,arguments)}function nk(e,r){var t,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:4,a=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0;if(!a.DracoWriter)throw new Error("options.gltf.DracoWriter not provided");var o=a.DracoWriter.encodeSync({attributes:e}),s=i==null||(t=i.parseSync)===null||t===void 0?void 0:t.call(i,{attributes:e}),u=a._addFauxAttributes(s.attributes),f=a.addBufferView(o),l={primitives:[{attributes:u,mode:n,extensions:(0,Rd.default)({},Fn,{bufferView:f,attributes:u})}]};return l}function ak(e){if(!e.attributes&&Object.keys(e.attributes).length>0)throw new Error("glTF: Empty primitive detected: Draco decompression failure?")}function Ld(e){var r,t,n,a,i,o;return Rn.default.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:r=ji(e.json.meshes||[]),u.prev=1,r.s();case 3:if((t=r.n()).done){u.next=24;break}n=t.value,a=ji(n.primitives),u.prev=6,a.s();case 8:if((i=a.n()).done){u.next=14;break}return o=i.value,u.next=12,o;case 12:u.next=8;break;case 14:u.next=19;break;case 16:u.prev=16,u.t0=u.catch(6),a.e(u.t0);case 19:return u.prev=19,a.f(),u.finish(19);case 22:u.next=3;break;case 24:u.next=29;break;case 26:u.prev=26,u.t1=u.catch(1),r.e(u.t1);case 29:return u.prev=29,r.f(),u.finish(29);case 32:case"end":return u.stop()}},KL,null,[[1,26,29,32],[6,16,19,22]])}var Ud={};Ot(Ud,{decode:()=>fk,name:()=>ok});var hS=m(ce()),dS=m(X()),Dd=m(Y());var uS={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},fS={5120:1,5121:1,5122:2,5123:2,5125:4,5126:4};function lS(e,r){var t=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=ik(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(f){throw f},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,o=!1,s;return{s:function(){t=t.call(e)},n:function(){var f=t.next();return i=f.done,f},e:function(f){o=!0,s=f},f:function(){try{!i&&t.return!=null&&t.return()}finally{if(o)throw s}}}}function ik(e,r){if(e){if(typeof e=="string")return cS(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return cS(e,r)}}function cS(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var Nd="KHR_texture_transform",ok=Nd,Tu=new w,sk=new ge,uk=new ge;function fk(e,r){return Gd.apply(this,arguments)}function Gd(){return Gd=(0,dS.default)(Dd.default.mark(function e(r,t){var n,a,i,o;return Dd.default.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(n=new Oe(r),a=n.getExtension(Nd),a){u.next=4;break}return u.abrupt("return");case 4:for(i=r.json.materials||[],o=0;o<i.length;o++)lk(o,r);case 6:case"end":return u.stop()}},e)})),Gd.apply(this,arguments)}function lk(e,r){var t,n,a,i=[],o=(t=r.json.materials)===null||t===void 0?void 0:t[e],s=o==null||(n=o.pbrMetallicRoughness)===null||n===void 0?void 0:n.baseColorTexture;s&&Hi(r,e,s,i);var u=o?.emissiveTexture;u&&Hi(r,e,u,i);var f=o?.normalTexture;f&&Hi(r,e,f,i);var l=o?.occlusionTexture;l&&Hi(r,e,l,i);var c=o==null||(a=o.pbrMetallicRoughness)===null||a===void 0?void 0:a.metallicRoughnessTexture;c&&Hi(r,e,c,i)}function Hi(e,r,t,n){var a=ck(t,n);if(a){var i=e.json.meshes||[],o=lS(i),s;try{for(o.s();!(s=o.n()).done;){var u=s.value,f=lS(u.primitives),l;try{for(f.s();!(l=f.n()).done;){var c=l.value,h=c.material;Number.isFinite(h)&&r===h&&hk(e,c,a)}}catch(d){f.e(d)}finally{f.f()}}}catch(d){o.e(d)}finally{o.f()}}}function ck(e,r){var t,n=(t=e.extensions)===null||t===void 0?void 0:t[Nd],a=e.texCoord,i=a===void 0?0:a,o=n.texCoord,s=o===void 0?i:o,u=r.findIndex(function(l){var c=(0,hS.default)(l,2),h=c[0],d=c[1];return h===i&&d===s})!==-1;if(!u){var f=mk(n);return i!==s&&(e.texCoord=s),r.push([i,s]),{originalTexCoord:i,texCoord:s,matrix:f}}return null}function hk(e,r,t){var n=t.originalTexCoord,a=t.texCoord,i=t.matrix,o=r.attributes["TEXCOORD_".concat(n)];if(Number.isFinite(o)){var s,u=(s=e.json.accessors)===null||s===void 0?void 0:s[o];if(u&&u.bufferView){var f,l=(f=e.json.bufferViews)===null||f===void 0?void 0:f[u.bufferView];if(l){for(var c=e.buffers[l.buffer],h=c.arrayBuffer,d=c.byteOffset,p=(d||0)+(u.byteOffset||0)+(l.byteOffset||0),v=Oa(u,l),g=v.ArrayType,y=v.length,b=fS[u.componentType],E=uS[u.type],T=l.byteStride||b*E,S=new Float32Array(y),I=0;I<u.count;I++){var L=new g(h,p+I*T,2);Tu.set(L[0],L[1],1),Tu.transformByMatrix3(i),S.set([Tu[0],Tu[1]],I*E)}n===a?dk(u,l,e.buffers,S):pk(a,u,r,e,S)}}}}function dk(e,r,t,n){e.componentType=5126,t.push({arrayBuffer:n.buffer,byteOffset:0,byteLength:n.buffer.byteLength}),r.buffer=t.length-1,r.byteLength=n.buffer.byteLength,r.byteOffset=0,delete r.byteStride}function pk(e,r,t,n,a){n.buffers.push({arrayBuffer:a.buffer,byteOffset:0,byteLength:a.buffer.byteLength});var i=n.json.bufferViews;if(i){i.push({buffer:n.buffers.length-1,byteLength:a.buffer.byteLength,byteOffset:0});var o=n.json.accessors;o&&(o.push({bufferView:i?.length-1,byteOffset:0,componentType:5126,count:r.count,type:"VEC2"}),t.attributes["TEXCOORD_".concat(e)]=o.length-1)}}function mk(e){var r=e.offset,t=r===void 0?[0,0]:r,n=e.rotation,a=n===void 0?0:n,i=e.scale,o=i===void 0?[1,1]:i,s=new ge().set(1,0,0,0,1,0,t[0],t[1],1),u=sk.set(Math.cos(a),Math.sin(a),0,-Math.sin(a),Math.cos(a),0,0,0,1),f=uk.set(o[0],0,0,0,o[1],0,0,0,1);return s.multiplyRight(u).multiplyRight(f)}var zd={};Ot(zd,{decode:()=>yk,encode:()=>Ak,name:()=>gk});var Vd=m(X()),Vi=m(Y());function mS(e,r){var t=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=vk(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(f){throw f},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,o=!1,s;return{s:function(){t=t.call(e)},n:function(){var f=t.next();return i=f.done,f},e:function(f){o=!0,s=f},f:function(){try{!i&&t.return!=null&&t.return()}finally{if(o)throw s}}}}function vk(e,r){if(e){if(typeof e=="string")return pS(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return pS(e,r)}}function pS(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var Ln="KHR_lights_punctual",gk=Ln;function yk(e){return jd.apply(this,arguments)}function jd(){return jd=(0,Vd.default)(Vi.default.mark(function e(r){var t,n,a,i,o,s,u;return Vi.default.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:t=new Oe(r),n=t.json,a=t.getExtension(Ln),a&&(t.json.lights=a.lights,t.removeExtension(Ln)),i=mS(n.nodes||[]);try{for(i.s();!(o=i.n()).done;)s=o.value,u=t.getObjectExtension(s,Ln),u&&(s.light=u.light),t.removeObjectExtension(s,Ln)}catch(c){i.e(c)}finally{i.f()}case 6:case"end":return l.stop()}},e)})),jd.apply(this,arguments)}function Ak(e){return Hd.apply(this,arguments)}function Hd(){return Hd=(0,Vd.default)(Vi.default.mark(function e(r){var t,n,a,i,o,s,u;return Vi.default.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(t=new Oe(r),n=t.json,n.lights&&(a=t.addExtension(Ln),qe(!a.lights),a.lights=n.lights,delete n.lights),t.json.lights){i=mS(t.json.lights);try{for(i.s();!(o=i.n()).done;)s=o.value,u=s.node,t.addObjectExtension(u,Ln,s)}catch(c){i.e(c)}finally{i.f()}delete t.json.lights}case 4:case"end":return l.stop()}},e)})),Hd.apply(this,arguments)}var qd={};Ot(qd,{decode:()=>Tk,encode:()=>xk,name:()=>bk});var gS=m(X()),Wd=m(Y());function yS(e,r){var t=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=_k(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(f){throw f},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,o=!1,s;return{s:function(){t=t.call(e)},n:function(){var f=t.next();return i=f.done,f},e:function(f){o=!0,s=f},f:function(){try{!i&&t.return!=null&&t.return()}finally{if(o)throw s}}}}function _k(e,r){if(e){if(typeof e=="string")return vS(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return vS(e,r)}}function vS(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var zi="KHR_materials_unlit",bk=zi;function Tk(e){return Jd.apply(this,arguments)}function Jd(){return Jd=(0,gS.default)(Wd.default.mark(function e(r){var t,n,a,i,o,s;return Wd.default.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:t=new Oe(r),n=t.json,a=yS(n.materials||[]);try{for(a.s();!(i=a.n()).done;)o=i.value,s=o.extensions&&o.extensions.KHR_materials_unlit,s&&(o.unlit=!0),t.removeObjectExtension(o,zi)}catch(l){a.e(l)}finally{a.f()}t.removeExtension(zi);case 5:case"end":return f.stop()}},e)})),Jd.apply(this,arguments)}function xk(e){var r=new Oe(e),t=r.json;if(r.materials){var n=yS(t.materials||[]),a;try{for(n.s();!(a=n.n()).done;){var i=a.value;i.unlit&&(delete i.unlit,r.addObjectExtension(i,zi,{}),r.addExtension(zi))}}catch(o){n.e(o)}finally{n.f()}}}var Qd={};Ot(Qd,{decode:()=>wk,encode:()=>Bk,name:()=>Ck});var _S=m(Xe()),Kd=m(X()),Ji=m(Y());function Ek(e,r){var t=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=Sk(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(f){throw f},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,o=!1,s;return{s:function(){t=t.call(e)},n:function(){var f=t.next();return i=f.done,f},e:function(f){o=!0,s=f},f:function(){try{!i&&t.return!=null&&t.return()}finally{if(o)throw s}}}}function Sk(e,r){if(e){if(typeof e=="string")return AS(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return AS(e,r)}}function AS(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var Wi="KHR_techniques_webgl",Ck=Wi;function wk(e){return Xd.apply(this,arguments)}function Xd(){return Xd=(0,Kd.default)(Ji.default.mark(function e(r){var t,n,a,i,o,s,u,f;return Ji.default.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(t=new Oe(r),n=t.json,a=t.getExtension(Wi),a){i=Mk(a,t),o=Ek(n.materials||[]);try{for(o.s();!(s=o.n()).done;)u=s.value,f=t.getObjectExtension(u,Wi),f&&(u.technique=Object.assign({},f,i[f.technique]),u.technique.values=Ok(u.technique,t)),t.removeObjectExtension(u,Wi)}catch(h){o.e(h)}finally{o.f()}t.removeExtension(Wi)}case 4:case"end":return c.stop()}},e)})),Xd.apply(this,arguments)}function Bk(e,r){return Yd.apply(this,arguments)}function Yd(){return Yd=(0,Kd.default)(Ji.default.mark(function e(r,t){return Ji.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:case"end":return a.stop()}},e)})),Yd.apply(this,arguments)}function Mk(e,r){var t=e.programs,n=t===void 0?[]:t,a=e.shaders,i=a===void 0?[]:a,o=e.techniques,s=o===void 0?[]:o,u=new TextDecoder;return i.forEach(function(f){if(Number.isFinite(f.bufferView))f.code=u.decode(r.getTypedArrayForBufferView(f.bufferView));else throw new Error("KHR_techniques_webgl: no shader code")}),n.forEach(function(f){f.fragmentShader=i[f.fragmentShader],f.vertexShader=i[f.vertexShader]}),s.forEach(function(f){f.program=n[f.program]}),s}function Ok(e,r){var t=Object.assign({},e.values);return Object.keys(e.uniforms||{}).forEach(function(n){e.uniforms[n].value&&!(n in t)&&(t[n]=e.uniforms[n].value)}),Object.keys(t).forEach(function(n){(0,_S.default)(t[n])==="object"&&t[n].index!==void 0&&(t[n].texture=r.getTexture(t[n].index))}),t}var ep={};Ot(ep,{decode:()=>Pk,name:()=>Ik});var bS=m(X()),Zd=m(Y());var TS="EXT_feature_metadata",Ik=TS;function Pk(e){return $d.apply(this,arguments)}function $d(){return $d=(0,bS.default)(Zd.default.mark(function e(r){var t;return Zd.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:t=new Oe(r),Rk(t);case 2:case"end":return a.stop()}},e)})),$d.apply(this,arguments)}function Rk(e){var r,t=e.getExtension(TS),n=t==null||(r=t.schema)===null||r===void 0?void 0:r.classes,a=t?.featureTables,i=t?.featureTextures;if(i&&console.warn('featureTextures is not yet supported in the "EXT_feature_metadata" extension.'),n&&a)for(var o in n){var s=n[o],u=kk(a,o);u&&Fk(e,u,s)}}function Fk(e,r,t){for(var n in t.properties){var a,i=t.properties[n],o=r==null||(a=r.properties)===null||a===void 0?void 0:a[n],s=r.count;if(o){var u=Lk(e,i,s,o);o.data=u}}}function Lk(e,r,t,n){var a=n.bufferView,i=e.getTypedArrayForBufferView(a);switch(r.type){case"STRING":{var o=n.stringOffsetBufferView,s=e.getTypedArrayForBufferView(o);i=Dk(i,s,t);break}default:}return i}function kk(e,r){for(var t in e){var n=e[t];if(n.class===r)return n}return null}function Dk(e,r,t){for(var n=[],a=new TextDecoder("utf8"),i=0,o=4,s=0;s<t;s++){var u=r[(s+1)*o]-r[s*o],f=e.subarray(i,u+i),l=a.decode(f);n.push(l),i+=u}return n}function SS(e,r){var t=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=Gk(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(f){throw f},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,o=!1,s;return{s:function(){t=t.call(e)},n:function(){var f=t.next();return i=f.done,f},e:function(f){o=!0,s=f},f:function(){try{!i&&t.return!=null&&t.return()}finally{if(o)throw s}}}}function Gk(e,r){if(e){if(typeof e=="string")return xS(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return xS(e,r)}}function xS(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var CS=[wd,Bd,Md,kd,zd,qd,Qd,Ud,ep];function wS(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=arguments.length>2?arguments[2]:void 0,n=CS.filter(function(u){return MS(u.name,r)}),a=SS(n),i;try{for(a.s();!(i=a.n()).done;){var o=i.value,s;(s=o.preprocess)===null||s===void 0||s.call(o,e,r,t)}}catch(u){a.e(u)}finally{a.f()}}function BS(e){return rp.apply(this,arguments)}function rp(){return rp=(0,ES.default)(tp.default.mark(function e(r){var t,n,a,i,o,s,u,f=arguments;return tp.default.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:t=f.length>1&&f[1]!==void 0?f[1]:{},n=f.length>2?f[2]:void 0,a=CS.filter(function(h){return MS(h.name,t)}),i=SS(a),c.prev=4,i.s();case 6:if((o=i.n()).done){c.next=12;break}return s=o.value,c.next=10,(u=s.decode)===null||u===void 0?void 0:u.call(s,r,t,n);case 10:c.next=6;break;case 12:c.next=17;break;case 14:c.prev=14,c.t0=c.catch(4),i.e(c.t0);case 17:return c.prev=17,i.f(),c.finish(17);case 20:case"end":return c.stop()}},e,null,[[4,14,17,20]])})),rp.apply(this,arguments)}function MS(e,r){var t,n=(r==null||(t=r.gltf)===null||t===void 0?void 0:t.excludeExtensions)||{},a=e in n&&!n[e];return!a}var FS=m(H()),LS=m(z());function Nk(e,r){var t=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=Uk(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(f){throw f},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,o=!1,s;return{s:function(){t=t.call(e)},n:function(){var f=t.next();return i=f.done,f},e:function(f){o=!0,s=f},f:function(){try{!i&&t.return!=null&&t.return()}finally{if(o)throw s}}}}function Uk(e,r){if(e){if(typeof e=="string")return OS(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return OS(e,r)}}function OS(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var np="KHR_binary_glTF";function IS(e){var r=new Oe(e),t=r.json,n=Nk(t.images||[]),a;try{for(n.s();!(a=n.n()).done;){var i=a.value,o=r.getObjectExtension(i,np);o&&Object.assign(i,o),r.removeObjectExtension(i,np)}}catch(s){n.e(s)}finally{n.f()}t.buffers&&t.buffers[0]&&delete t.buffers[0].uri,r.removeExtension(np)}function zr(e,r){var t=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=Hk(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(f){throw f},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,o=!1,s;return{s:function(){t=t.call(e)},n:function(){var f=t.next();return i=f.done,f},e:function(f){o=!0,s=f},f:function(){try{!i&&t.return!=null&&t.return()}finally{if(o)throw s}}}}function Hk(e,r){if(e){if(typeof e=="string")return PS(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return PS(e,r)}}function PS(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var RS={accessors:"accessor",animations:"animation",buffers:"buffer",bufferViews:"bufferView",images:"image",materials:"material",meshes:"mesh",nodes:"node",samplers:"sampler",scenes:"scene",skins:"skin",textures:"texture"},Vk={accessor:"accessors",animations:"animation",buffer:"buffers",bufferView:"bufferViews",image:"images",material:"materials",mesh:"meshes",node:"nodes",sampler:"samplers",scene:"scenes",skin:"skins",texture:"textures"},zk=function(){function e(){(0,FS.default)(this,e),A(this,"idToIndexMap",{animations:{},accessors:{},buffers:{},bufferViews:{},images:{},materials:{},meshes:{},nodes:{},samplers:{},scenes:{},skins:{},textures:{}}),A(this,"json",void 0)}return(0,LS.default)(e,[{key:"normalize",value:function(t,n){this.json=t.json;var a=t.json;switch(a.asset&&a.asset.version){case"2.0":return;case void 0:case"1.0":break;default:console.warn("glTF: Unknown version ".concat(a.asset.version));return}if(!n.normalize)throw new Error("glTF v1 is not supported.");console.warn("Converting glTF v1 to glTF v2 format. This is experimental and may fail."),this._addAsset(a),this._convertTopLevelObjectsToArrays(a),IS(t),this._convertObjectIdsToArrayIndices(a),this._updateObjects(a),this._updateMaterial(a)}},{key:"_addAsset",value:function(t){t.asset=t.asset||{},t.asset.version="2.0",t.asset.generator=t.asset.generator||"Normalized to glTF 2.0 by loaders.gl"}},{key:"_convertTopLevelObjectsToArrays",value:function(t){for(var n in RS)this._convertTopLevelObjectToArray(t,n)}},{key:"_convertTopLevelObjectToArray",value:function(t,n){var a=t[n];if(!(!a||Array.isArray(a))){t[n]=[];for(var i in a){var o=a[i];o.id=o.id||i;var s=t[n].length;t[n].push(o),this.idToIndexMap[n][i]=s}}}},{key:"_convertObjectIdsToArrayIndices",value:function(t){for(var n in RS)this._convertIdsToIndices(t,n);"scene"in t&&(t.scene=this._convertIdToIndex(t.scene,"scene"));var a=zr(t.textures),i;try{for(a.s();!(i=a.n()).done;){var o=i.value;this._convertTextureIds(o)}}catch(g){a.e(g)}finally{a.f()}var s=zr(t.meshes),u;try{for(s.s();!(u=s.n()).done;){var f=u.value;this._convertMeshIds(f)}}catch(g){s.e(g)}finally{s.f()}var l=zr(t.nodes),c;try{for(l.s();!(c=l.n()).done;){var h=c.value;this._convertNodeIds(h)}}catch(g){l.e(g)}finally{l.f()}var d=zr(t.scenes),p;try{for(d.s();!(p=d.n()).done;){var v=p.value;this._convertSceneIds(v)}}catch(g){d.e(g)}finally{d.f()}}},{key:"_convertTextureIds",value:function(t){t.source&&(t.source=this._convertIdToIndex(t.source,"image"))}},{key:"_convertMeshIds",value:function(t){var n=zr(t.primitives),a;try{for(n.s();!(a=n.n()).done;){var i=a.value,o=i.attributes,s=i.indices,u=i.material;for(var f in o)o[f]=this._convertIdToIndex(o[f],"accessor");s&&(i.indices=this._convertIdToIndex(s,"accessor")),u&&(i.material=this._convertIdToIndex(u,"material"))}}catch(l){n.e(l)}finally{n.f()}}},{key:"_convertNodeIds",value:function(t){var n=this;t.children&&(t.children=t.children.map(function(a){return n._convertIdToIndex(a,"node")})),t.meshes&&(t.meshes=t.meshes.map(function(a){return n._convertIdToIndex(a,"mesh")}))}},{key:"_convertSceneIds",value:function(t){var n=this;t.nodes&&(t.nodes=t.nodes.map(function(a){return n._convertIdToIndex(a,"node")}))}},{key:"_convertIdsToIndices",value:function(t,n){t[n]||(console.warn("gltf v1: json doesn't contain attribute ".concat(n)),t[n]=[]);var a=zr(t[n]),i;try{for(a.s();!(i=a.n()).done;){var o=i.value;for(var s in o){var u=o[s],f=this._convertIdToIndex(u,s);o[s]=f}}}catch(l){a.e(l)}finally{a.f()}}},{key:"_convertIdToIndex",value:function(t,n){var a=Vk[n];if(a in this.idToIndexMap){var i=this.idToIndexMap[a][t];if(!Number.isFinite(i))throw new Error("gltf v1: failed to resolve ".concat(n," with id ").concat(t));return i}return t}},{key:"_updateObjects",value:function(t){var n=zr(this.json.buffers),a;try{for(n.s();!(a=n.n()).done;){var i=a.value;delete i.type}}catch(o){n.e(o)}finally{n.f()}}},{key:"_updateMaterial",value:function(t){var n=zr(t.materials),a;try{var i=function(){var l=a.value;l.pbrMetallicRoughness={baseColorFactor:[1,1,1,1],metallicFactor:1,roughnessFactor:1};var c=((o=l.values)===null||o===void 0?void 0:o.tex)||((s=l.values)===null||s===void 0?void 0:s.texture2d_0)||((u=l.values)===null||u===void 0?void 0:u.diffuseTex),h=t.textures.findIndex(function(d){return d.id===c});h!==-1&&(l.pbrMetallicRoughness.baseColorTexture={index:h})};for(n.s();!(a=n.n()).done;){var o,s,u;i()}}catch(f){n.e(f)}finally{n.f()}}}]),e}();function kS(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new zk().normalize(e,r)}var GS=m(Xe()),NS=m(H()),US=m(z()),Ra=m(W());var Pa;function DS(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function mr(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?DS(Object(t),!0).forEach(function(n){(0,Ra.default)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):DS(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var Wk={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Jk={5120:1,5121:1,5122:2,5123:2,5125:4,5126:4},Mt={TEXTURE_MAG_FILTER:10240,TEXTURE_MIN_FILTER:10241,TEXTURE_WRAP_S:10242,TEXTURE_WRAP_T:10243,REPEAT:10497,LINEAR:9729,NEAREST_MIPMAP_LINEAR:9986},qk={magFilter:Mt.TEXTURE_MAG_FILTER,minFilter:Mt.TEXTURE_MIN_FILTER,wrapS:Mt.TEXTURE_WRAP_S,wrapT:Mt.TEXTURE_WRAP_T},Xk=(Pa={},(0,Ra.default)(Pa,Mt.TEXTURE_MAG_FILTER,Mt.LINEAR),(0,Ra.default)(Pa,Mt.TEXTURE_MIN_FILTER,Mt.NEAREST_MIPMAP_LINEAR),(0,Ra.default)(Pa,Mt.TEXTURE_WRAP_S,Mt.REPEAT),(0,Ra.default)(Pa,Mt.TEXTURE_WRAP_T,Mt.REPEAT),Pa);function Yk(e){return Jk[e]}function Kk(e){return Wk[e]}var Qk=function(){function e(){(0,NS.default)(this,e),A(this,"baseUri",""),A(this,"json",{}),A(this,"buffers",[]),A(this,"images",[])}return(0,US.default)(e,[{key:"postProcess",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=t.json,i=t.buffers,o=i===void 0?[]:i,s=t.images,u=s===void 0?[]:s,f=t.baseUri,l=f===void 0?"":f;return qe(a),this.baseUri=l,this.json=a,this.buffers=o,this.images=u,this._resolveTree(this.json,n),this.json}},{key:"_resolveTree",value:function(t){var n=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};t.bufferViews&&(t.bufferViews=t.bufferViews.map(function(i,o){return n._resolveBufferView(i,o)})),t.images&&(t.images=t.images.map(function(i,o){return n._resolveImage(i,o)})),t.samplers&&(t.samplers=t.samplers.map(function(i,o){return n._resolveSampler(i,o)})),t.textures&&(t.textures=t.textures.map(function(i,o){return n._resolveTexture(i,o)})),t.accessors&&(t.accessors=t.accessors.map(function(i,o){return n._resolveAccessor(i,o)})),t.materials&&(t.materials=t.materials.map(function(i,o){return n._resolveMaterial(i,o)})),t.meshes&&(t.meshes=t.meshes.map(function(i,o){return n._resolveMesh(i,o)})),t.nodes&&(t.nodes=t.nodes.map(function(i,o){return n._resolveNode(i,o)})),t.skins&&(t.skins=t.skins.map(function(i,o){return n._resolveSkin(i,o)})),t.scenes&&(t.scenes=t.scenes.map(function(i,o){return n._resolveScene(i,o)})),t.scene!==void 0&&(t.scene=t.scenes[this.json.scene])}},{key:"getScene",value:function(t){return this._get("scenes",t)}},{key:"getNode",value:function(t){return this._get("nodes",t)}},{key:"getSkin",value:function(t){return this._get("skins",t)}},{key:"getMesh",value:function(t){return this._get("meshes",t)}},{key:"getMaterial",value:function(t){return this._get("materials",t)}},{key:"getAccessor",value:function(t){return this._get("accessors",t)}},{key:"getCamera",value:function(t){return null}},{key:"getTexture",value:function(t){return this._get("textures",t)}},{key:"getSampler",value:function(t){return this._get("samplers",t)}},{key:"getImage",value:function(t){return this._get("images",t)}},{key:"getBufferView",value:function(t){return this._get("bufferViews",t)}},{key:"getBuffer",value:function(t){return this._get("buffers",t)}},{key:"_get",value:function(t,n){if((0,GS.default)(n)==="object")return n;var a=this.json[t]&&this.json[t][n];return a||console.warn("glTF file error: Could not find ".concat(t,"[").concat(n,"]")),a}},{key:"_resolveScene",value:function(t,n){var a=this;return t.id=t.id||"scene-".concat(n),t.nodes=(t.nodes||[]).map(function(i){return a.getNode(i)}),t}},{key:"_resolveNode",value:function(t,n){var a=this;return t.id=t.id||"node-".concat(n),t.children&&(t.children=t.children.map(function(i){return a.getNode(i)})),t.mesh!==void 0?t.mesh=this.getMesh(t.mesh):t.meshes!==void 0&&t.meshes.length&&(t.mesh=t.meshes.reduce(function(i,o){var s=a.getMesh(o);return i.id=s.id,i.primitives=i.primitives.concat(s.primitives),i},{primitives:[]})),t.camera!==void 0&&(t.camera=this.getCamera(t.camera)),t.skin!==void 0&&(t.skin=this.getSkin(t.skin)),t}},{key:"_resolveSkin",value:function(t,n){return t.id=t.id||"skin-".concat(n),t.inverseBindMatrices=this.getAccessor(t.inverseBindMatrices),t}},{key:"_resolveMesh",value:function(t,n){var a=this;return t.id=t.id||"mesh-".concat(n),t.primitives&&(t.primitives=t.primitives.map(function(i){i=mr({},i);var o=i.attributes;i.attributes={};for(var s in o)i.attributes[s]=a.getAccessor(o[s]);return i.indices!==void 0&&(i.indices=a.getAccessor(i.indices)),i.material!==void 0&&(i.material=a.getMaterial(i.material)),i})),t}},{key:"_resolveMaterial",value:function(t,n){if(t.id=t.id||"material-".concat(n),t.normalTexture&&(t.normalTexture=mr({},t.normalTexture),t.normalTexture.texture=this.getTexture(t.normalTexture.index)),t.occlusionTexture&&(t.occlustionTexture=mr({},t.occlustionTexture),t.occlusionTexture.texture=this.getTexture(t.occlusionTexture.index)),t.emissiveTexture&&(t.emmisiveTexture=mr({},t.emmisiveTexture),t.emissiveTexture.texture=this.getTexture(t.emissiveTexture.index)),t.emissiveFactor||(t.emissiveFactor=t.emmisiveTexture?[1,1,1]:[0,0,0]),t.pbrMetallicRoughness){t.pbrMetallicRoughness=mr({},t.pbrMetallicRoughness);var a=t.pbrMetallicRoughness;a.baseColorTexture&&(a.baseColorTexture=mr({},a.baseColorTexture),a.baseColorTexture.texture=this.getTexture(a.baseColorTexture.index)),a.metallicRoughnessTexture&&(a.metallicRoughnessTexture=mr({},a.metallicRoughnessTexture),a.metallicRoughnessTexture.texture=this.getTexture(a.metallicRoughnessTexture.index))}return t}},{key:"_resolveAccessor",value:function(t,n){if(t.id=t.id||"accessor-".concat(n),t.bufferView!==void 0&&(t.bufferView=this.getBufferView(t.bufferView)),t.bytesPerComponent=Yk(t.componentType),t.components=Kk(t.type),t.bytesPerElement=t.bytesPerComponent*t.components,t.bufferView){var a=t.bufferView.buffer,i=Oa(t,t.bufferView),o=i.ArrayType,s=i.byteLength,u=(t.bufferView.byteOffset||0)+(t.byteOffset||0)+a.byteOffset,f=a.arrayBuffer.slice(u,u+s);t.bufferView.byteStride&&(f=this._getValueFromInterleavedBuffer(a,u,t.bufferView.byteStride,t.bytesPerElement,t.count)),t.value=new o(f)}return t}},{key:"_getValueFromInterleavedBuffer",value:function(t,n,a,i,o){for(var s=new Uint8Array(o*i),u=0;u<o;u++){var f=n+u*a;s.set(new Uint8Array(t.arrayBuffer.slice(f,f+i)),u*i)}return s.buffer}},{key:"_resolveTexture",value:function(t,n){return t.id=t.id||"texture-".concat(n),t.sampler="sampler"in t?this.getSampler(t.sampler):Xk,t.source=this.getImage(t.source),t}},{key:"_resolveSampler",value:function(t,n){t.id=t.id||"sampler-".concat(n),t.parameters={};for(var a in t){var i=this._enumSamplerParameter(a);i!==void 0&&(t.parameters[i]=t[a])}return t}},{key:"_enumSamplerParameter",value:function(t){return qk[t]}},{key:"_resolveImage",value:function(t,n){t.id=t.id||"image-".concat(n),t.bufferView!==void 0&&(t.bufferView=this.getBufferView(t.bufferView));var a=this.images[n];return a&&(t.image=a),t}},{key:"_resolveBufferView",value:function(t,n){var a=t.buffer,i=mr(mr({id:"bufferView-".concat(n)},t),{},{buffer:this.buffers[a]}),o=this.buffers[a].arrayBuffer,s=this.buffers[a].byteOffset||0;return"byteOffset"in t&&(s+=t.byteOffset),i.data=new Uint8Array(o,s,t.byteLength),i}},{key:"_resolveCamera",value:function(t,n){return t.id=t.id||"camera-".concat(n),t.perspective,t.orthographic,t}}]),e}();function jS(e,r){return new Qk().postProcess(e,r)}var HS=1735152710,op=12,xu=8,Zk=1313821514,$k=5130562,eD=0,tD=1,rD=0,Fa=!0;function nD(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return"".concat(String.fromCharCode(e.getUint8(r+0))).concat(String.fromCharCode(e.getUint8(r+1))).concat(String.fromCharCode(e.getUint8(r+2))).concat(String.fromCharCode(e.getUint8(r+3)))}function VS(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=new DataView(e),a=t.magic,i=a===void 0?HS:a,o=n.getUint32(r,!1);return o===i||o===HS}function sp(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},a=new DataView(r),i=nD(a,t+0),o=a.getUint32(t+4,Fa),s=a.getUint32(t+8,Fa);switch(Object.assign(e,{header:{byteOffset:t,byteLength:s,hasBinChunk:!1},type:i,version:o,json:{},binChunks:[]}),t+=op,e.version){case 1:return aD(e,a,t);case 2:return iD(e,a,t,n={});default:throw new Error("Invalid GLB version ".concat(e.version,". Only supports v1 and v2."))}}function aD(e,r,t){te(e.header.byteLength>op+xu);var n=r.getUint32(t+0,Fa),a=r.getUint32(t+4,Fa);return t+=xu,te(a===rD),ap(e,r,t,n),t+=n,t+=ip(e,r,t,e.header.byteLength),t}function iD(e,r,t,n){return te(e.header.byteLength>op+xu),oD(e,r,t,n),t+e.header.byteLength}function oD(e,r,t,n){for(;t+8<=e.header.byteLength;){var a=r.getUint32(t+0,Fa),i=r.getUint32(t+4,Fa);switch(t+=xu,i){case Zk:ap(e,r,t,a);break;case $k:ip(e,r,t,a);break;case eD:n.strict||ap(e,r,t,a);break;case tD:n.strict||ip(e,r,t,a);break;default:break}t+=Tr(a,4)}return t}function ap(e,r,t,n){var a=new Uint8Array(r.buffer,t,n),i=new TextDecoder("utf8"),o=i.decode(a);return e.json=JSON.parse(o),Tr(n,4)}function ip(e,r,t,n){return e.header.hasBinChunk=!0,e.binChunks.push({byteOffset:t,byteLength:n,arrayBuffer:r.buffer}),Tr(n,4)}function WS(e,r){var t=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=sD(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(f){throw f},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,o=!1,s;return{s:function(){t=t.call(e)},n:function(){var f=t.next();return i=f.done,f},e:function(f){o=!0,s=f},f:function(){try{!i&&t.return!=null&&t.return()}finally{if(o)throw s}}}}function sD(e,r){if(e){if(typeof e=="string")return zS(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return zS(e,r)}}function zS(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function JS(e,r){return up.apply(this,arguments)}function up(){return up=(0,qi.default)(vr.default.mark(function e(r,t){var n,a,i,o,s,u,f,l,c,h,d=arguments;return vr.default.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(s=d.length>2&&d[2]!==void 0?d[2]:0,u=d.length>3?d[3]:void 0,f=d.length>4?d[4]:void 0,uD(r,t,s,u),kS(r,{normalize:u==null||(n=u.gltf)===null||n===void 0?void 0:n.normalize}),wS(r,u,f),l=[],!(u!=null&&(a=u.gltf)!==null&&a!==void 0&&a.loadBuffers&&r.json.buffers)){v.next=10;break}return v.next=10,fD(r,u,f);case 10:return u!=null&&(i=u.gltf)!==null&&i!==void 0&&i.loadImages&&(c=lD(r,u,f),l.push(c)),h=BS(r,u,f),l.push(h),v.next=15,Promise.all(l);case 15:return v.abrupt("return",u!=null&&(o=u.gltf)!==null&&o!==void 0&&o.postProcess?jS(r,u):r);case 16:case"end":return v.stop()}},e)})),up.apply(this,arguments)}function uD(e,r,t,n){if(n.uri&&(e.baseUri=n.uri),r instanceof ArrayBuffer&&!VS(r,t,n)){var a=new TextDecoder;r=a.decode(r)}if(typeof r=="string")e.json=Pf(r);else if(r instanceof ArrayBuffer){var i={};t=sp(i,r,t,n.glb),qe(i.type==="glTF","Invalid GLB magic string ".concat(i.type)),e._glb=i,e.json=i.json}else qe(!1,"GLTF: must be ArrayBuffer or string");var o=e.json.buffers||[];if(e.buffers=new Array(o.length).fill(null),e._glb&&e._glb.header.hasBinChunk){var s=e._glb.binChunks;e.buffers[0]={arrayBuffer:s[0].arrayBuffer,byteOffset:s[0].byteOffset,byteLength:s[0].byteLength}}var u=e.json.images||[];e.images=new Array(u.length).fill({})}function fD(e,r,t){return fp.apply(this,arguments)}function fp(){return fp=(0,qi.default)(vr.default.mark(function e(r,t,n){var a,i,o,s,u,f,l,c,h;return vr.default.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:a=r.json.buffers||[],i=0;case 2:if(!(i<a.length)){p.next=22;break}if(o=a[i],!o.uri){p.next=18;break}return f=n.fetch,qe(f),l=yd(o.uri,t),p.next=10,n==null||(s=n.fetch)===null||s===void 0?void 0:s.call(n,l);case 10:return c=p.sent,p.next=13,c==null||(u=c.arrayBuffer)===null||u===void 0?void 0:u.call(c);case 13:h=p.sent,r.buffers[i]={arrayBuffer:h,byteOffset:0,byteLength:h.byteLength},delete o.uri,p.next=19;break;case 18:r.buffers[i]===null&&(r.buffers[i]={arrayBuffer:new ArrayBuffer(o.byteLength),byteOffset:0,byteLength:o.byteLength});case 19:++i,p.next=2;break;case 22:case"end":return p.stop()}},e)})),fp.apply(this,arguments)}function lD(e,r,t){return lp.apply(this,arguments)}function lp(){return lp=(0,qi.default)(vr.default.mark(function e(r,t,n){var a,i,o,s,u,f;return vr.default.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:a=cD(r),i=r.json.images||[],o=[],s=WS(a);try{for(s.s();!(u=s.n()).done;)f=u.value,o.push(hD(r,i[f],f,t,n))}catch(h){s.e(h)}finally{s.f()}return c.next=7,Promise.all(o);case 7:return c.abrupt("return",c.sent);case 8:case"end":return c.stop()}},e)})),lp.apply(this,arguments)}function cD(e){var r=new Set,t=e.json.textures||[],n=WS(t),a;try{for(n.s();!(a=n.n()).done;){var i=a.value;i.source!==void 0&&r.add(i.source)}}catch(o){n.e(o)}finally{n.f()}return Array.from(r).sort()}function hD(e,r,t,n,a){return cp.apply(this,arguments)}function cp(){return cp=(0,qi.default)(vr.default.mark(function e(r,t,n,a,i){var o,s,u,f,l,c,h;return vr.default.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(o=i.fetch,s=i.parse,!(t.uri&&!t.hasOwnProperty("bufferView"))){p.next=10;break}return f=yd(t.uri,a),p.next=5,o(f);case 5:return l=p.sent,p.next=8,l.arrayBuffer();case 8:u=p.sent,t.bufferView={data:u};case 10:return Number.isFinite(t.bufferView)&&(c=zE(r.json,r.buffers,t.bufferView),u=tn(c.buffer,c.byteOffset,c.byteLength)),qe(u,"glTF image has no data"),p.next=14,s(u,[tr,gd],{mimeType:t.mimeType,basis:a.basis||{format:gu()}},i);case 14:h=p.sent,h&&h[0]&&(h={compressed:!0,mipmaps:!1,width:h[0].width,height:h[0].height,data:h[0]}),r.images=r.images||[],r.images[n]=h;case 18:case"end":return p.stop()}},e)})),cp.apply(this,arguments)}function qS(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function Eu(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?qS(Object(t),!0).forEach(function(n){(0,XS.default)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):qS(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var kn={name:"glTF",id:"gltf",module:"gltf",version:bE,extensions:["gltf","glb"],mimeTypes:["model/gltf+json","model/gltf-binary"],text:!0,binary:!0,tests:["glTF"],parse:dD,options:{gltf:{normalize:!0,loadBuffers:!0,loadImages:!0,decompressMeshes:!0,postProcess:!0},log:console},deprecatedOptions:{fetchImages:"gltf.loadImages",createImages:"gltf.loadImages",decompress:"gltf.decompressMeshes",postProcess:"gltf.postProcess",gltf:{decompress:"gltf.decompressMeshes"}}};function dD(e){return dp.apply(this,arguments)}function dp(){return dp=(0,YS.default)(hp.default.mark(function e(r){var t,n,a,i,o,s,u=arguments;return hp.default.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return t=u.length>1&&u[1]!==void 0?u[1]:{},n=u.length>2?u[2]:void 0,t=Eu(Eu({},kn.options),t),t.gltf=Eu(Eu({},kn.options.gltf),t.gltf),a=t,i=a.byteOffset,o=i===void 0?0:i,s={},l.next=8,JS(s,r,o,t,n);case 8:return l.abrupt("return",l.sent);case 9:case"end":return l.stop()}},e)})),dp.apply(this,arguments)}var Su={URI:0,EMBEDDED:1};function Cu(e,r,t,n){e.rotateYtoZ=!0;var a=e.byteOffset+e.byteLength-t;if(a===0)throw new Error("glTF byte length must be greater than 0.");return e.gltfUpAxis=n["3d-tiles"]&&n["3d-tiles"].assetGltfUpAxis?n["3d-tiles"].assetGltfUpAxis:"Y",e.gltfArrayBuffer=tn(r,t,a),e.gltfByteOffset=0,e.gltfByteLength=a,t%4===0||console.warn("".concat(e.type,": embedded glb is not aligned to a 4-byte boundary.")),e.byteOffset+e.byteLength}function wu(e,r,t,n){return mp.apply(this,arguments)}function mp(){return mp=(0,KS.default)(pp.default.mark(function e(r,t,n,a){var i,o,s;return pp.default.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(i=n["3d-tiles"]||{},pD(r,t,n),!i.loadGLTF){f.next=16;break}if(o=a.parse,s=a.fetch,!r.gltfUrl){f.next=9;break}return f.next=7,s(r.gltfUrl,n);case 7:r.gltfArrayBuffer=f.sent,r.gltfByteOffset=0;case 9:if(!r.gltfArrayBuffer){f.next=16;break}return f.next=12,o(r.gltfArrayBuffer,kn,n,a);case 12:r.gltf=f.sent,delete r.gltfArrayBuffer,delete r.gltfByteOffset,delete r.gltfByteLength;case 16:case"end":return f.stop()}},e)})),mp.apply(this,arguments)}function pD(e,r,t){switch(r){case Su.URI:var n=new Uint8Array(e.gltfArrayBuffer,e.gltfByteOffset),a=new TextDecoder,i=a.decode(n);e.gltfUrl=i.replace(/[\s\0]+$/,""),delete e.gltfArrayBuffer,delete e.gltfByteOffset,delete e.gltfByteLength;break;case Su.EMBEDDED:break;default:throw new Error("b3dm: Illegal glTF format field")}}function ZS(e,r,t,n,a){return gp.apply(this,arguments)}function gp(){return gp=(0,QS.default)(vp.default.mark(function e(r,t,n,a,i){var o,s;return vp.default.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return n=mD(r,t,n,a,i),f.next=3,wu(r,Su.EMBEDDED,a,i);case 3:return s=r==null||(o=r.gltf)===null||o===void 0?void 0:o.extensions,s&&s.CESIUM_RTC&&(r.rtcCenter=s.CESIUM_RTC.center),f.abrupt("return",n);case 6:case"end":return f.stop()}},e)})),gp.apply(this,arguments)}function mD(e,r,t,n,a){t=Vr(e,r,t),t=Ba(e,r,t),t=Ma(e,r,t,n),t=Cu(e,r,t,n);var i=new Sa(e.featureTableJson,e.featureTableBinary);return e.rtcCenter=i.getGlobalProperty("RTC_CENTER",5126,3),t}var $S=m(X()),yp=m(Y());function eC(e,r,t,n,a){return Ap.apply(this,arguments)}function Ap(){return Ap=(0,$S.default)(yp.default.mark(function e(r,t,n,a,i){return yp.default.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return n=vD(r,t,n,a,i),s.next=3,wu(r,r.gltfFormat,a,i);case 3:return s.abrupt("return",n);case 4:case"end":return s.stop()}},e)})),Ap.apply(this,arguments)}function vD(e,r,t,n,a){if(t=Vr(e,r,t),e.version!==1)throw new Error("Instanced 3D Model version ".concat(e.version," is not supported"));t=Ba(e,r,t);var i=new DataView(r);if(e.gltfFormat=i.getUint32(t,!0),t+=4,t=Ma(e,r,t,n),t=Cu(e,r,t,n),e.featureTableJsonByteLength===0)throw new Error("i3dm parser: featureTableJsonByteLength is zero.");var o=new Sa(e.featureTableJson,e.featureTableBinary),s=o.getGlobalProperty("INSTANCES_LENGTH");if(o.featuresLength=s,!Number.isFinite(s))throw new Error("i3dm parser: INSTANCES_LENGTH must be defined");e.eastNorthUp=o.getGlobalProperty("EAST_NORTH_UP"),e.rtcCenter=o.getGlobalProperty("RTC_CENTER",5126,3);var u=new pu(e.batchTableJson,e.batchTableBinary,s);return gD(e,o,u,s),t}function gD(e,r,t,n){for(var a={instances:new Array(n),batchTable:e._batchTable,cull:!1,url:void 0,gltf:void 0,basePath:void 0,incrementallyLoadTextures:!1,forwardAxis:[1,0,0]},i=a.instances,o=new w,s=new w,u=new w,f=new w,l=new ge,c=new wr,h=new w,d={},p=new $,v=[],g=[],y=new w,b=new w,E=0;E<n;E++){var T=void 0;if(r.hasProperty("POSITION"))T=r.getProperty("POSITION",5126,3,E,o);else if(r.hasProperty("POSITION_QUANTIZED")){T=r.getProperty("POSITION_QUANTIZED",5123,3,E,o);var S=r.getGlobalProperty("QUANTIZED_VOLUME_OFFSET",5126,3,y);if(!S)throw new Error("i3dm parser: QUANTIZED_VOLUME_OFFSET must be defined for quantized positions.");var I=r.getGlobalProperty("QUANTIZED_VOLUME_SCALE",5126,3,b);if(!I)throw new Error("i3dm parser: QUANTIZED_VOLUME_SCALE must be defined for quantized positions.");for(var L=65535,B=0;B<3;B++)T[B]=T[B]/L*I[B]+S[B]}if(!T)throw new Error("i3dm: POSITION or POSITION_QUANTIZED must be defined for each instance.");o.copy(T),d.translation=o,e.normalUp=r.getProperty("NORMAL_UP",5126,3,E,v),e.normalRight=r.getProperty("NORMAL_RIGHT",5126,3,E,g);var C=!1;if(e.normalUp){if(!e.normalRight)throw new Error("i3dm: Custom orientation requires both NORMAL_UP and NORMAL_RIGHT.");e.hasCustomOrientation=!0}else{if(e.octNormalUp=r.getProperty("NORMAL_UP_OCT32P",5123,2,v),e.octNormalRight=r.getProperty("NORMAL_RIGHT_OCT32P",5123,2,g),e.octNormalUp)throw e.octNormalRight?new Error("i3dm: oct-encoded orientation not implemented"):new Error("i3dm: oct-encoded orientation requires NORMAL_UP_OCT32P and NORMAL_RIGHT_OCT32P");e.eastNorthUp?(be.WGS84.eastNorthUpToFixedFrame(o,p),p.getRotationMatrix3(l)):l.identity()}C&&(f.copy(s).cross(u).normalize(),l.setColumn(0,s),l.setColumn(1,u),l.setColumn(2,f)),c.fromMatrix3(l),d.rotation=c,h.set(1,1,1);var _=r.getProperty("SCALE",5126,1,E);Number.isFinite(_)&&h.multiplyByScalar(_);var R=r.getProperty("SCALE_NON_UNIFORM",5126,3,E,v);R&&h.scale(R),d.scale=h;var F=r.getProperty("BATCH_ID",5123,1,E);F===void 0&&(F=E);var D=new $().fromQuaternion(d.rotation);p.identity(),p.translate(d.translation),p.multiplyRight(D),p.scale(d.scale);var k=p.clone();i[E]={modelMatrix:k,batchId:F}}e.instances=i}var tC=m(X()),_p=m(Y());function rC(e,r,t,n,a,i){return bp.apply(this,arguments)}function bp(){return bp=(0,tC.default)(_p.default.mark(function e(r,t,n,a,i,o){var s,u;return _p.default.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:n=Vr(r,t,n),s=new DataView(t),r.tilesLength=s.getUint32(n,!0),n+=4,r.tiles=[];case 5:if(!(r.tiles.length<r.tilesLength&&r.byteLength-n>12)){l.next=13;break}return u={},r.tiles.push(u),l.next=10,o(t,n,a,i,u);case 10:n=l.sent,l.next=5;break;case 13:return l.abrupt("return",n);case 14:case"end":return l.stop()}},e)})),bp.apply(this,arguments)}var nC=m(X()),Tp=m(Y());function aC(e,r,t,n){return xp.apply(this,arguments)}function xp(){return xp=(0,nC.default)(Tp.default.mark(function e(r,t,n,a){var i;return Tp.default.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return r.rotateYtoZ=!0,r.gltfUpAxis=n["3d-tiles"]&&n["3d-tiles"].assetGltfUpAxis?n["3d-tiles"].assetGltfUpAxis:"Y",i=a.parse,s.next=5,i(t,kn,n,a);case 5:r.gltf=s.sent;case 6:case"end":return s.stop()}},e)})),xp.apply(this,arguments)}function Cp(e){return Sp.apply(this,arguments)}function Sp(){return Sp=(0,iC.default)(Ep.default.mark(function e(r){var t,n,a,i,o=arguments;return Ep.default.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:t=o.length>1&&o[1]!==void 0?o[1]:0,n=o.length>2?o[2]:void 0,a=o.length>3?o[3]:void 0,i=o.length>4&&o[4]!==void 0?o[4]:{},i.byteOffset=t,i.type=qT(r,t),u.t0=i.type,u.next=u.t0===wn.COMPOSITE?9:u.t0===wn.BATCHED_3D_MODEL?12:u.t0===wn.GLTF?15:u.t0===wn.INSTANCED_3D_MODEL?18:u.t0===wn.POINT_CLOUD?21:24;break;case 9:return u.next=11,rC(i,r,t,n,a,Cp);case 11:return u.abrupt("return",u.sent);case 12:return u.next=14,ZS(i,r,t,n,a);case 14:return u.abrupt("return",u.sent);case 15:return u.next=17,aC(i,r,n,a);case 17:return u.abrupt("return",u.sent);case 18:return u.next=20,eC(i,r,t,n,a);case 20:return u.abrupt("return",u.sent);case 21:return u.next=23,_E(i,r,t,n,a);case 23:return u.abrupt("return",u.sent);case 24:throw new Error("3DTileLoader: unknown type ".concat(i.type));case 25:case"end":return u.stop()}},e)})),Sp.apply(this,arguments)}var Ou=m(X()),Gn=m(Y());var Op=m(X()),Xi=m(Y()),yD=1952609651,AD=1;function Ip(e,r,t){return Bp.apply(this,arguments)}function Bp(){return Bp=(0,Op.default)(Xi.default.mark(function e(r,t,n){var a,i,o,s,u,f,l,c,h;return Xi.default.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(a=new Uint32Array(r.slice(0,4)),a[0]===yD){p.next=3;break}throw new Error("Wrong subtree file magic number");case 3:if(i=new Uint32Array(r.slice(4,8)),i[0]===AD){p.next=6;break}throw new Error("Wrong subtree file verson, must be 1");case 6:if(o=oC(r.slice(8,16)),s=new Uint8Array(r,24,o),u=new TextDecoder("utf8"),f=u.decode(s),l=JSON.parse(f),c=oC(r.slice(16,24)),h=new ArrayBuffer(0),c&&(h=r.slice(24+o)),!("bufferView"in l.tileAvailability)){p.next=18;break}return p.next=17,wp(l,"tileAvailability",h,n);case 17:l.tileAvailability.explicitBitstream=p.sent;case 18:if(!("bufferView"in l.contentAvailability)){p.next=22;break}return p.next=21,wp(l,"contentAvailability",h,n);case 21:l.contentAvailability.explicitBitstream=p.sent;case 22:if(!("bufferView"in l.childSubtreeAvailability)){p.next=26;break}return p.next=25,wp(l,"childSubtreeAvailability",h,n);case 25:l.childSubtreeAvailability.explicitBitstream=p.sent;case 26:return p.abrupt("return",l);case 27:case"end":return p.stop()}},e)})),Bp.apply(this,arguments)}function _D(e,r){var t=r.startsWith("http");if(t){var n=new URL(e,r);return decodeURI(n.toString())}var a="http://".concat(r),i=new URL(e,a);return"/".concat(i.host).concat(i.pathname)}function wp(e,r,t,n){return Mp.apply(this,arguments)}function Mp(){return Mp=(0,Op.default)(Xi.default.mark(function e(r,t,n,a){var i,o,s,u,f,l;return Xi.default.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(i=r[t].bufferView,o=r.bufferViews[i],s=r.buffers[o.buffer],!(!(a!=null&&a.url)||!a.fetch)){h.next=5;break}throw new Error("Url is not provided");case 5:if(a.fetch){h.next=7;break}throw new Error("fetch is not provided");case 7:if(!s.uri){h.next=16;break}return u=_D(s.uri,a?.url),h.next=11,a.fetch(u);case 11:return f=h.sent,h.next=14,f.arrayBuffer();case 14:return l=h.sent,h.abrupt("return",new Uint8Array(l,o.byteOffset,o.byteLength));case 16:return h.abrupt("return",new Uint8Array(n,o.byteOffset,o.byteLength));case 17:case"end":return h.stop()}},e)})),Mp.apply(this,arguments)}function oC(e){var r=new DataView(e),t=r.getUint32(0,!0),n=r.getUint32(4,!0);return t+Math.pow(2,32)*n}var Bu={id:"3d-tiles-subtree",name:"3D Tiles Subtree",module:"3d-tiles",version:$s,extensions:["subtree"],mimeTypes:["application/octet-stream"],tests:["subtree"],parse:Ip,options:{}};var pC=m(_a());var sC=m(ce()),uC=m(X()),Rp=m(Y());var fC=m(_a()),bD=4,TD=8,xD={QUADTREE:bD,OCTREE:TD};function Lp(e){return Fp.apply(this,arguments)}function Fp(){return Fp=(0,uC.default)(Rp.default.mark(function e(r){var t,n,a,i,o,s,u,f,l,c,h,d,p,v,g,y,b,E,T,S,I,L,B,C,_,R,F,D,k,M,O,P,U,G,j,q,ne,Re,we,rt,Ue,Ar,xt,zn;return Rp.default.wrap(function(yt){for(;;)switch(yt.prev=yt.next){case 0:if(t=r.options,n=r.parentData,a=n===void 0?{mortonIndex:0,x:0,y:0,z:0}:n,i=r.childIndex,o=i===void 0?0:i,s=r.globalData,u=s===void 0?{level:0,mortonIndex:0,x:0,y:0,z:0}:s,f=r.subtree,l=r.level,c=l===void 0?0:l,h=t.subdivisionScheme,d=t.subtreeLevels,p=t.maximumLevel,v=t.contentUrlTemplate,g=t.subtreesUriTemplate,y=t.basePath,b={children:[],lodMetricValue:0,contentUrl:""},E=xD[h],T=o&1,S=o>>1&1,I=o>>2&1,L=(Math.pow(E,c)-1)/(E-1),B=Dn(a.mortonIndex,o),C=L+B,_=Dn(a.x,T),R=Dn(a.y,S),F=Dn(a.z,I),D=!1,c+1>d&&(D=Pp(f.childSubtreeAvailability,B)),k=Dn(u.x,_),M=Dn(u.y,R),O=Dn(u.z,F),P=c+u.level,!D){yt.next=38;break}return U="".concat(y,"/").concat(g),G=Mu(U,P,k,M,O),yt.next=25,(0,fC.load)(G,Bu);case 25:j=yt.sent,f=j,u.mortonIndex=B,u.x=_,u.y=R,u.z=F,u.level=c,B=0,C=0,_=0,R=0,F=0,c=0;case 38:if(q=Pp(f.tileAvailability,C),!(!q||c>p)){yt.next=41;break}return yt.abrupt("return",b);case 41:ne=Pp(f.contentAvailability,C),ne&&(b.contentUrl=Mu(v,P,k,M,O)),Re=c+1,we={mortonIndex:B,x:_,y:R,z:F},rt=0;case 46:if(!(rt<E)){yt.next=54;break}return yt.next=49,Lp({subtree:f,options:t,parentData:we,childIndex:rt,level:Re,globalData:u});case 49:Ue=yt.sent,(Ue.contentUrl||Ue.children.length)&&(Ar=P+1,xt={childTileX:_,childTileY:R,childTileZ:F},zn=ED(Ue,Ar,xt,t),b.children.push(zn));case 51:rt++,yt.next=46;break;case 54:return yt.abrupt("return",b);case 55:case"end":return yt.stop()}},e)})),Fp.apply(this,arguments)}function Pp(e,r){return"constant"in e?Boolean(e.constant):e.explicitBitstream?wD(r,e.explicitBitstream):!1}function ED(e,r,t,n){var a=n.basePath,i=n.refine,o=n.getRefine,s=n.lodMetricType,u=n.getTileType,f=n.rootLodMetricValue,l=n.rootBoundingVolume,c=e.contentUrl&&e.contentUrl.replace("".concat(a,"/"),""),h=f/Math.pow(2,r),d=SD(r,l,t);return{children:e.children,contentUrl:e.contentUrl,content:{uri:c},id:e.contentUrl,refine:o(i),type:u(e),lodMetricType:s,lodMetricValue:h,geometricError:h,transform:e.transform,boundingVolume:d}}function SD(e,r,t){if(r.region){var n=t.childTileX,a=t.childTileY,i=t.childTileZ,o=(0,sC.default)(r.region,6),s=o[0],u=o[1],f=o[2],l=o[3],c=o[4],h=o[5],d=Math.pow(2,e),p=(f-s)/d,v=(l-u)/d,g=(h-c)/d,y=s+p*n,b=s+p*(n+1),E=u+v*a,T=u+v*(a+1),S=c+g*i,I=c+g*(i+1);return{region:[y,E,b,T,S,I]}}return console.warn("Unsupported bounding volume type: ",r),null}function Dn(e,r){return parseInt(e.toString(2)+r.toString(2),2)}function Mu(e,r,t,n,a){var i=CD({level:r,x:t,y:n,z:a});return e.replace(/{level}|{x}|{y}|{z}/gi,function(o){return i[o]})}function CD(e){var r={};for(var t in e)r["{".concat(t,"}")]=e[t];return r}function wD(e,r){var t=Math.floor(e/8),n=e%8,a=r[t]>>n&1;return a===1}function BD(e,r){var t=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=MD(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(f){throw f},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,o=!1,s;return{s:function(){t=t.call(e)},n:function(){var f=t.next();return i=f.done,f},e:function(f){o=!0,s=f},f:function(){try{!i&&t.return!=null&&t.return()}finally{if(o)throw s}}}}function MD(e,r){if(e){if(typeof e=="string")return lC(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return lC(e,r)}}function lC(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function Up(e){if(!e.contentUrl)return cr.EMPTY;var r=e.contentUrl,t=r.split(".").pop();switch(t){case"pnts":return cr.POINTCLOUD;case"i3dm":case"b3dm":case"glb":case"gltf":return cr.SCENEGRAPH;default:return t}}function jp(e){switch(e){case"REPLACE":case"replace":return pt.REPLACE;case"ADD":case"add":return pt.ADD;default:return e}}function kp(e,r){var t=/^[a-z][0-9a-z+.-]*:/i;if(t.test(r)){var n=new URL(e,"".concat(r,"/"));return decodeURI(n.toString())}else if(e.startsWith("/"))return e;return"".concat(r,"/").concat(e)}function cC(e,r){if(!e)return null;if(e.content){var t=e.content.uri||e.content.url;e.contentUrl=kp(t,r.basePath)}return e.id=e.contentUrl,e.lodMetricType=En.GEOMETRIC_ERROR,e.lodMetricValue=e.geometricError,e.transformMatrix=e.transform,e.type=Up(e),e.refine=jp(e.refine),e}function mC(e,r){return Dp.apply(this,arguments)}function Dp(){return Dp=(0,Ou.default)(Gn.default.mark(function e(r,t){var n,a,i,o,s,u,f,l,c,h;return Gn.default.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(n=r.basePath,i=dC(r?.root),!(i&&r.root)){p.next=8;break}return p.next=5,hC(r.root,r,i,t);case 5:a=p.sent,p.next=9;break;case 8:a=cC(r.root,r);case 9:o=[],o.push(a);case 11:if(!(o.length>0)){p.next=40;break}s=o.pop()||{},u=s.children||[],f=BD(u),p.prev=15,f.s();case 17:if((l=f.n()).done){p.next=30;break}if(c=l.value,h=dC(c),!h){p.next=26;break}return p.next=23,hC(c,r,h,t);case 23:c=p.sent,p.next=27;break;case 26:cC(c,{basePath:n});case 27:o.push(c);case 28:p.next=17;break;case 30:p.next=35;break;case 32:p.prev=32,p.t0=p.catch(15),f.e(p.t0);case 35:return p.prev=35,f.f(),p.finish(35);case 38:p.next=11;break;case 40:return p.abrupt("return",a);case 41:case"end":return p.stop()}},e,null,[[15,32,35,38]])})),Dp.apply(this,arguments)}function hC(e,r,t,n){return Gp.apply(this,arguments)}function Gp(){return Gp=(0,Ou.default)(Gn.default.mark(function e(r,t,n,a){var i,o,s,u,f,l,c,h,d,p,v,g,y,b;return Gn.default.wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return o=t.basePath,s=n.subdivisionScheme,u=n.maximumLevel,f=n.subtreeLevels,l=n.subtrees.uri,c=Mu(l,0,0,0,0),h=kp(c,o),T.next=6,(0,pC.load)(h,Bu,a);case 6:return d=T.sent,p=kp(r.content.uri,o),v=t==null||(i=t.root)===null||i===void 0?void 0:i.refine,g=r.geometricError,y=r.boundingVolume,b={contentUrlTemplate:p,subtreesUriTemplate:l,subdivisionScheme:s,subtreeLevels:f,maximumLevel:u,refine:v,basePath:o,lodMetricType:En.GEOMETRIC_ERROR,rootLodMetricValue:g,rootBoundingVolume:y,getTileType:Up,getRefine:jp},T.next=14,OD(r,d,b);case 14:return T.abrupt("return",T.sent);case 15:case"end":return T.stop()}},e)})),Gp.apply(this,arguments)}function OD(e,r,t){return Np.apply(this,arguments)}function Np(){return Np=(0,Ou.default)(Gn.default.mark(function e(r,t,n){var a,i,o;return Gn.default.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(r){u.next=2;break}return u.abrupt("return",null);case 2:return r.lodMetricType=En.GEOMETRIC_ERROR,r.lodMetricValue=r.geometricError,r.transformMatrix=r.transform,u.next=7,Lp({subtree:t,options:n});case 7:return a=u.sent,i=a.children,o=a.contentUrl,o&&(r.contentUrl=o,r.content={uri:o.replace("".concat(n.basePath,"/"),"")}),r.refine=jp(r.refine),r.type=Up(r),r.children=i,r.id=r.contentUrl,u.abrupt("return",r);case 16:case"end":return u.stop()}},e)})),Np.apply(this,arguments)}function dC(e){var r;return(e==null||(r=e.extensions)===null||r===void 0?void 0:r["3DTILES_implicit_tiling"])||e?.implicitTiling}var Pu={id:"3d-tiles",name:"3D Tiles",module:"3d-tiles",version:$s,extensions:["cmpt","pnts","b3dm","i3dm"],mimeTypes:["application/octet-stream"],tests:["cmpt","pnts","b3dm","i3dm"],parse:FD,options:{"3d-tiles":{loadGLTF:!0,decodeQuantizedPositions:!1,isTileset:"auto",assetGltfUpAxis:null}}};function ID(e){return Jn.dirname(e.url)}function PD(e,r,t){return Hp.apply(this,arguments)}function Hp(){return Hp=(0,Iu.default)(Nn.default.mark(function e(r,t,n){var a,i;return Nn.default.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return a={content:{featureIds:null}},i=0,s.next=4,Cp(r,i,t,n,a.content);case 4:return s.abrupt("return",a.content);case 5:case"end":return s.stop()}},e)})),Hp.apply(this,arguments)}function RD(e,r,t){return Vp.apply(this,arguments)}function Vp(){return Vp=(0,Iu.default)(Nn.default.mark(function e(r,t,n){var a,i;return Nn.default.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return i=JSON.parse(new TextDecoder().decode(r)),i.loader=t.loader||Pu,i.url=n.url,i.basePath=ID(i),s.next=6,mC(i,t);case 6:return i.root=s.sent,i.type=tt.TILES3D,i.lodMetricType=En.GEOMETRIC_ERROR,i.lodMetricValue=((a=i.root)===null||a===void 0?void 0:a.lodMetricValue)||0,s.abrupt("return",i);case 11:case"end":return s.stop()}},e)})),Vp.apply(this,arguments)}function FD(e,r,t){return zp.apply(this,arguments)}function zp(){return zp=(0,Iu.default)(Nn.default.mark(function e(r,t,n){var a,i;return Nn.default.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(a=t["3d-tiles"]||{},a.isTileset==="auto"?i=n.url&&n.url.indexOf(".json")!==-1:i=a.isTileset,!i){s.next=8;break}return s.next=5,RD(r,t,n);case 5:r=s.sent,s.next=11;break;case 8:return s.next=10,PD(r,t,n);case 10:r=s.sent;case 11:return s.abrupt("return",r);case 12:case"end":return s.stop()}},e)})),zp.apply(this,arguments)}function vC(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function La(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?vC(Object(t),!0).forEach(function(n){(0,Yi.default)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):vC(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function LD(e){var r=kD();return function(){var n=(0,Wp.default)(e),a;if(r){var i=(0,Wp.default)(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return(0,xC.default)(this,a)}}function kD(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var gC=[0],DD={getPointColor:{type:"accessor",value:[0,0,0,255]},pointSize:1,data:"",loader:Pu,onTilesetLoad:{type:"function",value:function(r){}},onTileLoad:{type:"function",value:function(r){}},onTileUnload:{type:"function",value:function(r){}},onTileError:{type:"function",value:function(r,t,n){}},_getMeshColor:{type:"function",value:function(r){return[255,255,255]}}},Ru=function(e){(0,TC.default)(t,e);var r=LD(t);function t(){var n;(0,AC.default)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return n=r.call.apply(r,[this].concat(i)),(0,Yi.default)((0,bC.default)(n),"state",void 0),n}return(0,_C.default)(t,[{key:"initializeState",value:function(){"onTileLoadFail"in this.props&&Wr.log.removed("onTileLoadFail","onTileError")(),this.state={layerMap:{},tileset3d:null,activeViewports:{},lastUpdatedViewports:null}}},{key:"isLoaded",get:function(){var a=this.state.tileset3d;return a!==null&&a.isLoaded()}},{key:"shouldUpdateState",value:function(a){var i=a.changeFlags;return i.somethingChanged}},{key:"updateState",value:function(a){var i=a.props,o=a.oldProps,s=a.changeFlags;if(i.data&&i.data!==o.data&&this._loadTileset(i.data),s.viewportChanged){var u=this.state.activeViewports,f=Object.keys(u).length;f&&(this._updateTileset(u),this.state.lastUpdatedViewports=u,this.state.activeViewports={})}if(s.propsChanged){var l=this.state.layerMap;for(var c in l)l[c].needsUpdate=!0}}},{key:"activateViewport",value:function(a){var i=this.state,o=i.activeViewports,s=i.lastUpdatedViewports;this.internalState.viewport=a,o[a.id]=a;var u=s?.[a.id];(!u||!a.equals(u))&&(this.setChangeFlags({viewportChanged:!0}),this.setNeedsUpdate())}},{key:"getPickingInfo",value:function(a){var i=a.info,o=a.sourceLayer,s=o&&o.props.tile;return i.picked&&(i.object=s),i.sourceTile=s,i}},{key:"filterSubLayer",value:function(a){var i=a.layer,o=a.viewport,s=i.props,u=s.tile,f=o.id;return u.selected&&u.viewportIds.includes(f)}},{key:"_updateAutoHighlight",value:function(a){var i=a.sourceTile,o=this.state.layerMap[i?.id];o&&o.layer&&o.layer.updateAutoHighlight(a)}},{key:"_loadTileset",value:function(){var n=(0,yC.default)(Jp.default.mark(function i(o){var s,u,f,l,c,h,d;return Jp.default.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(s=this.props.loadOptions,u=s===void 0?{}:s,f=this.props.loader||this.props.loaders,Array.isArray(f)&&(f=f[0]),l={loadOptions:La({},u)},!f.preload){v.next=10;break}return v.next=7,f.preload(o,u);case 7:c=v.sent,c.headers&&(l.loadOptions.fetch=La(La({},l.loadOptions.fetch),{},{headers:c.headers})),Object.assign(l,c);case 10:return v.next=12,(0,wC.load)(o,f,l.loadOptions);case 12:h=v.sent,d=new Rh(h,La({onTileLoad:this._onTileLoad.bind(this),onTileUnload:this._onTileUnload.bind(this),onTileError:this.props.onTileError},l)),this.setState({tileset3d:d,layerMap:{}}),this._updateTileset(this.state.activeViewports),this.props.onTilesetLoad(d);case 17:case"end":return v.stop()}},i,this)}));function a(i){return n.apply(this,arguments)}return a}()},{key:"_onTileLoad",value:function(a){var i=this.state.lastUpdatedViewports;this.props.onTileLoad(a),this._updateTileset(i),this.setNeedsUpdate()}},{key:"_onTileUnload",value:function(a){delete this.state.layerMap[a.id],this.props.onTileUnload(a)}},{key:"_updateTileset",value:function(a){var i=this;if(a){var o=this.state.tileset3d,s=this.context.timeline,u=Object.keys(a).length;!s||!u||!o||o.selectTiles(Object.values(a)).then(function(f){var l=i.state.frameNumber!==f;l&&i.setState({frameNumber:f})})}}},{key:"_getSubLayer",value:function(a,i){if(!a.content)return null;switch(a.type){case cr.POINTCLOUD:return this._makePointCloudLayer(a,i);case cr.SCENEGRAPH:return this._make3DModelLayer(a);case cr.MESH:return this._makeSimpleMeshLayer(a,i);default:throw new Error("Tile3DLayer: Failed to render layer of type ".concat(a.content.type))}}},{key:"_makePointCloudLayer",value:function(a,i){var o=a.content,s=o.attributes,u=o.pointCount,f=o.constantRGBA,l=o.cartographicOrigin,c=o.modelMatrix,h=s.positions,d=s.normals,p=s.colors;if(!h)return null;var v=i&&i.props.data||{header:{vertexCount:u},attributes:{POSITION:h,NORMAL:d,COLOR_0:p}},g=this.props,y=g.pointSize,b=g.getPointColor,E=this.getSubLayerClass("pointcloud",SC.PointCloudLayer);return new E({pointSize:y},this.getSubLayerProps({id:"pointcloud"}),{id:"".concat(this.id,"-pointcloud-").concat(a.id),tile:a,data:v,coordinateSystem:Wr.COORDINATE_SYSTEM.METER_OFFSETS,coordinateOrigin:l,modelMatrix:c,getColor:f||b,_offset:0})}},{key:"_make3DModelLayer",value:function(a){var i=a.content,o=i.gltf,s=i.instances,u=i.cartographicOrigin,f=i.modelMatrix,l=this.getSubLayerClass("scenegraph",CC.ScenegraphLayer);return new l({_lighting:"pbr"},this.getSubLayerProps({id:"scenegraph"}),{id:"".concat(this.id,"-scenegraph-").concat(a.id),tile:a,data:s||gC,scenegraph:o,coordinateSystem:Wr.COORDINATE_SYSTEM.METER_OFFSETS,coordinateOrigin:u,modelMatrix:f,getTransformMatrix:function(h){return h.modelMatrix},getPosition:[0,0,0],_offset:0})}},{key:"_makeSimpleMeshLayer",value:function(a,i){var o=a.content,s=o.attributes,u=o.indices,f=o.modelMatrix,l=o.cartographicOrigin,c=o.coordinateSystem,h=c===void 0?Wr.COORDINATE_SYSTEM.METER_OFFSETS:c,d=o.material,p=o.featureIds,v=this.props._getMeshColor,g=i&&i.props.mesh||new EC.Geometry({drawMode:4,attributes:GD(s),indices:u}),y=this.getSubLayerClass("mesh",Ns);return new y(this.getSubLayerProps({id:"mesh"}),{id:"".concat(this.id,"-mesh-").concat(a.id),tile:a,mesh:g,data:gC,getColor:v(a),pbrMaterial:d,modelMatrix:f,coordinateOrigin:l,coordinateSystem:h,featureIds:p,_offset:0})}},{key:"renderLayers",value:function(){var a=this,i=this.state,o=i.tileset3d,s=i.layerMap;return o?o.tiles.map(function(u){var f=s[u.id]=s[u.id]||{tile:u},l=f.layer;return u.selected&&(l?f.needsUpdate&&(l=a._getSubLayer(u,l),f.needsUpdate=!1):l=a._getSubLayer(u)),f.layer=l,l}).filter(Boolean):null}}]),t}(Wr.CompositeLayer);(0,Yi.default)(Ru,"defaultProps",DD);(0,Yi.default)(Ru,"layerName","Tile3DLayer");function GD(e){var r={};return r.positions=La(La({},e.positions),{},{value:new Float32Array(e.positions.value)}),e.normals&&(r.normals=e.normals),e.texCoords&&(r.texCoords=e.texCoords),e.colors&&(r.colors=e.colors),e.uvRegions&&(r.uvRegions=e.uvRegions),r}var em=m(Et()),qC=m(ce()),XC=m(H()),YC=m(z()),KC=m(nt()),QC=m(Te()),ZC=m(xe()),tm=m(ye()),$i=m(W()),ju=m(Pt()),rm=m(vs()),$C=m(Pt());var HC=m(X()),VC=m(W()),$p=m(Y());var OC=m(ce());var MC=m(ce());function ND(e,r){var t=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=UD(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(f){throw f},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,o=!1,s;return{s:function(){t=t.call(e)},n:function(){var f=t.next();return i=f.done,f},e:function(f){o=!0,s=f},f:function(){try{!i&&t.return!=null&&t.return()}finally{if(o)throw s}}}}function UD(e,r){if(e){if(typeof e=="string")return BC(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return BC(e,r)}}function BC(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var jD=new Map([["centerX",Float64Array.BYTES_PER_ELEMENT],["centerY",Float64Array.BYTES_PER_ELEMENT],["centerZ",Float64Array.BYTES_PER_ELEMENT],["minHeight",Float32Array.BYTES_PER_ELEMENT],["maxHeight",Float32Array.BYTES_PER_ELEMENT],["boundingSphereCenterX",Float64Array.BYTES_PER_ELEMENT],["boundingSphereCenterY",Float64Array.BYTES_PER_ELEMENT],["boundingSphereCenterZ",Float64Array.BYTES_PER_ELEMENT],["boundingSphereRadius",Float64Array.BYTES_PER_ELEMENT],["horizonOcclusionPointX",Float64Array.BYTES_PER_ELEMENT],["horizonOcclusionPointY",Float64Array.BYTES_PER_ELEMENT],["horizonOcclusionPointZ",Float64Array.BYTES_PER_ELEMENT]]);function qp(e){return e>>1^-(e&1)}function HD(e){var r=0,t={},n=ND(jD),a;try{for(n.s();!(a=n.n()).done;){var i=(0,MC.default)(a.value,2),o=i[0],s=i[1],u=s===8?e.getFloat64:e.getFloat32;t[o]=u.call(e,r,!0),r+=s}}catch(f){n.e(f)}finally{n.f()}return{header:t,headerEndPosition:r}}function VD(e,r){var t=r,n=3,a=e.getUint32(t,!0),i=new Uint16Array(a*n);t+=Uint32Array.BYTES_PER_ELEMENT;for(var o=Uint16Array.BYTES_PER_ELEMENT,s=a*o,u=t,f=u+s,l=f+s,c=0,h=0,d=0,p=0;p<a;p++)c+=qp(e.getUint16(u+o*p,!0)),h+=qp(e.getUint16(f+o*p,!0)),d+=qp(e.getUint16(l+o*p,!0)),i[p]=c,i[p+a]=h,i[p+a*2]=d;return t+=s*3,{vertexData:i,vertexDataEndPosition:t}}function Ki(e,r,t,n){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,i;if(n===2?i=new Uint16Array(e,r,t):i=new Uint32Array(e,r,t),!a)return i;for(var o=0,s=0;s<i.length;++s){var u=i[s];i[s]=o-u,u===0&&++o}return i}function zD(e,r,t){var n=t,a=3,i=r.length/a,o=i>65536?Uint32Array.BYTES_PER_ELEMENT:Uint16Array.BYTES_PER_ELEMENT;n%o!==0&&(n+=o-n%o);var s=e.getUint32(n,!0);n+=Uint32Array.BYTES_PER_ELEMENT;var u=s*3,f=Ki(e.buffer,n,u,o);return n+=u*o,{triangleIndicesEndPosition:n,triangleIndices:f}}function WD(e,r,t){var n=t,a=3,i=r.length/a,o=i>65536?Uint32Array.BYTES_PER_ELEMENT:Uint16Array.BYTES_PER_ELEMENT,s=e.getUint32(n,!0);n+=Uint32Array.BYTES_PER_ELEMENT;var u=Ki(e.buffer,n,s,o,!1);n+=s*o;var f=e.getUint32(n,!0);n+=Uint32Array.BYTES_PER_ELEMENT;var l=Ki(e.buffer,n,f,o,!1);n+=f*o;var c=e.getUint32(n,!0);n+=Uint32Array.BYTES_PER_ELEMENT;var h=Ki(e.buffer,n,c,o,!1);n+=c*o;var d=e.getUint32(n,!0);n+=Uint32Array.BYTES_PER_ELEMENT;var p=Ki(e.buffer,n,d,o,!1);return n+=d*o,{edgeIndicesEndPosition:n,westIndices:u,southIndices:l,eastIndices:h,northIndices:p}}function JD(e){return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}function qD(e){return e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}function XD(e,r){var t={};if(e.byteLength<=r)return{extensions:t,extensionsEndPosition:r};for(var n=r;n<e.byteLength;){var a=e.getUint8(n,!0);n+=Uint8Array.BYTES_PER_ELEMENT;var i=e.getUint32(n,!0);n+=Uint32Array.BYTES_PER_ELEMENT;var o=new DataView(e.buffer,n,i);switch(a){case 1:{t.vertexNormals=JD(o);break}case 2:{t.waterMask=qD(o);break}default:}n+=i}return{extensions:t,extensionsEndPosition:n}}var Un={header:0,vertices:1,triangleIndices:2,edgeIndices:3,extensions:4},YD={maxDecodingStep:Un.extensions};function Xp(e,r){var t=Object.assign({},YD,r),n=new DataView(e),a=HD(n),i=a.header,o=a.headerEndPosition;if(t.maxDecodingStep<Un.vertices)return{header:i};var s=VD(n,o),u=s.vertexData,f=s.vertexDataEndPosition;if(t.maxDecodingStep<Un.triangleIndices)return{header:i,vertexData:u};var l=zD(n,u,f),c=l.triangleIndices,h=l.triangleIndicesEndPosition;if(t.maxDecodingStep<Un.edgeIndices)return{header:i,vertexData:u,triangleIndices:c};var d=WD(n,u,h),p=d.westIndices,v=d.southIndices,g=d.eastIndices,y=d.northIndices,b=d.edgeIndicesEndPosition;if(t.maxDecodingStep<Un.extensions)return{header:i,vertexData:u,triangleIndices:c,westIndices:p,northIndices:y,eastIndices:g,southIndices:v};var E=XD(n,b),T=E.extensions;return{header:i,vertexData:u,triangleIndices:c,westIndices:p,northIndices:y,eastIndices:g,southIndices:v,extensions:T}}var Qi=m(Et());function Fu(e,r,t,n){for(var a=n?QD(n,e.POSITION.value):KD(r),i=new e.POSITION.value.constructor(a.length*6),o=new e.TEXCOORD_0.value.constructor(a.length*4),s=new r.constructor(a.length*6),u=0;u<a.length;u++){var f=a[u];ZD({edge:f,edgeIndex:u,attributes:e,skirtHeight:t,newPosition:i,newTexcoord0:o,newTriangles:s})}e.POSITION.value=Wa(e.POSITION.value,i),e.TEXCOORD_0.value=Wa(e.TEXCOORD_0.value,o);var l=r instanceof Array?r.concat(s):Wa(r,s);return{attributes:e,triangles:l}}function KD(e){for(var r=[],t=0;t<e.length;t+=3)r.push([e[t],e[t+1]]),r.push([e[t+1],e[t+2]]),r.push([e[t+2],e[t]]);r.sort(function(s,u){return Math.min.apply(Math,(0,Qi.default)(s))-Math.min.apply(Math,(0,Qi.default)(u))||Math.max.apply(Math,(0,Qi.default)(s))-Math.max.apply(Math,(0,Qi.default)(u))});for(var n=[],a=0;a<r.length;){var i,o;r[a][0]===((i=r[a+1])===null||i===void 0?void 0:i[1])&&r[a][1]===((o=r[a+1])===null||o===void 0?void 0:o[0])?a+=2:(n.push(r[a]),a++)}return n}function QD(e,r){e.westIndices.sort(function(o,s){return r[3*o+1]-r[3*s+1]}),e.eastIndices.sort(function(o,s){return r[3*s+1]-r[3*o+1]}),e.southIndices.sort(function(o,s){return r[3*s]-r[3*o]}),e.northIndices.sort(function(o,s){return r[3*o]-r[3*s]});var t=[];for(var n in e)for(var a=e[n],i=0;i<a.length-1;i++)t.push([a[i],a[i+1]]);return t}function ZD(e){var r=e.edge,t=e.edgeIndex,n=e.attributes,a=e.skirtHeight,i=e.newPosition,o=e.newTexcoord0,s=e.newTriangles,u=n.POSITION.value.length,f=t*2,l=t*2+1;i.set(n.POSITION.value.subarray(r[0]*3,r[0]*3+3),f*3),i[f*3+2]=i[f*3+2]-a,i.set(n.POSITION.value.subarray(r[1]*3,r[1]*3+3),l*3),i[l*3+2]=i[l*3+2]-a,o.set(n.TEXCOORD_0.value.subarray(r[0]*2,r[0]*2+2),f*2),o.set(n.TEXCOORD_0.value.subarray(r[1]*2,r[1]*2+2),l*2);var c=t*2*3;s[c]=r[0],s[c+1]=u/3+l,s[c+2]=r[1],s[c+3]=u/3+l,s[c+4]=r[0],s[c+5]=u/3+f}function $D(e,r,t){for(var n=r.minHeight,a=r.maxHeight,i=t||[0,0,1,1],o=(0,OC.default)(i,4),s=o[0],u=o[1],f=o[2],l=o[3],c=f-s,h=l-u,d=a-n,p=e.length/3,v=new Float32Array(p*3),g=new Float32Array(p*2),y=0;y<p;y++){var b=e[y]/32767,E=e[y+p]/32767,T=e[y+p*2]/32767;v[3*y+0]=b*c+s,v[3*y+1]=E*h+u,v[3*y+2]=T*d+n,g[2*y+0]=b,g[2*y+1]=E}return{POSITION:{value:v,size:3},TEXCOORD_0:{value:g,size:2}}}function eG(e,r){if(!e)return null;var t=r.bounds,n=Xp(e,Un.triangleIndices),a=n.header,i=n.vertexData,o=n.triangleIndices,s=n.westIndices,u=n.northIndices,f=n.eastIndices,l=n.southIndices,c=o,h=$D(i,a,t),d=Bn(h);if(r.skirtHeight){var p=Fu(h,c,r.skirtHeight,{westIndices:s,northIndices:u,eastIndices:f,southIndices:l}),v=p.attributes,g=p.triangles;h=v,c=g}return{loaderData:{header:{}},header:{vertexCount:c.length,boundingBox:d},mode:4,indices:{value:c,size:1},attributes:h}}function Lu(e,r){return eG(e,r["quantized-mesh"])}var DC=m(W()),GC=m(X()),NC=m(ce()),Kp=m(Y());var Zi=class{constructor(r=257){this.gridSize=r;let t=r-1;if(t&t-1)throw new Error(`Expected grid size to be 2^n+1, got ${r}.`);this.numTriangles=t*t*2-2,this.numParentTriangles=this.numTriangles-t*t,this.indices=new Uint32Array(this.gridSize*this.gridSize),this.coords=new Uint16Array(this.numTriangles*4);for(let n=0;n<this.numTriangles;n++){let a=n+2,i=0,o=0,s=0,u=0,f=0,l=0;for(a&1?s=u=f=t:i=o=l=t;(a>>=1)>1;){let h=i+s>>1,d=o+u>>1;a&1?(s=i,u=o,i=f,o=l):(i=s,o=u,s=f,u=l),f=h,l=d}let c=n*4;this.coords[c+0]=i,this.coords[c+1]=o,this.coords[c+2]=s,this.coords[c+3]=u}}createTile(r){return new Yp(r,this)}},Yp=class{constructor(r,t){let n=t.gridSize;if(r.length!==n*n)throw new Error(`Expected terrain data of length ${n*n} (${n} x ${n}), got ${r.length}.`);this.terrain=r,this.martini=t,this.errors=new Float32Array(r.length),this.update()}update(){let{numTriangles:r,numParentTriangles:t,coords:n,gridSize:a}=this.martini,{terrain:i,errors:o}=this;for(let s=r-1;s>=0;s--){let u=s*4,f=n[u+0],l=n[u+1],c=n[u+2],h=n[u+3],d=f+c>>1,p=l+h>>1,v=d+p-l,g=p+f-d,y=(i[l*a+f]+i[h*a+c])/2,b=p*a+d,E=Math.abs(y-i[b]);if(o[b]=Math.max(o[b],E),s<t){let T=(l+g>>1)*a+(f+v>>1),S=(h+g>>1)*a+(c+v>>1);o[b]=Math.max(o[b],o[T],o[S])}}}getMesh(r=0){let{gridSize:t,indices:n}=this.martini,{errors:a}=this,i=0,o=0,s=t-1;n.fill(0);function u(d,p,v,g,y,b){let E=d+v>>1,T=p+g>>1;Math.abs(d-y)+Math.abs(p-b)>1&&a[T*t+E]>r?(u(y,b,d,p,E,T),u(v,g,y,b,E,T)):(n[p*t+d]=n[p*t+d]||++i,n[g*t+v]=n[g*t+v]||++i,n[b*t+y]=n[b*t+y]||++i,o++)}u(0,0,s,s,s,0),u(s,s,0,0,0,s);let f=new Uint16Array(i*2),l=new Uint32Array(o*3),c=0;function h(d,p,v,g,y,b){let E=d+v>>1,T=p+g>>1;if(Math.abs(d-y)+Math.abs(p-b)>1&&a[T*t+E]>r)h(y,b,d,p,E,T),h(v,g,y,b,E,T);else{let S=n[p*t+d]-1,I=n[g*t+v]-1,L=n[b*t+y]-1;f[2*S]=d,f[2*S+1]=p,f[2*I]=v,f[2*I+1]=g,f[2*L]=y,f[2*L+1]=b,l[c++]=S,l[c++]=I,l[c++]=L}}return h(0,0,s,s,s,0),h(s,s,0,0,0,s),{vertices:f,triangles:l}}};var IC=m(H()),PC=m(z()),RC=function(){function e(r,t){(0,IC.default)(this,e);var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:t;this.data=r,this.width=t,this.height=n,this.coords=[],this.triangles=[],this._halfedges=[],this._candidates=[],this._queueIndices=[],this._queue=[],this._errors=[],this._rms=[],this._pending=[],this._pendingLen=0,this._rmsSum=0;var a=t-1,i=n-1,o=this._addPoint(0,0),s=this._addPoint(a,0),u=this._addPoint(0,i),f=this._addPoint(a,i),l=this._addTriangle(f,o,u,-1,-1,-1);this._addTriangle(o,f,s,l,-1,-1),this._flush()}return(0,PC.default)(e,[{key:"run",value:function(){for(var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;this.getMaxError()>t;)this.refine()}},{key:"refine",value:function(){this._step(),this._flush()}},{key:"getMaxError",value:function(){return this._errors[0]}},{key:"getRMSD",value:function(){return this._rmsSum>0?Math.sqrt(this._rmsSum/(this.width*this.height)):0}},{key:"heightAt",value:function(t,n){return this.data[this.width*n+t]}},{key:"_flush",value:function(){for(var t=this.coords,n=0;n<this._pendingLen;n++){var a=this._pending[n],i=2*this.triangles[a*3+0],o=2*this.triangles[a*3+1],s=2*this.triangles[a*3+2];this._findCandidate(t[i],t[i+1],t[o],t[o+1],t[s],t[s+1],a)}this._pendingLen=0}},{key:"_findCandidate",value:function(t,n,a,i,o,s,u){for(var f=Math.min(t,a,o),l=Math.min(n,i,s),c=Math.max(t,a,o),h=Math.max(n,i,s),d=jn(a,i,o,s,f,l),p=jn(o,s,t,n,f,l),v=jn(t,n,a,i,f,l),g=i-n,y=t-a,b=s-i,E=a-o,T=n-s,S=o-t,I=jn(t,n,a,i,o,s),L=this.heightAt(t,n)/I,B=this.heightAt(a,i)/I,C=this.heightAt(o,s)/I,_=0,R=0,F=0,D=0,k=l;k<=h;k++){var M=0;d<0&&b!==0&&(M=Math.max(M,Math.floor(-d/b))),p<0&&T!==0&&(M=Math.max(M,Math.floor(-p/T))),v<0&&g!==0&&(M=Math.max(M,Math.floor(-v/g)));for(var O=d+b*M,P=p+T*M,U=v+g*M,G=!1,j=f+M;j<=c;j++){if(O>=0&&P>=0&&U>=0){G=!0;var q=L*O+B*P+C*U,ne=Math.abs(q-this.heightAt(j,k));D+=ne*ne,ne>_&&(_=ne,R=j,F=k)}else if(G)break;O+=b,P+=T,U+=g}d+=E,p+=S,v+=y}(R===t&&F===n||R===a&&F===i||R===o&&F===s)&&(_=0),this._candidates[2*u]=R,this._candidates[2*u+1]=F,this._rms[u]=D,this._queuePush(u,_,D)}},{key:"_step",value:function(){var t=this._queuePop(),n=t*3+0,a=t*3+1,i=t*3+2,o=this.triangles[n],s=this.triangles[a],u=this.triangles[i],f=this.coords[2*o],l=this.coords[2*o+1],c=this.coords[2*s],h=this.coords[2*s+1],d=this.coords[2*u],p=this.coords[2*u+1],v=this._candidates[2*t],g=this._candidates[2*t+1],y=this._addPoint(v,g);if(jn(f,l,c,h,v,g)===0)this._handleCollinear(y,n);else if(jn(c,h,d,p,v,g)===0)this._handleCollinear(y,a);else if(jn(d,p,f,l,v,g)===0)this._handleCollinear(y,i);else{var b=this._halfedges[n],E=this._halfedges[a],T=this._halfedges[i],S=this._addTriangle(o,s,y,b,-1,-1,n),I=this._addTriangle(s,u,y,E,-1,S+1),L=this._addTriangle(u,o,y,T,S+2,I+1);this._legalize(S),this._legalize(I),this._legalize(L)}}},{key:"_addPoint",value:function(t,n){var a=this.coords.length>>1;return this.coords.push(t,n),a}},{key:"_addTriangle",value:function(t,n,a,i,o,s){var u=arguments.length>6&&arguments[6]!==void 0?arguments[6]:this.triangles.length,f=u/3;return this.triangles[u+0]=t,this.triangles[u+1]=n,this.triangles[u+2]=a,this._halfedges[u+0]=i,this._halfedges[u+1]=o,this._halfedges[u+2]=s,i>=0&&(this._halfedges[i]=u+0),o>=0&&(this._halfedges[o]=u+1),s>=0&&(this._halfedges[s]=u+2),this._candidates[2*f+0]=0,this._candidates[2*f+1]=0,this._queueIndices[f]=-1,this._rms[f]=0,this._pending[this._pendingLen++]=f,u}},{key:"_legalize",value:function(t){var n=this._halfedges[t];if(!(n<0)){var a=t-t%3,i=n-n%3,o=a+(t+1)%3,s=a+(t+2)%3,u=i+(n+2)%3,f=i+(n+1)%3,l=this.triangles[s],c=this.triangles[t],h=this.triangles[o],d=this.triangles[u],p=this.coords;if(tG(p[2*l],p[2*l+1],p[2*c],p[2*c+1],p[2*h],p[2*h+1],p[2*d],p[2*d+1])){var v=this._halfedges[o],g=this._halfedges[s],y=this._halfedges[u],b=this._halfedges[f];this._queueRemove(a/3),this._queueRemove(i/3);var E=this._addTriangle(l,d,h,-1,y,v,a),T=this._addTriangle(d,l,c,E,g,b,i);this._legalize(E+1),this._legalize(T+2)}}}},{key:"_handleCollinear",value:function(t,n){var a=n-n%3,i=a+(n+1)%3,o=a+(n+2)%3,s=this.triangles[o],u=this.triangles[n],f=this.triangles[i],l=this._halfedges[i],c=this._halfedges[o],h=this._halfedges[n];if(h<0){var d=this._addTriangle(t,s,u,-1,c,-1,a),p=this._addTriangle(s,t,f,d,-1,l);this._legalize(d+1),this._legalize(p+2);return}var v=h-h%3,g=v+(h+2)%3,y=v+(h+1)%3,b=this.triangles[g],E=this._halfedges[g],T=this._halfedges[y];this._queueRemove(v/3);var S=this._addTriangle(s,u,t,c,-1,-1,a),I=this._addTriangle(u,b,t,T,-1,S+1,v),L=this._addTriangle(b,f,t,E,-1,I+1),B=this._addTriangle(f,s,t,l,S+2,L+1);this._legalize(S),this._legalize(I),this._legalize(L),this._legalize(B)}},{key:"_queuePush",value:function(t,n,a){var i=this._queue.length;this._queueIndices[t]=i,this._queue.push(t),this._errors.push(n),this._rmsSum+=a,this._queueUp(i)}},{key:"_queuePop",value:function(){var t=this._queue.length-1;return this._queueSwap(0,t),this._queueDown(0,t),this._queuePopBack()}},{key:"_queuePopBack",value:function(){var t=this._queue.pop();return this._errors.pop(),this._rmsSum-=this._rms[t],this._queueIndices[t]=-1,t}},{key:"_queueRemove",value:function(t){var n=this._queueIndices[t];if(n<0){var a=this._pending.indexOf(t);if(a!==-1)this._pending[a]=this._pending[--this._pendingLen];else throw new Error("Broken triangulation (something went wrong).");return}var i=this._queue.length-1;i!==n&&(this._queueSwap(n,i),this._queueDown(n,i)||this._queueUp(n)),this._queuePopBack()}},{key:"_queueLess",value:function(t,n){return this._errors[t]>this._errors[n]}},{key:"_queueSwap",value:function(t,n){var a=this._queue[t],i=this._queue[n];this._queue[t]=i,this._queue[n]=a,this._queueIndices[a]=n,this._queueIndices[i]=t;var o=this._errors[t];this._errors[t]=this._errors[n],this._errors[n]=o}},{key:"_queueUp",value:function(t){for(var n=t;;){var a=n-1>>1;if(a===n||!this._queueLess(n,a))break;this._queueSwap(a,n),n=a}}},{key:"_queueDown",value:function(t,n){for(var a=t;;){var i=2*a+1;if(i>=n||i<0)break;var o=i+1,s=i;if(o<n&&this._queueLess(o,i)&&(s=o),!this._queueLess(s,a))break;this._queueSwap(a,s),a=s}return a>t}}]),e}();function jn(e,r,t,n,a,i){return(t-a)*(r-i)-(n-i)*(e-a)}function tG(e,r,t,n,a,i,o,s){var u=e-o,f=r-s,l=t-o,c=n-s,h=a-o,d=i-s,p=u*u+f*f,v=l*l+c*c,g=h*h+d*d;return u*(c*g-v*d)-f*(l*g-v*h)+p*(l*d-c*h)<0}function FC(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function ku(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?FC(Object(t),!0).forEach(function(n){(0,DC.default)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):FC(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function Du(e,r,t,n,a){for(var i=n.rScaler,o=n.bScaler,s=n.gScaler,u=n.offset,f=new Float32Array((r+1)*(t+1)),l=0,c=0;c<t;c++)for(var h=0;h<r;h++,l++){var d=l*4,p=e[d+0],v=e[d+1],g=e[d+2];f[l+c]=p*i+v*s+g*o+u}if(a==="martini"){for(var y=(r+1)*r,b=0;b<r;b++,y++)f[y]=f[y-r-1];for(var E=t,T=0;T<t+1;T++,E+=t+1)f[E]=f[E-1]}return f}function rG(e,r,t,n,a){for(var i=t+1,o=e.length/2,s=new Float32Array(o*3),u=new Float32Array(o*2),f=a||[0,0,t,n],l=(0,NC.default)(f,4),c=l[0],h=l[1],d=l[2],p=l[3],v=(d-c)/t,g=(p-h)/n,y=0;y<o;y++){var b=e[y*2],E=e[y*2+1],T=E*i+b;s[3*y+0]=b*v+c,s[3*y+1]=-E*g+p,s[3*y+2]=r[T],u[2*y+0]=b/t,u[2*y+1]=E/n}return{POSITION:{value:s,size:3},TEXCOORD_0:{value:u,size:2}}}function nG(e,r){if(e===null)return null;var t=r.meshMaxError,n=r.bounds,a=r.elevationDecoder,i=e.data,o=e.width,s=e.height,u,f;switch(r.tesselator){case"martini":u=Du(i,o,s,a,r.tesselator),f=LC(t,o,u);break;case"delatin":u=Du(i,o,s,a,r.tesselator),f=kC(t,o,s,u);break;default:o===s&&!(s&o-1)?(u=Du(i,o,s,a,"martini"),f=LC(t,o,u)):(u=Du(i,o,s,a,"delatin"),f=kC(t,o,s,u));break}var l=f,c=l.vertices,h=f,d=h.triangles,p=rG(c,u,o,s,n),v=Bn(p);if(r.skirtHeight){var g=Fu(p,d,r.skirtHeight),y=g.attributes,b=g.triangles;p=y,d=b}return{loaderData:{header:{}},header:{vertexCount:d.length,boundingBox:v},mode:4,indices:{value:Uint32Array.from(d),size:1},attributes:p}}function LC(e,r,t){var n=r+1,a=new Zi(n),i=a.createTile(t),o=i.getMesh(e),s=o.vertices,u=o.triangles;return{vertices:s,triangles:u}}function kC(e,r,t,n){var a=new RC(n,r+1,t+1);a.run(e);var i=a.coords,o=a.triangles,s=i;return{vertices:s,triangles:o}}function Zp(e,r,t){return Qp.apply(this,arguments)}function Qp(){return Qp=(0,GC.default)(Kp.default.mark(function e(r,t,n){var a,i;return Kp.default.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return a=ku(ku({},t),{},{mimeType:"application/x.image",image:ku(ku({},t.image),{},{type:"data"})}),s.next=3,n.parse(r,a);case 3:return i=s.sent,s.abrupt("return",nG(i,t.terrain));case 5:case"end":return s.stop()}},e)})),Qp.apply(this,arguments)}var Gu="3.3.1";var Nu={name:"Terrain",id:"terrain",module:"terrain",version:Gu,worker:!0,extensions:["png","pngraw","jpg","jpeg","gif","webp","bmp"],mimeTypes:["image/png","image/jpeg","image/gif","image/webp","image/bmp"],options:{terrain:{tesselator:"auto",bounds:null,meshMaxError:10,elevationDecoder:{rScaler:1,gScaler:0,bScaler:0,offset:0},skirtHeight:null}}};var UC={name:"Quantized Mesh",id:"quantized-mesh",module:"terrain",version:Gu,worker:!0,extensions:["terrain"],mimeTypes:["application/vnd.quantized-mesh"],options:{"quantized-mesh":{bounds:[0,0,1,1],skirtHeight:null}}};function jC(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function Uu(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?jC(Object(t),!0).forEach(function(n){(0,VC.default)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):jC(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var bee=Uu(Uu({},Nu),{},{parse:Zp});var Tee=Uu(Uu({},UC),{},{parseSync:Lu,parse:function(){var e=(0,HC.default)($p.default.mark(function t(n,a){return $p.default.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",Lu(n,a));case 1:case"end":return o.stop()}},t)}));function r(t,n){return e.apply(this,arguments)}return r}()});function aG(e){var r=iG();return function(){var n=(0,tm.default)(e),a;if(r){var i=(0,tm.default)(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return(0,ZC.default)(this,a)}}function iG(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function zC(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function Jr(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?zC(Object(t),!0).forEach(function(n){(0,$i.default)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):zC(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var WC=[1],oG=Jr(Jr({},ir.defaultProps),{},{elevationData:Ir,texture:Jr(Jr({},Ir),{},{optional:!0}),meshMaxError:{type:"number",value:4},bounds:{type:"array",value:null,optional:!0,compare:!0},color:{type:"color",value:[255,255,255]},elevationDecoder:{type:"object",value:{rScaler:1,gScaler:0,bScaler:0,offset:0}},workerUrl:"",wireframe:!1,material:!0,loaders:[Nu]});function JC(e){return Array.isArray(e)?e.join(";"):e||""}var Hu=function(e){(0,QC.default)(t,e);var r=aG(t);function t(){var n;(0,XC.default)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return n=r.call.apply(r,[this].concat(i)),(0,$i.default)((0,KC.default)(n),"state",void 0),n}return(0,YC.default)(t,[{key:"updateState",value:function(a){var i=a.props,o=a.oldProps,s=i.elevationData!==o.elevationData;if(s){var u=i.elevationData,f=u&&(Array.isArray(u)||u.includes("{x}")&&u.includes("{y}"));this.setState({isTiled:f})}var l=s||i.meshMaxError!==o.meshMaxError||i.elevationDecoder!==o.elevationDecoder||i.bounds!==o.bounds;if(!this.state.isTiled&&l){var c=this.loadTerrain(i);this.setState({terrain:c})}i.workerUrl&&ju.log.removed("workerUrl","loadOptions.terrain.workerUrl")()}},{key:"loadTerrain",value:function(a){var i,o=a.elevationData,s=a.bounds,u=a.elevationDecoder,f=a.meshMaxError,l=a.signal;if(!o)return null;var c=this.getLoadOptions();c=Jr(Jr({},c),{},{terrain:Jr(Jr({skirtHeight:this.state.isTiled?f*2:0},(i=c)===null||i===void 0?void 0:i.terrain),{},{bounds:s,meshMaxError:f,elevationDecoder:u})});var h=this.props.fetch;return h(o,{propName:"elevationData",layer:this,loadOptions:c,signal:l})}},{key:"getTiledTerrainData",value:function(a){var i=this.props,o=i.elevationData,s=i.fetch,u=i.texture,f=i.elevationDecoder,l=i.meshMaxError,c=this.context.viewport,h=Wt(o,a),d=u&&Wt(u,a),p=a.signal,v=[0,0],g=[0,0];if(c.isGeospatial){var y=a.bbox;v=c.projectFlat([y.west,y.south]),g=c.projectFlat([y.east,y.north])}else{var b=a.bbox;v=[b.left,b.bottom],g=[b.right,b.top]}var E=[v[0],v[1],g[0],g[1]],T=this.loadTerrain({elevationData:h,bounds:E,elevationDecoder:f,meshMaxError:l,signal:p}),S=d?s(d,{propName:"texture",layer:this,loaders:[],signal:p}).catch(function(I){return null}):Promise.resolve(null);return Promise.all([T,S])}},{key:"renderSubLayers",value:function(a){var i=this.getSubLayerClass("mesh",rm.SimpleMeshLayer),o=this.props,s=o.color,u=o.wireframe,f=o.material,l=a.data;if(!l)return null;var c=(0,qC.default)(l,2),h=c[0],d=c[1];return new i(a,{data:WC,mesh:h,texture:d,_instanced:!1,coordinateSystem:$C.COORDINATE_SYSTEM.CARTESIAN,getPosition:function(v){return[0,0,0]},getColor:s,wireframe:u,material:f})}},{key:"onViewportLoad",value:function(a){if(a){var i=this.state.zRange,o=a.map(function(f){return f.content}).filter(Boolean).map(function(f){var l=f[0].header.boundingBox;return l.map(function(c){return c[2]})});if(o.length!==0){var s=Math.min.apply(Math,(0,em.default)(o.map(function(f){return f[0]}))),u=Math.max.apply(Math,(0,em.default)(o.map(function(f){return f[1]})));(!i||s<i[0]||u>i[1])&&this.setState({zRange:[s,u]})}}}},{key:"renderLayers",value:function(){var a=this.props,i=a.color,o=a.material,s=a.elevationData,u=a.texture,f=a.wireframe,l=a.meshMaxError,c=a.elevationDecoder,h=a.tileSize,d=a.maxZoom,p=a.minZoom,v=a.extent,g=a.maxRequests,y=a.onTileLoad,b=a.onTileUnload,E=a.onTileError,T=a.maxCacheSize,S=a.maxCacheByteSize,I=a.refinementStrategy;if(this.state.isTiled)return new ir(this.getSubLayerProps({id:"tiles"}),{getTileData:this.getTiledTerrainData.bind(this),renderSubLayers:this.renderSubLayers.bind(this),updateTriggers:{getTileData:{elevationData:JC(s),texture:JC(u),meshMaxError:l,elevationDecoder:c}},onViewportLoad:this.onViewportLoad.bind(this),zRange:this.state.zRange||null,tileSize:h,maxZoom:d,minZoom:p,extent:v,maxRequests:g,onTileLoad:y,onTileUnload:b,onTileError:E,maxCacheSize:T,maxCacheByteSize:S,refinementStrategy:I});var L=this.getSubLayerClass("mesh",rm.SimpleMeshLayer);return new L(this.getSubLayerProps({id:"mesh"}),{data:WC,mesh:this.state.terrain,texture:u,_instanced:!1,getPosition:function(C){return[0,0,0]},getColor:i,material:o,wireframe:f})}}]),t}(ju.CompositeLayer);(0,$i.default)(Hu,"defaultProps",oG);(0,$i.default)(Hu,"layerName","TerrainLayer");var xB=m(Et()),EB=m(X()),SB=m(H()),CB=m(z()),Xr=m(fa()),wB=m(Te()),BB=m(xe()),Qt=m(ye()),ef=m(W()),wm=m(Y()),tf=m(Pt()),Bm=m(It()),MB=m(tw());var sB=m(X()),uB=m(W()),bm=m(Y());var aB=m(ce());var vw=m(W());var iw=m(H()),ow=m(z());function nm(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=rw(e,t);return n!==r?(sG(e,t),!0):!1}function rw(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Math.sign(gr(e,r))}function gr(e){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=r.start,n=t===void 0?0:t,a=r.end,i=a===void 0?e.length:a,o=r.size||2,s=0,u=n,f=i-o;u<i;u+=o)s+=(e[u]-e[f])*(e[u+1]+e[f+1]),f=u;return s/2}function am(e,r){for(var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=t.start,a=n===void 0?0:n,i=t.end,o=i===void 0?e.length:i,s=t.size,u=s===void 0?2:s,f=t.isClosed,l=(o-a)/u,c=0;c<l-1;++c)r(e[a+c*u],e[a+c*u+1],e[a+(c+1)*u],e[a+(c+1)*u+1],c,c+1);var h=a+(l-1)*u,d=f||We(e[a],e[h])&&We(e[a+1],e[h+1]);d||r(e[h],e[h+1],e[a],e[a+1],l-1,0)}function sG(e,r){for(var t=r.start,n=t===void 0?0:t,a=r.end,i=a===void 0?e.length:a,o=r.size,s=o===void 0?2:o,u=(i-n)/s,f=Math.floor(u/2),l=0;l<f;++l)for(var c=n+l*s,h=n+(u-1-l)*s,d=0;d<s;++d){var p=e[c+d];e[c+d]=e[h+d],e[h+d]=p}}function nw(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=uG(e,t);return n!==r?(e.reverse(),!0):!1}function uG(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Math.sign(im(e,r))}function im(e){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=r.start,n=t===void 0?0:t,a=r.end,i=a===void 0?e.length:a,o=0,s=n,u=i-1;s<i;++s)o+=(e[s][0]-e[u][0])*(e[s][1]+e[u][1]),u=s;return o/2}function aw(e,r){for(var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=t.start,a=n===void 0?0:n,i=t.end,o=i===void 0?e.length:i,s=t.isClosed,u=a;u<o-1;++u)r(e[u],e[u+1],u,u+1);var f=s||We(e[o-1],e[0]);f||r(e[o-1],e[0],o-1,0)}var sw=function(){function e(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};(0,iw.default)(this,e),A(this,"points",void 0),A(this,"isFlatArray",void 0),A(this,"options",void 0),this.points=r,this.isFlatArray=!it(r[0]),this.options={start:t.start||0,end:t.end||r.length,size:t.size||2,isClosed:t.isClosed},Object.freeze(this)}return(0,ow.default)(e,[{key:"getSignedArea",value:function(){return this.isFlatArray?gr(this.points,this.options):im(this.points,this.options)}},{key:"getArea",value:function(){return Math.abs(this.getSignedArea())}},{key:"getWindingDirection",value:function(){return Math.sign(this.getSignedArea())}},{key:"forEachSegment",value:function(t){this.isFlatArray?am(this.points,function(n,a,i,o,s,u){t([n,a],[i,o],s,u)},this.options):aw(this.points,t,this.options)}},{key:"modifyWindingDirection",value:function(t){return this.isFlatArray?nm(this.points,t,this.options):nw(this.points,t,this.options)}}]),e}();function um(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:2,n=arguments.length>3?arguments[3]:void 0,a=r&&r.length,i=a?r[0]*t:e.length,o=fw(e,0,i,t,!0,n&&n[0]),s=[];if(!o||o.next===o.prev)return s;var u,f,l,c,h,d,p;if(a&&(o=dG(e,r,o,t,n)),e.length>80*t){c=f=e[0],h=l=e[1];for(var v=t;v<i;v+=t)d=e[v],p=e[v+1],d<c&&(c=d),p<h&&(h=p),d>f&&(f=d),p>l&&(l=p);u=Math.max(f-c,l-h),u=u!==0?1/u:0}return eo(o,s,t,c,h,u),s}function fw(e,r,t,n,a,i){var o,s;if(i===void 0&&(i=gr(e,{start:r,end:t,size:n})),a===i<0)for(o=r;o<t;o+=n)s=uw(o,e[o],e[o+1],s);else for(o=t-n;o>=r;o-=n)s=uw(o,e[o],e[o+1],s);return s&&Wu(s,s.next)&&(ro(s),s=s.next),s}function qr(e,r){if(!e)return e;r||(r=e);var t=e,n;do if(n=!1,!t.steiner&&(Wu(t,t.next)||Pe(t.prev,t,t.next)===0)){if(ro(t),t=r=t.prev,t===t.next)break;n=!0}else t=t.next;while(n||t!==r);return r}function eo(e,r,t,n,a,i,o){if(e){!o&&i&&yG(e,n,a,i);for(var s=e,u,f;e.prev!==e.next;){if(u=e.prev,f=e.next,i?lG(e,n,a,i):fG(e)){r.push(u.i/t),r.push(e.i/t),r.push(f.i/t),ro(e),e=f.next,s=f.next;continue}if(e=f,e===s){o?o===1?(e=cG(qr(e),r,t),eo(e,r,t,n,a,i,2)):o===2&&hG(e,r,t,n,a,i):eo(qr(e),r,t,n,a,i,1);break}}}}function fG(e){var r=e.prev,t=e,n=e.next;if(Pe(r,t,n)>=0)return!1;for(var a=e.next.next;a!==e.prev;){if(ka(r.x,r.y,t.x,t.y,n.x,n.y,a.x,a.y)&&Pe(a.prev,a,a.next)>=0)return!1;a=a.next}return!0}function lG(e,r,t,n){var a=e.prev,i=e,o=e.next;if(Pe(a,i,o)>=0)return!1;for(var s=a.x<i.x?a.x<o.x?a.x:o.x:i.x<o.x?i.x:o.x,u=a.y<i.y?a.y<o.y?a.y:o.y:i.y<o.y?i.y:o.y,f=a.x>i.x?a.x>o.x?a.x:o.x:i.x>o.x?i.x:o.x,l=a.y>i.y?a.y>o.y?a.y:o.y:i.y>o.y?i.y:o.y,c=om(s,u,r,t,n),h=om(f,l,r,t,n),d=e.prevZ,p=e.nextZ;d&&d.z>=c&&p&&p.z<=h;){if(d!==e.prev&&d!==e.next&&ka(a.x,a.y,i.x,i.y,o.x,o.y,d.x,d.y)&&Pe(d.prev,d,d.next)>=0||(d=d.prevZ,p!==e.prev&&p!==e.next&&ka(a.x,a.y,i.x,i.y,o.x,o.y,p.x,p.y)&&Pe(p.prev,p,p.next)>=0))return!1;p=p.nextZ}for(;d&&d.z>=c;){if(d!==e.prev&&d!==e.next&&ka(a.x,a.y,i.x,i.y,o.x,o.y,d.x,d.y)&&Pe(d.prev,d,d.next)>=0)return!1;d=d.prevZ}for(;p&&p.z<=h;){if(p!==e.prev&&p!==e.next&&ka(a.x,a.y,i.x,i.y,o.x,o.y,p.x,p.y)&&Pe(p.prev,p,p.next)>=0)return!1;p=p.nextZ}return!0}function cG(e,r,t){var n=e;do{var a=n.prev,i=n.next.next;!Wu(a,i)&&lw(a,n,n.next,i)&&to(a,i)&&to(i,a)&&(r.push(a.i/t),r.push(n.i/t),r.push(i.i/t),ro(n),ro(n.next),n=e=i),n=n.next}while(n!==e);return qr(n)}function hG(e,r,t,n,a,i){var o=e;do{for(var s=o.next.next;s!==o.prev;){if(o.i!==s.i&&bG(o,s)){var u=cw(o,s);o=qr(o,o.next),u=qr(u,u.next),eo(o,r,t,n,a,i),eo(u,r,t,n,a,i);return}s=s.next}o=o.next}while(o!==e)}function dG(e,r,t,n,a){var i=[],o,s,u,f,l;for(o=0,s=r.length;o<s;o++)u=r[o]*n,f=o<s-1?r[o+1]*n:e.length,l=fw(e,u,f,n,!1,a&&a[o+1]),l===l.next&&(l.steiner=!0),i.push(_G(l));for(i.sort(pG),o=0;o<i.length;o++)mG(i[o],t),t=qr(t,t.next);return t}function pG(e,r){return e.x-r.x}function mG(e,r){if(r=vG(e,r),r){var t=cw(r,e);qr(r,r.next),qr(t,t.next)}}function vG(e,r){var t=r,n=e.x,a=e.y,i=-1/0,o;do{if(a<=t.y&&a>=t.next.y&&t.next.y!==t.y){var s=t.x+(a-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(s<=n&&s>i){if(i=s,s===n){if(a===t.y)return t;if(a===t.next.y)return t.next}o=t.x<t.next.x?t:t.next}}t=t.next}while(t!==r);if(!o)return null;if(n===i)return o;var u=o,f=o.x,l=o.y,c=1/0,h;t=o;do n>=t.x&&t.x>=f&&n!==t.x&&ka(a<l?n:i,a,f,l,a<l?i:n,a,t.x,t.y)&&(h=Math.abs(a-t.y)/(n-t.x),to(t,e)&&(h<c||h===c&&(t.x>o.x||t.x===o.x&&gG(o,t)))&&(o=t,c=h)),t=t.next;while(t!==u);return o}function gG(e,r){return Pe(e.prev,e,r.prev)<0&&Pe(r.next,e,e.next)<0}function yG(e,r,t,n){var a=e;do a.z===null&&(a.z=om(a.x,a.y,r,t,n)),a.prevZ=a.prev,a.nextZ=a.next,a=a.next;while(a!==e);a.prevZ.nextZ=null,a.prevZ=null,AG(a)}function AG(e){var r,t,n=1,a,i,o,s,u,f;do{for(i=e,e=null,f=null,a=0;i;){for(a++,s=i,o=0,t=0;t<n&&(o++,s=s.nextZ,!!s);t++);for(u=n;o>0||u>0&&s;)o!==0&&(u===0||!s||i.z<=s.z)?(r=i,i=i.nextZ,o--):(r=s,s=s.nextZ,u--),f?f.nextZ=r:e=r,r.prevZ=f,f=r;i=s}f.nextZ=null,n*=2}while(a>1);return e}function om(e,r,t,n,a){return e=32767*(e-t)*a,r=32767*(r-n)*a,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,r=(r|r<<8)&16711935,r=(r|r<<4)&252645135,r=(r|r<<2)&858993459,r=(r|r<<1)&1431655765,e|r<<1}function _G(e){var r=e,t=e;do(r.x<t.x||r.x===t.x&&r.y<t.y)&&(t=r),r=r.next;while(r!==e);return t}function ka(e,r,t,n,a,i,o,s){return(a-o)*(r-s)-(e-o)*(i-s)>=0&&(e-o)*(n-s)-(t-o)*(r-s)>=0&&(t-o)*(i-s)-(a-o)*(n-s)>=0}function bG(e,r){return e.next.i!==r.i&&e.prev.i!==r.i&&!TG(e,r)&&(to(e,r)&&to(r,e)&&xG(e,r)&&(Pe(e.prev,e,r.prev)||Pe(e,r.prev,r))||Wu(e,r)&&Pe(e.prev,e,e.next)>0&&Pe(r.prev,r,r.next)>0)}function Pe(e,r,t){return(r.y-e.y)*(t.x-r.x)-(r.x-e.x)*(t.y-r.y)}function Wu(e,r){return e.x===r.x&&e.y===r.y}function lw(e,r,t,n){var a=zu(Pe(e,r,t)),i=zu(Pe(e,r,n)),o=zu(Pe(t,n,e)),s=zu(Pe(t,n,r));return!!(a!==i&&o!==s||a===0&&Vu(e,t,r)||i===0&&Vu(e,n,r)||o===0&&Vu(t,e,n)||s===0&&Vu(t,r,n))}function Vu(e,r,t){return r.x<=Math.max(e.x,t.x)&&r.x>=Math.min(e.x,t.x)&&r.y<=Math.max(e.y,t.y)&&r.y>=Math.min(e.y,t.y)}function zu(e){return e>0?1:e<0?-1:0}function TG(e,r){var t=e;do{if(t.i!==e.i&&t.next.i!==e.i&&t.i!==r.i&&t.next.i!==r.i&&lw(t,t.next,e,r))return!0;t=t.next}while(t!==e);return!1}function to(e,r){return Pe(e.prev,e,e.next)<0?Pe(e,r,e.next)>=0&&Pe(e,e.prev,r)>=0:Pe(e,r,e.prev)<0||Pe(e,e.next,r)<0}function xG(e,r){var t=e,n=!1,a=(e.x+r.x)/2,i=(e.y+r.y)/2;do t.y>i!=t.next.y>i&&t.next.y!==t.y&&a<(t.next.x-t.x)*(i-t.y)/(t.next.y-t.y)+t.x&&(n=!n),t=t.next;while(t!==e);return n}function cw(e,r){var t=new sm(e.i,e.x,e.y),n=new sm(r.i,r.x,r.y),a=e.next,i=r.prev;return e.next=r,r.prev=e,t.next=a,a.prev=t,n.next=t,t.prev=n,i.next=n,n.prev=i,n}function uw(e,r,t,n){var a=new sm(e,r,t);return n?(a.next=n.next,a.prev=n,n.next.prev=a,n.next=a):(a.prev=a,a.next=a),a}function ro(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function sm(e,r,t){this.i=e,this.x=r,this.y=t,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function cm(e,r){var t=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=wG(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(f){throw f},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,o=!1,s;return{s:function(){t=t.call(e)},n:function(){var f=t.next();return i=f.done,f},e:function(f){o=!0,s=f},f:function(){try{!i&&t.return!=null&&t.return()}finally{if(o)throw s}}}}function wG(e,r){if(e){if(typeof e=="string")return pw(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return pw(e,r)}}function pw(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function mw(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function Hn(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?mw(Object(t),!0).forEach(function(n){(0,vw.default)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):mw(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function hm(e,r,t){var n=BG(e),a=Object.keys(n).filter(function(i){return n[i]!==Array});return MG(e,Hn({propArrayTypes:n},r),{numericPropKeys:t&&t.numericPropKeys||a,PositionDataType:t?t.PositionDataType:Float32Array})}function BG(e){var r={},t=cm(e),n;try{for(t.s();!(n=t.n()).done;){var a=n.value;if(a.properties)for(var i in a.properties){var o=a.properties[i];r[i]=LG(o,r[i])}}}catch(s){t.e(s)}finally{t.f()}return r}function MG(e,r,t){for(var n=r.pointPositionsCount,a=r.pointFeaturesCount,i=r.linePositionsCount,o=r.linePathsCount,s=r.lineFeaturesCount,u=r.polygonPositionsCount,f=r.polygonObjectsCount,l=r.polygonRingsCount,c=r.polygonFeaturesCount,h=r.propArrayTypes,d=r.coordLength,p=t.numericPropKeys,v=p===void 0?[]:p,g=t.PositionDataType,y=g===void 0?Float32Array:g,b=e[0]&&("id"in e[0]),E=e.length>65535?Uint32Array:Uint16Array,T={type:"Point",positions:new y(n*d),globalFeatureIds:new E(n),featureIds:a>65535?new Uint32Array(n):new Uint16Array(n),numericProps:{},properties:[],fields:[]},S={type:"LineString",pathIndices:i>65535?new Uint32Array(o+1):new Uint16Array(o+1),positions:new y(i*d),globalFeatureIds:new E(i),featureIds:s>65535?new Uint32Array(i):new Uint16Array(i),numericProps:{},properties:[],fields:[]},I={type:"Polygon",polygonIndices:u>65535?new Uint32Array(f+1):new Uint16Array(f+1),primitivePolygonIndices:u>65535?new Uint32Array(l+1):new Uint16Array(l+1),positions:new y(u*d),triangles:[],globalFeatureIds:new E(u),featureIds:c>65535?new Uint32Array(u):new Uint16Array(u),numericProps:{},properties:[],fields:[]},L=0,B=[T,S,I];L<B.length;L++){var C=B[L],_=cm(v),R;try{for(_.s();!(R=_.n()).done;){var F=R.value,D=h[F];C.numericProps[F]=new D(C.positions.length/d)}}catch(j){_.e(j)}finally{_.f()}}S.pathIndices[o]=i,I.polygonIndices[f]=u,I.primitivePolygonIndices[l]=u;var k={pointPosition:0,pointFeature:0,linePosition:0,linePath:0,lineFeature:0,polygonPosition:0,polygonObject:0,polygonRing:0,polygonFeature:0,feature:0},M=cm(e),O;try{for(M.s();!(O=M.n()).done;){var P=O.value,U=P.geometry,G=P.properties||{};switch(U.type){case"Point":OG(U,T,k,d,G),T.properties.push(lm(G,v)),b&&T.fields.push({id:P.id}),k.pointFeature++;break;case"LineString":IG(U,S,k,d,G),S.properties.push(lm(G,v)),b&&S.fields.push({id:P.id}),k.lineFeature++;break;case"Polygon":PG(U,I,k,d,G),I.properties.push(lm(G,v)),b&&I.fields.push({id:P.id}),k.polygonFeature++;break;default:throw new Error("Invalid geometry type")}k.feature++}}catch(j){M.e(j)}finally{M.f()}return FG(T,S,I,d)}function OG(e,r,t,n,a){r.positions.set(e.data,t.pointPosition*n);var i=e.data.length/n;dm(r,a,t.pointPosition,i),r.globalFeatureIds.fill(t.feature,t.pointPosition,t.pointPosition+i),r.featureIds.fill(t.pointFeature,t.pointPosition,t.pointPosition+i),t.pointPosition+=i}function IG(e,r,t,n,a){r.positions.set(e.data,t.linePosition*n);var i=e.data.length/n;dm(r,a,t.linePosition,i),r.globalFeatureIds.fill(t.feature,t.linePosition,t.linePosition+i),r.featureIds.fill(t.lineFeature,t.linePosition,t.linePosition+i);for(var o=0,s=e.indices.length;o<s;++o){var u=e.indices[o],f=o===s-1?e.data.length:e.indices[o+1];r.pathIndices[t.linePath++]=t.linePosition,t.linePosition+=(f-u)/n}}function PG(e,r,t,n,a){r.positions.set(e.data,t.polygonPosition*n);var i=e.data.length/n;dm(r,a,t.polygonPosition,i),r.globalFeatureIds.fill(t.feature,t.polygonPosition,t.polygonPosition+i),r.featureIds.fill(t.polygonFeature,t.polygonPosition,t.polygonPosition+i);for(var o=0,s=e.indices.length;o<s;++o){var u=t.polygonPosition;r.polygonIndices[t.polygonObject++]=u;for(var f=e.areas[o],l=e.indices[o],c=e.indices[o+1],h=0,d=l.length;h<d;++h){var p=l[h],v=h===d-1?c===void 0?e.data.length:c[0]:l[h+1];r.primitivePolygonIndices[t.polygonRing++]=t.polygonPosition,t.polygonPosition+=(v-p)/n}var g=t.polygonPosition;RG(r,f,l,{startPosition:u,endPosition:g,coordLength:n})}}function RG(e,r,t,n){for(var a=n.startPosition,i=n.endPosition,o=n.coordLength,s=a*o,u=i*o,f=e.positions.subarray(s,u),l=t[0],c=t.slice(1).map(function(v){return(v-l)/o}),h=um(f,c,o,r),d=0,p=h.length;d<p;++d)e.triangles.push(a+h[d])}function fm(e,r){var t={};for(var n in e)t[n]={value:e[n],size:r};return t}function FG(e,r,t,n){return{points:Hn(Hn({},e),{},{positions:{value:e.positions,size:n},globalFeatureIds:{value:e.globalFeatureIds,size:1},featureIds:{value:e.featureIds,size:1},numericProps:fm(e.numericProps,1)}),lines:Hn(Hn({},r),{},{positions:{value:r.positions,size:n},pathIndices:{value:r.pathIndices,size:1},globalFeatureIds:{value:r.globalFeatureIds,size:1},featureIds:{value:r.featureIds,size:1},numericProps:fm(r.numericProps,1)}),polygons:Hn(Hn({},t),{},{positions:{value:t.positions,size:n},polygonIndices:{value:t.polygonIndices,size:1},primitivePolygonIndices:{value:t.primitivePolygonIndices,size:1},triangles:{value:new Uint32Array(t.triangles),size:1},globalFeatureIds:{value:t.globalFeatureIds,size:1},featureIds:{value:t.featureIds,size:1},numericProps:fm(t.numericProps,1)})}}function dm(e,r,t,n){for(var a in e.numericProps)if(a in r){var i=r[a];e.numericProps[a].fill(i,t,t+n)}}function lm(e,r){var t={};for(var n in e)r.includes(n)||(t[n]=e[n]);return t}function LG(e,r){return r===Array||!Number.isFinite(e)?Array:r===Float64Array||Math.fround(e)!==e?Float64Array:Float32Array}var Aw=m(W());function gw(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function kG(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?gw(Object(t),!0).forEach(function(n){(0,Aw.default)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):gw(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function _w(e,r){var t=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=DG(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(f){throw f},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,o=!1,s;return{s:function(){t=t.call(e)},n:function(){var f=t.next();return i=f.done,f},e:function(f){o=!0,s=f},f:function(){try{!i&&t.return!=null&&t.return()}finally{if(o)throw s}}}}function DG(e,r){if(e){if(typeof e=="string")return yw(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return yw(e,r)}}function yw(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function Xu(e,r){var t=r?.globalFeatureId;return t!==void 0?GG(e,t):NG(e,r?.type)}function GG(e,r){var t=Tw(e),n=_w(t),a;try{for(n.s();!(a=n.n()).done;){for(var i=a.value,o=0,s=i.featureIds.value[0],u=0;u<i.featureIds.value.length;u++){var f=i.featureIds.value[u];if(f!==s){if(r===i.globalFeatureIds.value[o])return Ju(i,o,u);o=u,s=f}}if(r===i.globalFeatureIds.value[o])return Ju(i,o,i.featureIds.value.length)}}catch(l){n.e(l)}finally{n.f()}throw new Error("featureId:".concat(r," not found"))}function NG(e,r){var t=Tw(e,r);return UG(t)}function bw(e,r,t){switch(e.type){case"Point":return zG(e,r,t);case"LineString":return VG(e,r,t);case"Polygon":return xw(e,r,t);default:var n=e;throw new Error("Unsupported geometry type: ".concat(n?.type))}}function Tw(e,r){var t=Boolean(e.points||e.lines||e.polygons);if(!t)return e.type=r||WG(e),[e];var n=[];return e.points&&(e.points.type="Point",n.push(e.points)),e.lines&&(e.lines.type="LineString",n.push(e.lines)),e.polygons&&(e.polygons.type="Polygon",n.push(e.polygons)),n}function UG(e){var r=[],t=_w(e),n;try{for(t.s();!(n=t.n()).done;){var a=n.value;if(a.featureIds.value.length!==0){for(var i=0,o=a.featureIds.value[0],s=0;s<a.featureIds.value.length;s++){var u=a.featureIds.value[s];u!==o&&(r.push(Ju(a,i,s)),i=s,o=u)}r.push(Ju(a,i,a.featureIds.value.length))}}}catch(f){t.e(f)}finally{t.f()}return r}function Ju(e,r,t){var n=bw(e,r,t),a=HG(e,r,t),i=jG(e,r,t);return kG({type:"Feature",geometry:n,properties:a},i)}function jG(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=arguments.length>2?arguments[2]:void 0;return e.fields&&e.fields[e.featureIds.value[r]]}function HG(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=arguments.length>2?arguments[2]:void 0,n=Object.assign({},e.properties[e.featureIds.value[r]]);for(var a in e.numericProps)n[a]=e.numericProps[a].value[r];return n}function xw(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:-1/0,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1/0,n=e.positions,a=e.polygonIndices.value.filter(function(y){return y>=r&&y<=t}),i=e.primitivePolygonIndices.value.filter(function(y){return y>=r&&y<=t}),o=a.length>2;if(!o){for(var s=[],u=0;u<i.length-1;u++){var f=i[u],l=i[u+1],c=qu(n,f,l);s.push(c)}return{type:"Polygon",coordinates:s}}for(var h=[],d=0;d<a.length-1;d++){var p=a[d],v=a[d+1],g=xw(e,p,v).coordinates;h.push(g)}return{type:"MultiPolygon",coordinates:h}}function VG(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:-1/0,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1/0,n=e.positions,a=e.pathIndices.value.filter(function(l){return l>=r&&l<=t}),i=a.length>2;if(!i){var o=qu(n,a[0],a[1]);return{type:"LineString",coordinates:o}}for(var s=[],u=0;u<a.length-1;u++){var f=qu(n,a[u],a[u+1]);s.push(f)}return{type:"MultiLineString",coordinates:s}}function zG(e,r,t){var n=e.positions,a=qu(n,r,t),i=a.length>1;return i?{type:"MultiPoint",coordinates:a}:{type:"Point",coordinates:a[0]}}function qu(e,r,t){r=r||0,t=t||e.value.length/e.size;for(var n=[],a=r;a<t;a++){for(var i=Array(),o=a*e.size;o<(a+1)*e.size;o++)i.push(Number(e.value[o]));n.push(i)}return n}function WG(e){return e.pathIndices?"LineString":e.polygonIndices?"Polygon":"Point"}var _m=m(Ow());var Nw=m(H());var kw=m(H()),Dw=m(z());var Rw=m(H()),Fw=m(z());function Iw(e){var r=e.length;if(r<=1)return[e];for(var t=[],n,a,i=0;i<r;i++){var o=fN(e[i]);o!==0&&(a===void 0&&(a=o<0),a===o<0?(n&&t.push(n),n=[e[i]]):n&&n.push(e[i]))}return n&&t.push(n),t}function fN(e){for(var r=0,t=0,n=e.length-1,a,i;t<e.length;n=t++)a=e[t],i=e[n],r+=(i[0]-a[0])*(a[1]+i[1]);return r}function Pw(e,r,t){r&&t&&(e===1?r.id=t.readVarint():e===2?lN(t,r):e===3?r.type=t.readVarint():e===4&&(r._geometry=t.pos))}function lN(e,r){for(var t=e.readVarint()+e.pos;e.pos<t;){var n=r._keys[e.readVarint()],a=r._values[e.readVarint()];r.properties[n]=a}}var Lw=function(){function e(r,t,n,a,i){(0,Rw.default)(this,e),A(this,"properties",void 0),A(this,"extent",void 0),A(this,"type",void 0),A(this,"id",void 0),A(this,"_pbf",void 0),A(this,"_geometry",void 0),A(this,"_keys",void 0),A(this,"_values",void 0),this.properties={},this.extent=n,this.type=0,this.id=null,this._pbf=r,this._geometry=-1,this._keys=a,this._values=i,r.readFields(Pw,this,t)}return(0,Fw.default)(e,[{key:"loadGeometry",value:function(){var t=this._pbf;t.pos=this._geometry;for(var n=t.readVarint()+t.pos,a=1,i=0,o=0,s=0,u=[],f;t.pos<n;){if(i<=0){var l=t.readVarint();a=l&7,i=l>>3}if(i--,a===1||a===2)o+=t.readSVarint(),s+=t.readSVarint(),a===1&&(f&&u.push(f),f=[]),f&&f.push([o,s]);else if(a===7)f&&f.push(f[0].slice());else throw new Error("unknown command ".concat(a))}return f&&u.push(f),u}},{key:"bbox",value:function(){var t=this._pbf;t.pos=this._geometry;for(var n=t.readVarint()+t.pos,a=1,i=0,o=0,s=0,u=1/0,f=-1/0,l=1/0,c=-1/0;t.pos<n;){if(i<=0){var h=t.readVarint();a=h&7,i=h>>3}if(i--,a===1||a===2)o+=t.readSVarint(),s+=t.readSVarint(),o<u&&(u=o),o>f&&(f=o),s<l&&(l=s),s>c&&(c=s);else if(a!==7)throw new Error("unknown command ".concat(a))}return[u,l,f,c]}},{key:"_toGeoJSON",value:function(t){var n=this.loadGeometry(),a=e.types[this.type],i,o;switch(this.type){case 1:var s=[];for(i=0;i<n.length;i++)s[i]=n[i][0];n=s,t(n,this);break;case 2:for(i=0;i<n.length;i++)t(n[i],this);break;case 3:for(n=Iw(n),i=0;i<n.length;i++)for(o=0;o<n[i].length;o++)t(n[i][o],this);break}n.length===1?n=n[0]:a="Multi".concat(a);var u={type:"Feature",geometry:{type:a,coordinates:n},properties:this.properties};return this.id!==null&&(u.id=this.id),u}},{key:"toGeoJSON",value:function(t){if(typeof t=="function")return this._toGeoJSON(t);var n=t.x,a=t.y,i=t.z,o=this.extent*Math.pow(2,i),s=this.extent*n,u=this.extent*a;function f(l){for(var c=0;c<l.length;c++){var h=l[c];h[0]=(h[0]+s)*360/o-180;var d=180-(h[1]+u)*360/o;h[1]=360/Math.PI*Math.atan(Math.exp(d*Math.PI/180))-90}}return this._toGeoJSON(f)}}],[{key:"types",get:function(){return["Unknown","Point","LineString","Polygon"]}}]),e}();var Gw=function(){function e(r,t){(0,kw.default)(this,e),A(this,"version",void 0),A(this,"name",void 0),A(this,"extent",void 0),A(this,"length",void 0),A(this,"_pbf",void 0),A(this,"_keys",void 0),A(this,"_values",void 0),A(this,"_features",void 0),this.version=1,this.name="",this.extent=4096,this.length=0,this._pbf=r,this._keys=[],this._values=[],this._features=[],r.readFields(cN,this,t),this.length=this._features.length}return(0,Dw.default)(e,[{key:"feature",value:function(t){if(t<0||t>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[t];var n=this._pbf.readVarint()+this._pbf.pos;return new Lw(this._pbf,n,this.extent,this._keys,this._values)}}]),e}();function cN(e,r,t){r&&t&&(e===15?r.version=t.readVarint():e===1?r.name=t.readString():e===5?r.extent=t.readVarint():e===2?r._features.push(t.pos):e===3?r._keys.push(t.readString()):e===4&&r._values.push(hN(t)))}function hN(e){for(var r=null,t=e.readVarint()+e.pos;e.pos<t;){var n=e.readVarint()>>3;r=n===1?e.readString():n===2?e.readFloat():n===3?e.readDouble():n===4?e.readVarint64():n===5?e.readVarint():n===6?e.readSVarint():n===7?e.readBoolean():null}return r}var Uw=function e(r,t){(0,Nw.default)(this,e),A(this,"layers",void 0),this.layers=r.readFields(dN,{},t)};function dN(e,r,t){if(e===3&&t){var n=new Gw(t,t.readVarint()+t.pos);n.length&&r&&(r[n.name]=n)}}var tB=m(H());var Zw=m(H()),$w=m(z());var Xw=m(W()),Yw=m(H()),Kw=m(z());function jw(e){var r=e.indices.length,t="Polygon";if(r<=1)return{type:t,data:e.data,areas:[[gr(e.data)]],indices:[e.indices]};for(var n=[],a=[],i=[],o=[],s,u=0,f,l=0,c;l<r;l++){c=e.indices[l]-u,f=e.indices[l+1]-u||e.data.length;var h=e.data.slice(c,f),d=gr(h);if(d===0){var p=e.data.slice(0,c),v=e.data.slice(f);e.data=p.concat(v),u+=f-c;continue}s===void 0&&(s=d<0),s===d<0?(o.length&&(n.push(i),a.push(o)),o=[c],i=[d]):(i.push(d),o.push(c))}return i&&n.push(i),o.length&&a.push(o),{type:t,areas:n,indices:a,data:e.data}}function Hw(e,r,t,n){for(var a=0,i=e.length;a<i;a+=2){e[a]=(e[a]+r)*360/n-180;var o=180-(e[a+1]+t)*360/n;e[a+1]=360/Math.PI*Math.atan(Math.exp(o*Math.PI/180))-90}}function Vw(e,r,t){r&&t&&(e===1?r.id=t.readVarint():e===2?pN(t,r):e===3?r.type=t.readVarint():e===4&&(r._geometry=t.pos))}function pN(e,r){for(var t=e.readVarint()+e.pos;e.pos<t;){var n=r._keys[e.readVarint()],a=r._values[e.readVarint()];r.properties[n]=a}}function mN(e,r){var t=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=vN(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(f){throw f},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,o=!1,s;return{s:function(){t=t.call(e)},n:function(){var f=t.next();return i=f.done,f},e:function(f){o=!0,s=f},f:function(){try{!i&&t.return!=null&&t.return()}finally{if(o)throw s}}}}function vN(e,r){if(e){if(typeof e=="string")return zw(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return zw(e,r)}}function zw(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function Ww(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function Jw(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?Ww(Object(t),!0).forEach(function(n){(0,Xw.default)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Ww(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var qw,Vn,vm,Qu,gm,ym,no;var Qw=function(){function e(r,t,n,a,i,o){(0,Yw.default)(this,e),A(this,"properties",void 0),A(this,"extent",void 0),A(this,"type",void 0),A(this,"id",void 0),A(this,"_pbf",void 0),A(this,"_geometry",void 0),A(this,"_keys",void 0),A(this,"_values",void 0),A(this,"_geometryInfo",void 0),this.properties={},this.extent=n,this.type=0,this.id=null,this._pbf=r,this._geometry=-1,this._keys=a,this._values=i,this._geometryInfo=o,r.readFields(Vw,this,t)}return(0,Kw.default)(e,[{key:"loadGeometry",value:function(){var t=this._pbf;t.pos=this._geometry,qw=t.readVarint()+t.pos,Vn=1,Qu=0,gm=0,ym=0,no=0;for(var n=[],a=[];t.pos<qw;)if(Qu<=0&&(vm=t.readVarint(),Vn=vm&7,Qu=vm>>3),Qu--,Vn===1||Vn===2)gm+=t.readSVarint(),ym+=t.readSVarint(),Vn===1&&n.push(no),a.push(gm,ym),no+=2;else if(Vn===7){if(no>0){var i=n[n.length-1];a.push(a[i],a[i+1]),no+=2}}else throw new Error("unknown command ".concat(Vn));return{data:a,indices:n}}},{key:"_toBinaryCoordinates",value:function(t){var n=this.loadGeometry(),a;t(n.data,this);var i=2;switch(this.type){case 1:this._geometryInfo.pointFeaturesCount++,this._geometryInfo.pointPositionsCount+=n.indices.length,a=Jw({type:"Point"},n);break;case 2:this._geometryInfo.lineFeaturesCount++,this._geometryInfo.linePathsCount+=n.indices.length,this._geometryInfo.linePositionsCount+=n.data.length/i,a=Jw({type:"LineString"},n);break;case 3:a=jw(n),this._geometryInfo.polygonFeaturesCount++,this._geometryInfo.polygonObjectsCount+=a.indices.length;var o=mN(a.indices),s;try{for(o.s();!(s=o.n()).done;){var u=s.value;this._geometryInfo.polygonRingsCount+=u.length}}catch(l){o.e(l)}finally{o.f()}this._geometryInfo.polygonPositionsCount+=a.data.length/i;break;default:throw new Error("Invalid geometry type: ".concat(this.type))}var f={type:"Feature",geometry:a,properties:this.properties};return this.id!==null&&(f.id=this.id),f}},{key:"toBinaryCoordinates",value:function(t){if(typeof t=="function")return this._toBinaryCoordinates(t);var n=t.x,a=t.y,i=t.z,o=this.extent*Math.pow(2,i),s=this.extent*n,u=this.extent*a;return this._toBinaryCoordinates(function(f){return Hw(f,s,u,o)})}}]),e}();var eB=function(){function e(r,t){(0,Zw.default)(this,e),A(this,"version",void 0),A(this,"name",void 0),A(this,"extent",void 0),A(this,"length",void 0),A(this,"_pbf",void 0),A(this,"_keys",void 0),A(this,"_values",void 0),A(this,"_features",void 0),this.version=1,this.name="",this.extent=4096,this.length=0,this._pbf=r,this._keys=[],this._values=[],this._features=[],r.readFields(gN,this,t),this.length=this._features.length}return(0,$w.default)(e,[{key:"feature",value:function(t,n){if(t<0||t>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[t];var a=this._pbf.readVarint()+this._pbf.pos;return new Qw(this._pbf,a,this.extent,this._keys,this._values,n)}}]),e}();function gN(e,r,t){r&&t&&(e===15?r.version=t.readVarint():e===1?r.name=t.readString():e===5?r.extent=t.readVarint():e===2?r._features.push(t.pos):e===3?r._keys.push(t.readString()):e===4&&r._values.push(yN(t)))}function yN(e){for(var r=null,t=e.readVarint()+e.pos;e.pos<t;){var n=e.readVarint()>>3;r=n===1?e.readString():n===2?e.readFloat():n===3?e.readDouble():n===4?e.readVarint64():n===5?e.readVarint():n===6?e.readSVarint():n===7?e.readBoolean():null}return r}var rB=function e(r,t){(0,tB.default)(this,e),A(this,"layers",void 0),this.layers=r.readFields(AN,{},t)};function AN(e,r,t){if(e===3&&t){var n=new eB(t,t.readVarint()+t.pos);n.length&&r&&(r[n.name]=n)}}function Zu(e,r){var t,n,a=bN(r),i=(r==null||(t=r.gis)===null||t===void 0?void 0:t.format)||(r==null||(n=r.mvt)===null||n===void 0?void 0:n.shape);switch(i){case"columnar-table":return{shape:"columnar-table",data:Am(e,a)};case"geojson-row-table":{var o={shape:"geojson-row-table",data:nB(e,a)};return o}case"geojson":return nB(e,a);case"binary-geometry":return Am(e,a);case"binary":return Am(e,a);default:throw new Error(i)}}function Am(e,r){var t=_N(e,r),n=(0,aB.default)(t,2),a=n[0],i=n[1],o=hm(a,i);return o.byteLength=e.byteLength,o}function _N(e,r){var t=[],n={coordLength:2,pointPositionsCount:0,pointFeaturesCount:0,linePositionsCount:0,linePathsCount:0,lineFeaturesCount:0,polygonPositionsCount:0,polygonObjectsCount:0,polygonRingsCount:0,polygonFeaturesCount:0};if(e.byteLength<=0)return[t,n];var a=new rB(new _m.default(e)),i=r&&Array.isArray(r.layers)?r.layers:Object.keys(a.layers);return i.forEach(function(o){var s=a.layers[o];if(s)for(var u=0;u<s.length;u++){var f=s.feature(u,n),l=xN(f,r,o);t.push(l)}}),[t,n]}function nB(e,r){if(e.byteLength<=0)return[];var t=[],n=new Uw(new _m.default(e)),a=Array.isArray(r.layers)?r.layers:Object.keys(n.layers);return a.forEach(function(i){var o=n.layers[i];if(o)for(var s=0;s<o.length;s++){var u=o.feature(s),f=TN(u,r,i);t.push(f)}}),t}function bN(e){var r;if(!(e!=null&&e.mvt))throw new Error("mvt options required");var t=((r=e.mvt)===null||r===void 0?void 0:r.coordinates)==="wgs84",n=e.mvt.tileIndex,a=n&&Number.isFinite(n.x)&&Number.isFinite(n.y)&&Number.isFinite(n.z);if(t&&!a)throw new Error("MVT Loader: WGS84 coordinates need tileIndex property");return e.mvt}function TN(e,r,t){var n=e.toGeoJSON(r.coordinates==="wgs84"?r.tileIndex:EN);return r.layerProperty&&(n.properties[r.layerProperty]=t),n}function xN(e,r,t){var n=e.toBinaryCoordinates(r.coordinates==="wgs84"?r.tileIndex:SN);return r.layerProperty&&n.properties&&(n.properties[r.layerProperty]=t),n}function EN(e,r){for(var t=r.extent,n=0;n<e.length;n++){var a=e[n];a[0]/=t,a[1]/=t}}function SN(e,r){for(var t=r.extent,n=0,a=e.length;n<a;++n)e[n]/=t}function iB(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function oB(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?iB(Object(t),!0).forEach(function(n){(0,uB.default)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):iB(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var CN="3.3.1",wN={mvt:{shape:"geojson",coordinates:"local",layerProperty:"layerName",layers:void 0,tileIndex:null}},$u={name:"Mapbox Vector Tile",id:"mvt",module:"mvt",version:CN,extensions:["mvt","pbf"],mimeTypes:["application/vnd.mapbox-vector-tile","application/x-protobuf"],worker:!0,category:"geometry",options:wN},BN=oB(oB({},$u),{},{parse:function(){var e=(0,sB.default)(bm.default.mark(function t(n,a){return bm.default.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",Zu(n,a));case 1:case"end":return o.stop()}},t)}));function r(t,n){return e.apply(this,arguments)}return r}(),parseSync:Zu,binary:!0});var cB=m(W()),Tm=m(ce());function fB(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function lB(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?fB(Object(t),!0).forEach(function(n){(0,cB.default)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):fB(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var MN={Point:hB,MultiPoint:ON,LineString:dB,MultiLineString:IN,Polygon:pB,MultiPolygon:PN};function hB(e,r,t){var n=(0,Tm.default)(e,2),a=n[0],i=n[1],o=(0,Tm.default)(r,2),s=o[0],u=o[1],f=Sr(s[0],u[0],a),l=Sr(s[1],u[1],i);return t.unprojectFlat([f,l])}function xm(e,r,t){return e.map(function(n){return hB(n,r,t)})}function ON(e,r,t){return xm(e,r,t)}function dB(e,r,t){return xm(e,r,t)}function IN(e,r,t){return e.map(function(n){return dB(n,r,t)})}function pB(e,r,t){return e.map(function(n){return xm(n,r,t)})}function PN(e,r,t){return e.map(function(n){return pB(n,r,t)})}function mB(e,r,t){var n=t.projectFlat([r.west,r.north]),a=t.projectFlat([r.east,r.south]),i=[n,a];return lB(lB({},e),{},{coordinates:MN[e.type](e.coordinates,i,t)})}function RN(e,r){var t=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=FN(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(f){throw f},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,o=!1,s;return{s:function(){t=t.call(e)},n:function(){var f=t.next();return i=f.done,f},e:function(f){o=!0,s=f},f:function(){try{!i&&t.return!=null&&t.return()}finally{if(o)throw s}}}}function FN(e,r){if(e){if(typeof e=="string")return vB(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return vB(e,r)}}function vB(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var LN=["points","lines","polygons"];function Em(e,r,t,n){var a=RN(LN),i;try{for(a.s();!(i=a.n()).done;){var o=i.value,s=e[o]&&kN(e[o],r,t,n);if(s>=0)return s}}catch(u){a.e(u)}finally{a.f()}return-1}function kN(e,r,t,n){var a=e.featureIds.value;if(!a.length)return-1;var i=0,o=a[a.length-1]+1;if(n){var s=DN(e,n);if(s)i=s[0],o=s[1]+1;else return-1}var u=-1;if(r in e.numericProps){var f=e.numericProps[r].value.findIndex(function(l,c){return l===t&&a[c]>=i&&a[c]<o});return f>=0?e.globalFeatureIds.value[f]:-1}else r?u=gB(e.properties,function(l){return l[r]===t},i,o):e.fields&&(u=gB(e.fields,function(l){return l.id===t},i,o));return u>=0?GN(e,u):-1}function DN(e,r){if(!e.__layers){for(var t={},n=e.properties,a=0;a<n.length;a++){var i=n[a],o=i.layerName;o&&(t[o]?t[o][1]=a:t[o]=[a,a])}e.__layers=t}return e.__layers[r]}function GN(e,r){if(!e.__ids){for(var t=[],n=e.featureIds.value,a=e.globalFeatureIds.value,i=0;i<n.length;i++)t[n[i]]=a[i];e.__ids=t}return e.__ids[r]}function gB(e,r,t,n){for(var a=t;a<n;a++)if(r(e[a],a))return a;return-1}function NN(e,r){var t=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=UN(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(f){throw f},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,o=!1,s;return{s:function(){t=t.call(e)},n:function(){var f=t.next();return i=f.done,f},e:function(f){o=!0,s=f},f:function(){try{!i&&t.return!=null&&t.return()}finally{if(o)throw s}}}}function UN(e,r){if(e){if(typeof e=="string")return yB(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return yB(e,r)}}function yB(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function jN(e){var r=HN();return function(){var n=(0,Qt.default)(e),a;if(r){var i=(0,Qt.default)(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return(0,BB.default)(this,a)}}function HN(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function AB(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function Yr(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?AB(Object(t),!0).forEach(function(n){(0,ef.default)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):AB(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var Sm=512,VN=Yr(Yr({},Bm.GeoJsonLayer.defaultProps),{},{data:Ir,onDataLoad:{type:"function",value:null,optional:!0,compare:!1},uniqueIdProperty:"",highlightedFeatureId:null,loaders:[$u],binary:!0}),rf=function(e){(0,wB.default)(t,e);var r=jN(t);function t(){return(0,SB.default)(this,t),r.apply(this,arguments)}return(0,CB.default)(t,[{key:"initializeState",value:function(){(0,Xr.default)((0,Qt.default)(t.prototype),"initializeState",this).call(this);var a=this.context.viewport.resolution!==void 0?!1:this.props.binary;this.setState({binary:a,data:null,tileJSON:null})}},{key:"isLoaded",get:function(){return this.state&&this.state.data&&this.state.tileset&&(0,Xr.default)((0,Qt.default)(t.prototype),"isLoaded",this)}},{key:"updateState",value:function(a){var i,o=a.props,s=a.oldProps,u=a.context,f=a.changeFlags;f.dataChanged&&this._updateTileData(),(i=this.state)!==null&&i!==void 0&&i.data&&((0,Xr.default)((0,Qt.default)(t.prototype),"updateState",this).call(this,{props:o,oldProps:s,context:u,changeFlags:f}),this._setWGS84PropertyForTiles());var l=o.highlightColor;l!==s.highlightColor&&Array.isArray(l)&&this.setState({highlightColor:l})}},{key:"_updateTileData",value:function(){var n=(0,EB.default)(wm.default.mark(function i(){var o,s,u,f,l;return wm.default.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(o=this.props.data,s=null,!(typeof o=="string"&&!xc(o))){h.next=18;break}return u=this.props,f=u.onDataLoad,l=u.fetch,this.setState({data:null,tileJSON:null}),h.prev=5,h.next=8,l(o,{propName:"data",layer:this,loaders:[]});case 8:s=h.sent,h.next=15;break;case 11:h.prev=11,h.t0=h.catch(5),this.raiseError(h.t0,"loading TileJSON"),o=null;case 15:f&&f(s,{propName:"data",layer:this}),h.next=19;break;case 18:o.tilejson&&(s=o);case 19:s&&(o=s.tiles),this.setState({data:o,tileJSON:s});case 21:case"end":return h.stop()}},i,this,[[5,11]])}));function a(){return n.apply(this,arguments)}return a}()},{key:"_getTilesetOptions",value:function(){var a=(0,Xr.default)((0,Qt.default)(t.prototype),"_getTilesetOptions",this).call(this),i=this.state.tileJSON,o=this.props,s=o.minZoom,u=o.maxZoom;return i&&(Number.isFinite(i.minzoom)&&i.minzoom>s&&(a.minZoom=i.minzoom),Number.isFinite(i.maxzoom)&&(!Number.isFinite(u)||i.maxzoom<u)&&(a.maxZoom=i.maxzoom)),a}},{key:"renderLayers",value:function(){var a;return(a=this.state)!==null&&a!==void 0&&a.data?(0,Xr.default)((0,Qt.default)(t.prototype),"renderLayers",this).call(this):null}},{key:"getTileData",value:function(a){var i,o=this.state,s=o.data,u=o.binary,f=a.index,l=a.signal,c=Wt(s,a);if(!c)return Promise.reject("Invalid URL");var h=this.getLoadOptions(),d=this.props.fetch;return h=Yr(Yr({},h),{},{mimeType:"application/x-protobuf",mvt:Yr(Yr({},(i=h)===null||i===void 0?void 0:i.mvt),{},{coordinates:this.context.viewport.resolution?"wgs84":"local",tileIndex:f}),gis:u?{format:"binary"}:{}}),d(c,{propName:"data",layer:this,loadOptions:h,signal:l})}},{key:"renderSubLayers",value:function(a){var i=a.tile.index,o=i.x,s=i.y,u=i.z,f=Math.pow(2,u),l=Sm/f,c=-l,h=Sm*o/f,d=Sm*(1-s/f),p=new $().scale([l,c,1]);a.autoHighlight=!1,this.context.viewport.resolution||(a.modelMatrix=p,a.coordinateOrigin=[h,d,0],a.coordinateSystem=tf.COORDINATE_SYSTEM.CARTESIAN,a.extensions=[].concat((0,xB.default)(a.extensions||[]),[new MB.ClipExtension]));var v=(0,Xr.default)((0,Qt.default)(t.prototype),"renderSubLayers",this).call(this,a);return this.state.binary&&!(v instanceof Bm.GeoJsonLayer)&&tf.log.warn("renderSubLayers() must return GeoJsonLayer when using binary:true")(),v}},{key:"_updateAutoHighlight",value:function(a){var i=this.props.uniqueIdProperty,o=this.state,s=o.hoveredFeatureId,u=o.hoveredFeatureLayerName,f=a.object,l,c;f&&(l=Cm(f,i),c=_B(f));var h=this.props.highlightColor;typeof h=="function"&&(h=h(a)),(s!==l||u!==c)&&this.setState({highlightColor:h,hoveredFeatureId:l,hoveredFeatureLayerName:c})}},{key:"getPickingInfo",value:function(a){var i=(0,Xr.default)((0,Qt.default)(t.prototype),"getPickingInfo",this).call(this,a),o=Boolean(this.context.viewport.resolution);if(this.state.binary&&i.index!==-1){var s=a.sourceLayer.props.data;i.object=Xu(s,{globalFeatureId:i.index})}return i.object&&!o&&(i.object=TB(i.object,i.tile.bbox,this.context.viewport)),i}},{key:"getSubLayerPropsByTile",value:function(a){return{highlightedObjectIndex:this.getHighlightedObjectIndex(a),highlightColor:this.state.highlightColor}}},{key:"getHighlightedObjectIndex",value:function(a){var i=this.state,o=i.hoveredFeatureId,s=i.hoveredFeatureLayerName,u=i.binary,f=this.props,l=f.uniqueIdProperty,c=f.highlightedFeatureId,h=a.content,d=bB(c),p=bB(o)||d;if(!p)return-1;var v=d?c:o;return Array.isArray(h)?h.findIndex(function(g){var y=Cm(g,l)===v,b=d||_B(g)===s;return y&&b}):h&&u?Em(h,l,v,d?"":s):-1}},{key:"_pickObjects",value:function(a){var i=this.context,o=i.deck,s=i.viewport,u=s.width,f=s.height,l=s.x,c=s.y,h=[this.id];return o.pickObjects({x:l,y:c,width:u,height:f,layerIds:h,maxObjects:a})}},{key:"getRenderedFeatures",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,i=this._pickObjects(a),o=new Set,s=[],u=NN(i),f;try{for(u.s();!(f=u.n()).done;){var l=f.value,c=Cm(l.object,this.props.uniqueIdProperty);c===void 0?s.push(l.object):o.has(c)||(o.add(c),s.push(l.object))}}catch(h){u.e(h)}finally{u.f()}return s}},{key:"_setWGS84PropertyForTiles",value:function(){var a=this,i="dataInWGS84",o=this.state.tileset;o.selectedTiles.forEach(function(s){s.hasOwnProperty(i)||Object.defineProperty(s,i,{get:function(){if(!s.content)return null;if(a.state.binary&&Array.isArray(s.content)&&!s.content.length)return[];var f=s.bbox;if(s._contentWGS84===void 0&&Ec(f)){var l=a.state.binary?Xu(s.content):s.content;s._contentWGS84=l.map(function(c){return TB(c,f,a.context.viewport)})}return s._contentWGS84}})})}}]),t}(ir);(0,ef.default)(rf,"layerName","MVTLayer");(0,ef.default)(rf,"defaultProps",VN);function Cm(e,r){if(e.properties&&r)return e.properties[r];if("id"in e)return e.id}function _B(e){var r;return((r=e.properties)===null||r===void 0?void 0:r.layerName)||null}function bB(e){return e!=null&&e!==""}function TB(e,r,t){var n=Yr(Yr({},e),{},{geometry:{type:e.geometry.type}});return Object.defineProperty(n.geometry,"coordinates",{get:function(){var i=mB(e.geometry,r,t);return i.coordinates}}),n}var FB=m(H()),LB=m(z()),kB=m(Te()),DB=m(xe()),Mm=m(ye()),Om=m(W());var IB=m(ce()),OB="0123456789bcdefghjkmnpqrstuvwxyz",PB={};for(ao=0;ao<OB.length;ao++)PB[OB.charAt(ao)]=ao;var ao,zN=-90,WN=90,JN=-180,qN=180;function XN(e){for(var r=!0,t=WN,n=zN,a=qN,i=JN,o,s=0,u=0,f=e.length;u<f;u++){var l=e[u].toLowerCase();s=PB[l];for(var c=4;c>=0;c--){var h=s>>c&1;r?(o=(a+i)/2,h===1?i=o:a=o):(o=(t+n)/2,h===1?n=o:t=o),r=!r}}return[n,i,t,a]}function RB(e){var r=XN(e),t=(0,IB.default)(r,4),n=t[0],a=t[1],i=t[2],o=t[3];return[o,i,o,n,a,n,a,i,o,i]}function YN(e){var r=KN();return function(){var n=(0,Mm.default)(e),a;if(r){var i=(0,Mm.default)(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return(0,DB.default)(this,a)}}function KN(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var QN={getGeohash:{type:"accessor",value:function(r){return r.geohash}}},nf=function(e){(0,kB.default)(t,e);var r=YN(t);function t(){return(0,FB.default)(this,t),r.apply(this,arguments)}return(0,LB.default)(t,[{key:"indexToBounds",value:function(){var a=this.props,i=a.data,o=a.getGeohash;return{data:i,_normalize:!1,positionFormat:"XY",getPolygon:function(u,f){return RB(o(u,f))}}}}]),t}(St);(0,Om.default)(nf,"layerName","GeohashLayer");(0,Om.default)(nf,"defaultProps",QN);return VB(io);})();
      return __exports__;
      });
