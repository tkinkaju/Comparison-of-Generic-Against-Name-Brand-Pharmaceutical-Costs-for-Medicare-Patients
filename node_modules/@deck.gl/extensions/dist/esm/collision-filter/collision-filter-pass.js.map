{"version":3,"sources":["../../../src/collision-filter/collision-filter-pass.ts"],"names":["withParameters","_LayersPass","LayersPass","CollisionFilterPass","renderCollisionMap","target","options","gl","padding","scissorTest","scissor","width","height","clearColor","blend","depthTest","depthRange","render","pass","getModuleParameters","drawToCollisionMap","pickingActive","pickingAttribute","lightSources"],"mappings":"AAAA,SAAqBA,cAArB,QAA0C,eAA1C;AACA,SAAQC,WAAW,IAAIC,UAAvB,QAAiE,eAAjE;AAIA,eAAe,MAAMC,mBAAN,SAAkCD,UAAlC,CAA6C;AAC1DE,EAAAA,kBAAkB,CAACC,MAAD,EAAsBC,OAAtB,EAAiE;AACjF,UAAMC,EAAE,GAAG,KAAKA,EAAhB;AAEA,UAAMC,OAAO,GAAG,CAAhB;AAEA,WAAOR,cAAc,CACnBO,EADmB,EAEnB;AACEE,MAAAA,WAAW,EAAE,IADf;AAEEC,MAAAA,OAAO,EAAE,CAACF,OAAD,EAAUA,OAAV,EAAmBH,MAAM,CAACM,KAAP,GAAe,IAAIH,OAAtC,EAA+CH,MAAM,CAACO,MAAP,GAAgB,IAAIJ,OAAnE,CAFX;AAGEK,MAAAA,UAAU,EAAE,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,CAHd;AAIEC,MAAAA,KAAK,EAAE,KAJT;AAKEC,MAAAA,SAAS,EAAE,IALb;AAMEC,MAAAA,UAAU,EAAE,CAAC,CAAD,EAAI,CAAJ;AANd,KAFmB,EAUnB,MAAM,KAAKC,MAAL,CAAY,EAAC,GAAGX,OAAJ;AAAaD,MAAAA,MAAb;AAAqBa,MAAAA,IAAI,EAAE;AAA3B,KAAZ,CAVa,CAArB;AAYD;;AAEDC,EAAAA,mBAAmB,GAAG;AAEpB,WAAO;AACLC,MAAAA,kBAAkB,EAAE,IADf;AAELC,MAAAA,aAAa,EAAE,CAFV;AAGLC,MAAAA,gBAAgB,EAAE,KAHb;AAILC,MAAAA,YAAY,EAAE;AAJT,KAAP;AAMD;;AA5ByD","sourcesContent":["import {Framebuffer, withParameters} from '@luma.gl/core';\nimport {_LayersPass as LayersPass, LayersPassRenderOptions} from '@deck.gl/core';\n\ntype CollisionFilterPassRenderOptions = LayersPassRenderOptions & {};\n\nexport default class CollisionFilterPass extends LayersPass {\n  renderCollisionMap(target: Framebuffer, options: CollisionFilterPassRenderOptions) {\n    const gl = this.gl;\n\n    const padding = 1;\n\n    return withParameters(\n      gl,\n      {\n        scissorTest: true,\n        scissor: [padding, padding, target.width - 2 * padding, target.height - 2 * padding],\n        clearColor: [0, 0, 0, 0],\n        blend: false,\n        depthTest: true,\n        depthRange: [0, 1]\n      },\n      () => this.render({...options, target, pass: 'collision'})\n    );\n  }\n\n  getModuleParameters() {\n    // Draw picking colors into collision FBO\n    return {\n      drawToCollisionMap: true,\n      pickingActive: 1,\n      pickingAttribute: false,\n      lightSources: {}\n    };\n  }\n}\n"],"file":"collision-filter-pass.js"}