{"version":3,"sources":["../../../src/collision-filter/collision-filter-pass.ts"],"names":["CollisionFilterPass","target","options","gl","padding","scissorTest","scissor","width","height","clearColor","blend","depthTest","depthRange","render","pass","drawToCollisionMap","pickingActive","pickingAttribute","lightSources","LayersPass"],"mappings":";;;;;;;;;;;;;;;;;;;;;AAAA;;AACA;;;;;;;;;;IAIqBA,mB;;;;;;;;;;;;WACnB,4BAAmBC,MAAnB,EAAwCC,OAAxC,EAAmF;AAAA;;AACjF,UAAMC,EAAE,GAAG,KAAKA,EAAhB;AAEA,UAAMC,OAAO,GAAG,CAAhB;AAEA,aAAO,0BACLD,EADK,EAEL;AACEE,QAAAA,WAAW,EAAE,IADf;AAEEC,QAAAA,OAAO,EAAE,CAACF,OAAD,EAAUA,OAAV,EAAmBH,MAAM,CAACM,KAAP,GAAe,IAAIH,OAAtC,EAA+CH,MAAM,CAACO,MAAP,GAAgB,IAAIJ,OAAnE,CAFX;AAGEK,QAAAA,UAAU,EAAE,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,CAHd;AAIEC,QAAAA,KAAK,EAAE,KAJT;AAKEC,QAAAA,SAAS,EAAE,IALb;AAMEC,QAAAA,UAAU,EAAE,CAAC,CAAD,EAAI,CAAJ;AANd,OAFK,EAUL;AAAA,eAAM,KAAI,CAACC,MAAL,iCAAgBX,OAAhB;AAAyBD,UAAAA,MAAM,EAANA,MAAzB;AAAiCa,UAAAA,IAAI,EAAE;AAAvC,WAAN;AAAA,OAVK,CAAP;AAYD;;;WAED,+BAAsB;AAEpB,aAAO;AACLC,QAAAA,kBAAkB,EAAE,IADf;AAELC,QAAAA,aAAa,EAAE,CAFV;AAGLC,QAAAA,gBAAgB,EAAE,KAHb;AAILC,QAAAA,YAAY,EAAE;AAJT,OAAP;AAMD;;;EA5B8CC,kB","sourcesContent":["import {Framebuffer, withParameters} from '@luma.gl/core';\nimport {_LayersPass as LayersPass, LayersPassRenderOptions} from '@deck.gl/core';\n\ntype CollisionFilterPassRenderOptions = LayersPassRenderOptions & {};\n\nexport default class CollisionFilterPass extends LayersPass {\n  renderCollisionMap(target: Framebuffer, options: CollisionFilterPassRenderOptions) {\n    const gl = this.gl;\n\n    const padding = 1;\n\n    return withParameters(\n      gl,\n      {\n        scissorTest: true,\n        scissor: [padding, padding, target.width - 2 * padding, target.height - 2 * padding],\n        clearColor: [0, 0, 0, 0],\n        blend: false,\n        depthTest: true,\n        depthRange: [0, 1]\n      },\n      () => this.render({...options, target, pass: 'collision'})\n    );\n  }\n\n  getModuleParameters() {\n    // Draw picking colors into collision FBO\n    return {\n      drawToCollisionMap: true,\n      pickingActive: 1,\n      pickingAttribute: false,\n      lightSources: {}\n    };\n  }\n}\n"],"file":"collision-filter-pass.js"}