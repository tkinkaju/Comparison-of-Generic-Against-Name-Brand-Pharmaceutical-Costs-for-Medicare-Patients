/**
 * @salte-auth/popup JavaScript Library v1.0.0-rc.1
 *
 * @license MIT (https://github.com/salte-auth/popup/blob/master/LICENSE)
 *
 * Made with â™¥ by Nick Woodward <nick@salte.io>, Dave Woodward <dave@salte.io>
 */
import{Handler as t,Utils as n,SalteAuthError as e}from"@salte-auth/salte-auth";function o(t,n,e,o,i,r,c){try{var a=t[r](c),s=a.value}catch(t){return void e(t)}a.done?n(s):Promise.resolve(s).then(o,i)}var i=function(t){return function(){var n=this,e=arguments;return new Promise(function(i,r){var c=t.apply(n,e);function a(t){o(c,i,r,a,s,"next",t)}function s(t){o(c,i,r,a,s,"throw",t)}a(void 0)})}};class r extends t{constructor(t){super(t),this.config=n.Common.defaults(this.config,{window:{name:"@salte-auth/tab",height:600,width:600}})}get name(){return"popup"}get auto(){return!1}open(t){var o=this;return i(function*(){const i=window.innerHeight/2-o.config.window.height/2+window.screenTop,r=window.innerWidth/2-o.config.window.width/2+window.screenLeft,c=window.open(t.url,o.config.window.name,"height=".concat(o.config.window.height,", width=").concat(o.config.window.width,", status=yes, toolbar=no, menubar=no, location=no, top=").concat(i,", left=").concat(r));if(!c)throw new e({message:"We were unable to open the popup window, its likely that the request was blocked.",code:"popup_blocked"});return c.focus(),new Promise(e=>{const o=setInterval(()=>{try{if(!c.closed){if(0!==c.location.href.indexOf(t.redirectUrl))return;const o=n.URL.parse(c.location);c.close(),setTimeout(()=>e(o))}clearInterval(o)}catch(t){}},100)})})()}}export{r as Popup};
//# sourceMappingURL=popup.min.mjs.map
