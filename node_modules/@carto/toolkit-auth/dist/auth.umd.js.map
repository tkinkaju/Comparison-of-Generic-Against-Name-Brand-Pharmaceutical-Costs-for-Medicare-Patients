{"version":3,"file":"auth.umd.js","sources":["../../core/dist/core.esm.js","../../../node_modules/@salte-auth/salte-auth/dist/salte-auth.min.mjs","../../../node_modules/@salte-auth/popup/dist/popup.min.mjs","../src/constants.ts","../src/CartoProvider.ts","../src/utils.ts","../src/Iframe.ts","../src/UserInfo.ts","../src/OAuth.ts","../../../node_modules/mitt/dist/mitt.es.js"],"sourcesContent":["class e{constructor(e,r,t=\"https://{user}.carto.com\"){if(!e)throw new Error(\"Username is required\");if(!r)throw new Error(\"Api key is required\");this._username=e,this._apiKey=r,this._serverUrlTemplate=t}static get DEFAULT_SERVER_URL_TEMPLATE(){return\"https://{user}.carto.com\"}static get DEFAULT_PUBLIC_API_KEY(){return\"default_public\"}get username(){return this._username}set username(e){this._username=e}get apiKey(){return this._apiKey}set apiKey(e){this._apiKey=e}get serverUrlTemplate(){return this._serverUrlTemplate}set serverUrlTemplate(e){this._serverUrlTemplate=e}get serverURL(){let e=this._serverUrlTemplate.replace(\"{user}\",this._username);return e.endsWith(\"/\")||(e+=\"/\"),e}}const r=new e(\"username\",\"default_public\");function t(e){r.username=e.username,r.apiKey=e.apiKey||\"default_public\",r.serverUrlTemplate=e.serverUrlTemplate||\"https://{user}.carto.com\"}class s{constructor(e,r,t=\"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(/[xy]/g,e=>{const r=16*Math.random()|0;return(\"x\"===e?r:3&r|8).toString(16)})){this.source=e,this.name=r,this.groupId=t}getHeaders(){return[[\"Carto-Event-Source\",this.source],[\"Carto-Event\",this.name],[\"Carto-Event-Group-Id\",this.groupId]]}}export{e as Credentials,s as MetricsEvent,r as defaultCredentials,t as setDefaultCredentials};\n//# sourceMappingURL=core.esm.js.map\n","/**\n * @salte-auth/salte-auth JavaScript Library v3.0.0-rc.8\n *\n * @license MIT (https://github.com/salte-auth/salte-auth/blob/master/LICENSE)\n *\n * Made with ♥ by Nick Woodward <nick@salte.io>, Dave Woodward <dave@salte.io>\n */\nfunction e(e,t,n,r,i,s,o){try{var a=e[s](o),c=a.value}catch(e){return void n(e)}a.done?t(c):Promise.resolve(c).then(r,i)}var t=function(t){return function(){var n=this,r=arguments;return new Promise(function(i,s){var o=t.apply(n,r);function a(t){e(o,i,s,a,c,\"next\",t)}function c(t){e(o,i,s,a,c,\"throw\",t)}a(void 0)})}};var n=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e};class r extends Error{constructor(e){let t=e.message,r=e.code;super(t),n(this,\"code\",void 0),this.code=r}}class i{constructor(e){this.config=e||{}}required(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const i=t.filter(e=>void 0===this.config[e]);if(i.length>0)throw new r({code:\"missing_required_properties\",message:\"Missing the following required fields. (\".concat(i.join(\", \"),\")\")})}}class s{static setup(e){this.hasSetup&&!e||(this.hasSetup=!0,this.interceptors=[],this.real||(this.real=window.fetch),window.fetch&&(window.fetch=function(){var e=t(function*(e,t){const n=e instanceof Request?e:new Request(e,t);for(let e=0;e<s.interceptors.length;e++){const t=s.interceptors[e];yield Promise.resolve(t(n))}return s.real.call(this,n)});return function(t,n){return e.apply(this,arguments)}}()))}static add(e){this.setup(),this.interceptors.push(e)}}n(s,\"real\",void 0),n(s,\"hasSetup\",!1),n(s,\"interceptors\",void 0);let o=!1;const a=[];function c(){a.forEach(e=>e())}class l{static route(e){o||(window.addEventListener(\"popstate\",c,{passive:!0}),window.addEventListener(\"click\",c,{passive:!0}),setTimeout(c),o=!0),a.push(e)}static create(e,t){const n=document.createEvent(\"Event\");return n.initEvent(e,t.bubbles||!1,t.cancelable||!0),n.detail=t.detail,n}static isCrossDomainError(e){return e instanceof DOMException||\"Permission denied\"===e.message}}class h{static setup(e){if(this.hasSetup&&!e)return;this.hasSetup=!0,this.interceptors=[],this.realOpen||(this.realOpen=XMLHttpRequest.prototype.open),this.realSend||(this.realSend=XMLHttpRequest.prototype.send);const t=XMLHttpRequest.prototype;t.open=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=t[1];return this.$url=r,h.realOpen.apply(this,t)},t.send=function(e){const t=[];for(let n=0;n<h.interceptors.length;n++){const r=h.interceptors[n];t.push(r(this,e))}Promise.all(t).then(()=>{h.realSend.call(this,e)}).catch(e=>{this.dispatchEvent(l.create(\"error\",{detail:e}))})}}static add(e){this.setup(),this.interceptors.push(e)}}n(h,\"realOpen\",void 0),n(h,\"realSend\",void 0),n(h,\"hasSetup\",!1),n(h,\"interceptors\",void 0);var d=Object.freeze({Fetch:s,XHR:h});var u=function(e){if(Array.isArray(e))return e};var p=function(e,t){var n=[],r=!0,i=!1,s=void 0;try{for(var o,a=e[Symbol.iterator]();!(r=(o=a.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,s=e}finally{try{r||null==a.return||a.return()}finally{if(i)throw s}}return n};var f=function(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance\")};var g=function(e,t){return u(e)||p(e,t)||f()};let v,m,y;class w{static get origin(){return\"\".concat(location.protocol,\"//\").concat(location.host)}static resolve(e){return v||(v=document.implementation.createHTMLDocument(\"url\"),m=v.createElement(\"base\"),y=v.createElement(\"a\"),v.head.appendChild(m)),m.href=window.location.protocol+\"//\"+window.location.host,y.href=e.replace(/ /g,\"%20\"),y.href.replace(/\\/$/,\"\")}static match(e,t){if(t instanceof Array){const n=this.resolve(e);return!!x.find(t,e=>e instanceof RegExp?!!n.match(e):0===n.indexOf(this.resolve(e)))}return!0===t}static parse(e){let t=e.search,n=e.hash,r=[];t&&(r=r.concat(t.replace(\"?\",\"\").split(\"&\"))),n&&(r=r.concat(n.replace(\"#\",\"\").split(\"&\")));const i={};return x.forEach(r,e=>{const t=e.split(\"=\"),n=g(t,2),r=n[0],s=n[1];i[r]=s}),i}}const k={};class x{static includes(e,t){return-1!==e.indexOf(t)}static forEach(e,t){if(Array.isArray(e))for(let n=0;n<e.length;n++)t(e[n],n);else for(let n in e)t(e[n],n)}static find(e,t){if(Array.isArray(e))for(let n=0;n<e.length;n++){const r=e[n];if(t(r,n))return r}else for(let n in e){const r=e[n];if(t(r,n))return r}return null}static assign(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return this.forEach(n,t=>{for(const n in t)e[n]=t[n]}),e}static defaults(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return this.forEach(n,t=>{for(const n in t)this.isObject(e[n])&&this.isObject(t[n])?e[n]=this.defaults(e[n],t[n]):void 0===e[n]&&(e[n]=t[n])}),e}static isObject(e){return\"object\"==typeof e&&!Array.isArray(e)}static iframe(e){var n=this;return t(function*(){let t=e.url,r=e.redirectUrl,i=e.visible;const s=document.createElement(\"iframe\");return s.setAttribute(\"owner\",\"@salte-auth/salte-auth\"),i?(n.assign(s.style,{border:\"none\",bottom:0,height:\"100%\",left:0,position:\"fixed\",right:0,top:0,width:\"100%\",zIndex:9999,opacity:0,transition:\"0.5s opacity\"}),setTimeout(()=>s.style.opacity=\"1\")):s.style.display=\"none\",s.src=t,document.body.appendChild(s),new Promise((e,t)=>{const n=setInterval(()=>{try{const i=s.contentWindow.location;if(0!==i.href.indexOf(r))return;const o=w.parse(i);s.parentElement&&s.parentElement.removeChild(s),clearInterval(n),e(o)}catch(e){if(l.isCrossDomainError(e))return;s.parentElement&&s.parentElement.removeChild(s),clearInterval(n),t(e)}})})})()}static debounce(e,t,n){clearTimeout(k[e]),k[e]=window.setTimeout(()=>{delete k[e],t()},n)}}class b{constructor(e,t,r){n(this,\"raw\",void 0),n(this,\"expiration\",void 0),n(this,\"type\",void 0),this.raw=e,this.expiration=x.includes([void 0,null],t)?null:Number(t),this.type=r}get expired(){return!this.raw||this.expiration<=Date.now()}}class _{constructor(e){n(this,\"raw\",void 0),n(this,\"user\",void 0),this.raw=e,this.user=_.parse(this.raw)}get expired(){return!this.user||1e3*this.user.exp<=Date.now()}static parse(e){try{const t=e.split(\".\");if(3!==t.length)throw new r({code:\"invalid_id_token\",message:\"ID Token didn't match the desired format. ({header}.{payload}.{validation})\"});return JSON.parse(atob(t[1].replace(/-/g,\"+\").replace(/_/g,\"/\")))}catch(e){return null}}}class T{constructor(e,t){n(this,\"name\",void 0),n(this,\"level\",void 0),this.name=e,this.level=\"string\"==typeof t?this.toLevel(t):t}trace(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.log(\"trace\",e,...n)}info(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.log(\"info\",e,...n)}warn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.log(\"warn\",e,...n)}error(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.log(\"error\",e,...n)}log(e,t){if(this.enabled(e)){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];console.log(\"\".concat(e,\": \").concat(t),...r)}}enabled(e){return!1!==this.level&&(!0===this.level||this.level<=this.toLevel(e))}toLevel(e){return x.find(T.levels,(t,n)=>n===e)}}n(T,\"levels\",{trace:0,info:1,warn:2,error:3});var $=Object.freeze({Interceptors:d,AccessToken:b,IDToken:_,Common:x,Events:l,URL:w,Logger:T});class E extends i{constructor(e){super(e),this.config=x.defaults(this.config,{storage:\"session\"})}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.storage.getItem(this.key(e))||t}set(e,t){x.includes([void 0,null],t)?this.clear(e):this.storage.setItem(this.key(e),t)}clear(e){this.storage.removeItem(this.key(e))}reset(){const e=this.key(\"\");for(const t in localStorage)0===t.indexOf(e)&&localStorage.removeItem(t);for(const t in sessionStorage)0===t.indexOf(e)&&sessionStorage.removeItem(t)}key(e){return\"salte.auth.\".concat(e)}get storage(){const e=this.config&&this.config.storage;switch(e){case\"local\":return localStorage;case\"session\":return sessionStorage}throw new r({code:\"invalid_storage\",message:\"Storage doesn't exist for the given value. (\".concat(e,\")\")})}}class U extends E{constructor(){super(...arguments),n(this,\"listeners\",new Map)}on(e,t){this.listeners.has(e)||this.listeners.set(e,[]),this.listeners.get(e).push(t)}off(e,t){if(!this.listeners.has(e))return;const n=this.listeners.get(e);if(!n.length)return;const r=n.indexOf(t);-1!==r&&n.splice(r,1)}emit(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(!this.listeners.has(e))return;const i=this.listeners.get(e);x.forEach(i,e=>e(...n))}}class A extends U{constructor(e){super(e),this.config=x.defaults(this.config,{redirectUrl:location.origin,level:\"warn\"})}redirectUrl(e){return\"string\"==typeof this.config.redirectUrl?this.config.redirectUrl:this.config.redirectUrl[e]}}var q=self.crypto||self.msCrypto,O=function(e){e=e||21;for(var t=\"\",n=q.getRandomValues(new Uint8Array(e));0<e--;)t+=\"Uint8ArdomValuesObj012345679BCDEFGHIJKLMNPQRSTWXYZ_cfghkpqvwxyz-\"[63&n[e]];return t};class S extends A{constructor(e){super(e),n(this,\"logger\",void 0),this.config=x.defaults(this.config,{validation:!0,level:\"warn\"}),this.logger=new T(\"@salte-auth/salte-auth:providers/\".concat(this.$name),this.config.level)}validation(e){return\"object\"==typeof this.config.validation?!0===this.config.validation[e]:!0===this.config.validation}get $name(){return this.config.name||this.name}key(e){return\"salte.auth.provider.\".concat(this.$name,\".\").concat(e)}url(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;return x.forEach(t,(e,t)=>{x.includes([void 0,null,\"\"],e)||(n+=\"\".concat(-1===n.indexOf(\"?\")?\"?\":\"&\").concat(t,\"=\").concat(encodeURIComponent(e)))}),n}get logout(){throw new r({code:\"logout_not_supported\",message:\"This provider doesn't support logout.\"})}}class I extends S{constructor(e){super(e),n(this,\"accessToken\",void 0),this.sync()}connected(){this.required(\"clientID\",\"responseType\")}secure(e){var n=this;return t(function*(){if(\"token\"===n.config.responseType){if(n.accessToken.expired)return n.$login();if(e)if(e instanceof Request)e.headers.set(\"Authorization\",\"Bearer \".concat(n.accessToken.raw));else{if(!(e instanceof XMLHttpRequest))throw new r({code:\"unknown_request\",message:\"Unknown request type. (\".concat(e,\")\")});e.setRequestHeader(\"Authorization\",\"Bearer \".concat(n.accessToken.raw))}}return!0})()}$validate(e){try{if(!e)throw new r({code:\"empty_response\",message:\"The response provided was empty, this is most likely due to the configured handler not providing it.\"});if(e.error)throw new r({code:e.error,message:\"\".concat(e.error_description?e.error_description:e.error).concat(e.error_uri?\" (\".concat(e.error_uri,\")\"):\"\")});const t=e.code,n=e.access_token,i=e.state,s=e.expires_in,o=e.token_type;if(this.validation(\"state\")&&this.get(\"state\")!==i)throw new r({code:\"invalid_state\",message:\"State provided by identity provider did not match local state.\"});const a=this.get(\"response-type\",\"\").split(\" \");if(x.includes(a,\"code\")){if(!t)throw new r({code:\"invalid_code\",message:\"Expected a code to be returned by the Provider.\"})}else if(x.includes(a,\"token\")&&!n)throw new r({code:\"invalid_access_token\",message:\"Expected an access token to be returned by the Provider.\"});t?(this.set(\"code.raw\",t),this.clear(\"access-token.raw\"),this.clear(\"access-token.expiration\"),this.clear(\"access-token.type\")):n&&(this.set(\"access-token.raw\",n),this.set(\"access-token.expiration\",Date.now()+1e3*Number(s)),this.set(\"access-token.type\",o),this.clear(\"code.raw\"))}finally{this.clear(\"state\")}}validate(e){try{this.$validate(e)}catch(e){throw this.emit(\"login\",e),e}finally{this.sync()}this.emit(\"login\",null,this.code||this.accessToken)}get code(){return this.get(\"code.raw\")}$login(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=\"\".concat(this.$name,\"-state-\").concat(O()),n=e.responseType||this.config.responseType;return this.set(\"state\",t),this.set(\"response-type\",n),this.url(this.login,{client_id:this.config.clientID,response_type:n,redirect_uri:this.config.redirectUrl,scope:this.config.scope,state:t})}sync(){this.accessToken=new b(this.get(\"access-token.raw\"),this.get(\"access-token.expiration\"),this.get(\"access-token.type\"))}}class R extends I{constructor(e){super(e),n(this,\"idToken\",void 0),this.config.renewal=\"object\"==typeof this.config.renewal?this.config.renewal:{type:this.config.renewal},this.config=x.defaults(this.config,{responseType:\"id_token\",scope:\"openid\",renewal:{type:\"auto\",buffer:6e4}}),this.sync()}secure(e){var n=this;return t(function*(){if(x.includes([\"id_token\",\"id_token token\",\"token\"],n.config.responseType)){if(n.idToken.expired)return n.$login();if(n.accessToken.expired){const e=yield x.iframe({redirectUrl:n.redirectUrl(\"login\"),url:n.$login({prompt:\"none\",responseType:\"token\"})});n.validate(e)}if(e)if(e instanceof Request)e.headers.set(\"Authorization\",\"Bearer \".concat(n.accessToken.raw));else{if(!(e instanceof XMLHttpRequest))throw new r({code:\"unknown_request\",message:\"Unknown request type. (\".concat(e,\")\")});e.setRequestHeader(\"Authorization\",\"Bearer \".concat(n.accessToken.raw))}}return!0})()}$validate(e){try{super.$validate(e);const t=this.get(\"response-type\",\"\").split(\" \");if(x.includes(t,\"id_token\")){const t=e.id_token,n=_.parse(t);if(!n)throw new r({code:\"invalid_id_token\",message:\"Failed to parse user information due to invalid id token.\"});if(this.validation(\"nonce\")&&this.get(\"nonce\")!==n.nonce)throw new r({code:\"invalid_nonce\",message:\"Nonce provided by identity provider did not match the local nonce.\"});this.set(\"id-token.raw\",t)}else x.includes(t,\"code\")&&this.clear(\"id-token.raw\")}finally{this.clear(\"nonce\")}}validate(e){try{this.$validate(e)}catch(e){throw this.emit(\"login\",e),e}finally{this.sync()}const t=this.get(\"response-type\",\"\"),n=t.split(\" \");if(x.includes(n,\"id_token\"))this.emit(\"login\",null,this.idToken);else if(x.includes(n,\"token\"))this.emit(\"login\",null,this.accessToken);else{if(!x.includes(n,\"code\"))throw new r({code:\"invalid_response_type\",message:\"Unknown Response Type (\".concat(t,\")\")});this.emit(\"login\",null,this.code)}}$login(e){const t=\"\".concat(this.$name,\"-nonce-\").concat(O());return this.set(\"nonce\",t),this.url(super.$login(e),{prompt:e&&e.prompt,nonce:t})}sync(){super.sync(),this.idToken=new _(this.get(\"id-token.raw\"))}}var L=Object.freeze({OAuth2:class extends I{constructor(e){super(e),this.required(\"login\")}get name(){return\"generic.oauth2\"}get login(){return this.config.login.apply(this)}},OpenID:class extends R{constructor(e){super(e),this.required(\"login\",\"logout\")}get name(){return\"generic.openid\"}get login(){return this.config.login.apply(this)}get logout(){return this.config.logout.apply(this)}}});class D extends E{constructor(e){super(e),n(this,\"logger\",void 0),this.config=x.defaults(this.config,{navigate:\"reload\",level:\"warn\"}),this.logger=new T(\"@salte-auth/salte-auth:handlers/\".concat(this.$name),this.config.level)}get $name(){return this.config.name||this.name}key(e){return\"salte.auth.handler.\".concat(this.$name,\".\").concat(e)}navigate(e){\"history\"===this.config.navigate&&0===e.indexOf(w.origin)&&history.pushState(\"\",document.title,e),location.href=e}}class j extends A{constructor(e){var i;super(e),i=this,n(this,\"logger\",void 0),n(this,\"mixin\",void 0),this.required(\"providers\",\"handlers\"),this.config=x.defaults(this.config,{validation:!0,level:\"warn\"}),this.logger=new T(\"@salte-auth/salte-auth:core\",this.config.level),x.forEach(this.config.providers,e=>{e.connected&&e.connected(),e.on(\"login\",(e,t)=>{this.emit(\"login\",e,t)}),e.on(\"logout\",e=>{this.emit(\"logout\",e)})});const o=this.get(\"action\"),a=o?this.provider(this.get(\"provider\")):null,c=o?this.get(\"handler\"):null;if(!x.includes([void 0,null,\"login\",\"logout\"],o))throw new r({code:\"unknown_action\",message:\"Unable to finish redirect due to an unknown action! (\".concat(o,\")\")});var d;x.forEach(this.config.handlers,e=>{if(!e.connected)return;const t=e.$name===c;setTimeout(()=>{const n=e.connected({action:t?o:null});t&&(\"login\"===o?a.validate(n):(a.reset(),a.sync(),a.emit(\"logout\")))})}),this.clear(\"action\"),this.clear(\"provider\"),this.clear(\"handler\"),s.add(function(){var e=t(function*(e){for(let t=0;t<i.config.providers.length;t++){const n=i.config.providers[t];w.match(e.url,n.config.endpoints)&&n.secure&&(yield n.secure(e))}});return function(t){return e.apply(this,arguments)}}()),h.add(function(){var e=t(function*(e){for(let t=0;t<i.config.providers.length;t++){const n=i.config.providers[t];w.match(e.$url,n.config.endpoints)&&n.secure&&(yield n.secure(e))}});return function(t){return e.apply(this,arguments)}}()),l.route(t(function*(){try{const e=i.handler();for(let t=0;t<i.config.providers.length;t++){const n=i.config.providers[t];if(w.match(location.href,n.config.routes)){let t=null;for(;!0!==t;)if(\"string\"==typeof(t=yield n.secure())){if(!e.auto)throw new r({code:\"auto_unsupported\",message:\"The default handler doesn't support automatic authentication! (\".concat(e.$name,\")\")});i.set(\"action\",\"login\"),i.set(\"provider\",n.$name),i.set(\"handler\",e.$name);const s=yield e.open({redirectUrl:n.redirectUrl(\"login\"),url:t});n.validate(s),i.clear(\"action\"),i.clear(\"provider\"),i.clear(\"handler\")}}}}catch(e){throw i.clear(\"action\"),i.clear(\"provider\"),i.clear(\"handler\"),e}})),this.mixin=(d=this,function(e){return class extends e{constructor(){super(...arguments),n(this,\"auth\",void 0),this.auth=d,this.auth.on(\"login\",()=>{this.requestUpdate&&this.requestUpdate(\"auth\")}),this.auth.on(\"logout\",()=>{this.requestUpdate&&this.requestUpdate(\"auth\")})}}})}login(e){var n=this;return t(function*(){e=\"string\"==typeof e?{provider:e}:e;try{const t=n.provider(e.provider),r=n.handler(e.handler);n.set(\"action\",\"login\"),n.set(\"provider\",t.$name),n.set(\"handler\",r.$name);const i=yield r.open({redirectUrl:t.redirectUrl(\"login\"),url:t.$login()});t.validate(i)}finally{n.clear(\"action\"),n.clear(\"provider\"),n.clear(\"handler\")}})()}logout(e){var n=this;return t(function*(){e=\"string\"==typeof e?{provider:e}:e;const t=n.provider(e.provider);try{const r=n.handler(e.handler);n.set(\"action\",\"logout\"),n.set(\"provider\",t.$name),n.set(\"handler\",r.$name),yield r.open({redirectUrl:t.redirectUrl(\"logout\"),url:t.logout}),t.reset(),t.emit(\"logout\")}catch(e){throw t.emit(\"logout\",e),e}finally{n.clear(\"action\"),n.clear(\"provider\"),n.clear(\"handler\")}})()}provider(e){const t=x.find(this.config.providers,t=>t.$name===e);if(!t)throw new r({code:\"invalid_provider\",message:\"Unable to locate provider with the given name. (\".concat(e,\")\")});return t}handler(e){const t=void 0===e?x.find(this.config.handlers,e=>!!e.config.default):x.find(this.config.handlers,t=>t.$name===e);if(!t)throw new r({code:\"invalid_handler\",message:\"Unable to locate handler with the given name. (\".concat(e,\")\")});return t}}export{L as Generic,D as Handler,I as OAuth2Provider,R as OpenIDProvider,j as SalteAuth,r as SalteAuthError,$ as Utils};\n//# sourceMappingURL=salte-auth.min.mjs.map\n","/**\n * @salte-auth/popup JavaScript Library v1.0.0-rc.1\n *\n * @license MIT (https://github.com/salte-auth/popup/blob/master/LICENSE)\n *\n * Made with ♥ by Nick Woodward <nick@salte.io>, Dave Woodward <dave@salte.io>\n */\nimport{Handler as t,Utils as n,SalteAuthError as e}from\"@salte-auth/salte-auth\";function o(t,n,e,o,i,r,c){try{var a=t[r](c),s=a.value}catch(t){return void e(t)}a.done?n(s):Promise.resolve(s).then(o,i)}var i=function(t){return function(){var n=this,e=arguments;return new Promise(function(i,r){var c=t.apply(n,e);function a(t){o(c,i,r,a,s,\"next\",t)}function s(t){o(c,i,r,a,s,\"throw\",t)}a(void 0)})}};class r extends t{constructor(t){super(t),this.config=n.Common.defaults(this.config,{window:{name:\"@salte-auth/tab\",height:600,width:600}})}get name(){return\"popup\"}get auto(){return!1}open(t){var o=this;return i(function*(){const i=window.innerHeight/2-o.config.window.height/2+window.screenTop,r=window.innerWidth/2-o.config.window.width/2+window.screenLeft,c=window.open(t.url,o.config.window.name,\"height=\".concat(o.config.window.height,\", width=\").concat(o.config.window.width,\", status=yes, toolbar=no, menubar=no, location=no, top=\").concat(i,\", left=\").concat(r));if(!c)throw new e({message:\"We were unable to open the popup window, its likely that the request was blocked.\",code:\"popup_blocked\"});return c.focus(),new Promise(e=>{const o=setInterval(()=>{try{if(!c.closed){if(0!==c.location.href.indexOf(t.redirectUrl))return;const o=n.URL.parse(c.location);c.close(),setTimeout(()=>e(o))}clearInterval(o)}catch(t){}},100)})})()}}export{r as Popup};\n//# sourceMappingURL=popup.min.mjs.map\n","export const CARTO_AUTHORIZATION_BASE = 'https://carto.com/oauth2';\nexport const THRESHOLD = 1000 * 5 * 60;\nexport const ALREADY_EXPIRED = -1;\nexport const NO_TIMEOUT = -1;\nexport const REFRESH_STATE_PREFIX = '6574686572766f69642d74726169746f72';\n\nexport const SCOPES: RegExp[] = [\n  /offline/,\n  /dataservices:geocoding/,\n  /dataservices:isolines/,\n  /dataservices:routing/,\n  /dataservices:observatory/,\n  /datasets:r:.+/,\n  /datasets:w:.+/,\n  /datasets:rw:.+/,\n  /schemas:c/,\n  /datasets:metadata/\n];\n","import { OAuth2Provider } from '@salte-auth/salte-auth';\nimport { ALREADY_EXPIRED } from './constants';\n\ninterface CartoValidation extends OAuth2Provider.Validation {\n  user_info_url: string;\n}\n\nexport class CartoProvider extends OAuth2Provider {\n  private _userInfo: string = this.get('user_info');\n\n  get name() {\n    return 'carto';\n  }\n\n  get login() {\n    return `${this.config.url}/authorize`;\n  }\n\n  get logout() {\n    return `${this.config.url}/logout`;\n  }\n\n  get userInfo() {\n    return this._userInfo;\n  }\n\n  public $validate(options: CartoValidation): void {\n    super.$validate(options);\n\n    this._userInfo = decodeURIComponent(options.user_info_url);\n    this.set('user_info', this._userInfo);\n  }\n\n  public sync() {\n    super.sync();\n    this._userInfo = this.get('user_info');\n  }\n\n  public get expired() {\n    return this.accessToken && this.accessToken.expired;\n  }\n\n  /**\n   * Returns Expiration date for current token, or -1 if already expired\n   *\n   * @readonly\n   * @type {number}\n   * @memberof CartoProvider\n   */\n  get expiresIn(): number {\n    if (this.accessToken === undefined) {\n      return ALREADY_EXPIRED;\n    }\n\n    return this.accessToken.expiration;\n  }\n}\n\nexport default CartoProvider;\n","import { SCOPES } from './constants';\n\nexport type Pair<T> = [T, T];\n\nexport function knownScope(scope: string) {\n  return SCOPES.some((S) => S.exec(scope) !== null);\n}\n\nexport function unknownScopes(scopes: string[]) {\n  return scopes.filter(\n    (scope) => !knownScope(scope)\n  );\n}\n\nexport function buildParams(params: Array<Pair<string>>) {\n  return encodeURI(params.map((param) => {\n    return `${param[0]}=${param[1]}`;\n  }).join('&'));\n}\n","import { Utils } from '@salte-auth/salte-auth';\nimport { AuthParameters } from './AuthParameters';\nimport { CARTO_AUTHORIZATION_BASE } from './constants';\nimport { buildParams, Pair } from './utils';\n\nexport class Iframe {\n  private _params: AuthParameters;\n\n  constructor(args: AuthParameters) {\n    this._params = args;\n  }\n\n  public refresh(state: string): Promise<any> {\n    const params = [\n      ['client_id', this._params.clientID],\n      ['response_type', 'token'],\n      ['prompt', 'none'],\n      ['scopes', this._params.scopes],\n      ['state', state]\n    ];\n\n    if (this._params.redirectURI) {\n      params.push(['redirect_uri', this._params.redirectURI]);\n    }\n\n    const url = `${CARTO_AUTHORIZATION_BASE}/authorize?${buildParams(params as Array<Pair<string>>)}`;\n\n    return Utils.Common.iframe({\n      url,\n      redirectUrl: this._params.redirectURI || window.location.href,\n      visible: false\n    });\n  }\n}\n","export class UserInfo {\n  private _apiKey: string;\n  private _url: string;\n\n  constructor(apiKey: string, url: string) {\n    this._apiKey = apiKey;\n    this._url = url;\n  }\n\n  get info() {\n    return fetch(`${this._url}?api_key=${this._apiKey}`)\n      .then((response) => response.json());\n  }\n}\n\nexport default UserInfo;\n","import { Credentials } from '@carto/toolkit-core';\nimport { Popup } from '@salte-auth/popup';\nimport { SalteAuth } from '@salte-auth/salte-auth';\nimport mitt from 'mitt';\nimport { AuthParameters } from './AuthParameters';\nimport CartoProvider from './CartoProvider';\nimport { CARTO_AUTHORIZATION_BASE, NO_TIMEOUT, REFRESH_STATE_PREFIX, THRESHOLD } from './constants';\nimport { Iframe } from './Iframe';\nimport UserInfo from './UserInfo';\nimport { unknownScopes } from './utils';\n\nclass OAuth {\n  private _client: SalteAuth;\n  private _carto: CartoProvider;\n  private _refresher: Iframe;\n  private _refreshTimeout: number = NO_TIMEOUT;\n  private _emitter: mitt.Emitter;\n\n  constructor(args: AuthParameters, refreshUrl?: string) {\n    if (args == null) {\n      throw new Error('Missing OAuth parameters');\n    }\n\n    args.authorization = args.authorization || CARTO_AUTHORIZATION_BASE;\n    args.scopes = args.scopes || '';\n\n    this._emitter = mitt();\n\n    this._client = new SalteAuth({\n      providers: [\n        new CartoProvider({\n          storage: 'local',\n          level: 'trace',\n          url: args.authorization,\n          redirectUrl: args.redirectURI,\n          clientID: args.clientID,\n          responseType: 'token',\n          scope: args.scopes\n        })\n      ],\n\n      handlers: [\n        new Popup({\n          default: true\n        })\n      ]\n    });\n\n    this._refresher = new Iframe({\n      authorization: args.authorization,\n      redirectURI: refreshUrl || args.redirectURI,\n      clientID: args.clientID,\n      scopes: args.scopes\n    });\n\n    // Read the expires_in, setup timer\n    this._carto = this._client.provider('carto') as CartoProvider;\n\n    if (!this._carto.expired) {\n      this._scheduleRefresh();\n    }\n\n    if (args.scopes) {\n      this._checkScopes(args.scopes);\n    }\n  }\n\n  public login() {\n    return new Promise((resolve, reject) => {\n      const cb = (error?: any, token?: SalteAuth.EventWrapper) => {\n\n        if (error) {\n          const parsedError = {\n            error: error.code,\n            message: decodeURIComponent(error.message.replace(/\\+/g, '%20'))\n          };\n\n          reject(parsedError);\n          this._emitter.emit('error', parsedError);\n          return;\n        }\n\n        resolve(token);\n        this._emitter.emit('tokenUpdated', token);\n        this._carto.off('login', cb);\n\n        this._scheduleRefresh();\n      };\n\n      this._client.on('login', cb);\n      this._client.login('carto').catch((err) => {\n        reject(err);\n      });\n    });\n  }\n\n  public get client() {\n    return this._client;\n  }\n\n  public get expired() {\n    return this._carto.accessToken && this._carto.accessToken.expired;\n  }\n\n  public get credentials() {\n    if (!this._carto.accessToken) {\n      return null;\n    }\n\n    return new Credentials(this._carto.userInfo, this._carto.accessToken.raw);\n  }\n\n  public get token() {\n    if (this._carto.accessToken == null) {\n      return null;\n    }\n\n    return this._carto.accessToken.raw;\n  }\n\n  public get userInfo() {\n    if (this.token === null) {\n      return null;\n    }\n\n    return new UserInfo(this.token, this._carto.userInfo);\n  }\n\n  public clear() {\n    this._carto.reset();\n  }\n\n  public on(type: string, handler: mitt.Handler) {\n    this._emitter.on(type, handler);\n  }\n\n  private _scheduleRefresh() {\n    clearTimeout(this._refreshTimeout);\n    this._refreshTimeout = window.setTimeout(() => {\n      this._refresh();\n    }, this._carto.expiresIn - Date.now() - THRESHOLD);\n  }\n\n  private _refresh() {\n    if (this._carto.expired) {\n      return;\n    }\n\n    const time = Date.now();\n    this._carto.set('state', `${REFRESH_STATE_PREFIX}-${time}`);\n    this._refresher.refresh(`${REFRESH_STATE_PREFIX}-${time}`).then((data) => {\n      if (data.error) {\n        this._emitter.emit('error', {\n          error: data.error,\n          message: data.error_description.replace(/\\+/g, ' ')\n        });\n        return;\n      }\n\n      this._carto.validate(data);\n\n      this._emitter.emit('tokenUpdated', data.access_token);\n    }).catch((error) => {\n      this._emitter.emit('error', error);\n    });\n  }\n\n  private _checkScopes(scopes: string) {\n    const warnScopes = new Set<string>();\n    const scopesList = scopes.split(' ');\n\n    if (scopes) {\n      unknownScopes(scopesList || []).forEach((scope) => warnScopes.add(scope));\n    }\n\n    warnScopes.forEach((scope) => {\n      // tslint:disable-next-line: no-console\n      console.warn(`Unknown scope ${scope}`);\n    });\n  }\n}\n\nexport default OAuth;\n","//      \n// An event handler can take an optional event argument\n// and should not return a value\n                                          \n                                                               \n\n// An array of all currently registered event handlers for a type\n                                            \n                                                            \n// A map of event types and their corresponding event handlers.\n                        \n                                 \n                                   \n  \n\n/** Mitt: Tiny (~200b) functional event emitter / pubsub.\n *  @name mitt\n *  @returns {Mitt}\n */\nfunction mitt(all                 ) {\n\tall = all || Object.create(null);\n\n\treturn {\n\t\t/**\n\t\t * Register an event handler for the given type.\n\t\t *\n\t\t * @param  {String} type\tType of event to listen for, or `\"*\"` for all events\n\t\t * @param  {Function} handler Function to call in response to given event\n\t\t * @memberOf mitt\n\t\t */\n\t\ton: function on(type        , handler              ) {\n\t\t\t(all[type] || (all[type] = [])).push(handler);\n\t\t},\n\n\t\t/**\n\t\t * Remove an event handler for the given type.\n\t\t *\n\t\t * @param  {String} type\tType of event to unregister `handler` from, or `\"*\"`\n\t\t * @param  {Function} handler Handler function to remove\n\t\t * @memberOf mitt\n\t\t */\n\t\toff: function off(type        , handler              ) {\n\t\t\tif (all[type]) {\n\t\t\t\tall[type].splice(all[type].indexOf(handler) >>> 0, 1);\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Invoke all handlers for the given type.\n\t\t * If present, `\"*\"` handlers are invoked after type-matched handlers.\n\t\t *\n\t\t * @param {String} type  The event type to invoke\n\t\t * @param {Any} [evt]  Any value (object is recommended and powerful), passed to each handler\n\t\t * @memberOf mitt\n\t\t */\n\t\temit: function emit(type        , evt     ) {\n\t\t\t(all[type] || []).slice().map(function (handler) { handler(evt); });\n\t\t\t(all['*'] || []).slice().map(function (handler) { handler(type, evt); });\n\t\t}\n\t};\n}\n\nexport default mitt;\n//# sourceMappingURL=mitt.es.js.map\n"],"names":["e","[object Object]","r","t","Error","this","_username","_apiKey","_serverUrlTemplate","DEFAULT_SERVER_URL_TEMPLATE","DEFAULT_PUBLIC_API_KEY","username","apiKey","serverUrlTemplate","serverURL","replace","endsWith","n","i","s","o","a","c","value","done","Promise","resolve","then","arguments","apply","Object","defineProperty","enumerable","configurable","writable","message","code","super","hasSetup","interceptors","real","window","fetch","Request","length","call","setup","push","forEach","l","addEventListener","passive","setTimeout","document","createEvent","initEvent","bubbles","cancelable","detail","DOMException","h","realOpen","XMLHttpRequest","prototype","open","realSend","send","Array","$url","all","catch","dispatchEvent","create","d","freeze","Fetch","XHR","g","isArray","u","Symbol","iterator","next","return","p","TypeError","f","v","m","y","w","origin","concat","location","protocol","host","implementation","createHTMLDocument","createElement","head","appendChild","href","x","find","RegExp","match","indexOf","search","hash","split","k","isObject","defaults","url","redirectUrl","visible","setAttribute","assign","style","border","bottom","height","left","position","right","top","width","zIndex","opacity","transition","display","src","body","setInterval","contentWindow","parse","parentElement","removeChild","clearInterval","isCrossDomainError","clearTimeout","b","raw","expiration","includes","Number","type","expired","Date","now","_","user","exp","JSON","atob","T","name","level","toLevel","log","enabled","console","levels","trace","info","warn","error","$","Interceptors","AccessToken","IDToken","Common","Events","URL","Logger","E","config","filter","join","storage","getItem","key","clear","setItem","removeItem","localStorage","sessionStorage","U","Map","listeners","has","set","get","splice","A","q","self","crypto","msCrypto","O","getRandomValues","Uint8Array","S","validation","logger","$name","encodeURIComponent","logout","I","sync","required","responseType","accessToken","$login","headers","setRequestHeader","error_description","error_uri","access_token","state","expires_in","token_type","$validate","emit","login","client_id","clientID","response_type","redirect_uri","scope","R","renewal","buffer","idToken","iframe","prompt","validate","id_token","nonce","OAuth2","OpenID","D","navigate","history","pushState","title","j","providers","connected","on","provider","handlers","action","reset","add","endpoints","secure","route","handler","routes","auto","mixin","auth","requestUpdate","default","innerHeight","screenTop","innerWidth","screenLeft","focus","closed","close","SCOPES","CartoProvider","OAuth2Provider","userInfo","_userInfo","options","decodeURIComponent","user_info_url","expiresIn","undefined","unknownScopes","scopes","some","exec","knownScope","Iframe","args","_params","params","redirectURI","encodeURI","map","param","buildParams","Utils","UserInfo","_url","response","json","refreshUrl","authorization","_emitter","off","evt","slice","_client","SalteAuth","Popup","_refresher","_carto","_scheduleRefresh","_checkScopes","reject","cb","token","parsedError","err","client","credentials","Credentials","_refreshTimeout","_refresh","time","refresh","data","warnScopes","Set","scopesList"],"mappings":"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"}