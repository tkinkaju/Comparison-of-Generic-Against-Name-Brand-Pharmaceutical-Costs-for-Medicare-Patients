{"version":3,"file":"toolkit.umd.js","sources":["../../core/dist/core.esm.js","../../../node_modules/@salte-auth/salte-auth/dist/salte-auth.min.mjs","../../../node_modules/@salte-auth/popup/dist/popup.min.mjs","../../auth/dist/auth.esm.js","../../../node_modules/mitt/dist/mitt.es.js","../../sql/dist/sql.esm.js","../../custom-storage/dist/custom-storage.esm.js","../src/App.ts","../src/OAuthApp.ts"],"sourcesContent":["class e{constructor(e,r,t=\"https://{user}.carto.com\"){if(!e)throw new Error(\"Username is required\");if(!r)throw new Error(\"Api key is required\");this._username=e,this._apiKey=r,this._serverUrlTemplate=t}static get DEFAULT_SERVER_URL_TEMPLATE(){return\"https://{user}.carto.com\"}static get DEFAULT_PUBLIC_API_KEY(){return\"default_public\"}get username(){return this._username}set username(e){this._username=e}get apiKey(){return this._apiKey}set apiKey(e){this._apiKey=e}get serverUrlTemplate(){return this._serverUrlTemplate}set serverUrlTemplate(e){this._serverUrlTemplate=e}get serverURL(){let e=this._serverUrlTemplate.replace(\"{user}\",this._username);return e.endsWith(\"/\")||(e+=\"/\"),e}}const r=new e(\"username\",\"default_public\");function t(e){r.username=e.username,r.apiKey=e.apiKey||\"default_public\",r.serverUrlTemplate=e.serverUrlTemplate||\"https://{user}.carto.com\"}class s{constructor(e,r,t=\"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(/[xy]/g,e=>{const r=16*Math.random()|0;return(\"x\"===e?r:3&r|8).toString(16)})){this.source=e,this.name=r,this.groupId=t}getHeaders(){return[[\"Carto-Event-Source\",this.source],[\"Carto-Event\",this.name],[\"Carto-Event-Group-Id\",this.groupId]]}}export{e as Credentials,s as MetricsEvent,r as defaultCredentials,t as setDefaultCredentials};\n//# sourceMappingURL=core.esm.js.map\n","/**\n * @salte-auth/salte-auth JavaScript Library v3.0.0-rc.8\n *\n * @license MIT (https://github.com/salte-auth/salte-auth/blob/master/LICENSE)\n *\n * Made with â™¥ by Nick Woodward <nick@salte.io>, Dave Woodward <dave@salte.io>\n */\nfunction e(e,t,n,r,i,s,o){try{var a=e[s](o),c=a.value}catch(e){return void n(e)}a.done?t(c):Promise.resolve(c).then(r,i)}var t=function(t){return function(){var n=this,r=arguments;return new Promise(function(i,s){var o=t.apply(n,r);function a(t){e(o,i,s,a,c,\"next\",t)}function c(t){e(o,i,s,a,c,\"throw\",t)}a(void 0)})}};var n=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e};class r extends Error{constructor(e){let t=e.message,r=e.code;super(t),n(this,\"code\",void 0),this.code=r}}class i{constructor(e){this.config=e||{}}required(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const i=t.filter(e=>void 0===this.config[e]);if(i.length>0)throw new r({code:\"missing_required_properties\",message:\"Missing the following required fields. (\".concat(i.join(\", \"),\")\")})}}class s{static setup(e){this.hasSetup&&!e||(this.hasSetup=!0,this.interceptors=[],this.real||(this.real=window.fetch),window.fetch&&(window.fetch=function(){var e=t(function*(e,t){const n=e instanceof Request?e:new Request(e,t);for(let e=0;e<s.interceptors.length;e++){const t=s.interceptors[e];yield Promise.resolve(t(n))}return s.real.call(this,n)});return function(t,n){return e.apply(this,arguments)}}()))}static add(e){this.setup(),this.interceptors.push(e)}}n(s,\"real\",void 0),n(s,\"hasSetup\",!1),n(s,\"interceptors\",void 0);let o=!1;const a=[];function c(){a.forEach(e=>e())}class l{static route(e){o||(window.addEventListener(\"popstate\",c,{passive:!0}),window.addEventListener(\"click\",c,{passive:!0}),setTimeout(c),o=!0),a.push(e)}static create(e,t){const n=document.createEvent(\"Event\");return n.initEvent(e,t.bubbles||!1,t.cancelable||!0),n.detail=t.detail,n}static isCrossDomainError(e){return e instanceof DOMException||\"Permission denied\"===e.message}}class h{static setup(e){if(this.hasSetup&&!e)return;this.hasSetup=!0,this.interceptors=[],this.realOpen||(this.realOpen=XMLHttpRequest.prototype.open),this.realSend||(this.realSend=XMLHttpRequest.prototype.send);const t=XMLHttpRequest.prototype;t.open=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=t[1];return this.$url=r,h.realOpen.apply(this,t)},t.send=function(e){const t=[];for(let n=0;n<h.interceptors.length;n++){const r=h.interceptors[n];t.push(r(this,e))}Promise.all(t).then(()=>{h.realSend.call(this,e)}).catch(e=>{this.dispatchEvent(l.create(\"error\",{detail:e}))})}}static add(e){this.setup(),this.interceptors.push(e)}}n(h,\"realOpen\",void 0),n(h,\"realSend\",void 0),n(h,\"hasSetup\",!1),n(h,\"interceptors\",void 0);var d=Object.freeze({Fetch:s,XHR:h});var u=function(e){if(Array.isArray(e))return e};var p=function(e,t){var n=[],r=!0,i=!1,s=void 0;try{for(var o,a=e[Symbol.iterator]();!(r=(o=a.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,s=e}finally{try{r||null==a.return||a.return()}finally{if(i)throw s}}return n};var f=function(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance\")};var g=function(e,t){return u(e)||p(e,t)||f()};let v,m,y;class w{static get origin(){return\"\".concat(location.protocol,\"//\").concat(location.host)}static resolve(e){return v||(v=document.implementation.createHTMLDocument(\"url\"),m=v.createElement(\"base\"),y=v.createElement(\"a\"),v.head.appendChild(m)),m.href=window.location.protocol+\"//\"+window.location.host,y.href=e.replace(/ /g,\"%20\"),y.href.replace(/\\/$/,\"\")}static match(e,t){if(t instanceof Array){const n=this.resolve(e);return!!x.find(t,e=>e instanceof RegExp?!!n.match(e):0===n.indexOf(this.resolve(e)))}return!0===t}static parse(e){let t=e.search,n=e.hash,r=[];t&&(r=r.concat(t.replace(\"?\",\"\").split(\"&\"))),n&&(r=r.concat(n.replace(\"#\",\"\").split(\"&\")));const i={};return x.forEach(r,e=>{const t=e.split(\"=\"),n=g(t,2),r=n[0],s=n[1];i[r]=s}),i}}const k={};class x{static includes(e,t){return-1!==e.indexOf(t)}static forEach(e,t){if(Array.isArray(e))for(let n=0;n<e.length;n++)t(e[n],n);else for(let n in e)t(e[n],n)}static find(e,t){if(Array.isArray(e))for(let n=0;n<e.length;n++){const r=e[n];if(t(r,n))return r}else for(let n in e){const r=e[n];if(t(r,n))return r}return null}static assign(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return this.forEach(n,t=>{for(const n in t)e[n]=t[n]}),e}static defaults(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return this.forEach(n,t=>{for(const n in t)this.isObject(e[n])&&this.isObject(t[n])?e[n]=this.defaults(e[n],t[n]):void 0===e[n]&&(e[n]=t[n])}),e}static isObject(e){return\"object\"==typeof e&&!Array.isArray(e)}static iframe(e){var n=this;return t(function*(){let t=e.url,r=e.redirectUrl,i=e.visible;const s=document.createElement(\"iframe\");return s.setAttribute(\"owner\",\"@salte-auth/salte-auth\"),i?(n.assign(s.style,{border:\"none\",bottom:0,height:\"100%\",left:0,position:\"fixed\",right:0,top:0,width:\"100%\",zIndex:9999,opacity:0,transition:\"0.5s opacity\"}),setTimeout(()=>s.style.opacity=\"1\")):s.style.display=\"none\",s.src=t,document.body.appendChild(s),new Promise((e,t)=>{const n=setInterval(()=>{try{const i=s.contentWindow.location;if(0!==i.href.indexOf(r))return;const o=w.parse(i);s.parentElement&&s.parentElement.removeChild(s),clearInterval(n),e(o)}catch(e){if(l.isCrossDomainError(e))return;s.parentElement&&s.parentElement.removeChild(s),clearInterval(n),t(e)}})})})()}static debounce(e,t,n){clearTimeout(k[e]),k[e]=window.setTimeout(()=>{delete k[e],t()},n)}}class b{constructor(e,t,r){n(this,\"raw\",void 0),n(this,\"expiration\",void 0),n(this,\"type\",void 0),this.raw=e,this.expiration=x.includes([void 0,null],t)?null:Number(t),this.type=r}get expired(){return!this.raw||this.expiration<=Date.now()}}class _{constructor(e){n(this,\"raw\",void 0),n(this,\"user\",void 0),this.raw=e,this.user=_.parse(this.raw)}get expired(){return!this.user||1e3*this.user.exp<=Date.now()}static parse(e){try{const t=e.split(\".\");if(3!==t.length)throw new r({code:\"invalid_id_token\",message:\"ID Token didn't match the desired format. ({header}.{payload}.{validation})\"});return JSON.parse(atob(t[1].replace(/-/g,\"+\").replace(/_/g,\"/\")))}catch(e){return null}}}class T{constructor(e,t){n(this,\"name\",void 0),n(this,\"level\",void 0),this.name=e,this.level=\"string\"==typeof t?this.toLevel(t):t}trace(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.log(\"trace\",e,...n)}info(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.log(\"info\",e,...n)}warn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.log(\"warn\",e,...n)}error(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.log(\"error\",e,...n)}log(e,t){if(this.enabled(e)){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];console.log(\"\".concat(e,\": \").concat(t),...r)}}enabled(e){return!1!==this.level&&(!0===this.level||this.level<=this.toLevel(e))}toLevel(e){return x.find(T.levels,(t,n)=>n===e)}}n(T,\"levels\",{trace:0,info:1,warn:2,error:3});var $=Object.freeze({Interceptors:d,AccessToken:b,IDToken:_,Common:x,Events:l,URL:w,Logger:T});class E extends i{constructor(e){super(e),this.config=x.defaults(this.config,{storage:\"session\"})}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.storage.getItem(this.key(e))||t}set(e,t){x.includes([void 0,null],t)?this.clear(e):this.storage.setItem(this.key(e),t)}clear(e){this.storage.removeItem(this.key(e))}reset(){const e=this.key(\"\");for(const t in localStorage)0===t.indexOf(e)&&localStorage.removeItem(t);for(const t in sessionStorage)0===t.indexOf(e)&&sessionStorage.removeItem(t)}key(e){return\"salte.auth.\".concat(e)}get storage(){const e=this.config&&this.config.storage;switch(e){case\"local\":return localStorage;case\"session\":return sessionStorage}throw new r({code:\"invalid_storage\",message:\"Storage doesn't exist for the given value. (\".concat(e,\")\")})}}class U extends E{constructor(){super(...arguments),n(this,\"listeners\",new Map)}on(e,t){this.listeners.has(e)||this.listeners.set(e,[]),this.listeners.get(e).push(t)}off(e,t){if(!this.listeners.has(e))return;const n=this.listeners.get(e);if(!n.length)return;const r=n.indexOf(t);-1!==r&&n.splice(r,1)}emit(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(!this.listeners.has(e))return;const i=this.listeners.get(e);x.forEach(i,e=>e(...n))}}class A extends U{constructor(e){super(e),this.config=x.defaults(this.config,{redirectUrl:location.origin,level:\"warn\"})}redirectUrl(e){return\"string\"==typeof this.config.redirectUrl?this.config.redirectUrl:this.config.redirectUrl[e]}}var q=self.crypto||self.msCrypto,O=function(e){e=e||21;for(var t=\"\",n=q.getRandomValues(new Uint8Array(e));0<e--;)t+=\"Uint8ArdomValuesObj012345679BCDEFGHIJKLMNPQRSTWXYZ_cfghkpqvwxyz-\"[63&n[e]];return t};class S extends A{constructor(e){super(e),n(this,\"logger\",void 0),this.config=x.defaults(this.config,{validation:!0,level:\"warn\"}),this.logger=new T(\"@salte-auth/salte-auth:providers/\".concat(this.$name),this.config.level)}validation(e){return\"object\"==typeof this.config.validation?!0===this.config.validation[e]:!0===this.config.validation}get $name(){return this.config.name||this.name}key(e){return\"salte.auth.provider.\".concat(this.$name,\".\").concat(e)}url(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;return x.forEach(t,(e,t)=>{x.includes([void 0,null,\"\"],e)||(n+=\"\".concat(-1===n.indexOf(\"?\")?\"?\":\"&\").concat(t,\"=\").concat(encodeURIComponent(e)))}),n}get logout(){throw new r({code:\"logout_not_supported\",message:\"This provider doesn't support logout.\"})}}class I extends S{constructor(e){super(e),n(this,\"accessToken\",void 0),this.sync()}connected(){this.required(\"clientID\",\"responseType\")}secure(e){var n=this;return t(function*(){if(\"token\"===n.config.responseType){if(n.accessToken.expired)return n.$login();if(e)if(e instanceof Request)e.headers.set(\"Authorization\",\"Bearer \".concat(n.accessToken.raw));else{if(!(e instanceof XMLHttpRequest))throw new r({code:\"unknown_request\",message:\"Unknown request type. (\".concat(e,\")\")});e.setRequestHeader(\"Authorization\",\"Bearer \".concat(n.accessToken.raw))}}return!0})()}$validate(e){try{if(!e)throw new r({code:\"empty_response\",message:\"The response provided was empty, this is most likely due to the configured handler not providing it.\"});if(e.error)throw new r({code:e.error,message:\"\".concat(e.error_description?e.error_description:e.error).concat(e.error_uri?\" (\".concat(e.error_uri,\")\"):\"\")});const t=e.code,n=e.access_token,i=e.state,s=e.expires_in,o=e.token_type;if(this.validation(\"state\")&&this.get(\"state\")!==i)throw new r({code:\"invalid_state\",message:\"State provided by identity provider did not match local state.\"});const a=this.get(\"response-type\",\"\").split(\" \");if(x.includes(a,\"code\")){if(!t)throw new r({code:\"invalid_code\",message:\"Expected a code to be returned by the Provider.\"})}else if(x.includes(a,\"token\")&&!n)throw new r({code:\"invalid_access_token\",message:\"Expected an access token to be returned by the Provider.\"});t?(this.set(\"code.raw\",t),this.clear(\"access-token.raw\"),this.clear(\"access-token.expiration\"),this.clear(\"access-token.type\")):n&&(this.set(\"access-token.raw\",n),this.set(\"access-token.expiration\",Date.now()+1e3*Number(s)),this.set(\"access-token.type\",o),this.clear(\"code.raw\"))}finally{this.clear(\"state\")}}validate(e){try{this.$validate(e)}catch(e){throw this.emit(\"login\",e),e}finally{this.sync()}this.emit(\"login\",null,this.code||this.accessToken)}get code(){return this.get(\"code.raw\")}$login(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=\"\".concat(this.$name,\"-state-\").concat(O()),n=e.responseType||this.config.responseType;return this.set(\"state\",t),this.set(\"response-type\",n),this.url(this.login,{client_id:this.config.clientID,response_type:n,redirect_uri:this.config.redirectUrl,scope:this.config.scope,state:t})}sync(){this.accessToken=new b(this.get(\"access-token.raw\"),this.get(\"access-token.expiration\"),this.get(\"access-token.type\"))}}class R extends I{constructor(e){super(e),n(this,\"idToken\",void 0),this.config.renewal=\"object\"==typeof this.config.renewal?this.config.renewal:{type:this.config.renewal},this.config=x.defaults(this.config,{responseType:\"id_token\",scope:\"openid\",renewal:{type:\"auto\",buffer:6e4}}),this.sync()}secure(e){var n=this;return t(function*(){if(x.includes([\"id_token\",\"id_token token\",\"token\"],n.config.responseType)){if(n.idToken.expired)return n.$login();if(n.accessToken.expired){const e=yield x.iframe({redirectUrl:n.redirectUrl(\"login\"),url:n.$login({prompt:\"none\",responseType:\"token\"})});n.validate(e)}if(e)if(e instanceof Request)e.headers.set(\"Authorization\",\"Bearer \".concat(n.accessToken.raw));else{if(!(e instanceof XMLHttpRequest))throw new r({code:\"unknown_request\",message:\"Unknown request type. (\".concat(e,\")\")});e.setRequestHeader(\"Authorization\",\"Bearer \".concat(n.accessToken.raw))}}return!0})()}$validate(e){try{super.$validate(e);const t=this.get(\"response-type\",\"\").split(\" \");if(x.includes(t,\"id_token\")){const t=e.id_token,n=_.parse(t);if(!n)throw new r({code:\"invalid_id_token\",message:\"Failed to parse user information due to invalid id token.\"});if(this.validation(\"nonce\")&&this.get(\"nonce\")!==n.nonce)throw new r({code:\"invalid_nonce\",message:\"Nonce provided by identity provider did not match the local nonce.\"});this.set(\"id-token.raw\",t)}else x.includes(t,\"code\")&&this.clear(\"id-token.raw\")}finally{this.clear(\"nonce\")}}validate(e){try{this.$validate(e)}catch(e){throw this.emit(\"login\",e),e}finally{this.sync()}const t=this.get(\"response-type\",\"\"),n=t.split(\" \");if(x.includes(n,\"id_token\"))this.emit(\"login\",null,this.idToken);else if(x.includes(n,\"token\"))this.emit(\"login\",null,this.accessToken);else{if(!x.includes(n,\"code\"))throw new r({code:\"invalid_response_type\",message:\"Unknown Response Type (\".concat(t,\")\")});this.emit(\"login\",null,this.code)}}$login(e){const t=\"\".concat(this.$name,\"-nonce-\").concat(O());return this.set(\"nonce\",t),this.url(super.$login(e),{prompt:e&&e.prompt,nonce:t})}sync(){super.sync(),this.idToken=new _(this.get(\"id-token.raw\"))}}var L=Object.freeze({OAuth2:class extends I{constructor(e){super(e),this.required(\"login\")}get name(){return\"generic.oauth2\"}get login(){return this.config.login.apply(this)}},OpenID:class extends R{constructor(e){super(e),this.required(\"login\",\"logout\")}get name(){return\"generic.openid\"}get login(){return this.config.login.apply(this)}get logout(){return this.config.logout.apply(this)}}});class D extends E{constructor(e){super(e),n(this,\"logger\",void 0),this.config=x.defaults(this.config,{navigate:\"reload\",level:\"warn\"}),this.logger=new T(\"@salte-auth/salte-auth:handlers/\".concat(this.$name),this.config.level)}get $name(){return this.config.name||this.name}key(e){return\"salte.auth.handler.\".concat(this.$name,\".\").concat(e)}navigate(e){\"history\"===this.config.navigate&&0===e.indexOf(w.origin)&&history.pushState(\"\",document.title,e),location.href=e}}class j extends A{constructor(e){var i;super(e),i=this,n(this,\"logger\",void 0),n(this,\"mixin\",void 0),this.required(\"providers\",\"handlers\"),this.config=x.defaults(this.config,{validation:!0,level:\"warn\"}),this.logger=new T(\"@salte-auth/salte-auth:core\",this.config.level),x.forEach(this.config.providers,e=>{e.connected&&e.connected(),e.on(\"login\",(e,t)=>{this.emit(\"login\",e,t)}),e.on(\"logout\",e=>{this.emit(\"logout\",e)})});const o=this.get(\"action\"),a=o?this.provider(this.get(\"provider\")):null,c=o?this.get(\"handler\"):null;if(!x.includes([void 0,null,\"login\",\"logout\"],o))throw new r({code:\"unknown_action\",message:\"Unable to finish redirect due to an unknown action! (\".concat(o,\")\")});var d;x.forEach(this.config.handlers,e=>{if(!e.connected)return;const t=e.$name===c;setTimeout(()=>{const n=e.connected({action:t?o:null});t&&(\"login\"===o?a.validate(n):(a.reset(),a.sync(),a.emit(\"logout\")))})}),this.clear(\"action\"),this.clear(\"provider\"),this.clear(\"handler\"),s.add(function(){var e=t(function*(e){for(let t=0;t<i.config.providers.length;t++){const n=i.config.providers[t];w.match(e.url,n.config.endpoints)&&n.secure&&(yield n.secure(e))}});return function(t){return e.apply(this,arguments)}}()),h.add(function(){var e=t(function*(e){for(let t=0;t<i.config.providers.length;t++){const n=i.config.providers[t];w.match(e.$url,n.config.endpoints)&&n.secure&&(yield n.secure(e))}});return function(t){return e.apply(this,arguments)}}()),l.route(t(function*(){try{const e=i.handler();for(let t=0;t<i.config.providers.length;t++){const n=i.config.providers[t];if(w.match(location.href,n.config.routes)){let t=null;for(;!0!==t;)if(\"string\"==typeof(t=yield n.secure())){if(!e.auto)throw new r({code:\"auto_unsupported\",message:\"The default handler doesn't support automatic authentication! (\".concat(e.$name,\")\")});i.set(\"action\",\"login\"),i.set(\"provider\",n.$name),i.set(\"handler\",e.$name);const s=yield e.open({redirectUrl:n.redirectUrl(\"login\"),url:t});n.validate(s),i.clear(\"action\"),i.clear(\"provider\"),i.clear(\"handler\")}}}}catch(e){throw i.clear(\"action\"),i.clear(\"provider\"),i.clear(\"handler\"),e}})),this.mixin=(d=this,function(e){return class extends e{constructor(){super(...arguments),n(this,\"auth\",void 0),this.auth=d,this.auth.on(\"login\",()=>{this.requestUpdate&&this.requestUpdate(\"auth\")}),this.auth.on(\"logout\",()=>{this.requestUpdate&&this.requestUpdate(\"auth\")})}}})}login(e){var n=this;return t(function*(){e=\"string\"==typeof e?{provider:e}:e;try{const t=n.provider(e.provider),r=n.handler(e.handler);n.set(\"action\",\"login\"),n.set(\"provider\",t.$name),n.set(\"handler\",r.$name);const i=yield r.open({redirectUrl:t.redirectUrl(\"login\"),url:t.$login()});t.validate(i)}finally{n.clear(\"action\"),n.clear(\"provider\"),n.clear(\"handler\")}})()}logout(e){var n=this;return t(function*(){e=\"string\"==typeof e?{provider:e}:e;const t=n.provider(e.provider);try{const r=n.handler(e.handler);n.set(\"action\",\"logout\"),n.set(\"provider\",t.$name),n.set(\"handler\",r.$name),yield r.open({redirectUrl:t.redirectUrl(\"logout\"),url:t.logout}),t.reset(),t.emit(\"logout\")}catch(e){throw t.emit(\"logout\",e),e}finally{n.clear(\"action\"),n.clear(\"provider\"),n.clear(\"handler\")}})()}provider(e){const t=x.find(this.config.providers,t=>t.$name===e);if(!t)throw new r({code:\"invalid_provider\",message:\"Unable to locate provider with the given name. (\".concat(e,\")\")});return t}handler(e){const t=void 0===e?x.find(this.config.handlers,e=>!!e.config.default):x.find(this.config.handlers,t=>t.$name===e);if(!t)throw new r({code:\"invalid_handler\",message:\"Unable to locate handler with the given name. (\".concat(e,\")\")});return t}}export{L as Generic,D as Handler,I as OAuth2Provider,R as OpenIDProvider,j as SalteAuth,r as SalteAuthError,$ as Utils};\n//# sourceMappingURL=salte-auth.min.mjs.map\n","/**\n * @salte-auth/popup JavaScript Library v1.0.0-rc.1\n *\n * @license MIT (https://github.com/salte-auth/popup/blob/master/LICENSE)\n *\n * Made with â™¥ by Nick Woodward <nick@salte.io>, Dave Woodward <dave@salte.io>\n */\nimport{Handler as t,Utils as n,SalteAuthError as e}from\"@salte-auth/salte-auth\";function o(t,n,e,o,i,r,c){try{var a=t[r](c),s=a.value}catch(t){return void e(t)}a.done?n(s):Promise.resolve(s).then(o,i)}var i=function(t){return function(){var n=this,e=arguments;return new Promise(function(i,r){var c=t.apply(n,e);function a(t){o(c,i,r,a,s,\"next\",t)}function s(t){o(c,i,r,a,s,\"throw\",t)}a(void 0)})}};class r extends t{constructor(t){super(t),this.config=n.Common.defaults(this.config,{window:{name:\"@salte-auth/tab\",height:600,width:600}})}get name(){return\"popup\"}get auto(){return!1}open(t){var o=this;return i(function*(){const i=window.innerHeight/2-o.config.window.height/2+window.screenTop,r=window.innerWidth/2-o.config.window.width/2+window.screenLeft,c=window.open(t.url,o.config.window.name,\"height=\".concat(o.config.window.height,\", width=\").concat(o.config.window.width,\", status=yes, toolbar=no, menubar=no, location=no, top=\").concat(i,\", left=\").concat(r));if(!c)throw new e({message:\"We were unable to open the popup window, its likely that the request was blocked.\",code:\"popup_blocked\"});return c.focus(),new Promise(e=>{const o=setInterval(()=>{try{if(!c.closed){if(0!==c.location.href.indexOf(t.redirectUrl))return;const o=n.URL.parse(c.location);c.close(),setTimeout(()=>e(o))}clearInterval(o)}catch(t){}},100)})})()}}export{r as Popup};\n//# sourceMappingURL=popup.min.mjs.map\n","import{Credentials as e}from\"@carto/toolkit-core\";import{Popup as t}from\"@salte-auth/popup\";import{OAuth2Provider as r,Utils as s,SalteAuth as o}from\"@salte-auth/salte-auth\";import i from\"mitt\";const n=[/offline/,/dataservices:geocoding/,/dataservices:isolines/,/dataservices:routing/,/dataservices:observatory/,/datasets:r:.+/,/datasets:w:.+/,/datasets:rw:.+/,/schemas:c/,/datasets:metadata/];class c extends r{constructor(){super(...arguments),this._userInfo=this.get(\"user_info\")}get name(){return\"carto\"}get login(){return`${this.config.url}/authorize`}get logout(){return`${this.config.url}/logout`}get userInfo(){return this._userInfo}$validate(e){super.$validate(e),this._userInfo=decodeURIComponent(e.user_info_url),this.set(\"user_info\",this._userInfo)}sync(){super.sync(),this._userInfo=this.get(\"user_info\")}get expired(){return this.accessToken&&this.accessToken.expired}get expiresIn(){return void 0===this.accessToken?-1:this.accessToken.expiration}}function a(e){return e.filter(e=>!function(e){return n.some(t=>null!==t.exec(e))}(e))}class h{constructor(e){this._params=e}refresh(e){const t=[[\"client_id\",this._params.clientID],[\"response_type\",\"token\"],[\"prompt\",\"none\"],[\"scopes\",this._params.scopes],[\"state\",e]];this._params.redirectURI&&t.push([\"redirect_uri\",this._params.redirectURI]);const r=`https://carto.com/oauth2/authorize?${function(e){return encodeURI(e.map(e=>`${e[0]}=${e[1]}`).join(\"&\"))}(t)}`;return s.Common.iframe({url:r,redirectUrl:this._params.redirectURI||window.location.href,visible:!1})}}class u{constructor(e,t){this._apiKey=e,this._url=t}get info(){return fetch(`${this._url}?api_key=${this._apiKey}`).then(e=>e.json())}}class l{constructor(e,r){if(this._refreshTimeout=-1,null==e)throw new Error(\"Missing OAuth parameters\");e.authorization=e.authorization||\"https://carto.com/oauth2\",e.scopes=e.scopes||\"\",this._emitter=i(),this._client=new o({providers:[new c({storage:\"local\",level:\"trace\",url:e.authorization,redirectUrl:e.redirectURI,clientID:e.clientID,responseType:\"token\",scope:e.scopes})],handlers:[new t({default:!0})]}),this._refresher=new h({authorization:e.authorization,redirectURI:r||e.redirectURI,clientID:e.clientID,scopes:e.scopes}),this._carto=this._client.provider(\"carto\"),this._carto.expired||this._scheduleRefresh(),e.scopes&&this._checkScopes(e.scopes)}login(){return new Promise((e,t)=>{const r=(s,o)=>{if(s){const e={error:s.code,message:decodeURIComponent(s.message.replace(/\\+/g,\"%20\"))};return t(e),void this._emitter.emit(\"error\",e)}e(o),this._emitter.emit(\"tokenUpdated\",o),this._carto.off(\"login\",r),this._scheduleRefresh()};this._client.on(\"login\",r),this._client.login(\"carto\").catch(e=>{t(e)})})}get client(){return this._client}get expired(){return this._carto.accessToken&&this._carto.accessToken.expired}get credentials(){return this._carto.accessToken?new e(this._carto.userInfo,this._carto.accessToken.raw):null}get token(){return null==this._carto.accessToken?null:this._carto.accessToken.raw}get userInfo(){return null===this.token?null:new u(this.token,this._carto.userInfo)}clear(){this._carto.reset()}on(e,t){this._emitter.on(e,t)}_scheduleRefresh(){clearTimeout(this._refreshTimeout),this._refreshTimeout=window.setTimeout(()=>{this._refresh()},this._carto.expiresIn-Date.now()-3e5)}_refresh(){if(this._carto.expired)return;const e=Date.now();this._carto.set(\"state\",`6574686572766f69642d74726169746f72-${e}`),this._refresher.refresh(`6574686572766f69642d74726169746f72-${e}`).then(e=>{e.error?this._emitter.emit(\"error\",{error:e.error,message:e.error_description.replace(/\\+/g,\" \")}):(this._carto.validate(e),this._emitter.emit(\"tokenUpdated\",e.access_token))}).catch(e=>{this._emitter.emit(\"error\",e)})}_checkScopes(e){const t=new Set,r=e.split(\" \");e&&a(r||[]).forEach(e=>t.add(e)),t.forEach(e=>{console.warn(`Unknown scope ${e}`)})}}export{l as OAuth};\n//# sourceMappingURL=auth.esm.js.map\n","//      \n// An event handler can take an optional event argument\n// and should not return a value\n                                          \n                                                               \n\n// An array of all currently registered event handlers for a type\n                                            \n                                                            \n// A map of event types and their corresponding event handlers.\n                        \n                                 \n                                   \n  \n\n/** Mitt: Tiny (~200b) functional event emitter / pubsub.\n *  @name mitt\n *  @returns {Mitt}\n */\nfunction mitt(all                 ) {\n\tall = all || Object.create(null);\n\n\treturn {\n\t\t/**\n\t\t * Register an event handler for the given type.\n\t\t *\n\t\t * @param  {String} type\tType of event to listen for, or `\"*\"` for all events\n\t\t * @param  {Function} handler Function to call in response to given event\n\t\t * @memberOf mitt\n\t\t */\n\t\ton: function on(type        , handler              ) {\n\t\t\t(all[type] || (all[type] = [])).push(handler);\n\t\t},\n\n\t\t/**\n\t\t * Remove an event handler for the given type.\n\t\t *\n\t\t * @param  {String} type\tType of event to unregister `handler` from, or `\"*\"`\n\t\t * @param  {Function} handler Handler function to remove\n\t\t * @memberOf mitt\n\t\t */\n\t\toff: function off(type        , handler              ) {\n\t\t\tif (all[type]) {\n\t\t\t\tall[type].splice(all[type].indexOf(handler) >>> 0, 1);\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Invoke all handlers for the given type.\n\t\t * If present, `\"*\"` handlers are invoked after type-matched handlers.\n\t\t *\n\t\t * @param {String} type  The event type to invoke\n\t\t * @param {Any} [evt]  Any value (object is recommended and powerful), passed to each handler\n\t\t * @memberOf mitt\n\t\t */\n\t\temit: function emit(type        , evt     ) {\n\t\t\t(all[type] || []).slice().map(function (handler) { handler(evt); });\n\t\t\t(all['*'] || []).slice().map(function (handler) { handler(type, evt); });\n\t\t}\n\t};\n}\n\nexport default mitt;\n//# sourceMappingURL=mitt.es.js.map\n","import{Credentials as e}from\"@carto/toolkit-core\";\n/*! *****************************************************************************\nCopyright (c) Microsoft Corporation. All rights reserved.\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\nthis file except in compliance with the License. You may obtain a copy of the\nLicense at http://www.apache.org/licenses/LICENSE-2.0\n\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\nMERCHANTABLITY OR NON-INFRINGEMENT.\n\nSee the Apache Version 2.0 License for specific language governing permissions\nand limitations under the License.\n***************************************************************************** */var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,r)};function r(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}function n(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{a(n.next(e))}catch(e){o(e)}}function u(e){try{a(n.throw(e))}catch(e){o(e)}}function a(e){e.done?i(e.value):new r((function(t){t(e.value)})).then(s,u)}a((n=n.apply(e,t||[])).next())}))}function i(e,t){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},\"function\"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(r)throw new TypeError(\"Generator is already executing.\");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}}var o={TOO_MANY_REQUESTS:429,SERVICE_UNAVAILABLE:503},s=Object.freeze({__proto__:null,QUERY_LIMIT:1024,DEFAULT_MAX_API_REQUESTS_RETRIES:0,HTTP_ERRORS:o}),u=function(){function e(e,t,r){var n=(void 0===r?{}:r).maxApiRequestsRetries;this._callsLeft=-1,this._retryAfter=-1,this._retryTimeoutId=-1,this._fetching=!1,this._scheduleDebounce=-1,this._maxApiRequestsRetries=0,this._credentials=e,this._endpointServerURL=t,this._queue=[],Number.isFinite(n)&&n>=0&&(this._maxApiRequestsRetries=n)}return Object.defineProperty(e.prototype,\"apiKey\",{get:function(){return this._credentials.apiKey},set:function(e){this._credentials.apiKey=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"endpointServerURL\",{get:function(){return this._endpointServerURL},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"callsLeft\",{get:function(){return this._callsLeft},set:function(e){this._callsLeft=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"maxApiRequestsRetries\",{set:function(e){this._maxApiRequestsRetries=e},enumerable:!0,configurable:!0}),e.prototype._scheduleRequest=function(e,t,r,n){var i=this;this._queue.push({resolve:e,reject:t,requestInfo:r,requestInit:n,retries_count:-1}),clearTimeout(this._scheduleDebounce),this._scheduleDebounce=window.setTimeout((function(){i._scheduler()}),0)},e.prototype.addHeadersTo=function(e,t){void 0===t&&(t=[]),void 0!==e&&(e.headers||(e.headers=new Headers),t.length>0&&t.forEach((function(t){e.headers.append(t[0],t[1])})))},e.prototype._scheduler=function(){var e=this;if(0!==this._queue.length&&-1===this._retryTimeoutId&&!this._fetching)if(-1===this._retryAfter){for(var t=-1!==this._callsLeft?Math.min(Math.max(1,this._callsLeft),this._queue.length):1,r=[],n=0;n<t;n++)this._fetching=!0,r.push(this._fetch(this._queue[n],n));Promise.all(r).then((function(t){e._queue=e._queue.filter((function(e,r){return-1===t.indexOf(r)})),e._fetching=!1,e._queue.length>0&&e._scheduler()}))}else this._retryTimeoutId=window.setTimeout((function(){e._retryTimeoutId=-1,e._retryAfter=-1,e._callsLeft+=1,e._scheduler()}),1e3*this._retryAfter)},e.prototype._fetch=function(e,t){var r=this,s=e.resolve,u=e.reject,c=e.requestInfo,p=e.requestInit,h=e.retries_count;return fetch(c,p).then((function(t){return n(r,void 0,void 0,(function(){var r,n,s;return i(this,(function(i){switch(i.label){case 0:return this._retryAfter=this._getRateLimitHeader(t.headers,\"Retry-After\",this._retryAfter),this._callsLeft=this._getRateLimitHeader(t.headers,\"Carto-Rate-Limit-Remaining\",this._callsLeft),[4,a(t)];case 1:if(r=i.sent(),n=t.status===o.TOO_MANY_REQUESTS&&(\"datasource\"===r.detail||\"rate-limit\"===r.detail),(t.status===o.SERVICE_UNAVAILABLE||n)&&(e.retries_count=-1!==h?h-1:this._maxApiRequestsRetries,s=.5*(this._maxApiRequestsRetries-e.retries_count)+.5,this._retryAfter=Math.max(this._retryAfter,s)),0===e.retries_count)throw new Error(\"Too many retries\");return t.status===o.TOO_MANY_REQUESTS||t.status===o.SERVICE_UNAVAILABLE?(this._scheduler(),[2,null]):[2,r]}}))}))})).then((function(e){var r,n;if(null!==e){if(e.error){var i=(null===(n=null===(r=e)||void 0===r?void 0:r.error)||void 0===n?void 0:n.length)?e.error[0]:\"Unknown error\";u(new Error(i))}else s(e);return t}})).catch((function(e){return u(e),t}))},e.prototype._getRateLimitHeader=function(e,t,r){var n=e.get(t);return null!==n?parseInt(n,10):r},Object.defineProperty(e.prototype,\"queued\",{get:function(){return this._queue.length},enumerable:!0,configurable:!0}),e}();function a(e){return n(this,void 0,void 0,(function(){var t;return i(this,(function(r){switch(r.label){case 0:return(e.headers.get(\"content-type\")||\"\").includes(\"application/json\")?[4,e.json()]:[3,2];case 1:return t=r.sent(),[3,4];case 2:return[4,e.text()];case 3:t=r.sent(),r.label=4;case 4:return[2,t]}}))}))}var c=function(e){function t(t,r){void 0===r&&(r={});var n=t.serverURL+\"api/v2/sql/copyfrom\";return e.call(this,t,n,r)||this}return r(t,e),t.prototype.copy=function(e,t,r,n){var i=this;void 0===n&&(n={});var o=\"COPY \"+t+\" (\"+r+\") FROM STDIN WITH (FORMAT csv, HEADER true);\",s=this.endpointServerURL+\"?api_key=\"+this.apiKey+\"&q=\"+o,u={method:\"POST\",body:new Blob([e])},a=n.event?n.event.getHeaders():[];return this.addHeadersTo(u,a),new Promise((function(e,t){i._scheduleRequest(e,t,s,u)}))},t}(u),p=function(e){function t(t,r){void 0===r&&(r={});var n=t.serverURL+\"api/v2/sql/copyto\";return e.call(this,t,n,r)||this}return r(t,e),t.prototype.copyUrl=function(e,t,r){void 0===t&&(t=\"carto_copyto.csv\"),void 0===r&&(r=\"FORMAT csv, HEADER true\");var n=\"COPY (\"+e+\") TO stdout WITH(\"+r+\")\";return this.endpointServerURL+\"?api_key=\"+this.apiKey+\"&q=\"+n+\"&filename=\"+t},t.prototype.copy=function(e,t,r){var n=this,i=this.copyUrl(e,t,r);return new Promise((function(e,t){n._scheduleRequest(e,t,i)}))},t}(u),h={string:\"text\",integer:\"numeric\",geojson:\"json\"},l=function(){function e(){}return e.drop=function(e,t){return t&&t.ifExists?\"DROP TABLE IF EXISTS \"+e+\";\":\"DROP TABLE \"+e+\";\"},e.create=function(e,t,r){var n=\"CREATE TABLE \"+e+\" ({rows});\";r&&r.ifNotExists&&(n=\"CREATE TABLE IF NOT EXISTS \"+e+\" ({rows});\");var i=t.map((function(e){if(\"string\"==typeof e)return e;var t;e.type=(t=e.type,h[t]||t);var r='\"'+e.name+'\" '+e.type;return e.extra?r+\" \"+e.extra:r})).join(\", \");return n.replace(/{rows}/,i)},e}();var f=function(e){function t(t,r){void 0===r&&(r={});var n=t.serverURL+\"api/v2/sql\";return e.call(this,t,n,r)||this}return r(t,e),t.prototype.query=function(e,t){void 0===t&&(t={});var r=[[\"api_key\",this.apiKey],[\"q\",e]];t.extraParams&&r.push.apply(r,t.extraParams);var n=t.event?t.event.getHeaders():[];return e.length<1024?this.prepareGetRequest(r,n):this.preparePostRequest(r,n)},t.prototype.prepareGetRequest=function(e,t){var r=this;void 0===t&&(t=[]);var n=encodeURI(e.map((function(e){return e[0]+\"=\"+e[1]})).join(\"&\")),i={method:\"GET\"};return this.addHeadersTo(i,t),new Promise((function(e,t){r._scheduleRequest(e,t,r.endpointServerURL+\"?\"+n,i)}))},t.prototype.preparePostRequest=function(e,t){var r=this;void 0===t&&(t=[]);var n=new FormData;e.forEach((function(e){return n.set(e[0],e[1])}));var i={method:\"POST\",body:n};return this.addHeadersTo(i,t),new Promise((function(e,t){r._scheduleRequest(e,t,\"\"+r.endpointServerURL,i)}))},t}(u),d=function(){function t(t,r){var n=(void 0===r?{}:r).maxApiRequestsRetries;this._credentials=t,this._copyToManager=new p(this._credentials,{maxApiRequestsRetries:n}),this._queryManager=new f(this._credentials,{maxApiRequestsRetries:n}),this._copyFromManager=new c(this._credentials,{maxApiRequestsRetries:n});var i=new e(t.username,e.DEFAULT_PUBLIC_API_KEY,t.serverUrlTemplate);this._publicQueryManager=new f(i,{maxApiRequestsRetries:n})}return Object.defineProperty(t,\"DDL\",{get:function(){return l},enumerable:!0,configurable:!0}),t.prototype.copyFrom=function(e,t,r,n){return void 0===n&&(n={}),this._copyFromManager.copy(e,t,r,n)},t.prototype.exportURL=function(e){return this._copyToManager.copyUrl(e)},t.prototype.query=function(e,t){void 0===t&&(t={});var r=e.replace(/\\s+/g,\" \").trim();return this._queryManager.query(r,t)},t.prototype.truncate=function(e){return this._queryManager.query(\"TRUNCATE \"+e+\";\")},t.prototype.create=function(e,t,r){void 0===r&&(r={});var n=l.create(e,t,r.createOptions);return this._queryManager.query(n,{event:r.event})},t.prototype.drop=function(e,t){void 0===t&&(t={});var r=l.drop(e,t.dropOptions);return this._queryManager.query(r,{event:t.event})},t.prototype.grantPublicRead=function(e,t){return void 0===t&&(t={}),n(this,void 0,void 0,(function(){var r,n;return i(this,(function(i){switch(i.label){case 0:return(n=this._publicRole)?[3,2]:[4,this.getRole(t)];case 1:n=i.sent(),i.label=2;case 2:return r=n,[2,this.grantReadToRole(e,r,t)]}}))}))},t.prototype.grantReadToRole=function(e,t,r){void 0===t&&(t=\"publicuser\"),void 0===r&&(r={});var n=\"GRANT SELECT on \"+e+' TO \"'+t+'\"';return this.query(n,r)},t.prototype.transaction=function(e){var t=\"\\n      BEGIN;\\n        \"+e.join(\"\\n\")+\"\\n      COMMIT;\\n    \";return this._queryManager.query(t)},t.prototype.setApiKey=function(e){this._credentials.apiKey=e,this._queryManager.apiKey=e,this._copyToManager.apiKey=e,this._copyFromManager.apiKey=e},t.prototype.getRole=function(e){var t=this;return void 0===e&&(e={}),this._publicQueryManager.query(\"SELECT current_user as rolename\",e).then((function(e){if(e.error)throw new Error(e.error);if(0===e.rows.length)throw new Error(\"Cannot grant: got no current_user data\");var r=e.rows[0].rolename;return t._publicRole=r,r}))},t}();export{s as Constants,d as SQL};\n//# sourceMappingURL=sql.esm.js.map\n","import{MetricsEvent as t,Credentials as e}from\"@carto/toolkit-core\";import{Constants as i,SQL as s}from\"@carto/toolkit-sql\";\n/*! *****************************************************************************\nCopyright (c) Microsoft Corporation. All rights reserved.\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\nthis file except in compliance with the License. You may obtain a copy of the\nLicense at http://www.apache.org/licenses/LICENSE-2.0\n\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\nMERCHANTABLITY OR NON-INFRINGEMENT.\n\nSee the Apache Version 2.0 License for specific language governing permissions\nand limitations under the License.\n***************************************************************************** */function a(t,e,i,s){return new(i||(i=Promise))((function(a,n){function r(t){try{l(s.next(t))}catch(t){n(t)}}function o(t){try{l(s.throw(t))}catch(t){n(t)}}function l(t){t.done?a(t.value):new i((function(e){e(t.value)})).then(r,o)}l((s=s.apply(t,e||[])).next())}))}class n extends class{constructor(t,e){this.errorCode=t,this.message=e}}{constructor(t){super(\"DUPLICATED_DATASETS\",\"Some datasets are duplicated\"),this.datasets=t}}function r(t){return{id:t.id,name:t.name,description:t.description,thumbnail:t.thumbnail,isprivate:t.isprivate,config:t.config,lastmodified:t.lastmodified}}function o(t,e,i,s={}){return a(this,void 0,void 0,(function*(){const a={extraParams:[[\"format\",\"csv\"]],event:s.event},n=yield i.query(`SELECT * FROM ${e}`,a);if(\"string\"!=typeof n)throw new Error(n.error);return{name:t,file:n}}))}function l(t,e,i,s={}){return a(this,void 0,void 0,(function*(){const n=yield i.query(`SELECT * FROM ${t.vis} WHERE id = '${e}'`,s);if(n.error)throw new Error(n.error);if(0===n.rows.length)return null;const l=r(n.rows[0]),d=yield function(t,e,i,s={}){return a(this,void 0,void 0,(function*(){const a=yield i.query(`\\n    WITH datasets AS (SELECT dataset FROM ${t.visToDatasets} WHERE vis = '${e}')\\n    SELECT t.id, t.name, t.tablename FROM ${t.datasets} t, datasets u\\n    WHERE t.id = u.dataset\\n  `,s);if(a.error)throw new Error(a.error);return a.rows}))}(t,e,i,s);return 0===d.length?{vis:l,datasets:[]}:{vis:l,datasets:yield Promise.all(d.map(t=>o(t.name,t.tablename,i,s)))}}))}function d(t,e,i){return`${t}_${e?\"public\":\"private\"}_v${i}`}function u(t){return`${t}_datasets`}function h(t){return`${t}_datasets_vis`}class c{constructor(t,e,i,s){this._isReady=!1,this._namespace=t,this._tableName=d(t,s,i),this._datasetsTableName=u(this._tableName),this._datasetsVisTableName=h(this._tableName),this._isPublic=s,this.VIS_FIELDS={id:{name:\"id\",type:\"uuid\",extra:`PRIMARY KEY DEFAULT ${this._namespace}_create_uuid()`,omitOnInsert:!0},name:{name:\"name\",type:\"text\",extra:\"NOT NULL\",format:this.escapeOrNull},description:{name:\"description\",type:\"text\",format:this.escapeOrNull},thumbnail:{name:\"thumbnail\",type:\"text\",format:this.escapeOrNull},isprivate:{name:\"isprivate\",type:\"boolean\",format:t=>void 0!==t&&t},config:{name:\"config\",type:\"json\",format:this.escapeOrNull},lastmodified:{name:\"lastmodified\",type:\"timestamp\",extra:\"NOT NULL DEFAULT now()\",omitOnInsert:!0}},this.DATASET_COLUMNS=[`\"id\" uuid PRIMARY KEY DEFAULT ${this._namespace}_create_uuid()`,'\"tablename\" text UNIQUE NOT NULL','\"name\" text UNIQUE NOT NULL'],this.DATASET_VIS_COLUMNS=['\"vis\" uuid NOT NULL','\"dataset\" uuid NOT NULL'],this.FIELD_NAMES=Object.values(this.VIS_FIELDS).map(t=>t.name),this.FIELD_NAMES_INSERT=Object.values(this.VIS_FIELDS).filter(t=>!t.omitOnInsert).map(t=>t.name),this._sql=e}init(t={}){return a(this,void 0,void 0,(function*(){const e=yield this._checkMissingTables();return e&&(yield this._initTables({event:t.event})),this._isReady=!0,e}))}isInitialized(){return a(this,void 0,void 0,(function*(){const t=yield this._checkMissingTables();return this._isReady=!t,this._isReady}))}getVisualizations(t={}){return this._sql.query(`\\n      SELECT ${this.FIELD_NAMES.filter(t=>\"config\"!==t).map(t=>`\"${t}\"`).join(\", \")}\\n      FROM ${this._tableName}\\n      `,t).then(t=>{if(t.error)throw new Error(t.error);return 0===t.rows.length?[]:t.rows.map(r)})}getVisualization(t,e={}){return a(this,void 0,void 0,(function*(){return l({vis:this._tableName,datasets:this._datasetsTableName,visToDatasets:this._datasetsVisTableName},t,this._sql,e)}))}getDatasetData(t,e){return a(this,void 0,void 0,(function*(){return o(t,e,this._sql)}))}getDataset(t,e={}){return a(this,void 0,void 0,(function*(){const i=yield this._sql.query(`\\n      SELECT * FROM ${this._datasetsTableName} WHERE \"name\"='${t}'\\n    `,e);if(i.error)throw new Error(`Failed to get dataset ${t}`);return i.rows[0]||null}))}getDatasets(){return a(this,void 0,void 0,(function*(){const t=yield this._sql.query(`\\n      SELECT * FROM ${this._datasetsTableName}\\n    `);if(t.error)throw new Error(\"Failed to read datasets\");return t.rows}))}getVisForDataset(t){return a(this,void 0,void 0,(function*(){const e=yield this._sql.query(`\\n      WITH dataset_vis as (SELECT * FROM ${this._datasetsVisTableName} WHERE \"dataset\" = '${t}')\\n\\n      SELECT t.\"name\", t.\"id\", t.\"thumbnail\", t.\"isprivate\"\\n      FROM ${this._tableName} t, dataset_vis u WHERE t.\"id\" = u.\"vis\"\\n    `);if(e.error)throw new Error(\"Failed to read visualizations\");return e.rows.map(r)}))}deleteVisualization(t,e={}){return a(this,void 0,void 0,(function*(){yield this._sql.query(`DELETE FROM ${this._datasetsVisTableName} WHERE \"vis\"='${t}'`,e),yield this._sql.query(`DELETE FROM ${this._tableName} WHERE \"id\"='${t}'`,e),yield this.deleteOrphanDatasets(e)}))}deleteDataset(){return a(this,void 0,void 0,(function*(){throw new Error(\"deleteDataset Not implemented yet\")}))}createVisualization(t,e,i={}){return a(this,void 0,void 0,(function*(){yield this.preventAccidentalDatasetsOverwrite(i.overwriteDatasets,e);const s=yield this.insertVisTable(t,{event:i.event});return null===s?null:(yield this.uploadAndLinkDatasetsTo(s.id,e,t.isprivate,i),Object.assign(Object.assign({},s),t))}))}uploadDataset(t,e={overwrite:!1}){return a(this,void 0,void 0,(function*(){const i=`${this._tableName}_${t.name}`;if(!t.columns)throw new Error(\"Need dataset column information\");const s=yield this.getDataset(t.name,{event:e.event});e.overwrite&&null!==s&&(yield this._sql.query(`DROP TABLE IF EXISTS ${i}`,{event:e.event}));const a={createOptions:{ifNotExists:!1},event:e.event},n=yield this._sql.create(i,t.columns,a);if(n.error)throw new Error(`Failed to create table for dataset ${t.name}: ${n.error}`);let r;try{const s=t.columns.map(t=>\"string\"==typeof t?`\"${t}\"`:`\"${t.name}\"`);r=yield this._sql.copyFrom(t.file,i,s,{event:e.event})}catch(t){throw new Error(`Failed to copy to ${i}: ${t.message}`)}if(r.error)throw new Error(`Failed to copy to ${i}: ${r.error}`);if(null===s){const s=yield this._sql.query(`\\n        INSERT INTO ${this._datasetsTableName} (\"id\", \"name\", \"tablename\")\\n        VALUES (${this._namespace}_create_uuid(), '${t.name}', '${i}')\\n        RETURNING *\\n      `,{event:e.event});if(s.error)throw new Error(`Failed to register dataset ${i} ${s.error}`);return s.rows[0]}return s}))}shareDataset(t,e={}){return this._sql.grantPublicRead(t,e)}updateVisualization(t,e,i={}){return a(this,void 0,void 0,(function*(){const s=yield this.updateVisTable(t,i);return null===s?null:(yield this.cleanVisAndDatasetLinks(s.id,i),yield this.uploadAndLinkDatasetsTo(s.id,e,t.isprivate,{overwriteDatasets:!0,event:i.event}),yield this.deleteOrphanDatasets(i),Object.assign(Object.assign({},t),s))}))}get isReady(){return this._isReady}setApiKey(t){this._sql.setApiKey(t)}destroy(){return a(this,void 0,void 0,(function*(){const t=(yield this.getDatasets()).map(t=>t.name);return this._sql.query(`\\n      BEGIN;\\n        ${t.map(t=>`DROP TABLE IF EXISTS ${t};`).join(\"\\n\")}\\n        DROP TABLE IF EXISTS ${this._tableName} CASCADE;\\n        DROP TABLE IF EXISTS ${this._datasetsTableName} CASCADE;\\n        DROP TABLE IF EXISTS ${this._datasetsVisTableName} CASCADE;\\n      COMMIT;\\n    `)}))}checkIfDatasetExists(t){return a(this,void 0,void 0,(function*(){const e=\"string\"==typeof t?t:t.name,i=yield this._sql.query(`SELECT * FROM ${this._datasetsTableName} WHERE \"name\" = '${e}'`);if(i.error)throw new Error(i.error);return 0===i.rows.length?null:i.rows[0]}))}preventAccidentalDatasetsOverwrite(t=!1,e){return a(this,void 0,void 0,(function*(){const i=e.filter(t=>\"string\"!=typeof t),s=yield this.checkExistingDataset(i);if(!t&&s.length>0)throw new n(s.map(t=>t.name))}))}deleteOrphanDatasets(t={}){return a(this,void 0,void 0,(function*(){const e=yield this._sql.query(`\\n      SELECT * FROM ${this._datasetsTableName} WHERE \"id\" NOT IN (SELECT distinct(\"dataset\") FROM ${this._datasetsVisTableName})\\n    `,t),i={dropOptions:{ifExists:!0},event:t.event},s=e.rows.map(t=>{this._sql.drop(t.tablename,i)});yield Promise.all(s),yield this._sql.query(`DELETE FROM ${this._datasetsTableName} WHERE \"id\" NOT IN (SELECT distinct(\"dataset\") FROM ${this._datasetsVisTableName})`,t)}))}insertVisTable(t,e={}){return a(this,void 0,void 0,(function*(){const i=`INSERT INTO ${this._tableName}\\n     (${this.FIELD_NAMES_INSERT.map(t=>`\"${t}\"`).join(\", \")})\\n     VALUES\\n     (\\n       ${this.FIELD_NAMES_INSERT.map(e=>{const i=this.VIS_FIELDS[e],s=t[e],a=i&&i.format?i.format(s):s;return null===a?\"null\":a}).join()}\\n     )\\n     RETURNING \"id\", \"lastmodified\"\\n   `,s=yield this._sql.query(i,e);if(s.error)throw new Error(s.error);const a=s.rows[0];return{id:a.id,lastmodified:a.lastmodified}}))}updateVisTable(t,e={}){return a(this,void 0,void 0,(function*(){const i=`UPDATE ${this._tableName}\\n      SET\\n        ${this.FIELD_NAMES_INSERT.map(e=>{const i=this.VIS_FIELDS[e],s=t[e],a=i&&i.format?i.format(s):s;return`\"${e}\" = ${null===a?\"null\":a}`}).join()}\\n        ,${this.VIS_FIELDS.lastmodified.name}=NOW()\\n      WHERE ${this.VIS_FIELDS.id.name} = '${t.id}'\\n      RETURNING \"${this.VIS_FIELDS.id.name}\", \"${this.VIS_FIELDS.lastmodified.name}\"\\n    `,s=yield this._sql.query(i,e);if(s.error)throw new Error(s.error);return{id:t.id,lastmodified:s.rows.length?s.rows[0].lastmodified:t.lastmodified}}))}uploadAndLinkDatasetsTo(t,e,i,s={}){return a(this,void 0,void 0,(function*(){for(const a of e){let e;if(\"string\"==typeof a){const i=yield this.getDataset(a);if(null===i)continue;e=i.tablename,yield this.linkVisAndDataset(t,i.id,{event:s.event})}else{const i=yield this.uploadDataset(a,{overwrite:s.overwriteDatasets||!1,event:s.event});e=i.tablename,yield this.linkVisAndDataset(t,i.id,{event:s.event})}i||(yield this.shareDataset(e,{event:s.event}))}}))}checkExistingDataset(t){return a(this,void 0,void 0,(function*(){return(yield Promise.all(t.map(t=>this.checkIfDatasetExists(t)))).filter(t=>null!==t)}))}escapeOrNull(t){return null===t?null:`E'${t=t.replace(/\\'/gi,\"\\\\'\")}'`}cleanVisAndDatasetLinks(t,e={}){return a(this,void 0,void 0,(function*(){if((yield this._sql.query(`\\n      DELETE FROM ${this._datasetsVisTableName}\\n      WHERE vis='${t}'\\n    `,e)).error)throw new Error(`Failed to clean vis-dataset links for visualization '${t}'`)}))}linkVisAndDataset(t,e,i={}){return a(this,void 0,void 0,(function*(){const s=`\\n      INSERT INTO ${this._datasetsVisTableName} (\"vis\", \"dataset\")\\n      VALUES ('${t}', '${e}')\\n    `;if((yield this._sql.query(s,i)).error)throw new Error(\"Failed to link dataset id to vis id\")}))}_checkMissingTables(){return new Promise((t,e)=>a(this,void 0,void 0,(function*(){try{const e=[this._tableName,this._datasetsTableName,this._datasetsVisTableName].map(t=>this._sql.query(`SELECT to_regclass('${t}')`)),i=(yield Promise.all(e)).some(t=>null===t.rows[0].to_regclass);t(i)}catch(t){e(t)}})))}_initTables(t={}){return a(this,void 0,void 0,(function*(){const e=[...Object.values(this.VIS_FIELDS)],i={createConfig:{ifNotExists:!0},event:t.event};yield this._sql.create(this._tableName,e,i),yield this._sql.create(this._datasetsTableName,this.DATASET_COLUMNS,i),yield this._sql.create(this._datasetsVisTableName,this.DATASET_VIS_COLUMNS,i),this._isPublic&&(yield this._sql.grantPublicRead(this._tableName,t),yield this._sql.grantPublicRead(this._datasetsTableName,t),yield this._sql.grantPublicRead(this._datasetsVisTableName,t))}))}}class _{constructor(t,e,a={}){const n=Object.assign({client:\"keplergl\",maxApiRequestsRetries:i.DEFAULT_MAX_API_REQUESTS_RETRIES},a);this.client=n.client,this._sqlClient=new s(e,{maxApiRequestsRetries:n.maxApiRequestsRetries}),this._checkNamespace(t),this._namespace=t,this._publicSQLStorage=new c(this._namespace,this._sqlClient,this.getVersion(),!0),this._privateSQLStorage=new c(this._namespace,this._sqlClient,this.getVersion(),!1)}init(){return a(this,void 0,void 0,(function*(){if(yield this.isInitialized())return!0;yield this._sqlClient.query(`\\n      BEGIN;\\n        CREATE OR REPLACE FUNCTION ${this._namespace}_create_uuid()\\n        RETURNS UUID AS\\n        $$\\n        DECLARE\\n          _output UUID;\\n        BEGIN\\n          SELECT uuid_in(md5(random()::text || clock_timestamp()::text)::cstring) INTO _output;\\n          RETURN _output;\\n        END\\n        $$ LANGUAGE plpgsql PARALLEL SAFE;\\n      COMMIT;\\n    `);const e=new t(this.client,\"custom_storage_init\"),i=yield Promise.all([this._publicSQLStorage.init({event:e}),this._privateSQLStorage.init({event:e})]);return i[0]||i[1]}))}getVisualizations(){this._checkReady();const e=new t(this.client,\"custom_storage_visualization_list_load\");return Promise.all([this._privateSQLStorage.getVisualizations({event:e}),this._publicSQLStorage.getVisualizations({event:e})]).then(t=>[...t[0],...t[1]])}getPublicVisualizations(){this._checkReady();const e=new t(this.client,\"custom_storage_public_visualizations_load\");return this._publicSQLStorage.getVisualizations({event:e})}getPrivateVisualizations(){this._checkReady();const e=new t(this.client,\"custom_storage_private_visualizations_load\");return this._privateSQLStorage.getVisualizations({event:e})}getVisualization(e){this._checkReady();const i=new t(this.client,\"custom_storage_visualization_load\");return Promise.all([this._publicSQLStorage.getVisualization(e,{event:i}),this._privateSQLStorage.getVisualization(e,{event:i})]).then(t=>t[0]||t[1])}deleteVisualization(e){this._checkReady();const i=new t(this.client,\"custom_storage_visualization_delete\");return Promise.all([this._publicSQLStorage.deleteVisualization(e,{event:i}),this._privateSQLStorage.deleteVisualization(e,{event:i})]).then(()=>!0).catch(()=>!1)}createVisualization(e,i,s){this._checkReady();const a=e.isprivate?this._privateSQLStorage:this._publicSQLStorage,n=e.isprivate?\"custom_storage_private_visualization_create\":\"custom_storage_public_visualization_create\",r=new t(this.client,n);return a.createVisualization(e,i,{overwriteDatasets:s,event:r})}updateVisualization(e,i){this._checkReady();const s=e.isprivate?this._privateSQLStorage:this._publicSQLStorage,a=new t(this.client,\"custom_storage_visualization_update\");return s.updateVisualization(e,i,{event:a})}getDatasets(){return Promise.all([this._publicSQLStorage.getDatasets(),this._privateSQLStorage.getDatasets()]).then(t=>[...t[0],...t[1]])}getVisForDataset(t){return Promise.all([this._publicSQLStorage.getVisForDataset(t),this._privateSQLStorage.getVisForDataset(t)]).then(t=>[...t[0],...t[1]])}uploadPublicDataset(t,e=!1){return this._uploadDataset(t,this._publicSQLStorage,!0,e)}uploadPrivateDataset(t,e=!1){return this._uploadDataset(t,this._privateSQLStorage,!1,e)}getVersion(){return _.version}migrate(){return Promise.resolve()}getSQLClient(){return this._sqlClient}setApiKey(t){this._sqlClient.setApiKey(t),this._privateSQLStorage.setApiKey(t),this._publicSQLStorage.setApiKey(t)}destroy(){return a(this,void 0,void 0,(function*(){yield this._sqlClient.query(`DROP FUNCTION ${this._namespace}_create_uuid CASCADE;`),yield this._privateSQLStorage.destroy(),yield this._publicSQLStorage.destroy()}))}isInitialized(){return a(this,void 0,void 0,(function*(){const t=yield Promise.all([this._publicSQLStorage.isInitialized(),this._privateSQLStorage.isInitialized()]);return t[0]||t[1]}))}_checkNamespace(t){if(t.split(\" \").length>1)throw new Error(\"Namespace for custom-storage must be 1 word\")}_checkReady(){if(!this._privateSQLStorage.isReady||!this._publicSQLStorage.isReady)throw new Error(\".init has not finished\")}_uploadDataset(t,e,i,s){return a(this,void 0,void 0,(function*(){const a=yield e.uploadDataset(t,{overwrite:s});return i&&(yield e.shareDataset(a.tablename)),a}))}}_.version=0;class m extends class{constructor(t,i=e.DEFAULT_SERVER_URL_TEMPLATE,s={}){this._client=s.client?s.client:\"keplergl\",this._clientMap={},this._serverUrlTemplate=i,this._tableName=d(t,!0,_.version),this._datasetTableName=u(this._tableName),this._datasetsVisTableName=h(this._tableName)}getVisualization(i,a){if(void 0===this._clientMap[i]){const t=new e(i,e.DEFAULT_PUBLIC_API_KEY,this._serverUrlTemplate);this._clientMap[i]=new s(t)}const n={vis:this._tableName,datasets:this._datasetTableName,visToDatasets:this._datasetsVisTableName},r=new t(this._client,\"public_sql_reader_visualization_load\");return l(n,a,this._clientMap[i],{event:r})}}{}export{_ as CustomStorage,m as PublicStorageReader};\n//# sourceMappingURL=custom-storage.esm.js.map\n","import { Credentials } from '@carto/toolkit-core';\nimport { CustomStorage, PublicStorageReader } from '@carto/toolkit-custom-storage';\nimport { Constants, SQL } from '@carto/toolkit-sql';\n\nconst DEFAULT_NAMESPACE = 'toolkit';\n\nexport interface AppOptions {\n  namespace: string;\n  serverUrlTemplate: string;\n  maxApiRequestsRetries: number;\n}\n\nexport const DEFAULT_OPTIONS = {\n  namespace: DEFAULT_NAMESPACE,\n  serverUrlTemplate: Credentials.DEFAULT_SERVER_URL_TEMPLATE,\n  maxApiRequestsRetries: Constants.DEFAULT_MAX_API_REQUESTS_RETRIES\n};\n\nexport interface AuthRequiredProps {\n  SQL: SQL;\n  CustomStorage: CustomStorage;\n}\n\nclass App {\n  protected _customStorage: CustomStorage | null = null;\n  protected _sql: SQL | null = null;\n  private _serverUrlTemplate: string = Credentials.DEFAULT_SERVER_URL_TEMPLATE;\n  private _namespace: string;\n  private _apiKey: string | null = null;\n  private _username: string | null = null;\n  private _maxApiRequestsRetries: number = Constants.DEFAULT_MAX_API_REQUESTS_RETRIES;\n  private _publicStorageReader: PublicStorageReader;\n  private _initPromise: Promise<AuthRequiredProps> | null = null;\n\n  constructor(options: AppOptions = DEFAULT_OPTIONS) {\n    const completeOptions = {\n      ...DEFAULT_OPTIONS,\n      ...options\n    };\n\n    const { namespace, serverUrlTemplate, maxApiRequestsRetries } = completeOptions;\n\n    this._namespace = namespace;\n    this._serverUrlTemplate = serverUrlTemplate;\n    this._maxApiRequestsRetries = maxApiRequestsRetries;\n\n    this._publicStorageReader = new PublicStorageReader(namespace, serverUrlTemplate);\n  }\n\n  /**\n   * Async function that sets the credentials and creates the internal parts.\n   *\n   * @param apiKey The apiKey for your user\n   * @param username The username for your API key\n   */\n  public async setCredentials(apiKey: string, username: string) {\n    if (this._customStorage && this._sql) {\n      return {\n        SQL: this._sql,\n        CustomStorage: this._customStorage\n      };\n    }\n\n    this._apiKey = apiKey;\n    this._username = username;\n\n    const credentials = new Credentials(this._username, this._apiKey, this._serverUrlTemplate);\n    this._customStorage = new CustomStorage(\n      this._namespace,\n      credentials,\n      { maxApiRequestsRetries: this._maxApiRequestsRetries }\n    );\n    this._sql = this._customStorage.getSQLClient();\n\n    this._initPromise = this._customStorage.init()\n      .then(() => {\n        if (this._sql === null || this._customStorage === null) {\n          throw new Error('Something went wrong setting the credentials');\n        }\n\n        return {\n          SQL: this._sql,\n          CustomStorage: this._customStorage\n        };\n      })\n      .catch(() => {\n        throw new Error('Something went wrong initializing custom storage');\n      });\n\n    return this._initPromise;\n  }\n\n  public getCustomStorage(): Promise<CustomStorage> {\n    if (this._initPromise === null) {\n      throw new Error('No auth has been set yet');\n    }\n\n    return this._initPromise.then(({ CustomStorage: cs }) => cs);\n  }\n\n  public getSQL(): Promise<SQL> {\n    if (this._initPromise === null) {\n      throw new Error('No auth has been set yet');\n    }\n\n    return this._initPromise.then(({ SQL: sql }) => sql);\n  }\n\n  protected setApiKey(apiKey: string) {\n    if (this._sql === null || this._customStorage === null) {\n      throw new Error('Cannot update api key if auth not set yet.');\n    }\n\n    this._apiKey = apiKey;\n    this._sql.setApiKey(apiKey);\n    this._customStorage.setApiKey(apiKey);\n\n    return this._initPromise;\n  }\n\n  public get PublicStorageReader(): PublicStorageReader {\n    return this._publicStorageReader;\n  }\n\n  public get username(): string | null {\n    return this._username;\n  }\n\n  public get serverUrlTemplate(): string {\n    return this._serverUrlTemplate;\n  }\n\n  public get namespace(): string {\n    return this._namespace;\n  }\n\n  public get apiKey(): string | null {\n    return this._apiKey;\n  }\n\n}\n\nexport default App;\n","import { OAuth } from '@carto/toolkit-auth';\nimport { AuthParameters } from '@carto/toolkit-auth/dist/types/AuthParameters';\nimport App, { AppOptions, AuthRequiredProps, DEFAULT_OPTIONS } from './App';\n\nexport default class OAuthApp extends App {\n  private _oauth: OAuth | null = null;\n  private _oauthOptions: AuthParameters;\n\n  constructor(oauthOptions: AuthParameters, options: AppOptions = DEFAULT_OPTIONS) {\n    super(options);\n    this._oauthOptions = oauthOptions;\n\n    if (oauthOptions.clientID) {\n      this.initOauth(oauthOptions);\n    }\n  }\n\n  /**\n   * This function will start the OAuth flow, and will inherently call setCredentials.\n   */\n  public async login() {\n    const oauth = this.oauth;\n\n    let token = oauth.token;\n\n    if (oauth.expired) {\n      try {\n        await oauth.login();\n      } catch (e) {\n        throw new Error(`Failed to login (${e.error}): ${e.message}`);\n      }\n\n      token = oauth.token;\n    }\n\n    if (token === null) {\n      throw new Error(`Failed to login, token is null`);\n    }\n\n    return new Promise((resolve, reject) => {\n      this.postLogin(oauth, token!)\n        .then((credentialsPromise) => {resolve(credentialsPromise); })\n        .catch((error) => {reject(error); });\n    });\n  }\n\n  public get oauth(): OAuth {\n    if (this._oauth === null) {\n      throw new Error('No client ID has been specified');\n    }\n\n    return this._oauth;\n  }\n\n  public setClientID(clientID: string) {\n    if (this._oauth) {\n      throw new Error('Cannot set the client ID more than once');\n    }\n\n    if (clientID === undefined) {\n      return;\n    }\n\n    this.initOauth({\n      clientID,\n      ...this._oauthOptions\n    });\n  }\n\n  private initOauth(params: AuthParameters) {\n    this._oauth = new OAuth(params);\n  }\n\n  private async postLogin(oauth: OAuth, token: string): Promise<AuthRequiredProps> {\n    const userInfo = oauth.userInfo;\n\n    if (userInfo === null) {\n      throw new Error(`Failed to get user info`);\n    }\n    let username = null;\n    try {\n      const info = await userInfo.info;\n      username = info.username;\n      this.setupEvents(oauth);\n    } catch (error) {\n      throw new Error(`Failed to get user info: ${error.message}`);\n    }\n\n    return this.setCredentials(token, username);\n  }\n\n  private setupEvents(oauth: OAuth) {\n    oauth.on('tokenUpdated', () => {\n      if (oauth.token === null) {\n        throw new Error('Got a null token after refreshing it');\n      }\n\n      this.setApiKey(oauth.token);\n    });\n  }\n}\n"],"names":["e","[object Object]","r","t","Error","this","_username","_apiKey","_serverUrlTemplate","DEFAULT_SERVER_URL_TEMPLATE","DEFAULT_PUBLIC_API_KEY","username","apiKey","serverUrlTemplate","serverURL","replace","endsWith","s","Math","random","toString","source","name","groupId","n","i","o","a","c","value","done","Promise","resolve","then","arguments","apply","Object","defineProperty","enumerable","configurable","writable","message","code","super","hasSetup","interceptors","real","window","fetch","Request","length","call","setup","push","forEach","l","addEventListener","passive","setTimeout","document","createEvent","initEvent","bubbles","cancelable","detail","DOMException","h","realOpen","XMLHttpRequest","prototype","open","realSend","send","Array","$url","all","catch","dispatchEvent","create","d","freeze","Fetch","XHR","g","isArray","u","Symbol","iterator","next","return","p","TypeError","f","v","m","y","w","origin","concat","location","protocol","host","implementation","createHTMLDocument","createElement","head","appendChild","href","x","find","RegExp","match","indexOf","search","hash","split","k","isObject","defaults","url","redirectUrl","visible","setAttribute","assign","style","border","bottom","height","left","position","right","top","width","zIndex","opacity","transition","display","src","body","setInterval","contentWindow","parse","parentElement","removeChild","clearInterval","isCrossDomainError","clearTimeout","b","raw","expiration","includes","Number","type","expired","Date","now","_","user","exp","JSON","atob","T","level","toLevel","log","enabled","console","levels","trace","info","warn","error","$","Interceptors","AccessToken","IDToken","Common","Events","URL","Logger","E","config","filter","join","storage","getItem","key","clear","setItem","removeItem","localStorage","sessionStorage","U","Map","listeners","has","set","get","splice","A","q","self","crypto","msCrypto","O","getRandomValues","Uint8Array","S","validation","logger","$name","encodeURIComponent","logout","I","sync","required","responseType","accessToken","$login","headers","setRequestHeader","error_description","error_uri","access_token","state","expires_in","token_type","$validate","emit","login","client_id","clientID","response_type","redirect_uri","scope","R","renewal","buffer","idToken","iframe","prompt","validate","id_token","nonce","OAuth2","OpenID","D","navigate","history","pushState","title","j","providers","connected","on","provider","handlers","action","reset","add","endpoints","secure","route","handler","routes","auto","mixin","auth","requestUpdate","default","innerHeight","screenTop","innerWidth","screenLeft","focus","closed","close","_userInfo","userInfo","decodeURIComponent","user_info_url","expiresIn","_params","scopes","redirectURI","encodeURI","map","_url","json","_refreshTimeout","authorization","_emitter","off","evt","slice","_client","_refresher","_carto","_scheduleRefresh","_checkScopes","client","credentials","token","_refresh","refresh","Set","some","exec","setPrototypeOf","__proto__","hasOwnProperty","constructor","throw","label","sent","trys","ops","pop","TOO_MANY_REQUESTS","SERVICE_UNAVAILABLE","QUERY_LIMIT","DEFAULT_MAX_API_REQUESTS_RETRIES","HTTP_ERRORS","maxApiRequestsRetries","_callsLeft","_retryAfter","_retryTimeoutId","_fetching","_scheduleDebounce","_maxApiRequestsRetries","_credentials","_endpointServerURL","_queue","isFinite","_scheduleRequest","reject","requestInfo","requestInit","retries_count","_scheduler","addHeadersTo","Headers","append","min","max","_fetch","_getRateLimitHeader","status","parseInt","text","copy","endpointServerURL","method","Blob","event","getHeaders","copyUrl","string","integer","geojson","drop","ifExists","ifNotExists","extra","query","extraParams","prepareGetRequest","preparePostRequest","FormData","_copyToManager","_queryManager","_copyFromManager","_publicQueryManager","copyFrom","exportURL","trim","truncate","createOptions","dropOptions","grantPublicRead","_publicRole","getRole","grantReadToRole","transaction","setApiKey","rows","rolename","errorCode","datasets","id","description","thumbnail","isprivate","lastmodified","file","vis","visToDatasets","tablename","_isReady","_namespace","_tableName","_datasetsTableName","_datasetsVisTableName","_isPublic","VIS_FIELDS","omitOnInsert","format","escapeOrNull","DATASET_COLUMNS","DATASET_VIS_COLUMNS","FIELD_NAMES","values","FIELD_NAMES_INSERT","_sql","_checkMissingTables","_initTables","deleteOrphanDatasets","preventAccidentalDatasetsOverwrite","overwriteDatasets","insertVisTable","uploadAndLinkDatasetsTo","overwrite","columns","getDataset","updateVisTable","cleanVisAndDatasetLinks","isReady","getDatasets","checkExistingDataset","linkVisAndDataset","uploadDataset","shareDataset","checkIfDatasetExists","to_regclass","createConfig","_sqlClient","_checkNamespace","_publicSQLStorage","getVersion","_privateSQLStorage","isInitialized","init","_checkReady","getVisualizations","getVisualization","deleteVisualization","createVisualization","updateVisualization","getVisForDataset","_uploadDataset","version","destroy","_clientMap","_datasetTableName","DEFAULT_OPTIONS","namespace","Credentials","Constants","options","completeOptions","_publicStorageReader","PublicStorageReader","App","_customStorage","SQL","CustomStorage","getSQLClient","_initPromise","_this","_a","oauthOptions","_super","_oauthOptions","initOauth","__extends","OAuthApp","oauth","e_1","postLogin","credentialsPromise","_oauth","undefined","params","OAuth","setupEvents","error_1","setCredentials"],"mappings":"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"}